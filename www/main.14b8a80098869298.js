var $$=Object.defineProperty,H$=Object.defineProperties,z$=Object.getOwnPropertyDescriptors,l3=Object.getOwnPropertySymbols,G$=Object.prototype.hasOwnProperty,W$=Object.prototype.propertyIsEnumerable,c3=(Ye,ye,N)=>ye in Ye?$$(Ye,ye,{enumerable:!0,configurable:!0,writable:!0,value:N}):Ye[ye]=N,gt=(Ye,ye)=>{for(var N in ye||(ye={}))G$.call(ye,N)&&c3(Ye,N,ye[N]);if(l3)for(var N of l3(ye))W$.call(ye,N)&&c3(Ye,N,ye[N]);return Ye},qi=(Ye,ye)=>H$(Ye,z$(ye));(self.webpackChunkuhall=self.webpackChunkuhall||[]).push([[179],{7905:(Ye,ye,N)=>{"use strict";N.d(ye,{hO:()=>Ve,xv:()=>he,Dh:()=>se,GT:()=>me,cc:()=>Ie,on:()=>H,pX:()=>re});var l=N(3668),Q=N(7892),F=N(7233);Ye=N.hmd(Ye);const ue=["ngOnDestroy"],re=(Y,ce,be,ve={})=>new Proxy(Y,{get:(He,Me)=>be.runOutsideAngular(()=>{var je;if(Y[Me])return(null===(je=null==ve?void 0:ve.spy)||void 0===je?void 0:je.get)&&ve.spy.get(Me,Y[Me]),Y[Me];if(ue.indexOf(Me)>-1)return()=>{};const Qe=ce.toPromise().then(ht=>{const te=ht&&ht[Me];return"function"==typeof te?te.bind(ht):te&&te.then?te.then(fe=>be.run(()=>fe)):be.run(()=>te)});return new Proxy(()=>{},{get:(ht,te)=>Qe[te],apply:(ht,te,fe)=>Qe.then(Ce=>{var Ee;const Re=Ce&&Ce(...fe);return(null===(Ee=null==ve?void 0:ve.spy)||void 0===Ee?void 0:Ee.apply)&&ve.spy.apply(Me,fe,Re),Re})})})}),me=(Y,ce)=>{ce.forEach(be=>{Object.getOwnPropertyNames(be.prototype||be).forEach(ve=>{Object.defineProperty(Y.prototype,ve,Object.getOwnPropertyDescriptor(be.prototype||be,ve))})})};class ae{constructor(ce){return ce}}const se=new l.OlP("angularfire2.app.options"),he=new l.OlP("angularfire2.app.name");function H(Y,ce,be){const He="object"==typeof be&&be||{};He.name=He.name||"string"==typeof be&&be||"[DEFAULT]";const je=Q.Z.apps.filter(Qe=>Qe&&Qe.name===He.name)[0]||ce.runOutsideAngular(()=>Q.Z.initializeApp(Y,He));try{JSON.stringify(Y)!==JSON.stringify(je.options)&&$("error",`${je.name} Firebase App already initialized with different options${Ye.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Qe){}return new ae(je)}const $=(Y,...ce)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[Y](...ce)},ee={provide:ae,useFactory:H,deps:[se,l.R0b,[new l.FiY,he]]};let Ve=(()=>{class Y{constructor(be){Q.Z.registerVersion("angularfire",F.q4.full,"core"),Q.Z.registerVersion("angularfire",F.q4.full,"app-compat"),Q.Z.registerVersion("angular",l.q4F.full,be.toString())}static initializeApp(be,ve){return{ngModule:Y,providers:[{provide:se,useValue:be},{provide:he,useValue:ve}]}}}return Y.\u0275fac=function(be){return new(be||Y)(l.LFG(l.Lbi))},Y.\u0275mod=l.oAB({type:Y}),Y.\u0275inj=l.cJS({providers:[ee]}),Y})();function Ie(Y,ce,be,ve,He){const[,Me,je]=globalThis.\u0275AngularfireInstanceCache.find(Qe=>Qe[0]===Y)||[];if(Me)return function(Y,ce){try{return Y.toString()===ce.toString()}catch(be){return Y===ce}}(He,je)||(le("error",`${ce} was already initialized on the ${be} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),le("warn",{is:He,was:je})),Me;{const Qe=ve();return globalThis.\u0275AngularfireInstanceCache.push([Y,Qe,He]),Qe}}const Le=!!Ye.hot,le=(Y,...ce)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[Y](...ce)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7233:(Ye,ye,N)=>{"use strict";N.d(ye,{q4:()=>Sa,iC:()=>xc,fc:()=>Ol,HU:()=>Ml,vb:()=>Oc,JM:()=>pp,u3:()=>xl});var l=N(3668),Q=N(7713),F=N(8239),ue=N(1572),re=N(4213),me=N(1177),ae=N(3855),se=N(4995);const he="@firebase/installations",H="0.5.5",ee=`w:${H}`,Ve="FIS_v2",ce=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function be(T){return T instanceof re.ZR&&T.code.includes("request-failed")}function ve({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function He(T){return{token:T.token,requestStatus:2,expiresIn:Ce(T.expiresIn),creationTime:Date.now()}}function Me(T,D){return je.apply(this,arguments)}function je(){return(je=(0,F.Z)(function*(T,D){const V=(yield D.json()).error;return ce.create("request-failed",{requestName:T,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Qe({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function ht(T,{refreshToken:D}){const k=Qe(T);return k.append("Authorization",function(T){return`${Ve} ${T}`}(D)),k}function te(T){return fe.apply(this,arguments)}function fe(){return(fe=(0,F.Z)(function*(T){const D=yield T();return D.status>=500&&D.status<600?T():D})).apply(this,arguments)}function Ce(T){return Number(T.replace("s","000"))}function Re(T,D){return ge.apply(this,arguments)}function ge(){return(ge=(0,F.Z)(function*(T,{fid:D}){const k=ve(T),oe={method:"POST",headers:Qe(T),body:JSON.stringify({fid:D,authVersion:Ve,appId:T.appId,sdkVersion:ee})},Oe=yield te(()=>fetch(k,oe));if(Oe.ok){const We=yield Oe.json();return{fid:We.fid||D,registrationStatus:2,refreshToken:We.refreshToken,authToken:He(We.authToken)}}throw yield Me("Create Installation",Oe)})).apply(this,arguments)}function Dt(T){return new Promise(D=>{setTimeout(D,T)})}const Yn=/^[cdef][\w-]{21}$/;function Et(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const k=function(T){return function(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Yn.test(k)?k:""}catch(T){return""}}function pn(T){return`${T.appName}!${T.appId}`}const Ar=new Map;function qr(T,D){const k=pn(T);Fn(k,D),function(T,D){const k=(!Zt&&"BroadcastChannel"in self&&(Zt=new BroadcastChannel("[Firebase] FID Change"),Zt.onmessage=T=>{Fn(T.data.key,T.data.fid)}),Zt);k&&k.postMessage({key:T,fid:D}),0===Ar.size&&Zt&&(Zt.close(),Zt=null)}(k,D)}function Fn(T,D){const k=Ar.get(T);if(k)for(const V of k)V(D)}let Zt=null;const De="firebase-installations-store";let cr=null;function Qn(){return cr||(cr=(0,se.openDb)("firebase-installations-database",1,T=>{0===T.oldVersion&&T.createObjectStore(De)})),cr}function mt(T,D){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,F.Z)(function*(T,D){const k=pn(T),W=(yield Qn()).transaction(De,"readwrite"),oe=W.objectStore(De),Oe=yield oe.get(k);return yield oe.put(D,k),yield W.complete,(!Oe||Oe.fid!==D.fid)&&qr(T,D.fid),D})).apply(this,arguments)}function $i(T){return jr.apply(this,arguments)}function jr(){return(jr=(0,F.Z)(function*(T){const D=pn(T),V=(yield Qn()).transaction(De,"readwrite");yield V.objectStore(De).delete(D),yield V.complete})).apply(this,arguments)}function ct(T,D){return _t.apply(this,arguments)}function _t(){return(_t=(0,F.Z)(function*(T,D){const k=pn(T),W=(yield Qn()).transaction(De,"readwrite"),oe=W.objectStore(De),Oe=yield oe.get(k),We=D(Oe);return void 0===We?yield oe.delete(k):yield oe.put(We,k),yield W.complete,We&&(!Oe||Oe.fid!==We.fid)&&qr(T,We.fid),We})).apply(this,arguments)}function Rt(T){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,F.Z)(function*(T){let D;const k=yield ct(T,V=>{const W=$r(V),oe=en(T,W);return D=oe.registrationPromise,oe.installationEntry});return""===k.fid?{installationEntry:yield D}:{installationEntry:k,registrationPromise:D}})).apply(this,arguments)}function $r(T){return bt(T||{fid:Et(),registrationStatus:0})}function en(T,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(ce.create("app-offline"))};const k={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},V=function(T,D){return ut.apply(this,arguments)}(T,k);return{installationEntry:k,registrationPromise:V}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:gu(T)}:{installationEntry:D}}function ut(){return(ut=(0,F.Z)(function*(T,D){try{return mt(T,yield Re(T,D))}catch(k){throw be(k)&&409===k.customData.serverCode?yield $i(T):yield mt(T,{fid:D.fid,registrationStatus:0}),k}})).apply(this,arguments)}function gu(T){return co.apply(this,arguments)}function co(){return(co=(0,F.Z)(function*(T){let D=yield on(T);for(;1===D.registrationStatus;)yield Dt(100),D=yield on(T);if(0===D.registrationStatus){const{installationEntry:k,registrationPromise:V}=yield Rt(T);return V||k}return D})).apply(this,arguments)}function on(T){return ct(T,D=>{if(!D)throw ce.create("installation-not-found");return bt(D)})}function bt(T){return function(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function mu(T,D){return z.apply(this,arguments)}function z(){return(z=(0,F.Z)(function*({appConfig:T,platformLoggerProvider:D},k){const V=Z(T,k),W=ht(T,k),oe=D.getImmediate({optional:!0});oe&&W.append("x-firebase-client",oe.getPlatformInfoString());const We={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:ee}})},$e=yield te(()=>fetch(V,We));if($e.ok)return He(yield $e.json());throw yield Me("Generate Auth Token",$e)})).apply(this,arguments)}function Z(T,{fid:D}){return`${ve(T)}/${D}/authTokens:generate`}function G(T){return we.apply(this,arguments)}function we(){return(we=(0,F.Z)(function*(T,D=!1){let k;const V=yield ct(T.appConfig,oe=>{if(!Nn(oe))throw ce.create("not-registered");const Oe=oe.authToken;if(!D&&ei(Oe))return oe;if(1===Oe.requestStatus)return k=ne(T,D),oe;{if(!navigator.onLine)throw ce.create("app-offline");const We=_r(oe);return k=an(T,We),We}});return k?yield k:V.authToken})).apply(this,arguments)}function ne(T,D){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,F.Z)(function*(T,D){let k=yield ft(T.appConfig);for(;1===k.authToken.requestStatus;)yield Dt(100),k=yield ft(T.appConfig);const V=k.authToken;return 0===V.requestStatus?G(T,D):V})).apply(this,arguments)}function ft(T){return ct(T,D=>{if(!Nn(D))throw ce.create("not-registered");return function(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function an(T,D){return mr.apply(this,arguments)}function mr(){return(mr=(0,F.Z)(function*(T,D){try{const k=yield mu(T,D),V=Object.assign(Object.assign({},D),{authToken:k});return yield mt(T.appConfig,V),k}catch(k){if(!be(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const V=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield mt(T.appConfig,V)}else yield $i(T.appConfig);throw k}})).apply(this,arguments)}function Nn(T){return void 0!==T&&2===T.registrationStatus}function ei(T){return 2===T.requestStatus&&!function(T){const D=Date.now();return D<T.creationTime||T.creationTime+T.expiresIn<D+36e5}(T)}function _r(T){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:D})}function Ja(){return(Ja=(0,F.Z)(function*(T){const D=T,{installationEntry:k,registrationPromise:V}=yield Rt(D.appConfig);return V?V.catch(console.error):G(D).catch(console.error),k.fid})).apply(this,arguments)}function Oo(){return(Oo=(0,F.Z)(function*(T,D=!1){const k=T;return yield _u(k.appConfig),(yield G(k,D)).token})).apply(this,arguments)}function _u(T){return mn.apply(this,arguments)}function mn(){return(mn=(0,F.Z)(function*(T){const{registrationPromise:D}=yield Rt(T);D&&(yield D)})).apply(this,arguments)}function zi(T){return ce.create("missing-app-config-values",{valueName:T})}const Jn="installations";(0,ue._registerComponent)(new me.wA(Jn,T=>{const D=T.getProvider("app").getImmediate(),k=function(T){if(!T||!T.options)throw zi("App Configuration");if(!T.name)throw zi("App Name");const D=["projectId","apiKey","appId"];for(const k of D)if(!T.options[k])throw zi(k);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(D);return{app:D,appConfig:k,platformLoggerProvider:(0,ue._getProvider)(D,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ue._registerComponent)(new me.wA("installations-internal",T=>{const D=T.getProvider("app").getImmediate(),k=(0,ue._getProvider)(D,Jn).getImmediate();return{getId:()=>function(T){return Ja.apply(this,arguments)}(k),getToken:W=>function(T){return Oo.apply(this,arguments)}(k,W)}},"PRIVATE")),(0,ue.registerVersion)(he,H),(0,ue.registerVersion)(he,H,"esm2017");const yt="@firebase/remote-config",cn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class tp{constructor(D,k,V,W){this.client=D,this.storage=k,this.storageCache=V,this.logger=W}isCachedDataFresh(D,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-k,W=V<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${W}.`),W}fetch(D){var k=this;return(0,F.Z)(function*(){const[V,W]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(W&&k.isCachedDataFresh(D.cacheMaxAgeMillis,V))return W;D.eTag=W&&W.eTag;const oe=yield k.client.fetch(D),Oe=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Oe.push(k.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Oe),oe})()}}function mm(T=navigator){return T.languages&&T.languages[0]||T.language}class Wi{constructor(D,k,V,W,oe,Oe){this.firebaseInstallations=D,this.sdkVersion=k,this.namespace=V,this.projectId=W,this.apiKey=oe,this.appId=Oe}fetch(D){var k=this;return(0,F.Z)(function*(){const[V,W]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Oe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,We={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},$e={sdk_version:k.sdkVersion,app_instance_id:V,app_instance_id_token:W,app_id:k.appId,language_code:mm()},Ot={method:"POST",headers:We,body:JSON.stringify($e)},rn=fetch(Oe,Ot),xr=new Promise((vs,Xi)=>{D.signal.addEventListener(()=>{const Us=new Error("The operation was aborted.");Us.name="AbortError",Xi(Us)})});let rr;try{yield Promise.race([rn,xr]),rr=yield rn}catch(vs){let Xi="fetch-client-network";throw"AbortError"===vs.name&&(Xi="fetch-timeout"),cn.create(Xi,{originalErrorMessage:vs.message})}let yn=rr.status;const Fs=rr.headers.get("ETag")||void 0;let Ls,ys;if(200===rr.status){let vs;try{vs=yield rr.json()}catch(Xi){throw cn.create("fetch-client-parse",{originalErrorMessage:Xi.message})}Ls=vs.entries,ys=vs.state}if("INSTANCE_STATE_UNSPECIFIED"===ys?yn=500:"NO_CHANGE"===ys?yn=304:("NO_TEMPLATE"===ys||"EMPTY_CONFIG"===ys)&&(Ls={}),304!==yn&&200!==yn)throw cn.create("fetch-status",{httpStatus:yn});return{status:yn,eTag:Fs,config:Ls}})()}}class Yd{constructor(D,k){this.client=D,this.storage=k}fetch(D){var k=this;return(0,F.Z)(function*(){const V=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(D,V)})()}attemptFetch(D,{throttleEndTimeMillis:k,backoffCount:V}){var W=this;return(0,F.Z)(function*(){yield function(T,D){return new Promise((k,V)=>{const W=Math.max(D-Date.now(),0),oe=setTimeout(k,W);T.addEventListener(()=>{clearTimeout(oe),V(cn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,k);try{const oe=yield W.client.fetch(D);return yield W.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function(T){if(!(T instanceof re.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}(oe))throw oe;const Oe={throttleEndTimeMillis:Date.now()+(0,re.$s)(V),backoffCount:V+1};return yield W.storage.setThrottleMetadata(Oe),W.attemptFetch(D,Oe)}})()}}class _m{constructor(D,k,V,W,oe){this.app=D,this._client=k,this._storageCache=V,this._storage=W,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function nl(T,D){const k=T.target.error||void 0;return cn.create(D,{originalErrorMessage:k&&k.message})}const ma="app_namespace_store";class ym{constructor(D,k,V,W=function(){return new Promise((T,D)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=V=>{D(nl(V,"storage-open"))},k.onsuccess=V=>{T(V.target.result)},k.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(ma,{keyPath:"compositeKey"})}}catch(k){D(cn.create("storage-open",{originalErrorMessage:k}))}})}()){this.appId=D,this.appName=k,this.namespace=V,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var k=this;return(0,F.Z)(function*(){const V=yield k.openDbPromise;return new Promise((W,oe)=>{const We=V.transaction([ma],"readonly").objectStore(ma),$e=k.createCompositeKey(D);try{const Ot=We.get($e);Ot.onerror=rn=>{oe(nl(rn,"storage-get"))},Ot.onsuccess=rn=>{const xr=rn.target.result;W(xr?xr.value:void 0)}}catch(Ot){oe(cn.create("storage-get",{originalErrorMessage:Ot&&Ot.message}))}})})()}set(D,k){var V=this;return(0,F.Z)(function*(){const W=yield V.openDbPromise;return new Promise((oe,Oe)=>{const $e=W.transaction([ma],"readwrite").objectStore(ma),Ot=V.createCompositeKey(D);try{const rn=$e.put({compositeKey:Ot,value:k});rn.onerror=xr=>{Oe(nl(xr,"storage-set"))},rn.onsuccess=()=>{oe()}}catch(rn){Oe(cn.create("storage-set",{originalErrorMessage:rn&&rn.message}))}})})()}delete(D){var k=this;return(0,F.Z)(function*(){const V=yield k.openDbPromise;return new Promise((W,oe)=>{const We=V.transaction([ma],"readwrite").objectStore(ma),$e=k.createCompositeKey(D);try{const Ot=We.delete($e);Ot.onerror=rn=>{oe(nl(rn,"storage-delete"))},Ot.onsuccess=()=>{W()}}catch(Ot){oe(cn.create("storage-delete",{originalErrorMessage:Ot&&Ot.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Xd{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,F.Z)(function*(){const k=D.storage.getLastFetchStatus(),V=D.storage.getLastSuccessfulFetchTimestampMillis(),W=D.storage.getActiveConfig(),oe=yield k;oe&&(D.lastFetchStatus=oe);const Oe=yield V;Oe&&(D.lastSuccessfulFetchTimestampMillis=Oe);const We=yield W;We&&(D.activeConfig=We)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function rl(){return wu.apply(this,arguments)}function wu(){return(wu=(0,F.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(T){return!1}})).apply(this,arguments)}(0,ue._registerComponent)(new me.wA("remote-config",function(D,{instanceIdentifier:k}){const V=D.getProvider("app").getImmediate(),W=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw cn.create("registration-window");if(!(0,re.hl)())throw cn.create("indexed-db-unavailable");const{projectId:oe,apiKey:Oe,appId:We}=V.options;if(!oe)throw cn.create("registration-project-id");if(!Oe)throw cn.create("registration-api-key");if(!We)throw cn.create("registration-app-id");const $e=new ym(We,V.name,k=k||"firebase"),Ot=new Xd($e),rn=new ae.Yd(yt);rn.logLevel=ae.in.ERROR;const xr=new Wi(W,ue.SDK_VERSION,k,oe,Oe,We),rr=new Yd(xr,$e),yn=new tp(rr,$e,Ot,rn),Fs=new _m(V,yn,Ot,$e,rn);return function(T){const D=(0,re.m9)(T);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Fs),Fs},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(yt,"0.3.4"),(0,ue.registerVersion)(yt,"0.3.4","esm2017");const eh="/firebase-messaging-sw.js",Cm="/firebase-cloud-messaging-push-scope",hs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",po="google.c.a.c_id",_a="google.c.a.c_l",go="google.c.a.ts",bu="google.c.a.e";var vr=(()=>{return(T=vr||(vr={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",vr;var T})();function Ss(T){const D=new Uint8Array(T);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function il(T){const k=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(k),W=new Uint8Array(V.length);for(let oe=0;oe<V.length;++oe)W[oe]=V.charCodeAt(oe);return W}const fc="fcm_token_details_db",nh="fcm_token_object_Store";function Tu(T){return pc.apply(this,arguments)}function pc(){return pc=(0,F.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(fc))return null;let D=null;return(yield(0,se.openDb)(fc,5,function(){var V=(0,F.Z)(function*(W){var oe;if(W.oldVersion<2||!W.objectStoreNames.contains(nh))return;const Oe=W.transaction.objectStore(nh),We=yield Oe.index("fcmSenderId").get(T);if(yield Oe.clear(),We)if(2===W.oldVersion){const $e=We;if(!$e.auth||!$e.p256dh||!$e.endpoint)return;D={token:$e.fcmToken,createTime:null!==(oe=$e.createTime)&&void 0!==oe?oe:Date.now(),subscriptionOptions:{auth:$e.auth,p256dh:$e.p256dh,endpoint:$e.endpoint,swScope:$e.swScope,vapidKey:"string"==typeof $e.vapidKey?$e.vapidKey:Ss($e.vapidKey)}}}else if(3===W.oldVersion){const $e=We;D={token:$e.fcmToken,createTime:$e.createTime,subscriptionOptions:{auth:Ss($e.auth),p256dh:Ss($e.p256dh),endpoint:$e.endpoint,swScope:$e.swScope,vapidKey:Ss($e.vapidKey)}}}else if(4===W.oldVersion){const $e=We;D={token:$e.fcmToken,createTime:$e.createTime,subscriptionOptions:{auth:Ss($e.auth),p256dh:Ss($e.p256dh),endpoint:$e.endpoint,swScope:$e.swScope,vapidKey:Ss($e.vapidKey)}}}});return function(W){return V.apply(this,arguments)}}())).close(),yield(0,se.deleteDb)(fc),yield(0,se.deleteDb)("fcm_vapid_details_db"),yield(0,se.deleteDb)("undefined"),sp(D)?D:null}),pc.apply(this,arguments)}function sp(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:D}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const dn="firebase-messaging-store";let Iu=null;function Ro(){return Iu||(Iu=(0,se.openDb)("firebase-messaging-database",1,T=>{0===T.oldVersion&&T.createObjectStore(dn)})),Iu}function Zn(T){return No.apply(this,arguments)}function No(){return(No=(0,F.Z)(function*(T){const D=Fo(T),V=yield(yield Ro()).transaction(dn).objectStore(dn).get(D);if(V)return V;{const W=yield Tu(T.appConfig.senderId);if(W)return yield zr(T,W),W}})).apply(this,arguments)}function zr(T,D){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,F.Z)(function*(T,D){const k=Fo(T),W=(yield Ro()).transaction(dn,"readwrite");return yield W.objectStore(dn).put(D,k),yield W.complete,D})).apply(this,arguments)}function qn(T){return gc.apply(this,arguments)}function gc(){return(gc=(0,F.Z)(function*(T){const D=Fo(T),V=(yield Ro()).transaction(dn,"readwrite");yield V.objectStore(dn).delete(D),yield V.complete})).apply(this,arguments)}function Fo({appConfig:T}){return T.appId}const ln=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ms(T,D){return ol.apply(this,arguments)}function ol(){return(ol=(0,F.Z)(function*(T,D){const k=yield mc(T),V=ya(D),W={method:"POST",headers:k,body:JSON.stringify(V)};let oe;try{oe=yield(yield fetch(et(T.appConfig),W)).json()}catch(Oe){throw ln.create("token-subscribe-failed",{errorInfo:Oe})}if(oe.error)throw ln.create("token-subscribe-failed",{errorInfo:oe.error.message});if(!oe.token)throw ln.create("token-subscribe-no-token");return oe.token})).apply(this,arguments)}function Uo(T,D){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,F.Z)(function*(T,D){const k=yield mc(T),V=ya(D.subscriptionOptions),W={method:"PATCH",headers:k,body:JSON.stringify(V)};let oe;try{oe=yield(yield fetch(`${et(T.appConfig)}/${D.token}`,W)).json()}catch(Oe){throw ln.create("token-update-failed",{errorInfo:Oe})}if(oe.error)throw ln.create("token-update-failed",{errorInfo:oe.error.message});if(!oe.token)throw ln.create("token-update-no-token");return oe.token})).apply(this,arguments)}function al(T,D){return mo.apply(this,arguments)}function mo(){return(mo=(0,F.Z)(function*(T,D){const V={method:"DELETE",headers:yield mc(T)};try{const oe=yield(yield fetch(`${et(T.appConfig)}/${D}`,V)).json();if(oe.error)throw ln.create("token-unsubscribe-failed",{errorInfo:oe.error.message})}catch(W){throw ln.create("token-unsubscribe-failed",{errorInfo:W})}})).apply(this,arguments)}function et({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function mc(T){return ll.apply(this,arguments)}function ll(){return(ll=(0,F.Z)(function*({appConfig:T,installations:D}){const k=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function ya({p256dh:T,auth:D,endpoint:k,vapidKey:V}){const W={web:{endpoint:k,auth:D,p256dh:T}};return V!==hs&&(W.web.applicationPubKey=V),W}const cl=6048e5;function _c(T){return yc.apply(this,arguments)}function yc(){return(yc=(0,F.Z)(function*(T){const D=yield Os(T.swRegistration,T.vapidKey),k={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:D.endpoint,auth:Ss(D.getKey("auth")),p256dh:Ss(D.getKey("p256dh"))},V=yield Zn(T.firebaseDependencies);if(V){if(vc(V.subscriptionOptions,k))return Date.now()>=V.createTime+cl?Lt(T,{token:V.token,createTime:Date.now(),subscriptionOptions:k}):V.token;try{yield al(T.firebaseDependencies,V.token)}catch(W){console.warn(W)}return An(T.firebaseDependencies,k)}return An(T.firebaseDependencies,k)})).apply(this,arguments)}function rh(T){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,F.Z)(function*(T){const D=yield Zn(T.firebaseDependencies);D&&(yield al(T.firebaseDependencies,D.token),yield qn(T.firebaseDependencies));const k=yield T.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Lt(T,D){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,F.Z)(function*(T,D){try{const k=yield Uo(T.firebaseDependencies,D),V=Object.assign(Object.assign({},D),{token:k,createTime:Date.now()});return yield zr(T.firebaseDependencies,V),k}catch(k){throw yield rh(T),k}})).apply(this,arguments)}function An(T,D){return ul.apply(this,arguments)}function ul(){return(ul=(0,F.Z)(function*(T,D){const V={token:yield Ms(T,D),createTime:Date.now(),subscriptionOptions:D};return yield zr(T,V),V.token})).apply(this,arguments)}function Os(T,D){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,F.Z)(function*(T,D){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:il(D)})})).apply(this,arguments)}function vc(T,D){return D.vapidKey===T.vapidKey&&D.endpoint===T.endpoint&&D.auth===T.auth&&D.p256dh===T.p256dh}function Vo(T){const D={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function(T,D){if(!D.notification)return;T.notification={};const k=D.notification.title;k&&(T.notification.title=k);const V=D.notification.body;V&&(T.notification.body=V);const W=D.notification.image;W&&(T.notification.image=W)}(D,T),function(T,D){!D.data||(T.data=D.data)}(D,T),function(T,D){if(!D.fcmOptions)return;T.fcmOptions={};const k=D.fcmOptions.link;k&&(T.fcmOptions.link=k);const V=D.fcmOptions.analytics_label;V&&(T.fcmOptions.analyticsLabel=V)}(D,T),D}function Bo(T){return"object"==typeof T&&!!T&&po in T}function ur(T,D){const k=[];for(let V=0;V<T.length;V++)k.push(T.charAt(V)),V<D.length&&k.push(D.charAt(V));return k.join("")}function hl(T){return ln.create("missing-app-config-values",{valueName:T})}ur("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ur("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class _o{constructor(D,k,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function(T){if(!T||!T.options)throw hl("App Configuration Object");if(!T.name)throw hl("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:k}=T;for(const V of D)if(!k[V])throw hl(V);return{appName:T.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:W,installations:k,analyticsProvider:V}}_delete(){return Promise.resolve()}}function fs(T){return fl.apply(this,arguments)}function fl(){return(fl=(0,F.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(eh,{scope:Cm}),T.swRegistration.update().catch(()=>{})}catch(D){throw ln.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function pl(T,D){return gl.apply(this,arguments)}function gl(){return(gl=(0,F.Z)(function*(T,D){if(!D&&!T.swRegistration&&(yield fs(T)),D||!T.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw ln.create("invalid-sw-registration");T.swRegistration=D}})).apply(this,arguments)}function Cc(T,D){return ml.apply(this,arguments)}function ml(){return(ml=(0,F.Z)(function*(T,D){D?T.vapidKey=D:T.vapidKey||(T.vapidKey=hs)})).apply(this,arguments)}function wc(){return(wc=(0,F.Z)(function*(T,D){if(!navigator)throw ln.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ln.create("permission-blocked");return yield Cc(T,null==D?void 0:D.vapidKey),yield pl(T,null==D?void 0:D.serviceWorkerRegistration),_c(T)})).apply(this,arguments)}function Ca(T,D,k){return ih.apply(this,arguments)}function ih(){return(ih=(0,F.Z)(function*(T,D,k){const V=Ec(D);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:k[po],message_name:k[_a],message_time:k[go],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ec(T){switch(T){case vr.NOTIFICATION_CLICKED:return"notification_open";case vr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function _l(){return(_l=(0,F.Z)(function*(T,D){const k=D.data;if(!k.isFirebaseMessaging)return;T.onMessageHandler&&k.messageType===vr.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Vo(k)):T.onMessageHandler.next(Vo(k)));const V=k.data;Bo(V)&&"1"===V[bu]&&(yield Ca(T,k.messageType,V))})).apply(this,arguments)}const Su="@firebase/messaging";function Mu(){return _n.apply(this,arguments)}function _n(){return(_n=(0,F.Z)(function*(){return"undefined"!=typeof window&&(0,re.hl)()&&(yield(0,re.eu)())&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ue._registerComponent)(new me.wA("messaging",T=>{const D=new _o(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function(T,D){return _l.apply(this,arguments)}(D,k)),D},"PUBLIC")),(0,ue._registerComponent)(new me.wA("messaging-internal",T=>{const D=T.getProvider("messaging").getImmediate();return{getToken:V=>function(T,D){return wc.apply(this,arguments)}(D,V)}},"PRIVATE")),(0,ue.registerVersion)(Su,"0.9.7"),(0,ue.registerVersion)(Su,"0.9.7","esm2017");const vo="analytics",Tc="firebase_id",Pu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ch="https://www.googletagmanager.com/gtag/js",wn=new ae.Yd("@firebase/analytics");function wl(T){return Promise.all(T.map(D=>D.catch(k=>k)))}function bm(T,D){const k=document.createElement("script");k.src=`${ch}?l=${T}&id=${D}`,k.async=!0,document.head.appendChild(k)}function Ea(T,D,k,V,W,oe){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,F.Z)(function*(T,D,k,V,W,oe){const Oe=V[W];try{if(Oe)yield D[Oe];else{const $e=(yield wl(k)).find(Ot=>Ot.measurementId===W);$e&&(yield D[$e.appId])}}catch(We){wn.error(We)}T("config",W,oe)})).apply(this,arguments)}function El(T,D,k,V,W){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,F.Z)(function*(T,D,k,V,W){try{let oe=[];if(W&&W.send_to){let Oe=W.send_to;Array.isArray(Oe)||(Oe=[Oe]);const We=yield wl(k);for(const $e of Oe){const Ot=We.find(xr=>xr.measurementId===$e),rn=Ot&&D[Ot.appId];if(!rn){oe=[];break}oe.push(rn)}}0===oe.length&&(oe=Object.values(D)),yield Promise.all(oe),T("event",V,W||{})}catch(oe){wn.error(oe)}})).apply(this,arguments)}function tn(){const T=window.document.getElementsByTagName("script");for(const D of Object.values(T))if(D.src&&D.src.includes(ch))return D;return null}const Pr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Zo=new class{constructor(D={},k=1e3){this.throttleMetadata=D,this.intervalMillis=k}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,k){this.throttleMetadata[D]=k}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Im(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function ps(T){return gs.apply(this,arguments)}function gs(){return(gs=(0,F.Z)(function*(T){var D;const{appId:k,apiKey:V}=T,W={method:"GET",headers:Im(V)},oe=Pu.replace("{app-id}",k),Oe=yield fetch(oe,W);if(200!==Oe.status&&304!==Oe.status){let We="";try{const $e=yield Oe.json();(null===(D=$e.error)||void 0===D?void 0:D.message)&&(We=$e.error.message)}catch($e){}throw Pr.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:We})}return Oe.json()})).apply(this,arguments)}function Sn(T){return rt.apply(this,arguments)}function rt(){return(rt=(0,F.Z)(function*(T,D=Zo,k){const{appId:V,apiKey:W,measurementId:oe}=T.options;if(!V)throw Pr.create("no-app-id");if(!W){if(oe)return{measurementId:oe,appId:V};throw Pr.create("no-api-key")}const Oe=D.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new Tl;return setTimeout((0,F.Z)(function*(){We.abort()}),void 0!==k?k:6e4),bl({appId:V,apiKey:W,measurementId:oe},Oe,We,D)})).apply(this,arguments)}function bl(T,D,k){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,F.Z)(function*(T,{throttleEndTimeMillis:D,backoffCount:k},V,W=Zo){const{appId:oe,measurementId:Oe}=T;try{yield ku(V,D)}catch(We){if(Oe)return wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${We.message}]`),{appId:oe,measurementId:Oe};throw We}try{const We=yield ps(T);return W.deleteThrottleMetadata(oe),We}catch(We){if(!uh(We)){if(W.deleteThrottleMetadata(oe),Oe)return wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${We.message}]`),{appId:oe,measurementId:Oe};throw We}const $e=503===Number(We.customData.httpStatus)?(0,re.$s)(k,W.intervalMillis,30):(0,re.$s)(k,W.intervalMillis),Ot={throttleEndTimeMillis:Date.now()+$e,backoffCount:k+1};return W.setThrottleMetadata(oe,Ot),wn.debug(`Calling attemptFetch again in ${$e} millis`),bl(T,Ot,V,W)}})).apply(this,arguments)}function ku(T,D){return new Promise((k,V)=>{const W=Math.max(D-Date.now(),0),oe=setTimeout(k,W);T.addEventListener(()=>{clearTimeout(oe),V(Pr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function uh(T){if(!(T instanceof re.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Tl{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function ba(){return ii.apply(this,arguments)}function ii(){return(ii=(0,F.Z)(function*(){if(!(0,re.hl)())return wn.warn(Pr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(T){return wn.warn(Pr.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function xs(){return(xs=(0,F.Z)(function*(T,D,k,V,W,oe,Oe){var We;const $e=Sn(T);$e.then(yn=>{k[yn.measurementId]=yn.appId,T.options.measurementId&&yn.measurementId!==T.options.measurementId&&wn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${yn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(yn=>wn.error(yn)),D.push($e);const Ot=ba().then(yn=>{if(yn)return V.getId()}),[rn,xr]=yield Promise.all([$e,Ot]);tn()||bm(oe,rn.measurementId),W("js",new Date);const rr=null!==(We=null==Oe?void 0:Oe.config)&&void 0!==We?We:{};return rr.origin="firebase",rr.update=!0,null!=xr&&(rr[Tc]=xr),W("config",rn.measurementId,rr),rn.measurementId})).apply(this,arguments)}class Ru{constructor(D){this.app=D}_delete(){return delete ms[this.app.options.appId],Promise.resolve()}}let ms={},Nu=[];const Fu={};let dh,nn,oi="dataLayer",Wr=!1;function Lu(T,D,k){!function(){const T=[];if((0,re.ru)()&&T.push("This is a browser extension environment."),(0,re.zI)()||T.push("Cookies are not available."),T.length>0){const D=T.map((V,W)=>`(${W+1}) ${V}`).join(" "),k=Pr.create("invalid-analytics-context",{errorInfo:D});wn.warn(k.message)}}();const V=T.options.appId;if(!V)throw Pr.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Pr.create("no-api-key");wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ms[V])throw Pr.create("already-exists",{id:V});if(!Wr){!function(T){let D=[];Array.isArray(window[T])?D=window[T]:window[T]=D}(oi);const{wrappedGtag:oe,gtagCore:Oe}=function(T,D,k,V,W){let oe=function(...Oe){window[V].push(arguments)};return window[W]&&"function"==typeof window[W]&&(oe=window[W]),window[W]=function(T,D,k,V){function oe(){return(oe=(0,F.Z)(function*(Oe,We,$e){try{"event"===Oe?yield El(T,D,k,We,$e):"config"===Oe?yield Ea(T,D,k,V,We,$e):T("set",We)}catch(Ot){wn.error(Ot)}})).apply(this,arguments)}return function(Oe,We,$e){return oe.apply(this,arguments)}}(oe,T,D,k),{gtagCore:oe,wrappedGtag:window[W]}}(ms,Nu,Fu,oi,"gtag");nn=oe,dh=Oe,Wr=!0}return ms[V]=function(T,D,k,V,W,oe,Oe){return xs.apply(this,arguments)}(T,Nu,Fu,D,dh,oi,k),new Ru(T)}function Al(){return(Al=(0,F.Z)(function*(T,D,k,V,W){if(W&&W.global)T("event",k,V);else{const oe=yield D;T("event",k,Object.assign(Object.assign({},V),{send_to:oe}))}})).apply(this,arguments)}function bn(){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,F.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(T){return!1}})).apply(this,arguments)}const Vu="@firebase/analytics";(0,ue._registerComponent)(new me.wA(vo,(D,{options:k})=>Lu(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ue._registerComponent)(new me.wA("analytics-internal",function(D){try{const k=D.getProvider(vo).getImmediate();return{logEvent:(V,W,oe)=>function(T,D,k,V){T=(0,re.m9)(T),function(T,D,k,V,W){return Al.apply(this,arguments)}(nn,ms[T.app.options.appId],D,k,V).catch(W=>wn.error(W))}(k,V,W,oe)}}catch(k){throw Pr.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ue.registerVersion)(Vu,"0.7.5"),(0,ue.registerVersion)(Vu,"0.7.5","esm2017");var Vn=N(2869),Da=N(8843);const Or=new class extends Da.v{}(class extends Vn.o{constructor(D,k){super(D,k),this.scheduler=D,this.work=k}schedule(D,k=0){return k>0?super.schedule(D,k):(this.delay=k,this.state=D,this.scheduler.flush(this),this)}execute(D,k){return k>0||this.closed?super.execute(D,k):this._execute(D,k)}requestAsyncId(D,k,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(D,k,V):D.flush(this)}});var Qi=N(2210),Bu=N(8305),Mc=N(7384),Kr=N(4763),Zu=N(5222);const Sa=new l.GfV("7.2.0"),mh="__angularfire_symbol__analyticsIsSupported",Ma="__angularfire_symbol__remoteConfigIsSupported",Pc="__angularfire_symbol__messagingIsSupported";function pp(T,D,k){if(D){if(1===D.length)return D[0];const oe=D.filter(Oe=>Oe.app===k);if(1===oe.length)return oe[0]}return k.container.getProvider(T).getImmediate({optional:!0})}globalThis[mh]||(globalThis[mh]=bn().then(T=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=T)),globalThis[Pc]||(globalThis[Pc]=Mu().then(T=>globalThis.__angularfire_symbol__messagingIsSupportedValue=T)),globalThis[Ma]||(globalThis[Ma]=rl().then(T=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=T));const Oc=(T,D)=>{const k=D?[D]:(0,Q.C6)(),V=[];return k.forEach(W=>{W.container.getProvider(T).instances.forEach(Oe=>{V.includes(Oe)||V.push(Oe)})}),V};function _s(){}class Ho{constructor(D,k=Or){this.zone=D,this.delegate=k}now(){return this.delegate.now()}schedule(D,k,V){const W=this.zone;return this.delegate.schedule(function(Oe){W.runGuarded(()=>{D.apply(this,[Oe])})},k,V)}}class Sl{constructor(D){this.zone=D,this.task=null}call(D,k){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_s,{},_s,_s)),k.pipe((0,Mc.b)({next:V,complete:V,error:V})).subscribe(D).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ml=(()=>{class T{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new Ho(Zone.current)),this.insideAngular=k.run(()=>new Ho(Zone.current,Qi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(k){return new(k||T)(l.LFG(l.R0b))},T.\u0275prov=l.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Ii(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Pl(T){return Ii().ngZone.runOutsideAngular(()=>T())}function Ji(T){return Ii().ngZone.run(()=>T())}function Ol(T){return T.pipe((0,Kr.Q)(Ii().outsideAngular))}function xc(T){return Ii(),function(T){return function(k){return(k=k.lift(new Sl(T.ngZone))).pipe((0,Zu.R)(T.outsideAngular),(0,Kr.Q)(T.insideAngular))}}(Ii())(T)}const ju=(T,D)=>{const k=void 0;return function(){return D&&setTimeout(()=>{"scheduled"===D.state&&D.invoke()},10),Ji(()=>T.apply(k,arguments))}},xl=(T,D)=>function(){let k;for(let W=0;W<arguments.length;W++)"function"==typeof arguments[W]&&(D&&(k||(k=Ji(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_s,{},_s,_s)))),arguments[W]=ju(arguments[W],k));const V=Pl(()=>T.apply(this,arguments));if(!D){if(V instanceof Bu.y){const W=Ii();return V.pipe((0,Zu.R)(W.outsideAngular),(0,Kr.Q)(W.insideAngular))}return Ji(()=>V)}return V instanceof Bu.y?V.pipe(xc):V instanceof Promise?Ji(()=>new Promise((W,oe)=>V.then(Oe=>Ji(()=>W(Oe)),Oe=>Ji(()=>oe(Oe))))):"function"==typeof V&&k?function(){return setTimeout(()=>{k&&"scheduled"===k.state&&k.invoke()},10),V.apply(this,arguments)}:Ji(()=>V)}},4213:(Ye,ye,N)=>{"use strict";N.d(ye,{BH:()=>Ve,LL:()=>ge,ZR:()=>Re,gQ:()=>De,zI:()=>fe,hu:()=>Q,g5:()=>F,US:()=>me,tV:()=>he,h$:()=>ae,$s:()=>on,r3:()=>gn,Sg:()=>Ie,ne:()=>cr,p$:()=>H,vZ:()=>Zt,ZB:()=>$,gK:()=>ct,pd:()=>cs,m9:()=>mu,z$:()=>Be,GJ:()=>qr,jU:()=>Y,ru:()=>ce,d:()=>ve,xb:()=>Fn,w1:()=>He,hl:()=>ht,uI:()=>Le,UG:()=>le,Yr:()=>je,b$:()=>be,G6:()=>Qe,Mn:()=>Me,w9:()=>Ar,cI:()=>Yn,UI:()=>mi,xO:()=>pa,zd:()=>ji,DV:()=>fa,ug:()=>en,dS:()=>$r,Pz:()=>It,Dv:()=>jr,Wj:()=>Rt,lb:()=>Nt,eu:()=>te});const Q=function(z,Z){if(!z)throw F(Z)},F=function(z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+z)},ue=function(z){const Z=[];let G=0;for(let we=0;we<z.length;we++){let ne=z.charCodeAt(we);ne<128?Z[G++]=ne:ne<2048?(Z[G++]=ne>>6|192,Z[G++]=63&ne|128):55296==(64512&ne)&&we+1<z.length&&56320==(64512&z.charCodeAt(we+1))?(ne=65536+((1023&ne)<<10)+(1023&z.charCodeAt(++we)),Z[G++]=ne>>18|240,Z[G++]=ne>>12&63|128,Z[G++]=ne>>6&63|128,Z[G++]=63&ne|128):(Z[G++]=ne>>12|224,Z[G++]=ne>>6&63|128,Z[G++]=63&ne|128)}return Z},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,Z){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=Z?this.byteToCharMapWebSafe_:this.byteToCharMap_,we=[];for(let ne=0;ne<z.length;ne+=3){const Xe=z[ne],ft=ne+1<z.length,an=ft?z[ne+1]:0,mr=ne+2<z.length,Nn=mr?z[ne+2]:0;let _r=(15&an)<<2|Nn>>6,Po=63&Nn;mr||(Po=64,ft||(_r=64)),we.push(G[Xe>>2],G[(3&Xe)<<4|an>>4],G[_r],G[Po])}return we.join("")},encodeString(z,Z){return this.HAS_NATIVE_SUPPORT&&!Z?btoa(z):this.encodeByteArray(ue(z),Z)},decodeString(z,Z){return this.HAS_NATIVE_SUPPORT&&!Z?atob(z):function(z){const Z=[];let G=0,we=0;for(;G<z.length;){const ne=z[G++];if(ne<128)Z[we++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const Xe=z[G++];Z[we++]=String.fromCharCode((31&ne)<<6|63&Xe)}else if(ne>239&&ne<365){const mr=((7&ne)<<18|(63&z[G++])<<12|(63&z[G++])<<6|63&z[G++])-65536;Z[we++]=String.fromCharCode(55296+(mr>>10)),Z[we++]=String.fromCharCode(56320+(1023&mr))}else{const Xe=z[G++],ft=z[G++];Z[we++]=String.fromCharCode((15&ne)<<12|(63&Xe)<<6|63&ft)}}return Z.join("")}(this.decodeStringToByteArray(z,Z))},decodeStringToByteArray(z,Z){this.init_();const G=Z?this.charToByteMapWebSafe_:this.charToByteMap_,we=[];for(let ne=0;ne<z.length;){const Xe=G[z.charAt(ne++)],an=ne<z.length?G[z.charAt(ne)]:0;++ne;const Nn=ne<z.length?G[z.charAt(ne)]:64;++ne;const Ut=ne<z.length?G[z.charAt(ne)]:64;if(++ne,null==Xe||null==an||null==Nn||null==Ut)throw Error();we.push(Xe<<2|an>>4),64!==Nn&&(we.push(an<<4&240|Nn>>2),64!==Ut&&we.push(Nn<<6&192|Ut))}return we},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},ae=function(z){const Z=ue(z);return me.encodeByteArray(Z,!0)},se=function(z){return ae(z).replace(/\./g,"")},he=function(z){try{return me.decodeString(z,!0)}catch(Z){console.error("base64Decode failed: ",Z)}return null};function H(z){return $(void 0,z)}function $(z,Z){if(!(Z instanceof Object))return Z;switch(Z.constructor){case Date:return new Date(Z.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return Z}for(const G in Z)!Z.hasOwnProperty(G)||!ee(G)||(z[G]=$(z[G],Z[G]));return z}function ee(z){return"__proto__"!==z}class Ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Z,G)=>{this.resolve=Z,this.reject=G})}wrapCallback(Z){return(G,we)=>{G?this.reject(G):this.resolve(we),"function"==typeof Z&&(this.promise.catch(()=>{}),1===Z.length?Z(G):Z(G,we))}}}function Ie(z,Z){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const we=Z||"demo-project",ne=z.iat||0,Xe=z.sub||z.user_id;if(!Xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${we}`,aud:we,iat:ne,exp:ne+3600,auth_time:ne,sub:Xe,user_id:Xe,firebase:{sign_in_provider:"custom",identities:{}}},z);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(ft)),""].join(".")}function Be(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function le(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function Y(){return"object"==typeof self&&self.self===self}function ce(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ve(){return Be().indexOf("Electron/")>=0}function He(){const z=Be();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function Me(){return Be().indexOf("MSAppHost/")>=0}function je(){return!1}function Qe(){return!le()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ht(){return"object"==typeof indexedDB}function te(){return new Promise((z,Z)=>{try{let G=!0;const we="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(we);ne.onsuccess=()=>{ne.result.close(),G||self.indexedDB.deleteDatabase(we),z(!0)},ne.onupgradeneeded=()=>{G=!1},ne.onerror=()=>{var Xe;Z((null===(Xe=ne.error)||void 0===Xe?void 0:Xe.message)||"")}}catch(G){Z(G)}})}function fe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Re extends Error{constructor(Z,G,we){super(G),this.code=Z,this.customData=we,this.name="FirebaseError",Object.setPrototypeOf(this,Re.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ge.prototype.create)}}class ge{constructor(Z,G,we){this.service=Z,this.serviceName=G,this.errors=we}create(Z,...G){const we=G[0]||{},ne=`${this.service}/${Z}`,Xe=this.errors[Z],ft=Xe?function(z,Z){return z.replace(Xt,(G,we)=>{const ne=Z[we];return null!=ne?String(ne):`<${we}?>`})}(Xe,we):"Error";return new Re(ne,`${this.serviceName}: ${ft} (${ne}).`,we)}}const Xt=/\{\$([^}]+)}/g;function Yn(z){return JSON.parse(z)}function It(z){return JSON.stringify(z)}const Et=function(z){let Z={},G={},we={},ne="";try{const Xe=z.split(".");Z=Yn(he(Xe[0])||""),G=Yn(he(Xe[1])||""),ne=Xe[2],we=G.d||{},delete G.d}catch(Xe){}return{header:Z,claims:G,data:we,signature:ne}},Ar=function(z){const G=Et(z).claims;return!!G&&"object"==typeof G&&G.hasOwnProperty("iat")},qr=function(z){const Z=Et(z).claims;return"object"==typeof Z&&!0===Z.admin};function gn(z,Z){return Object.prototype.hasOwnProperty.call(z,Z)}function fa(z,Z){if(Object.prototype.hasOwnProperty.call(z,Z))return z[Z]}function Fn(z){for(const Z in z)if(Object.prototype.hasOwnProperty.call(z,Z))return!1;return!0}function mi(z,Z,G){const we={};for(const ne in z)Object.prototype.hasOwnProperty.call(z,ne)&&(we[ne]=Z.call(G,z[ne],ne,z));return we}function Zt(z,Z){if(z===Z)return!0;const G=Object.keys(z),we=Object.keys(Z);for(const ne of G){if(!we.includes(ne))return!1;const Xe=z[ne],ft=Z[ne];if(Rn(Xe)&&Rn(ft)){if(!Zt(Xe,ft))return!1}else if(Xe!==ft)return!1}for(const ne of we)if(!G.includes(ne))return!1;return!0}function Rn(z){return null!==z&&"object"==typeof z}function pa(z){const Z=[];for(const[G,we]of Object.entries(z))Array.isArray(we)?we.forEach(ne=>{Z.push(encodeURIComponent(G)+"="+encodeURIComponent(ne))}):Z.push(encodeURIComponent(G)+"="+encodeURIComponent(we));return Z.length?"&"+Z.join("&"):""}function ji(z){const Z={};return z.replace(/^\?/,"").split("&").forEach(we=>{if(we){const[ne,Xe]=we.split("=");Z[decodeURIComponent(ne)]=decodeURIComponent(Xe)}}),Z}function cs(z){const Z=z.indexOf("?");if(!Z)return"";const G=z.indexOf("#",Z);return z.substring(Z,G>0?G:void 0)}class De{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Z=1;Z<this.blockSize;++Z)this.pad_[Z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Z,G){G||(G=0);const we=this.W_;if("string"==typeof Z)for(let Ut=0;Ut<16;Ut++)we[Ut]=Z.charCodeAt(G)<<24|Z.charCodeAt(G+1)<<16|Z.charCodeAt(G+2)<<8|Z.charCodeAt(G+3),G+=4;else for(let Ut=0;Ut<16;Ut++)we[Ut]=Z[G]<<24|Z[G+1]<<16|Z[G+2]<<8|Z[G+3],G+=4;for(let Ut=16;Ut<80;Ut++){const _r=we[Ut-3]^we[Ut-8]^we[Ut-14]^we[Ut-16];we[Ut]=4294967295&(_r<<1|_r>>>31)}let Nn,ei,ne=this.chain_[0],Xe=this.chain_[1],ft=this.chain_[2],an=this.chain_[3],mr=this.chain_[4];for(let Ut=0;Ut<80;Ut++){Ut<40?Ut<20?(Nn=an^Xe&(ft^an),ei=1518500249):(Nn=Xe^ft^an,ei=1859775393):Ut<60?(Nn=Xe&ft|an&(Xe|ft),ei=2400959708):(Nn=Xe^ft^an,ei=3395469782);const _r=(ne<<5|ne>>>27)+Nn+mr+ei+we[Ut]&4294967295;mr=an,an=ft,ft=4294967295&(Xe<<30|Xe>>>2),Xe=ne,ne=_r}this.chain_[0]=this.chain_[0]+ne&4294967295,this.chain_[1]=this.chain_[1]+Xe&4294967295,this.chain_[2]=this.chain_[2]+ft&4294967295,this.chain_[3]=this.chain_[3]+an&4294967295,this.chain_[4]=this.chain_[4]+mr&4294967295}update(Z,G){if(null==Z)return;void 0===G&&(G=Z.length);const we=G-this.blockSize;let ne=0;const Xe=this.buf_;let ft=this.inbuf_;for(;ne<G;){if(0===ft)for(;ne<=we;)this.compress_(Z,ne),ne+=this.blockSize;if("string"==typeof Z){for(;ne<G;)if(Xe[ft]=Z.charCodeAt(ne),++ft,++ne,ft===this.blockSize){this.compress_(Xe),ft=0;break}}else for(;ne<G;)if(Xe[ft]=Z[ne],++ft,++ne,ft===this.blockSize){this.compress_(Xe),ft=0;break}}this.inbuf_=ft,this.total_+=G}digest(){const Z=[];let G=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ne=this.blockSize-1;ne>=56;ne--)this.buf_[ne]=255&G,G/=256;this.compress_(this.buf_);let we=0;for(let ne=0;ne<5;ne++)for(let Xe=24;Xe>=0;Xe-=8)Z[we]=this.chain_[ne]>>Xe&255,++we;return Z}}function cr(z,Z){const G=new Qn(z,Z);return G.subscribe.bind(G)}class Qn{constructor(Z,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{Z(this)}).catch(we=>{this.error(we)})}next(Z){this.forEachObserver(G=>{G.next(Z)})}error(Z){this.forEachObserver(G=>{G.error(Z)}),this.close(Z)}complete(){this.forEachObserver(Z=>{Z.complete()}),this.close()}subscribe(Z,G,we){let ne;if(void 0===Z&&void 0===G&&void 0===we)throw new Error("Missing Observer.");ne=function(z,Z){if("object"!=typeof z||null===z)return!1;for(const G of["next","error","complete"])if(G in z&&"function"==typeof z[G])return!0;return!1}(Z)?Z:{next:Z,error:G,complete:we},void 0===ne.next&&(ne.next=$i),void 0===ne.error&&(ne.error=$i),void 0===ne.complete&&(ne.complete=$i);const Xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch(ft){}}),this.observers.push(ne),Xe}unsubscribeOne(Z){void 0===this.observers||void 0===this.observers[Z]||(delete this.observers[Z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Z){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,Z)}sendOne(Z,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Z])try{G(this.observers[Z])}catch(we){"undefined"!=typeof console&&console.error&&console.error(we)}})}close(Z){this.finalized||(this.finalized=!0,void 0!==Z&&(this.finalError=Z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $i(){}const jr=function(z,Z,G,we){let ne;if(we<Z?ne="at least "+Z:we>G&&(ne=0===G?"none":"no more than "+G),ne)throw new Error(z+" failed: Was called with "+we+(1===we?" argument.":" arguments.")+" Expects "+ne+".")};function ct(z,Z){return`${z} failed: ${Z} argument `}function Rt(z,Z,G,we){if((!we||G)&&"function"!=typeof G)throw new Error(ct(z,Z)+"must be a valid function.")}function Nt(z,Z,G,we){if((!we||G)&&("object"!=typeof G||null===G))throw new Error(ct(z,Z)+"must be a valid context object.")}const $r=function(z){const Z=[];let G=0;for(let we=0;we<z.length;we++){let ne=z.charCodeAt(we);if(ne>=55296&&ne<=56319){const Xe=ne-55296;we++,Q(we<z.length,"Surrogate pair missing trail surrogate."),ne=65536+(Xe<<10)+(z.charCodeAt(we)-56320)}ne<128?Z[G++]=ne:ne<2048?(Z[G++]=ne>>6|192,Z[G++]=63&ne|128):ne<65536?(Z[G++]=ne>>12|224,Z[G++]=ne>>6&63|128,Z[G++]=63&ne|128):(Z[G++]=ne>>18|240,Z[G++]=ne>>12&63|128,Z[G++]=ne>>6&63|128,Z[G++]=63&ne|128)}return Z},en=function(z){let Z=0;for(let G=0;G<z.length;G++){const we=z.charCodeAt(G);we<128?Z++:we<2048?Z+=2:we>=55296&&we<=56319?(Z+=4,G++):Z+=3}return Z};function on(z,Z=1e3,G=2){const we=Z*Math.pow(G,z),ne=Math.round(.5*we*(Math.random()-.5)*2);return Math.min(144e5,we+ne)}function mu(z){return z&&z._delegate?z._delegate:z}},7713:(Ye,ye,N)=>{"use strict";N.d(ye,{Mq:()=>l.getApp,C6:()=>l.getApps});var l=N(1572);(0,l.registerVersion)("firebase","9.6.4","app")},7892:(Ye,ye,N)=>{"use strict";N.d(ye,{Z:()=>l.Z});var l=N(6293);l.Z.registerVersion("firebase","9.6.4","app-compat")},9836:(Ye,ye,N)=>{"use strict";N.r(ye);var l=N(8239),Q=N(6293),F=N(4213),ue=N(1572);function se(y,p){var g={};for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&p.indexOf(C)<0&&(g[C]=y[C]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var S=0;for(C=Object.getOwnPropertySymbols(y);S<C.length;S++)p.indexOf(C[S])<0&&Object.prototype.propertyIsEnumerable.call(y,C[S])&&(g[C[S]]=y[C[S]])}return g}var Re=N(3855),ge=N(1177);const Ar=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},qr=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},gn=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fn=new Re.Yd("@firebase/auth");function mi(y,...p){Fn.logLevel<=Re.in.ERROR&&Fn.error(`Auth (${ue.SDK_VERSION}): ${y}`,...p)}function Zt(y,...p){throw cs(y,...p)}function Rn(y,...p){return cs(y,...p)}function pa(y,p,g){const C=Object.assign(Object.assign({},qr()),{[p]:g});return new F.LL("auth","Firebase",C).create(p,{appName:y.name})}function ji(y,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&Zt(y,"argument-error"),pa(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cs(y,...p){if("string"!=typeof y){const g=p[0],C=[...p.slice(1)];return C[0]&&(C[0].appName=y.name),y._errorFactory.create(g,...C)}return gn.create(y,...p)}function De(y,p,...g){if(!y)throw cs(p,...g)}function cr(y){const p="INTERNAL ASSERTION FAILED: "+y;throw mi(p),new Error(p)}function Qn(y,p){y||cr(p)}const mt=new Map;function Wt(y){Qn(y instanceof Function,"Expected a class definition");let p=mt.get(y);return p?(Qn(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,mt.set(y,p),p)}function ct(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function _t(){return"http:"===Rt()||"https:"===Rt()}function Rt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class en{constructor(p,g){this.shortDelay=p,this.longDelay=g,Qn(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_t()||(0,F.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Je(y,p){Qn(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class ut{static initialize(p,g,C){this.fetchImpl=p,g&&(this.headersImpl=g),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gu={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},co=new en(3e4,6e4);function on(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function bt(y,p,g,C){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,l.Z)(function*(y,p,g,C,S={}){return mu(y,S,(0,l.Z)(function*(){let P={},q={};C&&("GET"===p?q=C:P={body:JSON.stringify(C)});const J=(0,F.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),ut.fetch()(we(y,y.config.apiHost,g,J),Object.assign({method:p,headers:ke,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function mu(y,p,g){return z.apply(this,arguments)}function z(){return(z=(0,l.Z)(function*(y,p,g){y._canInitEmulator=!1;const C=Object.assign(Object.assign({},gu),p);try{const S=new ne(y),P=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const q=yield P.json();if("needConfirmation"in q)throw Xe(y,"account-exists-with-different-credential",q);if(P.ok&&!("errorMessage"in q))return q;{const J=P.ok?q.errorMessage:q.error.message,[ke,Se]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw Xe(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===ke)throw Xe(y,"email-already-in-use",q);const it=C[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Se)throw pa(y,it,Se);Zt(y,it)}}catch(S){if(S instanceof F.ZR)throw S;Zt(y,"network-request-failed")}})).apply(this,arguments)}function Z(y,p,g,C){return G.apply(this,arguments)}function G(){return(G=(0,l.Z)(function*(y,p,g,C,S={}){const P=yield bt(y,p,g,C,S);return"mfaPendingCredential"in P&&Zt(y,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function we(y,p,g,C){const S=`${p}${g}?${C}`;return y.config.emulator?Je(y.config,S):`${y.config.apiScheme}://${S}`}class ne{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,C)=>{this.timer=setTimeout(()=>C(Rn(this.auth,"network-request-failed")),co.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xe(y,p,g){const C={appName:y.name};g.email&&(C.email=g.email),g.phoneNumber&&(C.phoneNumber=g.phoneNumber);const S=Rn(y,p,C);return S.customData._tokenResponse=g,S}function an(){return(an=(0,l.Z)(function*(y,p){return bt(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function mr(y,p){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,l.Z)(function*(y,p){return bt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ei(y,p){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,l.Z)(function*(y,p){return bt(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function _r(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Ja(){return(Ja=(0,l.Z)(function*(y,p=!1){const g=(0,F.m9)(y),C=yield g.getIdToken(p),S=Oo(C);De(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const P="object"==typeof S.firebase?S.firebase:void 0,q=null==P?void 0:P.sign_in_provider;return{claims:S,token:C,authTime:_r(cc(S.auth_time)),issuedAtTime:_r(cc(S.iat)),expirationTime:_r(cc(S.exp)),signInProvider:q||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function cc(y){return 1e3*Number(y)}function Oo(y){const[p,g,C]=y.split(".");if(void 0===p||void 0===g||void 0===C)return mi("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,F.tV)(g);return S?JSON.parse(S):(mi("Failed to decode base64 JWT payload"),null)}catch(S){return mi("Caught error parsing JWT payload as JSON",S),null}}function mn(y,p){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,l.Z)(function*(y,p,g=!1){if(g)return p;try{return yield p}catch(C){throw C instanceof F.ZR&&_i(C)&&y.auth.currentUser===y&&(yield y.auth.signOut()),C}})).apply(this,arguments)}function _i({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class yr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const C=this.getInterval(p);this.timerId=setTimeout((0,l.Z)(function*(){yield g.iteration()}),C)}iteration(){var p=this;return(0,l.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&p.schedule(!0))}p.schedule()})()}}class yi{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=_r(this.lastLoginAt),this.creationTime=_r(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ze(y){return St.apply(this,arguments)}function St(){return(St=(0,l.Z)(function*(y){var p;const g=y.auth,C=yield y.getIdToken(),S=yield mn(y,ei(g,{idToken:C}));De(null==S?void 0:S.users.length,g,"internal-error");const P=S.users[0];y._notifyReloadListener(P);const q=(null===(p=P.providerUserInfo)||void 0===p?void 0:p.length)?Jn(P.providerUserInfo):[],J=zi(y.providerData,q),it=!!y.isAnonymous&&!(y.email&&P.passwordHash||(null==J?void 0:J.length)),st={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:J,metadata:new yi(P.createdAt,P.lastLoginAt),isAnonymous:it};Object.assign(y,st)})).apply(this,arguments)}function Dr(){return(Dr=(0,l.Z)(function*(y){const p=(0,F.m9)(y);yield Ze(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function zi(y,p){return[...y.filter(C=>!p.some(S=>S.providerId===C.providerId)),...p]}function Jn(y){return y.map(p=>{var{providerId:g}=p,C=se(p,["providerId"]);return{providerId:g,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function On(){return(On=(0,l.Z)(function*(y,p){const g=yield mu(y,{},(0,l.Z)(function*(){const C=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:S,apiKey:P}=y.config,q=we(y,S,"/v1/token",`key=${P}`),J=yield y._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",ut.fetch()(q,{method:"POST",headers:J,body:C})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Gi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){De(p.idToken,"internal-error"),De(void 0!==p.idToken,"internal-error"),De(void 0!==p.refreshToken,"internal-error");const g="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(y){const p=Oo(y);return De(p,"internal-error"),De(void 0!==p.exp,"internal-error"),De(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var C=this;return(0,l.Z)(function*(){return De(!C.accessToken||C.refreshToken,p,"user-token-expired"),g||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(p,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var C=this;return(0,l.Z)(function*(){const{accessToken:S,refreshToken:P,expiresIn:q}=yield function(y,p){return On.apply(this,arguments)}(p,g);C.updateTokensAndExpiration(S,P,Number(q))})()}updateTokensAndExpiration(p,g,C){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(p,g){const{refreshToken:C,accessToken:S,expirationTime:P}=g,q=new Gi;return C&&(De("string"==typeof C,"internal-error",{appName:p}),q.refreshToken=C),S&&(De("string"==typeof S,"internal-error",{appName:p}),q.accessToken=S),P&&(De("number"==typeof P,"internal-error",{appName:p}),q.expirationTime=P),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Gi,this.toJSON())}_performRefresh(){return cr("not implemented")}}function ti(y,p){De("string"==typeof y||void 0===y,"internal-error",{appName:p})}class yt{constructor(p){var{uid:g,auth:C,stsTokenManager:S}=p,P=se(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new yr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=C,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.metadata=new yi(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,l.Z)(function*(){const C=yield mn(g,g.stsTokenManager.getToken(g.auth,p));return De(C,g.auth,"internal-error"),g.accessToken!==C&&(g.accessToken=C,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),C})()}getIdTokenResult(p){return function(y){return Ja.apply(this,arguments)}(this,p)}reload(){return function(y){return Dr.apply(this,arguments)}(this)}_assign(p){this!==p&&(De(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new yt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var C=this;return(0,l.Z)(function*(){let S=!1;p.idToken&&p.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(p),S=!0),g&&(yield Ze(C)),yield C.auth._persistUserIfCurrent(C),S&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var p=this;return(0,l.Z)(function*(){const g=yield p.getIdToken();return yield mn(p,function(y,p){return an.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var C,S,P,q,J,ke,Se,it;const st=null!==(C=g.displayName)&&void 0!==C?C:void 0,Vt=null!==(S=g.email)&&void 0!==S?S:void 0,$n=null!==(P=g.phoneNumber)&&void 0!==P?P:void 0,Rr=null!==(q=g.photoURL)&&void 0!==q?q:void 0,Zc=null!==(J=g.tenantId)&&void 0!==J?J:void 0,id=null!==(ke=g._redirectEventId)&&void 0!==ke?ke:void 0,Qm=null!==(Se=g.createdAt)&&void 0!==Se?Se:void 0,jl=null!==(it=g.lastLoginAt)&&void 0!==it?it:void 0,{uid:kh,emailVerified:Zp,isAnonymous:qp,providerData:Rh,stsTokenManager:Nh}=g;De(kh&&Nh,p,"internal-error");const Jm=Gi.fromJSON(this.name,Nh);De("string"==typeof kh,p,"internal-error"),ti(st,p.name),ti(Vt,p.name),De("boolean"==typeof Zp,p,"internal-error"),De("boolean"==typeof qp,p,"internal-error"),ti($n,p.name),ti(Rr,p.name),ti(Zc,p.name),ti(id,p.name),ti(Qm,p.name),ti(jl,p.name);const Ko=new yt({uid:kh,auth:p,email:Vt,emailVerified:Zp,displayName:st,isAnonymous:qp,photoURL:Rr,phoneNumber:$n,tenantId:Zc,stsTokenManager:Jm,createdAt:Qm,lastLoginAt:jl});return Rh&&Array.isArray(Rh)&&(Ko.providerData=Rh.map(Fh=>Object.assign({},Fh))),id&&(Ko._redirectEventId=id),Ko}static _fromIdTokenResponse(p,g,C=!1){return(0,l.Z)(function*(){const S=new Gi;S.updateFromServerResponse(g);const P=new yt({uid:g.localId,auth:p,stsTokenManager:S,isAnonymous:C});return yield Ze(P),P})()}}const ni=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(g,C){var S=this;return(0,l.Z)(function*(){S.storage[g]=C})()}_get(g){var C=this;return(0,l.Z)(function*(){const S=C.storage[g];return void 0===S?null:S})()}_remove(g){var C=this;return(0,l.Z)(function*(){delete C.storage[g]})()}_addListener(g,C){}_removeListener(g,C){}}return y.type="NONE",y})();function ri(y,p,g){return`firebase:${y}:${p}:${g}`}class vi{constructor(p,g,C){this.persistence=p,this.auth=g,this.userKey=C;const{config:S,name:P}=this.auth;this.fullUserKey=ri(this.userKey,S.apiKey,P),this.fullPersistenceKey=ri("persistence",S.apiKey,P),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,l.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?yt._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,l.Z)(function*(){if(g.persistence===p)return;const C=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,C?g.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,C="authUser"){return(0,l.Z)(function*(){if(!g.length)return new vi(Wt(ni),p,C);const S=(yield Promise.all(g.map(function(){var Se=(0,l.Z)(function*(it){if(yield it._isAvailable())return it});return function(it){return Se.apply(this,arguments)}}()))).filter(Se=>Se);let P=S[0]||Wt(ni);const q=ri(C,p.config.apiKey,p.name);let J=null;for(const Se of g)try{const it=yield Se._get(q);if(it){const st=yt._fromJSON(p,it);Se!==P&&(J=st),P=Se;break}}catch(it){}const ke=S.filter(Se=>Se._shouldAllowMigration);return P._shouldAllowMigration&&ke.length?(P=ke[0],J&&(yield P._set(q,J.toJSON())),yield Promise.all(g.map(function(){var Se=(0,l.Z)(function*(it){if(it!==P)try{yield it._remove(q)}catch(st){}});return function(it){return Se.apply(this,arguments)}}())),new vi(P,p,C)):new vi(P,p,C)})()}}function cn(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(un(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Xa(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Sr(p))return"Blackberry";if(tl(p))return"Webos";if(uo(p))return"Safari";if((p.includes("chrome/")||Ci(p))&&!p.includes("edge/"))return"Chrome";if(el(p))return"Android";{const C=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function Xa(y=(0,F.z$)()){return/firefox\//i.test(y)}function uo(y=(0,F.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ci(y=(0,F.z$)()){return/crios\//i.test(y)}function un(y=(0,F.z$)()){return/iemobile/i.test(y)}function el(y=(0,F.z$)()){return/android/i.test(y)}function Sr(y=(0,F.z$)()){return/blackberry/i.test(y)}function tl(y=(0,F.z$)()){return/webos/i.test(y)}function ho(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ln(y=(0,F.z$)()){return ho(y)||el(y)||tl(y)||Sr(y)||/windows phone/i.test(y)||un(y)}function us(y,p=[]){let g;switch(y){case"Browser":g=cn((0,F.z$)());break;case"Worker":g=`${cn((0,F.z$)())}-${y}`;break;default:g=y}const C=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${ue.SDK_VERSION}/${C}`}class ds{constructor(p,g){this.app=p,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ds(this),this.idTokenSubscription=new Ds(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(p,g){var C=this;return g&&(this._popupRedirectResolver=Wt(g)),this._initializationPromise=this.queue((0,l.Z)(function*(){var S,P;if(!C._deleted&&(C.persistenceManager=yield vi.create(C,p),!C._deleted)){if(null===(S=C._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch(q){}yield C.initializeCurrentUser(g),C.lastNotifiedUid=(null===(P=C.currentUser)||void 0===P?void 0:P.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,l.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g)}})()}initializeCurrentUser(p){var g=this;return(0,l.Z)(function*(){var C;let S=yield g.assertedPersistence.getCurrentUser();if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const P=null===(C=g.redirectUser)||void 0===C?void 0:C._redirectEventId,q=null==S?void 0:S._redirectEventId,J=yield g.tryRedirectSignIn(p);(!P||P===q)&&(null==J?void 0:J.user)&&(S=J.user)}return S?S._redirectEventId?(De(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===S._redirectEventId?g.directlySetCurrentUser(S):g.reloadAndSetCurrentUserOrClear(S)):g.reloadAndSetCurrentUserOrClear(S):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var g=this;return(0,l.Z)(function*(){let C=null;try{C=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch(S){yield g._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,l.Z)(function*(){try{yield Ze(p)}catch(C){if("auth/network-request-failed"!==C.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,l.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,l.Z)(function*(){const C=p?(0,F.m9)(p):null;return C&&De(C.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(C&&C._clone(g))})()}_updateCurrentUser(p){var g=this;return(0,l.Z)(function*(){if(!g._deleted)return p&&De(g.tenantId===p.tenantId,g,"tenant-id-mismatch"),g.queue((0,l.Z)(function*(){yield g.directlySetCurrentUser(p),g.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,l.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var g=this;return this.queue((0,l.Z)(function*(){yield g.assertedPersistence.setPersistence(Wt(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,g,C){return this.registerStateListener(this.authStateSubscription,p,g,C)}onIdTokenChanged(p,g,C){return this.registerStateListener(this.idTokenSubscription,p,g,C)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var C=this;return(0,l.Z)(function*(){const S=yield C.getOrInitRedirectPersistenceManager(g);return null===p?S.removeCurrentUser():S.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,l.Z)(function*(){if(!g.redirectPersistenceManager){const C=p&&Wt(p)||g._popupRedirectResolver;De(C,g,"argument-error"),g.redirectPersistenceManager=yield vi.create(g,[Wt(C._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,l.Z)(function*(){var C,S;return g._isInitialized&&(yield g.queue((0,l.Z)(function*(){}))),(null===(C=g._currentUser)||void 0===C?void 0:C._redirectEventId)===p?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,l.Z)(function*(){if(p===g.currentUser)return g.queue((0,l.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,C,S){if(this._deleted)return()=>{};const P="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return De(q,this,"internal-error"),q.then(()=>P(this.currentUser)),"function"==typeof g?p.addObserver(g,C,S):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,l.Z)(function*(){g.currentUser&&g.currentUser!==p&&(g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh()),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=us(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,l.Z)(function*(){const g={"X-Client-Version":p.clientVersion};return p.app.options.appId&&(g["X-Firebase-gmpid"]=p.app.options.appId),g})()}}function nr(y){return(0,F.m9)(y)}class Ds{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function wi(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function mm(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class ga{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return cr("not implemented")}_getIdTokenResponse(p){return cr("not implemented")}_linkToIdToken(p,g){return cr("not implemented")}_getReauthenticationResolver(p){return cr("not implemented")}}function np(y,p){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,l.Z)(function*(y,p){return bt(y,"POST","/v1/accounts:resetPassword",on(y,p))})).apply(this,arguments)}function rp(y,p){return vu.apply(this,arguments)}function vu(){return(vu=(0,l.Z)(function*(y,p){return bt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function _m(y,p){return nl.apply(this,arguments)}function nl(){return(nl=(0,l.Z)(function*(y,p){return bt(y,"POST","/v1/accounts:update",on(y,p))})).apply(this,arguments)}function Qd(){return(Qd=(0,l.Z)(function*(y,p){return Z(y,"POST","/v1/accounts:signInWithPassword",on(y,p))})).apply(this,arguments)}function Cu(y,p){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,l.Z)(function*(y,p){return bt(y,"POST","/v1/accounts:sendOobCode",on(y,p))})).apply(this,arguments)}function ym(y,p){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,l.Z)(function*(y,p){return Cu(y,p)})).apply(this,arguments)}function vm(y,p){return ip.apply(this,arguments)}function ip(){return(ip=(0,l.Z)(function*(y,p){return Cu(y,p)})).apply(this,arguments)}function hc(y,p){return rl.apply(this,arguments)}function rl(){return(rl=(0,l.Z)(function*(y,p){return Cu(y,p)})).apply(this,arguments)}function wu(y,p){return eh.apply(this,arguments)}function eh(){return(eh=(0,l.Z)(function*(y,p){return Cu(y,p)})).apply(this,arguments)}function hs(){return(hs=(0,l.Z)(function*(y,p){return Z(y,"POST","/v1/accounts:signInWithEmailLink",on(y,p))})).apply(this,arguments)}function po(){return(po=(0,l.Z)(function*(y,p){return Z(y,"POST","/v1/accounts:signInWithEmailLink",on(y,p))})).apply(this,arguments)}class _a extends ga{constructor(p,g,C,S=null){super("password",C),this._email=p,this._password=g,this._tenantId=S}static _fromEmailAndPassword(p,g){return new _a(p,g,"password")}static _fromEmailAndCode(p,g,C=null){return new _a(p,g,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,l.Z)(function*(){switch(g.signInMethod){case"password":return function(y,p){return Qd.apply(this,arguments)}(p,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(y,p){return hs.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:Zt(p,"internal-error")}})()}_linkToIdToken(p,g){var C=this;return(0,l.Z)(function*(){switch(C.signInMethod){case"password":return rp(p,{idToken:g,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function(y,p){return po.apply(this,arguments)}(p,{idToken:g,email:C._email,oobCode:C._password});default:Zt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function go(y,p){return bu.apply(this,arguments)}function bu(){return(bu=(0,l.Z)(function*(y,p){return Z(y,"POST","/v1/accounts:signInWithIdp",on(y,p))})).apply(this,arguments)}class vr extends ga{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new vr(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):Zt("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:C,signInMethod:S}=g,P=se(g,["providerId","signInMethod"]);if(!C||!S)return null;const q=new vr(C,S);return q.idToken=P.idToken||void 0,q.accessToken=P.accessToken||void 0,q.secret=P.secret,q.nonce=P.nonce,q.pendingToken=P.pendingToken||null,q}_getIdTokenResponse(p){return go(p,this.buildRequest())}_linkToIdToken(p,g){const C=this.buildRequest();return C.idToken=g,go(p,C)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,go(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,F.xO)(g)}return p}}function Ss(y,p){return il.apply(this,arguments)}function il(){return(il=(0,l.Z)(function*(y,p){return bt(y,"POST","/v1/accounts:sendVerificationCode",on(y,p))})).apply(this,arguments)}function Mr(){return(Mr=(0,l.Z)(function*(y,p){return Z(y,"POST","/v1/accounts:signInWithPhoneNumber",on(y,p))})).apply(this,arguments)}function Tu(){return(Tu=(0,l.Z)(function*(y,p){const g=yield Z(y,"POST","/v1/accounts:signInWithPhoneNumber",on(y,p));if(g.temporaryProof)throw Xe(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const pc={USER_NOT_FOUND:"user-not-found"};function sl(){return(sl=(0,l.Z)(function*(y,p){return Z(y,"POST","/v1/accounts:signInWithPhoneNumber",on(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),pc)})).apply(this,arguments)}class ko extends ga{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new ko({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new ko({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function(y,p){return Mr.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function(y,p){return Tu.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(y,p){return sl.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:C,verificationCode:S}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:C,code:S}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:C,phoneNumber:S,temporaryProof:P}=p;return C||g||S||P?new ko({verificationId:g,verificationCode:C,phoneNumber:S,temporaryProof:P}):null}}class Ro{constructor(p){var g,C,S,P,q,J;const ke=(0,F.zd)((0,F.pd)(p)),Se=null!==(g=ke.apiKey)&&void 0!==g?g:null,it=null!==(C=ke.oobCode)&&void 0!==C?C:null,st=function(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=ke.mode)&&void 0!==S?S:null);De(Se&&it&&st,"argument-error"),this.apiKey=Se,this.operation=st,this.code=it,this.continueUrl=null!==(P=ke.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(q=ke.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(J=ke.tenantId)&&void 0!==J?J:null}static parseLink(p){const g=function(y){const p=(0,F.zd)((0,F.pd)(y)).link,g=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,C=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(C?(0,F.zd)((0,F.pd)(C)).link:null)||C||g||p||y}(p);try{return new Ro(g)}catch(C){return null}}}let No=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,C){return _a._fromEmailAndPassword(g,C)}static credentialWithLink(g,C){const S=Ro.parseLink(C);return De(S,"argument-error"),_a._fromEmailAndCode(g,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class zr{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Ki extends zr{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class qn extends Ki{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return De("providerId"in g&&"signInMethod"in g,"argument-error"),vr._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return De(p.idToken||p.accessToken,"argument-error"),vr._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return qn.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return qn.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:C,oauthTokenSecret:S,pendingToken:P,nonce:q,providerId:J}=p;if(!C&&!S&&!g&&!P||!J)return null;try{return new qn(J)._credential({idToken:g,accessToken:C,nonce:q,pendingToken:P})}catch(ke){return null}}}let gc=(()=>{class y extends Ki{constructor(){super("facebook.com")}static credential(g){return vr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(C){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Fo=(()=>{class y extends Ki{constructor(){super("google.com"),this.addScope("profile")}static credential(g,C){return vr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:C})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:C,oauthAccessToken:S}=g;if(!C&&!S)return null;try{return y.credential(C,S)}catch(P){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Lo=(()=>{class y extends Ki{constructor(){super("github.com")}static credential(g){return vr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(C){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ms extends ga{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return go(p,this.buildRequest())}_linkToIdToken(p,g){const C=this.buildRequest();return C.idToken=g,go(p,C)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,go(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:C,signInMethod:S,pendingToken:P}=g;return C&&S&&P&&C===S?new Ms(C,P):null}static _create(p,g){return new Ms(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Uo extends zr{constructor(p){De(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Uo.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Uo.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=Ms.fromJSON(p);return De(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:C}=p;if(!g||!C)return null;try{return Ms._create(C,g)}catch(S){return null}}}let Gr=(()=>{class y extends Ki{constructor(){super("twitter.com")}static credential(g,C){return vr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:C})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:C,oauthTokenSecret:S}=g;if(!C||!S)return null;try{return y.credential(C,S)}catch(P){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function al(y,p){return mo.apply(this,arguments)}function mo(){return(mo=(0,l.Z)(function*(y,p){return Z(y,"POST","/v1/accounts:signUp",on(y,p))})).apply(this,arguments)}class et{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,C,S=!1){return(0,l.Z)(function*(){const P=yield yt._fromIdTokenResponse(p,C,S),q=mc(C);return new et({user:P,providerId:q,_tokenResponse:C,operationType:g})})()}static _forOperation(p,g,C){return(0,l.Z)(function*(){yield p._updateTokensIfNecessary(C,!0);const S=mc(C);return new et({user:p,providerId:S,_tokenResponse:C,operationType:g})})()}}function mc(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ya(){return(ya=(0,l.Z)(function*(y){var p;const g=nr(y);if(yield g._initializationPromise,null===(p=g.currentUser)||void 0===p?void 0:p.isAnonymous)return new et({user:g.currentUser,providerId:null,operationType:"signIn"});const C=yield al(g,{returnSecureToken:!0}),S=yield et._fromIdTokenResponse(g,"signIn",C,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class cl extends F.ZR{constructor(p,g,C,S){var P;super(g.code,g.message),this.operationType=C,this.user=S,Object.setPrototypeOf(this,cl.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:g.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(p,g,C,S){return new cl(p,g,C,S)}}function _c(y,p,g,C){return("reauthenticate"===p?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?cl._fromErrorAndOperation(y,P,p,C):P})}function yc(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function Ae(){return(Ae=(0,l.Z)(function*(y,p){const g=(0,F.m9)(y);yield An(!0,g,p);const{providerUserInfo:C}=yield mr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),S=yc(C||[]);return g.providerData=g.providerData.filter(P=>S.has(P.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Lt(y,p){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,l.Z)(function*(y,p,g=!1){const C=yield mn(y,p._linkToIdToken(y.auth,yield y.getIdToken()),g);return et._forOperation(y,"link",C)})).apply(this,arguments)}function An(y,p,g){return ul.apply(this,arguments)}function ul(){return(ul=(0,l.Z)(function*(y,p,g){yield Ze(p);const S=!1===y?"provider-already-linked":"no-such-provider";De(yc(p.providerData).has(g)===y,p.auth,S)})).apply(this,arguments)}function Os(y,p){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,l.Z)(function*(y,p,g=!1){const{auth:C}=y,S="reauthenticate";try{const P=yield mn(y,_c(C,S,p,y),g);De(P.idToken,C,"internal-error");const q=Oo(P.idToken);De(q,C,"internal-error");const{sub:J}=q;return De(y.uid===J,C,"user-mismatch"),et._forOperation(y,S,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&Zt(C,"user-mismatch"),P}})).apply(this,arguments)}function vc(y,p){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,l.Z)(function*(y,p,g=!1){const C="signIn",S=yield _c(y,C,p),P=yield et._fromIdTokenResponse(y,C,S);return g||(yield y._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Au(y,p){return Du.apply(this,arguments)}function Du(){return(Du=(0,l.Z)(function*(y,p){return vc(nr(y),p)})).apply(this,arguments)}function dl(y,p){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,l.Z)(function*(y,p){const g=(0,F.m9)(y);return yield An(!1,g,p.providerId),Lt(g,p)})).apply(this,arguments)}function ur(y,p){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,l.Z)(function*(y,p){return Os((0,F.m9)(y),p)})).apply(this,arguments)}function hl(y,p){return _o.apply(this,arguments)}function _o(){return(_o=(0,l.Z)(function*(y,p){return Z(y,"POST","/v1/accounts:signInWithCustomToken",on(y,p))})).apply(this,arguments)}function fl(){return(fl=(0,l.Z)(function*(y,p){const g=nr(y),C=yield hl(g,{token:p,returnSecureToken:!0}),S=yield et._fromIdTokenResponse(g,"signIn",C);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class pl{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?gl._fromServerResponse(p,g):Zt(p,"internal-error")}}class gl extends pl{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new gl(g)}}function Cc(y,p,g){var C;De((null===(C=g.url)||void 0===C?void 0:C.length)>0,y,"invalid-continue-uri"),De(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(De(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(De(g.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function va(){return(va=(0,l.Z)(function*(y,p,g){const C=(0,F.m9)(y),S={requestType:"PASSWORD_RESET",email:p};g&&Cc(C,S,g),yield vm(C,S)})).apply(this,arguments)}function Ca(){return(Ca=(0,l.Z)(function*(y,p,g){yield np((0,F.m9)(y),{oobCode:p,newPassword:g})})).apply(this,arguments)}function Ec(){return(Ec=(0,l.Z)(function*(y,p){yield _m((0,F.m9)(y),{oobCode:p})})).apply(this,arguments)}function bc(y,p){return _l.apply(this,arguments)}function _l(){return(_l=(0,l.Z)(function*(y,p){const g=(0,F.m9)(y),C=yield np(g,{oobCode:p}),S=C.requestType;switch(De(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":De(C.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":De(C.mfaInfo,g,"internal-error");default:De(C.email,g,"internal-error")}let P=null;return C.mfaInfo&&(P=pl._fromServerResponse(nr(g),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:P},operation:S}})).apply(this,arguments)}function yl(){return(yl=(0,l.Z)(function*(y,p){const{data:g}=yield bc((0,F.m9)(y),p);return g.email})).apply(this,arguments)}function vl(){return(vl=(0,l.Z)(function*(y,p,g){const C=nr(y),S=yield al(C,{returnSecureToken:!0,email:p,password:g}),P=yield et._fromIdTokenResponse(C,"signIn",S);return yield C._updateCurrentUser(P.user),P})).apply(this,arguments)}function _n(){return(_n=(0,l.Z)(function*(y,p,g){const C=(0,F.m9)(y),S={requestType:"EMAIL_SIGNIN",email:p};De(g.handleCodeInApp,C,"argument-error"),g&&Cc(C,S,g),yield hc(C,S)})).apply(this,arguments)}function wa(){return(wa=(0,l.Z)(function*(y,p,g){const C=(0,F.m9)(y),S=No.credentialWithLink(p,g||ct());return De(S._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Au(C,S)})).apply(this,arguments)}function op(y,p){return oh.apply(this,arguments)}function oh(){return(oh=(0,l.Z)(function*(y,p){return bt(y,"POST","/v1/accounts:createAuthUri",on(y,p))})).apply(this,arguments)}function ap(){return(ap=(0,l.Z)(function*(y,p){const C={identifier:p,continueUri:_t()?ct():"http://localhost"},{signinMethods:S}=yield op((0,F.m9)(y),C);return S||[]})).apply(this,arguments)}function vo(){return(vo=(0,l.Z)(function*(y,p){const g=(0,F.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&Cc(g.auth,S,p);const{email:P}=yield ym(g.auth,S);P!==y.email&&(yield y.reload())})).apply(this,arguments)}function Cl(){return(Cl=(0,l.Z)(function*(y,p,g){const C=(0,F.m9)(y),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};g&&Cc(C.auth,P,g);const{email:q}=yield wu(C.auth,P);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function lh(y,p){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,l.Z)(function*(y,p){return bt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function wn(){return(wn=(0,l.Z)(function*(y,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const C=(0,F.m9)(y),P={idToken:yield C.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},q=yield mn(C,lh(C.auth,P));C.displayName=q.displayName||null,C.photoURL=q.photoUrl||null;const J=C.providerData.find(({providerId:ke})=>"password"===ke);J&&(J.displayName=C.displayName,J.photoURL=C.photoURL),yield C._updateTokensIfNecessary(q)})).apply(this,arguments)}function lp(y,p,g){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,l.Z)(function*(y,p,g){const{auth:C}=y,P={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(P.email=p),g&&(P.password=g);const q=yield mn(y,rp(C,P));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class El{constructor(p,g,C={}){this.isNewUser=p,this.providerId=g,this.profile=C}}class Ou extends El{constructor(p,g,C,S){super(p,g,C),this.username=S}}class Tm extends El{constructor(p,g){super(p,"facebook.com",g)}}class xv extends Ou{constructor(p,g){super(p,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class tn extends El{constructor(p,g){super(p,"google.com",g)}}class Un extends Ou{constructor(p,g,C){super(p,"twitter.com",g,C)}}function Pr(y){const{user:p,_tokenResponse:g}=y;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(y){var p,g;if(!y)return null;const{providerId:C}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},P=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!C&&(null==y?void 0:y.idToken)){const q=null===(g=null===(p=Oo(y.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new El(P,"anonymous"!==q&&"custom"!==q?q:null)}if(!C)return null;switch(C){case"facebook.com":return new Tm(P,S);case"github.com":return new xv(P,S);case"google.com":return new tn(P,S);case"twitter.com":return new Un(P,S,y.screenName||null);case"custom":case"anonymous":return new El(P,null);default:return new El(P,C,S)}}(g)}class rt{constructor(p,g){this.type=p,this.credential=g}static _fromIdtoken(p){return new rt("enroll",p)}static _fromMfaPendingCredential(p){return new rt("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,C;if(null==p?void 0:p.multiFactorSession){if(null===(g=p.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return rt._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(C=p.multiFactorSession)||void 0===C?void 0:C.idToken)return rt._fromIdtoken(p.multiFactorSession.idToken)}return null}}class bl{constructor(p,g,C){this.session=p,this.hints=g,this.signInResolver=C}static _fromError(p,g){const C=nr(p),S=g.customData._serverResponse,P=(S.mfaInfo||[]).map(J=>pl._fromServerResponse(C,J));De(S.mfaPendingCredential,C,"internal-error");const q=rt._fromMfaPendingCredential(S.mfaPendingCredential);return new bl(q,P,function(){var J=(0,l.Z)(function*(ke){const Se=yield ke._process(C,q);delete S.mfaInfo,delete S.mfaPendingCredential;const it=Object.assign(Object.assign({},S),{idToken:Se.idToken,refreshToken:Se.refreshToken});switch(g.operationType){case"signIn":const st=yield et._fromIdTokenResponse(C,g.operationType,it);return yield C._updateCurrentUser(st.user),st;case"reauthenticate":return De(g.user,C,"internal-error"),et._forOperation(g.user,g.operationType,it);default:Zt(C,"internal-error")}});return function(ke){return J.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,l.Z)(function*(){return g.signInResolver(p)})()}}function ku(y,p){return bt(y,"POST","/v2/accounts/mfaEnrollment:start",on(y,p))}class ba{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(C=>pl._fromServerResponse(p.auth,C)))})}static _fromUser(p){return new ba(p)}getSession(){var p=this;return(0,l.Z)(function*(){return rt._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,g){var C=this;return(0,l.Z)(function*(){const S=p,P=yield C.getSession(),q=yield mn(C.user,S._process(C.user.auth,P,g));return yield C.user._updateTokensIfNecessary(q),C.user.reload()})()}unenroll(p){var g=this;return(0,l.Z)(function*(){const C="string"==typeof p?p:p.uid,S=yield g.user.getIdToken(),P=yield mn(g.user,function(y,p){return bt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",on(y,p))}(g.user.auth,{idToken:S,mfaEnrollmentId:C}));g.enrolledFactors=g.enrolledFactors.filter(({uid:q})=>q!==C),yield g.user._updateTokensIfNecessary(P);try{yield g.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const ii=new WeakMap,xs="__sak";class Ru{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(xs,"1"),this.storage.removeItem(xs),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ei=(()=>{class y extends Ru{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,C)=>this.onStorageEvent(g,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const y=(0,F.z$)();return uo(y)||ho(y)}()&&function(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ln(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const C of Object.keys(this.listeners)){const S=this.storage.getItem(C),P=this.localCache[C];S!==P&&g(C,P,S)}}onStorageEvent(g,C=!1){if(!g.key)return void this.forAllChangedKeys((J,ke,Se)=>{this.notifyListeners(J,Se)});const S=g.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(S);if(g.newValue!==J)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!C)return}const P=()=>{const J=this.storage.getItem(S);!C&&this.localCache[S]===J||this.notifyListeners(S,J)},q=this.storage.getItem(S);(0,F.w1)()&&10===document.documentMode&&q!==g.newValue&&g.newValue!==g.oldValue?setTimeout(P,10):P()}notifyListeners(g,C){this.localCache[g]=C;const S=this.listeners[g];if(S)for(const P of Array.from(S))P(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,C,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:C,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(C)}_removeListener(g,C){this.listeners[g]&&(this.listeners[g].delete(C),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,C){var S=()=>super._set,P=this;return(0,l.Z)(function*(){yield S().call(P,g,C),P.localCache[g]=JSON.stringify(C)})()}_get(g){var C=()=>super._get,S=this;return(0,l.Z)(function*(){const P=yield C().call(S,g);return S.localCache[g]=JSON.stringify(P),P})()}_remove(g){var C=()=>super._remove,S=this;return(0,l.Z)(function*(){yield C().call(S,g),delete S.localCache[g]})()}}return y.type="LOCAL",y})(),nn=(()=>{class y extends Ru{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,C){}_removeListener(g,C){}}return y.type="SESSION",y})();let Am=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const C=this.receivers.find(P=>P.isListeningto(g));if(C)return C;const S=new y(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var C=this;return(0,l.Z)(function*(){const S=g,{eventId:P,eventType:q,data:J}=S.data,ke=C.handlersMap[q];if(!(null==ke?void 0:ke.size))return;S.ports[0].postMessage({status:"ack",eventId:P,eventType:q});const Se=Array.from(ke).map(function(){var st=(0,l.Z)(function*(Vt){return Vt(S.origin,J)});return function(Vt){return st.apply(this,arguments)}}()),it=yield function(y){return Promise.all(y.map(function(){var p=(0,l.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(C){return{fulfilled:!1,reason:C}}});return function(g){return p.apply(this,arguments)}}()))}(Se);S.ports[0].postMessage({status:"done",eventId:P,eventType:q,response:it})})()}_subscribe(g,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(C)}_unsubscribe(g,C){this.handlersMap[g]&&C&&this.handlersMap[g].delete(C),(!C||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Il(y="",p=10){let g="";for(let C=0;C<p;C++)g+=Math.floor(10*Math.random());return y+g}class Lu{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,C=50){var S=this;return(0,l.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let q,J;return new Promise((ke,Se)=>{const it=Il("",20);P.port1.start();const st=setTimeout(()=>{Se(new Error("unsupported_event"))},C);J={messageChannel:P,onMessage(Vt){const $n=Vt;if($n.data.eventId===it)switch($n.data.status){case"ack":clearTimeout(st),q=setTimeout(()=>{Se(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),ke($n.data.response);break;default:clearTimeout(st),clearTimeout(q),Se(new Error("invalid_response"))}}},S.handlers.add(J),P.port1.addEventListener("message",J.onMessage),S.target.postMessage({eventType:p,eventId:it,data:g},[P.port2])}).finally(()=>{J&&S.removeMessageHandler(J)})})()}}function En(){return window}function Ta(){return void 0!==En().WorkerGlobalScope&&"function"==typeof En().importScripts}function ks(){return(ks=(0,l.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const bi="firebaseLocalStorageDb",Ti="firebaseLocalStorage",dp="fbase_key";class Aa{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function bn(y,p){return y.transaction([Ti],p?"readwrite":"readonly").objectStore(Ti)}function hh(){const y=indexedDB.open(bi,1);return new Promise((p,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const C=y.result;try{C.createObjectStore(Ti,{keyPath:dp})}catch(S){g(S)}}),y.addEventListener("success",(0,l.Z)(function*(){const C=y.result;C.objectStoreNames.contains(Ti)?p(C):(C.close(),yield function(){const y=indexedDB.deleteDatabase(bi);return new Aa(y).toPromise()}(),p(yield hh()))}))})}function fh(y,p,g){return ph.apply(this,arguments)}function ph(){return(ph=(0,l.Z)(function*(y,p,g){const C=bn(y,!0).put({[dp]:p,value:g});return new Aa(C).toPromise()})).apply(this,arguments)}function Uu(){return(Uu=(0,l.Z)(function*(y,p){const g=bn(y,!1).get(p),C=yield new Aa(g).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Vu(y,p){const g=bn(y,!0).delete(p);return new Aa(g).toPromise()}const Ns=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,l.Z)(function*(){return g.db||(g.db=yield hh()),g.db})()}_withRetries(g){var C=this;return(0,l.Z)(function*(){let S=0;for(;;)try{const P=yield C._openDb();return yield g(P)}catch(P){if(S++>3)throw P;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,l.Z)(function*(){return Ta()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,l.Z)(function*(){g.receiver=Am._getInstance(Ta()?self:null),g.receiver._subscribe("keyChanged",function(){var C=(0,l.Z)(function*(S,P){return{keyProcessed:(yield g._poll()).includes(P.key)}});return function(S,P){return C.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var C=(0,l.Z)(function*(S,P){return["keyChanged"]});return function(S,P){return C.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,l.Z)(function*(){var C,S;if(g.activeServiceWorker=yield function(){return ks.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Lu(g.activeServiceWorker);const P=yield g.sender._send("ping",{},800);!P||(null===(C=P[0])||void 0===C?void 0:C.fulfilled)&&(null===(S=P[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var C=this;return(0,l.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:g},C.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const g=yield hh();return yield fh(g,xs,"1"),yield Vu(g,xs),!0}catch(g){}return!1})()}_withPendingWrite(g){var C=this;return(0,l.Z)(function*(){C.pendingWrites++;try{yield g()}finally{C.pendingWrites--}})()}_set(g,C){var S=this;return(0,l.Z)(function*(){return S._withPendingWrite((0,l.Z)(function*(){return yield S._withRetries(P=>fh(P,g,C)),S.localCache[g]=C,S.notifyServiceWorker(g)}))})()}_get(g){var C=this;return(0,l.Z)(function*(){const S=yield C._withRetries(P=>function(y,p){return Uu.apply(this,arguments)}(P,g));return C.localCache[g]=S,S})()}_remove(g){var C=this;return(0,l.Z)(function*(){return C._withPendingWrite((0,l.Z)(function*(){return yield C._withRetries(S=>Vu(S,g)),delete C.localCache[g],C.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,l.Z)(function*(){const C=yield g._withRetries(q=>{const J=bn(q,!1).getAll();return new Aa(J).toPromise()});if(!C)return[];if(0!==g.pendingWrites)return[];const S=[],P=new Set;for(const{fbase_key:q,value:J}of C)P.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(J)&&(g.notifyListeners(q,J),S.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!P.has(q)&&(g.notifyListeners(q,null),S.push(q));return S})()}notifyListeners(g,C){this.localCache[g]=C;const S=this.listeners[g];if(S)for(const P of Array.from(S))P(C)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(C)}_removeListener(g,C){this.listeners[g]&&(this.listeners[g].delete(C),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Da(y,p){return bt(y,"POST","/v2/accounts/mfaSignIn:start",on(y,p))}function jn(){return(jn=(0,l.Z)(function*(y){return(yield bt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Bu(y){return new Promise((p,g)=>{const C=document.createElement("script");C.setAttribute("src",y),C.onload=p,C.onerror=S=>{const P=Rn("internal-error");P.customData=S,g(P)},C.type="text/javascript",C.charset="UTF-8",function(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(C)})}function Mc(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Sa=1e12;class Dl{constructor(p){this.auth=p,this.counter=Sa,this._widgets=new Map}render(p,g){const C=this.counter;return this._widgets.set(C,new mh(p,this.auth.name,g||{})),this.counter++,C}reset(p){var g;const C=p||Sa;null===(g=this._widgets.get(C))||void 0===g||g.delete(),this._widgets.delete(C)}getResponse(p){var g;return(null===(g=this._widgets.get(p||Sa))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,l.Z)(function*(){var C;return null===(C=g._widgets.get(p||Sa))||void 0===C||C.execute(),""})()}}class mh{constructor(p,g,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof p?document.getElementById(p):p;De(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(y){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<50;C++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}();const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ma=Mc("rcb"),ai=new en(3e4,6e4);class $o{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!En().grecaptcha}load(p,g=""){return De((y=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y),p,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(En().grecaptcha):new Promise((C,S)=>{const P=En().setTimeout(()=>{S(Rn(p,"network-request-failed"))},ai.get());En()[Ma]=()=>{En().clearTimeout(P),delete En()[Ma];const J=En().grecaptcha;if(!J)return void S(Rn(p,"internal-error"));const ke=J.render;J.render=(Se,it)=>{const st=ke(Se,it);return this.counter++,st},this.hostLanguage=g,C(J)},Bu(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Ma,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(P),S(Rn(p,"internal-error"))})});var y}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!En().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Dm{load(p){return(0,l.Z)(function*(){return new Dl(p)})()}clearedOneInstance(){}}const Sm="recaptcha",pp={theme:"light",type:"image"};class Oc{constructor(p,g=Object.assign({},pp),C){this.parameters=g,this.type=Sm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nr(C),this.isInvisible="invisible"===this.parameters.size,De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof p?document.getElementById(p):p;De(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Dm:new $o,this.validateStartingState()}verify(){var p=this;return(0,l.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),C=p.getAssertedRecaptcha();return C.getResponse(g)||new Promise(P=>{const q=J=>{!J||(p.tokenChangeListeners.delete(q),P(J))};p.tokenChangeListeners.add(q),p.isInvisible&&C.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){De(!this.parameters.sitekey,this.auth,"argument-error"),De(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(C=>C(g)),"function"==typeof p)p(g);else if("string"==typeof p){const C=En()[p];"function"==typeof C&&C(g)}}}assertNotDestroyed(){De(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,l.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const C=document.createElement("div");g.appendChild(C),g=C}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,l.Z)(function*(){De(_t()&&!Ta(),p.auth,"internal-error"),yield function(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function(y){return jn.apply(this,arguments)}(p.auth);De(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return De(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ho{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=ko._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function Ml(){return(Ml=(0,l.Z)(function*(y,p,g){const C=nr(y),S=yield zo(C,p,(0,F.m9)(g));return new Ho(S,P=>Au(C,P))})).apply(this,arguments)}function Pl(){return(Pl=(0,l.Z)(function*(y,p,g){const C=(0,F.m9)(y);yield An(!1,C,"phone");const S=yield zo(C.auth,p,(0,F.m9)(g));return new Ho(S,P=>dl(C,P))})).apply(this,arguments)}function Ol(){return(Ol=(0,l.Z)(function*(y,p,g){const C=(0,F.m9)(y),S=yield zo(C.auth,p,(0,F.m9)(g));return new Ho(S,P=>ur(C,P))})).apply(this,arguments)}function zo(y,p,g){return xc.apply(this,arguments)}function xc(){return(xc=(0,l.Z)(function*(y,p,g){var C;const S=yield g.verify();try{let P;if(De("string"==typeof S,y,"argument-error"),De(g.type===Sm,y,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const q=P.session;if("phoneNumber"in P)return De("enroll"===q.type,y,"internal-error"),(yield ku(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{De("signin"===q.type,y,"internal-error");const J=(null===(C=P.multiFactorHint)||void 0===C?void 0:C.uid)||P.multiFactorUid;return De(J,y,"missing-multi-factor-info"),(yield Da(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Ss(y,{phoneNumber:P.phoneNumber,recaptchaToken:S});return q}}finally{g._reset()}})).apply(this,arguments)}function ju(){return(ju=(0,l.Z)(function*(y,p){yield Lt((0,F.m9)(y),p)})).apply(this,arguments)}let xl=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=nr(g)}verifyPhoneNumber(g,C){return zo(this.auth,g,(0,F.m9)(C))}static credential(g,C){return ko._fromVerification(g,C)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:C,temporaryProof:S}=g;return C&&S?ko._fromTokenResponse(C,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function T(y,p){return p?Wt(p):(De(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class D extends ga{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return go(p,this._buildIdpRequest())}_linkToIdToken(p,g){return go(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return go(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function k(y){return vc(y.auth,new D(y),y.bypassAuthState)}function V(y){const{auth:p,user:g}=y;return De(g,p,"internal-error"),Os(g,new D(y),y.bypassAuthState)}function W(y){return oe.apply(this,arguments)}function oe(){return(oe=(0,l.Z)(function*(y){const{auth:p,user:g}=y;return De(g,p,"internal-error"),Lt(g,new D(y),y.bypassAuthState)})).apply(this,arguments)}class Oe{constructor(p,g,C,S,P=!1){this.auth=p,this.resolver=C,this.user=S,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,l.Z)(function*(C,S){p.pendingPromise={resolve:C,reject:S};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(C,S){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,l.Z)(function*(){const{urlResponse:C,sessionId:S,postBody:P,tenantId:q,error:J,type:ke}=p;if(J)return void g.reject(J);const Se={auth:g.auth,requestUri:C,sessionId:S,tenantId:q||void 0,postBody:P||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(ke)(Se))}catch(it){g.reject(it)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return k;case"linkViaPopup":case"linkViaRedirect":return W;case"reauthViaPopup":case"reauthViaRedirect":return V;default:Zt(this.auth,"internal-error")}}resolve(p){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const We=new en(2e3,1e4);function Ot(){return(Ot=(0,l.Z)(function*(y,p,g){const C=nr(y);ji(y,p,zr);const S=T(C,g);return new Fs(C,"signInViaPopup",p,S).executeNotNull()})).apply(this,arguments)}function xr(){return(xr=(0,l.Z)(function*(y,p,g){const C=(0,F.m9)(y);ji(C.auth,p,zr);const S=T(C.auth,g);return new Fs(C.auth,"reauthViaPopup",p,S,C).executeNotNull()})).apply(this,arguments)}function yn(){return(yn=(0,l.Z)(function*(y,p,g){const C=(0,F.m9)(y);ji(C.auth,p,zr);const S=T(C.auth,g);return new Fs(C.auth,"linkViaPopup",p,S,C).executeNotNull()})).apply(this,arguments)}let Fs=(()=>{class y extends Oe{constructor(g,C,S,P,q){super(g,C,P,q),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,l.Z)(function*(){const C=yield g.execute();return De(C,g.auth,"internal-error"),C})()}onExecution(){var g=this;return(0,l.Z)(function*(){Qn(1===g.filter.length,"Popup operations only handle one event");const C=Il();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],C),g.authWindow.associatedEvent=C,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(Rn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Rn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var C,S;this.pollId=(null===(S=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Rn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,We.get())};g()}}return y.currentPopupAction=null,y})();const ys=new Map;class vs extends Oe{constructor(p,g,C=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,C),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,l.Z)(function*(){let C=ys.get(g.auth._key());if(!C){try{const P=(yield function(y,p){return Us.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;C=()=>Promise.resolve(P)}catch(S){C=()=>Promise.reject(S)}ys.set(g.auth._key(),C)}return g.bypassAuthState||ys.set(g.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,C=this;return(0,l.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(C,p);if("unknown"!==p.type){if(p.eventId){const S=yield C.auth._redirectUserForId(p.eventId);if(S)return C.user=S,g().call(C,p);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function Us(){return(Us=(0,l.Z)(function*(y,p){const g=kl(p),C=Go(y);if(!(yield C._isAvailable()))return!1;const S="true"===(yield C._get(g));return yield C._remove(g),S})).apply(this,arguments)}function yh(y,p){return gp.apply(this,arguments)}function gp(){return(gp=(0,l.Z)(function*(y,p){return Go(y)._set(kl(p),"true")})).apply(this,arguments)}function Go(y){return Wt(y._redirectPersistence)}function kl(y){return ri("pendingRedirect",y.config.apiKey,y.name)}function mp(){return(mp=(0,l.Z)(function*(y,p,g){const C=nr(y);ji(y,p,zr);const S=T(C,g);return yield yh(S,C),S._openRedirect(C,p,"signInViaRedirect")})).apply(this,arguments)}function vh(){return(vh=(0,l.Z)(function*(y,p,g){const C=(0,F.m9)(y);ji(C.auth,p,zr);const S=T(C.auth,g);yield yh(S,C.auth);const P=yield vE(C);return S._openRedirect(C.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function Ai(){return(Ai=(0,l.Z)(function*(y,p,g){const C=(0,F.m9)(y);ji(C.auth,p,zr);const S=T(C.auth,g);yield An(!1,C,p.providerId),yield yh(S,C.auth);const P=yield vE(C);return S._openRedirect(C.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function Pa(){return(Pa=(0,l.Z)(function*(y,p){return yield nr(y)._initializationPromise,Hu(y,p,!1)})).apply(this,arguments)}function Hu(y,p){return yp.apply(this,arguments)}function yp(){return(yp=(0,l.Z)(function*(y,p,g=!1){const C=nr(y),S=T(C,p),q=yield new vs(C,S,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield C._persistUserIfCurrent(q.user),yield C._setRedirectUser(null,p)),q})).apply(this,arguments)}function vE(y){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,l.Z)(function*(y){const p=Il(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class Ch{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(p,C)&&(g=!0,this.sendToConsumer(p,C),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wh(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var C;if(p.error&&!wh(p)){const S=(null===(C=p.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";g.onError(Rn(this.auth,S))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const C=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&C}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cp(p))}saveEventToCache(p){this.cachedEventUids.add(Cp(p)),this.lastProcessedEventTime=Date.now()}}function Cp(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function wh({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Pm(y){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,l.Z)(function*(y,p={}){return bt(y,"GET","/v1/projects",p)})).apply(this,arguments)}const Rv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ep=/^https?/;function Cs(){return(Cs=(0,l.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield Pm(y);for(const g of p)try{if(zu(g))return}catch(C){}Zt(y,"unauthorized-domain")})).apply(this,arguments)}function zu(y){const p=ct(),{protocol:g,hostname:C}=new URL(p);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===C?"chrome-extension:"===g&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===C}if(!Ep.test(g))return!1;if(Rv.test(y))return C===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(C)}const bp=new en(3e4,6e4);function Om(){const y=En().___jsl;if(null==y?void 0:y.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let bh=null;function wE(y){return bh=bh||function(y){return new Promise((p,g)=>{var C,S,P;function q(){Om(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Om(),g(Rn(y,"network-request-failed"))},timeout:bp.get()})}if(null===(S=null===(C=En().gapi)||void 0===C?void 0:C.iframes)||void 0===S?void 0:S.Iframe)p(gapi.iframes.getContext());else{if(!(null===(P=En().gapi)||void 0===P?void 0:P.load)){const J=Mc("iframefcb");return En()[J]=()=>{gapi.load?q():g(Rn(y,"network-request-failed"))},Bu(`https://apis.google.com/js/api.js?onload=${J}`).catch(ke=>g(ke))}q()}}).catch(p=>{throw bh=null,p})}(y),bh}const Fv=new en(5e3,15e3),km={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Lv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rm(y){const p=y.config;De(p.authDomain,y,"auth-domain-config-required");const g=p.emulator?Je(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,C={apiKey:p.apiKey,appName:y.name,v:ue.SDK_VERSION},S=Lv.get(y.config.apiHost);S&&(C.eid=S);const P=y._getFrameworks();return P.length&&(C.fw=P.join(",")),`${g}?${(0,F.xO)(C).slice(1)}`}function Nm(){return Nm=(0,l.Z)(function*(y){const p=yield wE(y),g=En().gapi;return De(g,y,"internal-error"),p.open({where:document.body,url:Rm(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:km,dontclear:!0},C=>new Promise(function(){var S=(0,l.Z)(function*(P,q){yield C.restyle({setHideOnLeave:!1});const J=Rn(y,"network-request-failed"),ke=En().setTimeout(()=>{q(J)},Fv.get());function Se(){En().clearTimeout(ke),P(C)}C.ping(Se).then(Se,()=>{q(J)})});return function(P,q){return S.apply(this,arguments)}}()))}),Nm.apply(this,arguments)}const kc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ap{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Wu(y,p,g,C,S,P){De(y.config.authDomain,y,"auth-domain-config-required"),De(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:C,v:ue.SDK_VERSION,eventId:S};if(p instanceof zr){p.setDefaultLanguage(y.languageCode),q.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||(q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[ke,Se]of Object.entries(P||{}))q[ke]=Se}if(p instanceof Ki){const ke=p.getScopes().filter(Se=>""!==Se);ke.length>0&&(q.scopes=ke.join(","))}y.tenantId&&(q.tid=y.tenantId);const J=q;for(const ke of Object.keys(J))void 0===J[ke]&&delete J[ke];return`${function({config:y}){return y.emulator?Je(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,F.xO)(J).slice(1)}`}const Nc="webStorageSupport";class Th extends class{constructor(p){this.factorId=p}_process(p,g,C){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,C);case"signin":return this._finalizeSignIn(p,g.credential);default:return cr("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Th(p)}_finalizeEnroll(p,g,C){return function(y,p){return bt(y,"POST","/v2/accounts/mfaEnrollment:finalize",on(y,p))}(p,{idToken:g,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function(y,p){return bt(y,"POST","/v2/accounts/mfaSignIn:finalize",on(y,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Vv=(()=>{class y{constructor(){}static assertion(g){return Th._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var y,Sp="@firebase/auth";class Mp{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,l.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(C=>{var S;p((null===(S=C)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);!g||(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Nl(){return window}function Vm(){return Vm=(0,l.Z)(function*(y,p,g){var C;const{BuildInfo:S}=Nl();Qn(p.sessionId,"AuthEvent did not contain a session ID");const P=yield ME(p.sessionId),q={};return ho()?q.ibi=S.packageName:el()?q.apn=S.packageName:Zt(y,"operation-not-supported-in-this-environment"),S.displayName&&(q.appDisplayName=S.displayName),q.sessionId=P,Wu(y,g,p.type,void 0,null!==(C=p.eventId)&&void 0!==C?C:void 0,q)}),Vm.apply(this,arguments)}function Op(){return Op=(0,l.Z)(function*(y){const{BuildInfo:p}=Nl(),g={};ho()?g.iosBundleId=p.packageName:el()?g.androidPackageName=p.packageName:Zt(y,"operation-not-supported-in-this-environment"),yield Pm(y,g)}),Op.apply(this,arguments)}function Bs(){return Bs=(0,l.Z)(function*(y,p,g){const{cordova:C}=Nl();let S=()=>{};try{yield new Promise((P,q)=>{let J=null;function ke(){var st;P();const Vt=null===(st=C.plugins.browsertab)||void 0===st?void 0:st.close;"function"==typeof Vt&&Vt(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Se(){J||(J=window.setTimeout(()=>{q(Rn(y,"redirect-cancelled-by-user"))},2e3))}function it(){"visible"===(null==document?void 0:document.visibilityState)&&Se()}p.addPassiveListener(ke),document.addEventListener("resume",Se,!1),el()&&document.addEventListener("visibilitychange",it,!1),S=()=>{p.removePassiveListener(ke),document.removeEventListener("resume",Se,!1),document.removeEventListener("visibilitychange",it,!1),J&&window.clearTimeout(J)}})}finally{S()}}),Bs.apply(this,arguments)}function ME(y){return qv.apply(this,arguments)}function qv(){return qv=(0,l.Z)(function*(y){const p=jv(y),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")}),qv.apply(this,arguments)}function jv(y){if(Qn(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),g=new Uint8Array(p);for(let C=0;C<y.length;C++)g[C]=y.charCodeAt(C);return g}y="Browser",(0,ue._registerComponent)(new ge.wA("auth",(p,{options:g})=>{const C=p.getProvider("app").getImmediate(),{apiKey:S,authDomain:P}=C.options;return(q=>{De(S&&!S.includes(":"),"invalid-api-key",{appName:q.name}),De(!(null==P?void 0:P.includes(":")),"argument-error",{appName:q.name});const J={apiKey:S,authDomain:P,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:us(y)},ke=new ds(q,J);return function(y,p){const g=(null==p?void 0:p.persistence)||[],C=(Array.isArray(g)?g:[g]).map(Wt);(null==p?void 0:p.errorMap)&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(C,null==p?void 0:p.popupRedirectResolver)}(ke,g),ke})(C)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,C)=>{p.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new ge.wA("auth-internal",p=>{const g=nr(p.getProvider("auth").getImmediate());return new Mp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(Sp,"0.19.6",void 0),(0,ue.registerVersion)(Sp,"0.19.6","esm2017");class Di extends Ch{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,l.Z)(function*(){yield p.initPromise})()}}function jm(y){return kr.apply(this,arguments)}function kr(){return kr=(0,l.Z)(function*(y){const p=yield Hm()._get(Ah(y));return p&&(yield Hm()._remove(Ah(y))),p}),kr.apply(this,arguments)}function $m(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const C=Math.floor(Math.random()*p.length);y.push(p.charAt(C))}return y.join("")}function Hm(){return Wt(Ei)}function Ah(y){return ri("authEvent",y.config.apiKey,y.name)}function Ll(y){if(!(null==y?void 0:y.includes("?")))return{};const[p,...g]=y.split("?");return(0,F.zd)(g.join("?"))}function xp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Rn("no-auth-event")}}function Sh(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Mh(y=(0,F.z$)()){return!("file:"!==Sh()&&"ionic:"!==Sh()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Np(){try{const y=self.localStorage,p=Il();if(y)return y.setItem(p,"1"),y.removeItem(p),!function(y=(0,F.z$)()){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)||function(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch(y){return Ju()&&(0,F.hl)()}return!1}function Ju(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fp(){return("http:"===Sh()||"https:"===Sh()||(0,F.ru)()||Mh())&&!((0,F.b$)()||(0,F.UG)())&&Np()&&!Ju()}function Xu(){return Mh()&&"undefined"!=typeof document}function ed(){return ed=(0,l.Z)(function*(){return!!Xu()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})}),ed.apply(this,arguments)}const Si={LOCAL:"local",NONE:"none",SESSION:"session"},Uc=De,td="persistence";function Ph(y){return Up.apply(this,arguments)}function Up(){return Up=(0,l.Z)(function*(y){yield y._initializationPromise;const p=Mi(),g=ri(td,y.config.apiKey,y.name);(null==p?void 0:p.sessionStorage)&&p.sessionStorage.setItem(g,y._getPersistence())}),Up.apply(this,arguments)}function Mi(){return"undefined"!=typeof window?window:null}const aA=De;class Vc{constructor(){this.browserResolver=Wt(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nn,this._completeRedirectFn=Hu}_openPopup(p,g,C,S){var P=this;return(0,l.Z)(function*(){var q;Qn(null===(q=P.eventManagers[p._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const J=Wu(p,g,C,ct(),S);return function(y,p,g,C=500,S=600){const P=Math.max((window.screen.availHeight-S)/2,0).toString(),q=Math.max((window.screen.availWidth-C)/2,0).toString();let J="";const ke=Object.assign(Object.assign({},kc),{width:C.toString(),height:S.toString(),top:P,left:q}),Se=(0,F.z$)().toLowerCase();g&&(J=Ci(Se)?"_blank":g),Xa(Se)&&(p=p||"http://localhost",ke.scrollbars="yes");const it=Object.entries(ke).reduce((Vt,[$n,Rr])=>`${Vt}${$n}=${Rr},`,"");if(function(y=(0,F.z$)()){var p;return ho(y)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Se)&&"_self"!==J)return function(y,p){const g=document.createElement("a");g.href=y,g.target=p;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(C)}(p||"",J),new Ap(null);const st=window.open(p||"",J,it);De(st,y,"popup-blocked");try{st.focus()}catch(Vt){}return new Ap(st)}(p,J,Il())})()}_openRedirect(p,g,C,S){var P=this;return(0,l.Z)(function*(){return yield P._originValidation(p),y=Wu(p,g,C,ct(),S),En().location.href=y,new Promise(()=>{});var y})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:S,promise:P}=this.eventManagers[g];return S?Promise.resolve(S):(Qn(P,"If manager is not set, promise should be"),P)}const C=this.initAndGetManager(p);return this.eventManagers[g]={promise:C},C.catch(()=>{delete this.eventManagers[g]}),C}initAndGetManager(p){var g=this;return(0,l.Z)(function*(){const C=yield function(y){return Nm.apply(this,arguments)}(p),S=new Ch(p);return C.register("authEvent",P=>(De(null==P?void 0:P.authEvent,p,"invalid-auth-event"),{status:S.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:S},g.iframes[p._key()]=C,S})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(Nc,{type:Nc},S=>{var P;const q=null===(P=null==S?void 0:S[0])||void 0===P?void 0:P[Nc];void 0!==q&&g(!!q),Zt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(y){return Cs.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ln()||uo()||ho()}}),this.cordovaResolver=Wt(class{constructor(){this._redirectPersistence=nn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Hu}_initialize(p){var g=this;return(0,l.Z)(function*(){const C=p._key();let S=g.eventManagers.get(C);return S||(S=new Di(p),g.eventManagers.set(C,S),g.attachCallbackListeners(p,S)),S})()}_openPopup(p){Zt(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,C,S){var P=this;return(0,l.Z)(function*(){!function(y){var p,g,C,S,P,q,J,ke,Se,it;const st=Nl();De("function"==typeof(null===(p=null==st?void 0:st.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),De(void 0!==(null===(g=null==st?void 0:st.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),De("function"==typeof(null===(P=null===(S=null===(C=null==st?void 0:st.cordova)||void 0===C?void 0:C.plugins)||void 0===S?void 0:S.browsertab)||void 0===P?void 0:P.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(ke=null===(J=null===(q=null==st?void 0:st.cordova)||void 0===q?void 0:q.plugins)||void 0===J?void 0:J.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(it=null===(Se=null==st?void 0:st.cordova)||void 0===Se?void 0:Se.InAppBrowser)||void 0===it?void 0:it.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const q=yield P._initialize(p);yield q.initialized(),q.resetRedirect(),ys.clear(),yield P._originValidation(p);const J=function(y,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:$m(),postBody:null,tenantId:y.tenantId,error:Rn(y,"no-auth-event")}}(p,C,S);yield function(y,p){return Hm()._set(Ah(y),p)}(p,J);const ke=yield function(y,p,g){return Vm.apply(this,arguments)}(p,J,g),Se=yield function(y){const{cordova:p}=Nl();return new Promise(g=>{p.plugins.browsertab.isAvailable(C=>{let S=null;C?p.plugins.browsertab.openUrl(y):S=p.InAppBrowser.open(y,function(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(S)})})}(ke);return function(y,p,g){return Bs.apply(this,arguments)}(p,q,Se)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(y){return Op.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:C,handleOpenURL:S,BuildInfo:P}=Nl(),q=setTimeout((0,l.Z)(function*(){yield jm(p),g.onEvent(xp())}),500),J=function(){var it=(0,l.Z)(function*(st){clearTimeout(q);const Vt=yield jm(p);let $n=null;Vt&&(null==st?void 0:st.url)&&($n=function(y,p){var g,C;const S=function(y){const p=Ll(y),g=p.link?decodeURIComponent(p.link):void 0,C=Ll(g).link,S=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Ll(S).link||S||C||g||y}(p);if(S.includes("/__/auth/callback")){const P=Ll(S),q=P.firebaseError?function(y){try{return JSON.parse(y)}catch(p){return null}}(decodeURIComponent(P.firebaseError)):null,J=null===(C=null===(g=null==q?void 0:q.code)||void 0===g?void 0:g.split("auth/"))||void 0===C?void 0:C[1],ke=J?Rn(J):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(Vt,st.url)),g.onEvent($n||xp())});return function(Vt){return it.apply(this,arguments)}}();void 0!==C&&"function"==typeof C.subscribe&&C.subscribe(null,J);const ke=S,Se=`${P.packageName.toLowerCase()}://`;Nl().handleOpenURL=function(){var it=(0,l.Z)(function*(st){if(st.toLowerCase().startsWith(Se)&&J({url:st}),"function"==typeof ke)try{ke(st)}catch(Vt){console.error(Vt)}});return function(st){return it.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=nn,this._completeRedirectFn=Hu}_initialize(p){var g=this;return(0,l.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,C,S){var P=this;return(0,l.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(p,g,C,S)})()}_openRedirect(p,g,C,S){var P=this;return(0,l.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(p,g,C,S)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Xu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return aA(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,l.Z)(function*(){if(p.underlyingResolver)return;const g=yield function(){return ed.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function Bc(y){return y.unwrap()}function Zs(y){return Co(y)}function Co(y){const{_tokenResponse:p}=y instanceof F.ZR?y.customData:y;if(!p)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return xl.credentialFromResult(y);const g=p.providerId;if(!g||"password"===g)return null;let C;switch(g){case"google.com":C=Fo;break;case"facebook.com":C=gc;break;case"github.com":C=Lo;break;case"twitter.com":C=Gr;break;default:const{oauthIdToken:S,oauthAccessToken:P,oauthTokenSecret:q,pendingToken:J,nonce:ke}=p;return P||q||S||J?J?g.startsWith("saml.")?Ms._create(g,J):vr._fromParams({providerId:g,signInMethod:g,pendingToken:J,idToken:S,accessToken:P}):new qn(g).credential({idToken:S,accessToken:P,rawNonce:ke}):null}return y instanceof F.ZR?C.credentialFromError(y):C.credentialFromResult(y)}function Yr(y,p){return p.catch(g=>{throw g instanceof F.ZR&&function(y,p){var g;const C=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new Zl(y,function(y,p){var g;const C=(0,F.m9)(y),S=p;return De(p.customData.operationType,C,"argument-error"),De(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,C,"argument-error"),bl._fromError(C,S)}(y,p));else if(C){const S=Co(p),P=p;S&&(P.credential=S,P.tenantId=C.tenantId||void 0,P.email=C.email||void 0,P.phoneNumber=C.phoneNumber||void 0)}}(y,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:Zs(g),additionalUserInfo:Pr(g),user:qs.getOrCreate(S)}})}function Vl(y,p){return Bl.apply(this,arguments)}function Bl(){return Bl=(0,l.Z)(function*(y,p){const g=yield p;return{verificationId:g.verificationId,confirm:C=>Yr(y,g.confirm(C))}}),Bl.apply(this,arguments)}class Zl{constructor(p,g){this.resolver=g,this.auth=function(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Yr(Bc(this.auth),this.resolver.resolveSignIn(p))}}class qs{constructor(p){this._delegate=p,this.multiFactor=function(y){const p=(0,F.m9)(y);return ii.has(p)||ii.set(p,ba._fromUser(p)),ii.get(p)}(p)}static getOrCreate(p){return qs.USER_MAP.has(p)||qs.USER_MAP.set(p,new qs(p)),qs.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,l.Z)(function*(){return Yr(g.auth,dl(g._delegate,p))})()}linkWithPhoneNumber(p,g){var C=this;return(0,l.Z)(function*(){return Vl(C.auth,function(y,p,g){return Pl.apply(this,arguments)}(C._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,l.Z)(function*(){return Yr(g.auth,function(y,p,g){return yn.apply(this,arguments)}(g._delegate,p,Vc))})()}linkWithRedirect(p){var g=this;return(0,l.Z)(function*(){return yield Ph(nr(g.auth)),function(y,p,g){return function(y,p,g){return Ai.apply(this,arguments)}(y,p,g)}(g._delegate,p,Vc)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,l.Z)(function*(){return Yr(g.auth,ur(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return Vl(this.auth,function(y,p,g){return Ol.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return Yr(this.auth,function(y,p,g){return xr.apply(this,arguments)}(this._delegate,p,Vc))}reauthenticateWithRedirect(p){var g=this;return(0,l.Z)(function*(){return yield Ph(nr(g.auth)),function(y,p,g){return function(y,p,g){return vh.apply(this,arguments)}(y,p,g)}(g._delegate,p,Vc)})()}sendEmailVerification(p){return function(y,p){return vo.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,l.Z)(function*(){return yield function(y,p){return Ae.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function(y,p){return lp((0,F.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function(y,p){return lp((0,F.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function(y,p){return ju.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function(y,p){return wn.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function(y,p,g){return Cl.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}qs.USER_MAP=new WeakMap;const Pi=De;let rd=(()=>{class y{constructor(g,C){if(this.app=g,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Pi(S,"invalid-api-key",{appName:g.name}),Pi(S,"invalid-api-key",{appName:g.name});const P="undefined"!=typeof window?Vc:void 0;this._delegate=C.initialize({options:{persistence:Wo(S,g.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Ar),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?qs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,C){!function(y,p,g){const C=nr(y);De(C._canInitEmulator,C,"emulator-config-failed"),De(/^https?:\/\//.test(p),C,"invalid-emulator-scheme");const S=!!(null==g?void 0:g.disableWarnings),P=wi(p),{host:q,port:J}=function(y){const p=wi(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!g)return{host:"",port:null};const C=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(C);if(S){const P=S[1];return{host:P,port:mm(C.substr(P.length+1))}}{const[P,q]=C.split(":");return{host:P,port:mm(q)}}}(p);C.config.emulator={url:`${P}//${q}${null===J?"":`:${J}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:q,port:J,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function(){function y(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,C)}applyActionCode(g){return function(y,p){return Ec.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return bc(this._delegate,g)}confirmPasswordReset(g,C){return function(y,p,g){return Ca.apply(this,arguments)}(this._delegate,g,C)}createUserWithEmailAndPassword(g,C){var S=this;return(0,l.Z)(function*(){return Yr(S._delegate,function(y,p,g){return vl.apply(this,arguments)}(S._delegate,g,C))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(y,p){return ap.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(y,p){const g=Ro.parseLink(p);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,l.Z)(function*(){Pi(Fp(),g._delegate,"operation-not-supported-in-this-environment");const C=yield function(y,p){return Pa.apply(this,arguments)}(g._delegate,Vc);return C?Yr(g._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(y,p){nr(y)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,C,S){const{next:P,error:q,complete:J}=Oh(g,C,S);return this._delegate.onAuthStateChanged(P,q,J)}onIdTokenChanged(g,C,S){const{next:P,error:q,complete:J}=Oh(g,C,S);return this._delegate.onIdTokenChanged(P,q,J)}sendSignInLinkToEmail(g,C){return function(y,p,g){return _n.apply(this,arguments)}(this._delegate,g,C)}sendPasswordResetEmail(g,C){return function(y,p,g){return va.apply(this,arguments)}(this._delegate,g,C||void 0)}setPersistence(g){var C=this;return(0,l.Z)(function*(){let S;switch(function(y,p){Uc(Object.values(Si).includes(p),y,"invalid-persistence-type"),(0,F.b$)()?Uc(p!==Si.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?Uc(p===Si.NONE,y,"unsupported-persistence-type"):Ju()?Uc(p===Si.NONE||p===Si.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):Uc(p===Si.NONE||Np(),y,"unsupported-persistence-type")}(C._delegate,g),g){case Si.SESSION:S=nn;break;case Si.LOCAL:S=(yield Wt(Ns)._isAvailable())?Ns:Ei;break;case Si.NONE:S=ni;break;default:return Zt("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Yr(this._delegate,function(y){return ya.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Yr(this._delegate,Au(this._delegate,g))}signInWithCustomToken(g){return Yr(this._delegate,function(y,p){return fl.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,C){return Yr(this._delegate,function(y,p,g){return Au((0,F.m9)(y),No.credential(p,g))}(this._delegate,g,C))}signInWithEmailLink(g,C){return Yr(this._delegate,function(y,p,g){return wa.apply(this,arguments)}(this._delegate,g,C))}signInWithPhoneNumber(g,C){return Vl(this._delegate,function(y,p,g){return Ml.apply(this,arguments)}(this._delegate,g,C))}signInWithPopup(g){var C=this;return(0,l.Z)(function*(){return Pi(Fp(),C._delegate,"operation-not-supported-in-this-environment"),Yr(C._delegate,function(y,p,g){return Ot.apply(this,arguments)}(C._delegate,g,Vc))})()}signInWithRedirect(g){var C=this;return(0,l.Z)(function*(){return Pi(Fp(),C._delegate,"operation-not-supported-in-this-environment"),yield Ph(C._delegate),function(y,p,g){return function(y,p,g){return mp.apply(this,arguments)}(y,p,g)}(C._delegate,g,Vc)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(y,p){return yl.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Si,y})();function Oh(y,p,g){let C=y;"function"!=typeof y&&({next:C,error:p,complete:g}=y);const S=C;return{next:q=>S(q&&qs.getOrCreate(q)),error:p,complete:g}}function Wo(y,p){const g=function(y,p){const g=Mi();if(!(null==g?void 0:g.sessionStorage))return[];const C=ri(td,y,p);switch(g.sessionStorage.getItem(C)){case Si.NONE:return[ni];case Si.LOCAL:return[Ns,nn];case Si.SESSION:return[nn];default:return[]}}(y,p);if("undefined"!=typeof self&&!g.includes(Ns)&&g.push(Ns),"undefined"!=typeof window)for(const C of[Ei,nn])g.includes(C)||g.push(C);return g.includes(ni)||g.push(ni),g}class Oi{constructor(){this.providerId="phone",this._delegate=new xl(Bc(Q.Z.auth()))}static credential(p,g){return xl.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}Oi.PHONE_SIGN_IN_METHOD=xl.PHONE_SIGN_IN_METHOD,Oi.PROVIDER_ID=xl.PROVIDER_ID;const ql=De;class Ym{constructor(p,g,C=Q.Z.app()){var S;ql(null===(S=C.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new Oc(p,g,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(y){y.INTERNAL.registerComponent(new ge.wA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),C=p.getProvider("auth");return new rd(g,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:No,FacebookAuthProvider:gc,GithubAuthProvider:Lo,GoogleAuthProvider:Fo,OAuthProvider:qn,SAMLAuthProvider:Uo,PhoneAuthProvider:Oi,PhoneMultiFactorGenerator:Vv,RecaptchaVerifier:Ym,TwitterAuthProvider:Gr,Auth:rd,AuthCredential:ga,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.6")}(Q.Z)},4995:function(Ye,ye){!function(N){"use strict";function l(le){return Array.prototype.slice.call(le)}function Q(le){return new Promise(function(Y,ce){le.onsuccess=function(){Y(le.result)},le.onerror=function(){ce(le.error)}})}function F(le,Y,ce){var be,ve=new Promise(function(He,Me){Q(be=le[Y].apply(le,ce)).then(He,Me)});return ve.request=be,ve}function ue(le,Y,ce){var be=F(le,Y,ce);return be.then(function(ve){if(ve)return new H(ve,be.request)})}function re(le,Y,ce){ce.forEach(function(be){Object.defineProperty(le.prototype,be,{get:function(){return this[Y][be]},set:function(ve){this[Y][be]=ve}})})}function me(le,Y,ce,be){be.forEach(function(ve){ve in ce.prototype&&(le.prototype[ve]=function(){return F(this[Y],ve,arguments)})})}function ae(le,Y,ce,be){be.forEach(function(ve){ve in ce.prototype&&(le.prototype[ve]=function(){return this[Y][ve].apply(this[Y],arguments)})})}function se(le,Y,ce,be){be.forEach(function(ve){ve in ce.prototype&&(le.prototype[ve]=function(){return ue(this[Y],ve,arguments)})})}function he(le){this._index=le}function H(le,Y){this._cursor=le,this._request=Y}function $(le){this._store=le}function ee(le){this._tx=le,this.complete=new Promise(function(Y,ce){le.oncomplete=function(){Y()},le.onerror=function(){ce(le.error)},le.onabort=function(){ce(le.error)}})}function Ve(le,Y,ce){this._db=le,this.oldVersion=Y,this.transaction=new ee(ce)}function Ie(le){this._db=le}re(he,"_index",["name","keyPath","multiEntry","unique"]),me(he,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),se(he,"_index",IDBIndex,["openCursor","openKeyCursor"]),re(H,"_cursor",["direction","key","primaryKey","value"]),me(H,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(le){le in IDBCursor.prototype&&(H.prototype[le]=function(){var Y=this,ce=arguments;return Promise.resolve().then(function(){return Y._cursor[le].apply(Y._cursor,ce),Q(Y._request).then(function(be){if(be)return new H(be,Y._request)})})})}),$.prototype.createIndex=function(){return new he(this._store.createIndex.apply(this._store,arguments))},$.prototype.index=function(){return new he(this._store.index.apply(this._store,arguments))},re($,"_store",["name","keyPath","indexNames","autoIncrement"]),me($,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),se($,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ae($,"_store",IDBObjectStore,["deleteIndex"]),ee.prototype.objectStore=function(){return new $(this._tx.objectStore.apply(this._tx,arguments))},re(ee,"_tx",["objectStoreNames","mode"]),ae(ee,"_tx",IDBTransaction,["abort"]),Ve.prototype.createObjectStore=function(){return new $(this._db.createObjectStore.apply(this._db,arguments))},re(Ve,"_db",["name","version","objectStoreNames"]),ae(Ve,"_db",IDBDatabase,["deleteObjectStore","close"]),Ie.prototype.transaction=function(){return new ee(this._db.transaction.apply(this._db,arguments))},re(Ie,"_db",["name","version","objectStoreNames"]),ae(Ie,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(le){[$,he].forEach(function(Y){le in Y.prototype&&(Y.prototype[le.replace("open","iterate")]=function(){var ce=l(arguments),be=ce[ce.length-1],ve=this._store||this._index,He=ve[le].apply(ve,ce.slice(0,-1));He.onsuccess=function(){be(He.result)}})})}),[he,$].forEach(function(le){le.prototype.getAll||(le.prototype.getAll=function(Y,ce){var be=this,ve=[];return new Promise(function(He){be.iterateCursor(Y,function(Me){Me?(ve.push(Me.value),void 0===ce||ve.length!=ce?Me.continue():He(ve)):He(ve)})})})}),N.openDb=function(le,Y,ce){var be=F(indexedDB,"open",[le,Y]),ve=be.request;return ve&&(ve.onupgradeneeded=function(He){ce&&ce(new Ve(ve.result,He.oldVersion,ve.transaction))}),be.then(function(He){return new Ie(He)})},N.deleteDb=function(le){return F(indexedDB,"deleteDatabase",[le])},Object.defineProperty(N,"__esModule",{value:!0})}(ye)},8305:(Ye,ye,N)=>{"use strict";N.d(ye,{y:()=>H});var l=N(584),Q=N(7908),F=N(4816),ue=N(4623);var ae=N(5367),se=N(5044),he=N(8706);let H=(()=>{class Ie{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const le=new Ie;return le.source=this,le.operator=Le,le}subscribe(Le,le,Y){const ce=function(Ie){return Ie&&Ie instanceof l.Lv||function(Ie){return Ie&&(0,se.m)(Ie.next)&&(0,se.m)(Ie.error)&&(0,se.m)(Ie.complete)}(Ie)&&(0,Q.Nn)(Ie)}(Le)?Le:new l.Hp(Le,le,Y);return(0,he.x)(()=>{const{operator:be,source:ve}=this;ce.add(be?be.call(ce,ve):ve?this._subscribe(ce):this._trySubscribe(ce))}),ce}_trySubscribe(Le){try{return this._subscribe(Le)}catch(le){Le.error(le)}}forEach(Le,le){return new(le=$(le))((Y,ce)=>{let be;be=this.subscribe(ve=>{try{Le(ve)}catch(He){ce(He),null==be||be.unsubscribe()}},ce,Y)})}_subscribe(Le){var le;return null===(le=this.source)||void 0===le?void 0:le.subscribe(Le)}[F.L](){return this}pipe(...Le){return function(Ie){return 0===Ie.length?ue.y:1===Ie.length?Ie[0]:function(Le){return Ie.reduce((le,Y)=>Y(le),Le)}}(Le)(this)}toPromise(Le){return new(Le=$(Le))((le,Y)=>{let ce;this.subscribe(be=>ce=be,be=>Y(be),()=>le(ce))})}}return Ie.create=Be=>new Ie(Be),Ie})();function $(Ie){var Be;return null!==(Be=null!=Ie?Ie:ae.v.Promise)&&void 0!==Be?Be:Promise}},273:(Ye,ye,N)=>{"use strict";N.d(ye,{x:()=>ae});var l=N(8305),Q=N(7908);const ue=(0,N(4893).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=N(3980),me=N(8706);let ae=(()=>{class he extends l.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const ee=new se(this,this);return ee.operator=$,ee}_throwIfClosed(){if(this.closed)throw new ue}next($){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ee=this.observers.slice();for(const Ve of ee)Ve.next($)}})}error($){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:ee}=this;for(;ee.length;)ee.shift().error($)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:ee,isStopped:Ve,observers:Ie}=this;return ee||Ve?Q.Lc:(Ie.push($),new Q.w0(()=>(0,re.P)(Ie,$)))}_checkFinalizedStatuses($){const{hasError:ee,thrownError:Ve,isStopped:Ie}=this;ee?$.error(Ve):Ie&&$.complete()}asObservable(){const $=new l.y;return $.source=this,$}}return he.create=(H,$)=>new se(H,$),he})();class se extends ae{constructor(H,$){super(),this.destination=H,this.source=$}next(H){var $,ee;null===(ee=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===ee||ee.call($,H)}error(H){var $,ee;null===(ee=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===ee||ee.call($,H)}complete(){var H,$;null===($=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===$||$.call(H)}_subscribe(H){var $,ee;return null!==(ee=null===($=this.source)||void 0===$?void 0:$.subscribe(H))&&void 0!==ee?ee:Q.Lc}}},584:(Ye,ye,N)=>{"use strict";N.d(ye,{Hp:()=>Ve,Lv:()=>ee});var l=N(5044),Q=N(7908),F=N(5367),ue=N(5160),re=N(6921);const me=he("C",void 0,void 0);function he(Y,ce,be){return{kind:Y,value:ce,error:be}}var H=N(2496),$=N(8706);class ee extends Q.w0{constructor(ce){super(),this.isStopped=!1,ce?(this.destination=ce,(0,Q.Nn)(ce)&&ce.add(this)):this.destination=le}static create(ce,be,ve){return new Ve(ce,be,ve)}next(ce){this.isStopped?Le(he("N",ce,void 0),this):this._next(ce)}error(ce){this.isStopped?Le(he("E",void 0,ce),this):(this.isStopped=!0,this._error(ce))}complete(){this.isStopped?Le(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ce){this.destination.next(ce)}_error(ce){try{this.destination.error(ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Ve extends ee{constructor(ce,be,ve){let He;if(super(),(0,l.m)(ce))He=ce;else if(ce){let Me;({next:He,error:be,complete:ve}=ce),this&&F.v.useDeprecatedNextContext?(Me=Object.create(ce),Me.unsubscribe=()=>this.unsubscribe()):Me=ce,He=null==He?void 0:He.bind(Me),be=null==be?void 0:be.bind(Me),ve=null==ve?void 0:ve.bind(Me)}this.destination={next:He?Ie(He):re.Z,error:Ie(null!=be?be:Be),complete:ve?Ie(ve):re.Z}}}function Ie(Y,ce){return(...be)=>{try{Y(...be)}catch(ve){F.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(ve):(0,ue.h)(ve)}}}function Be(Y){throw Y}function Le(Y,ce){const{onStoppedNotification:be}=F.v;be&&H.z.setTimeout(()=>be(Y,ce))}const le={closed:!0,next:re.Z,error:Be,complete:re.Z}},7908:(Ye,ye,N)=>{"use strict";N.d(ye,{Lc:()=>me,w0:()=>re,Nn:()=>ae});var l=N(5044);const F=(0,N(4893).d)(he=>function($){he(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((ee,Ve)=>`${Ve+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ue=N(3980);class re{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ie of $)Ie.remove(this);else $.remove(this);const{initialTeardown:ee}=this;if((0,l.m)(ee))try{ee()}catch(Ie){H=Ie instanceof F?Ie.errors:[Ie]}const{_teardowns:Ve}=this;if(Ve){this._teardowns=null;for(const Ie of Ve)try{se(Ie)}catch(Be){H=null!=H?H:[],Be instanceof F?H=[...H,...Be.errors]:H.push(Be)}}if(H)throw new F(H)}}add(H){var $;if(H&&H!==this)if(this.closed)se(H);else{if(H instanceof re){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._teardowns=null!==($=this._teardowns)&&void 0!==$?$:[]).push(H)}}_hasParent(H){const{_parentage:$}=this;return $===H||Array.isArray($)&&$.includes(H)}_addParent(H){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(H),$):$?[$,H]:H}_removeParent(H){const{_parentage:$}=this;$===H?this._parentage=null:Array.isArray($)&&(0,ue.P)($,H)}remove(H){const{_teardowns:$}=this;$&&(0,ue.P)($,H),H instanceof re&&H._removeParent(this)}}re.EMPTY=(()=>{const he=new re;return he.closed=!0,he})();const me=re.EMPTY;function ae(he){return he instanceof re||he&&"closed"in he&&(0,l.m)(he.remove)&&(0,l.m)(he.add)&&(0,l.m)(he.unsubscribe)}function se(he){(0,l.m)(he)?he():he.unsubscribe()}},5367:(Ye,ye,N)=>{"use strict";N.d(ye,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5583:(Ye,ye,N)=>{"use strict";N.d(ye,{E:()=>Q});const Q=new(N(8305).y)(re=>re.complete())},5947:(Ye,ye,N)=>{"use strict";N.d(ye,{D:()=>He});var l=N(9985),Q=N(4763),F=N(5222),me=N(8305),se=N(5497),he=N(5044),H=N(8395);function ee(Me,je){if(!Me)throw new Error("Iterable cannot be null");return new me.y(Qe=>{(0,H.f)(Qe,je,()=>{const ht=Me[Symbol.asyncIterator]();(0,H.f)(Qe,je,()=>{ht.next().then(te=>{te.done?Qe.complete():Qe.next(te.value)})},0,!0)})})}var Ve=N(1073),Ie=N(2442),Be=N(1537),Le=N(2317),le=N(9908),Y=N(3754),ce=N(7751);function He(Me,je){return je?function(Me,je){if(null!=Me){if((0,Ve.c)(Me))return function(Me,je){return(0,l.Xf)(Me).pipe((0,F.R)(je),(0,Q.Q)(je))}(Me,je);if((0,Be.z)(Me))return function(Me,je){return new me.y(Qe=>{let ht=0;return je.schedule(function(){ht===Me.length?Qe.complete():(Qe.next(Me[ht++]),Qe.closed||this.schedule())})})}(Me,je);if((0,Ie.t)(Me))return function(Me,je){return(0,l.Xf)(Me).pipe((0,F.R)(je),(0,Q.Q)(je))}(Me,je);if((0,le.D)(Me))return ee(Me,je);if((0,Le.T)(Me))return function(Me,je){return new me.y(Qe=>{let ht;return(0,H.f)(Qe,je,()=>{ht=Me[se.h](),(0,H.f)(Qe,je,()=>{let te,fe;try{({value:te,done:fe}=ht.next())}catch(Ce){return void Qe.error(Ce)}fe?Qe.complete():Qe.next(te)},0,!0)}),()=>(0,he.m)(null==ht?void 0:ht.return)&&ht.return()})}(Me,je);if((0,ce.L)(Me))return function(Me,je){return ee((0,ce.Q)(Me),je)}(Me,je)}throw(0,Y.z)(Me)}(Me,je):(0,l.Xf)(Me)}},9985:(Ye,ye,N)=>{"use strict";N.d(ye,{Xf:()=>Ve});var l=N(9162),Q=N(1537),F=N(2442),ue=N(8305),re=N(1073),me=N(9908),ae=N(3754),se=N(2317),he=N(7751),H=N(5044),$=N(5160),ee=N(4816);function Ve(ve){if(ve instanceof ue.y)return ve;if(null!=ve){if((0,re.c)(ve))return function(ve){return new ue.y(He=>{const Me=ve[ee.L]();if((0,H.m)(Me.subscribe))return Me.subscribe(He);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ve);if((0,Q.z)(ve))return function(ve){return new ue.y(He=>{for(let Me=0;Me<ve.length&&!He.closed;Me++)He.next(ve[Me]);He.complete()})}(ve);if((0,F.t)(ve))return function(ve){return new ue.y(He=>{ve.then(Me=>{He.closed||(He.next(Me),He.complete())},Me=>He.error(Me)).then(null,$.h)})}(ve);if((0,me.D)(ve))return Y(ve);if((0,se.T)(ve))return function(ve){return new ue.y(He=>{for(const Me of ve)if(He.next(Me),He.closed)return;He.complete()})}(ve);if((0,he.L)(ve))return function(ve){return Y((0,he.Q)(ve))}(ve)}throw(0,ae.z)(ve)}function Y(ve){return new ue.y(He=>{(function(ve,He){var Me,je,Qe,ht;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Me=(0,l.KL)(ve);!(je=yield Me.next()).done;)if(He.next(je.value),He.closed)return}catch(te){Qe={error:te}}finally{try{je&&!je.done&&(ht=Me.return)&&(yield ht.call(Me))}finally{if(Qe)throw Qe.error}}He.complete()})})(ve,He).catch(Me=>He.error(Me))})}},3719:(Ye,ye,N)=>{"use strict";N.d(ye,{T:()=>me});var l=N(5373),Q=N(9985),F=N(5583),ue=N(7613),re=N(5947);function me(...ae){const se=(0,ue.yG)(ae),he=(0,ue._6)(ae,1/0),H=ae;return H.length?1===H.length?(0,Q.Xf)(H[0]):(0,l.J)(he)((0,re.D)(H,se)):F.E}},8889:(Ye,ye,N)=>{"use strict";N.d(ye,{Q:()=>Q});var l=N(584);class Q extends l.Lv{constructor(ue,re,me,ae,se){super(ue),this.onFinalize=se,this._next=re?function(he){try{re(he)}catch(H){ue.error(H)}}:super._next,this._error=ae?function(he){try{ae(he)}catch(H){ue.error(H)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(he){ue.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;const{closed:re}=this;super.unsubscribe(),!re&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}},4753:(Ye,ye,N)=>{"use strict";N.d(ye,{U:()=>F});var l=N(9947),Q=N(8889);function F(ue,re){return(0,l.e)((me,ae)=>{let se=0;me.subscribe(new Q.Q(ae,he=>{ae.next(ue.call(re,he,se++))}))})}},5373:(Ye,ye,N)=>{"use strict";N.d(ye,{J:()=>F});var l=N(5724),Q=N(4623);function F(ue=1/0){return(0,l.z)(Q.y,ue)}},5724:(Ye,ye,N)=>{"use strict";N.d(ye,{z:()=>se});var l=N(4753),Q=N(9985),F=N(9947),re=(N(8395),N(8889)),ae=N(5044);function se(he,H,$=1/0){return(0,ae.m)(H)?se((ee,Ve)=>(0,l.U)((Ie,Be)=>H(ee,Ie,Ve,Be))((0,Q.Xf)(he(ee,Ve))),$):("number"==typeof H&&($=H),(0,F.e)((ee,Ve)=>function(he,H,$,ee,Ve,Ie,Be,Le){const le=[];let Y=0,ce=0,be=!1;const ve=()=>{be&&!le.length&&!Y&&H.complete()},He=je=>Y<ee?Me(je):le.push(je),Me=je=>{Y++;let Qe=!1;(0,Q.Xf)($(je,ce++)).subscribe(new re.Q(H,ht=>{H.next(ht)},()=>{Qe=!0},void 0,()=>{if(Qe)try{for(Y--;le.length&&Y<ee;){const ht=le.shift();Me(ht)}ve()}catch(ht){H.error(ht)}}))};return he.subscribe(new re.Q(H,He,()=>{be=!0,ve()})),()=>{}}(ee,Ve,he,$)))}},4763:(Ye,ye,N)=>{"use strict";N.d(ye,{Q:()=>ue});var l=N(8395),Q=N(9947),F=N(8889);function ue(re,me=0){return(0,Q.e)((ae,se)=>{ae.subscribe(new F.Q(se,he=>(0,l.f)(se,re,()=>se.next(he),me),()=>(0,l.f)(se,re,()=>se.complete(),me),he=>(0,l.f)(se,re,()=>se.error(he),me)))})}},3174:(Ye,ye,N)=>{"use strict";N.d(ye,{B:()=>me});var l=N(5947),Q=N(9468),F=N(273),ue=N(584),re=N(9947);function me(se={}){const{connector:he=(()=>new F.x),resetOnError:H=!0,resetOnComplete:$=!0,resetOnRefCountZero:ee=!0}=se;return Ve=>{let Ie=null,Be=null,Le=null,le=0,Y=!1,ce=!1;const be=()=>{null==Be||Be.unsubscribe(),Be=null},ve=()=>{be(),Ie=Le=null,Y=ce=!1},He=()=>{const Me=Ie;ve(),null==Me||Me.unsubscribe()};return(0,re.e)((Me,je)=>{le++,!ce&&!Y&&be();const Qe=Le=null!=Le?Le:he();je.add(()=>{le--,0===le&&!ce&&!Y&&(Be=ae(He,ee))}),Qe.subscribe(je),Ie||(Ie=new ue.Hp({next:ht=>Qe.next(ht),error:ht=>{ce=!0,be(),Be=ae(ve,H,ht),Qe.error(ht)},complete:()=>{Y=!0,be(),Be=ae(ve,$),Qe.complete()}}),(0,l.D)(Me).subscribe(Ie))})(Ve)}}function ae(se,he,...H){return!0===he?(se(),null):!1===he?null:he(...H).pipe((0,Q.q)(1)).subscribe(()=>se())}},5222:(Ye,ye,N)=>{"use strict";N.d(ye,{R:()=>Q});var l=N(9947);function Q(F,ue=0){return(0,l.e)((re,me)=>{me.add(F.schedule(()=>re.subscribe(me),ue))})}},9468:(Ye,ye,N)=>{"use strict";N.d(ye,{q:()=>ue});var l=N(5583),Q=N(9947),F=N(8889);function ue(re){return re<=0?()=>l.E:(0,Q.e)((me,ae)=>{let se=0;me.subscribe(new F.Q(ae,he=>{++se<=re&&(ae.next(he),re<=se&&ae.complete())}))})}},7384:(Ye,ye,N)=>{"use strict";N.d(ye,{b:()=>re});var l=N(5044),Q=N(9947),F=N(8889),ue=N(4623);function re(me,ae,se){const he=(0,l.m)(me)||ae||se?{next:me,error:ae,complete:se}:me;return he?(0,Q.e)((H,$)=>{var ee;null===(ee=he.subscribe)||void 0===ee||ee.call(he);let Ve=!0;H.subscribe(new F.Q($,Ie=>{var Be;null===(Be=he.next)||void 0===Be||Be.call(he,Ie),$.next(Ie)},()=>{var Ie;Ve=!1,null===(Ie=he.complete)||void 0===Ie||Ie.call(he),$.complete()},Ie=>{var Be;Ve=!1,null===(Be=he.error)||void 0===Be||Be.call(he,Ie),$.error(Ie)},()=>{var Ie,Be;Ve&&(null===(Ie=he.unsubscribe)||void 0===Ie||Ie.call(he)),null===(Be=he.finalize)||void 0===Be||Be.call(he)}))}):ue.y}},2869:(Ye,ye,N)=>{"use strict";N.d(ye,{o:()=>re});var l=N(7908);class Q extends l.w0{constructor(ae,se){super()}schedule(ae,se=0){return this}}const F={setInterval(...me){const{delegate:ae}=F;return((null==ae?void 0:ae.setInterval)||setInterval)(...me)},clearInterval(me){const{delegate:ae}=F;return((null==ae?void 0:ae.clearInterval)||clearInterval)(me)},delegate:void 0};var ue=N(3980);class re extends Q{constructor(ae,se){super(ae,se),this.scheduler=ae,this.work=se,this.pending=!1}schedule(ae,se=0){if(this.closed)return this;this.state=ae;const he=this.id,H=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(H,he,se)),this.pending=!0,this.delay=se,this.id=this.id||this.requestAsyncId(H,this.id,se),this}requestAsyncId(ae,se,he=0){return F.setInterval(ae.flush.bind(ae,this),he)}recycleAsyncId(ae,se,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return se;F.clearInterval(se)}execute(ae,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ae,se);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,se){let H,he=!1;try{this.work(ae)}catch($){he=!0,H=$||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:ae,scheduler:se}=this,{actions:he}=se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(he,this),null!=ae&&(this.id=this.recycleAsyncId(se,ae,null)),this.delay=null,super.unsubscribe()}}}},8843:(Ye,ye,N)=>{"use strict";N.d(ye,{v:()=>F});var l=N(1733);class Q{constructor(re,me=Q.now){this.schedulerActionCtor=re,this.now=me}schedule(re,me=0,ae){return new this.schedulerActionCtor(this,re).schedule(ae,me)}}Q.now=l.l.now;class F extends Q{constructor(re,me=Q.now){super(re,me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:me}=this;if(this._active)return void me.push(re);let ae;this._active=!0;do{if(ae=re.execute(re.state,re.delay))break}while(re=me.shift());if(this._active=!1,ae){for(;re=me.shift();)re.unsubscribe();throw ae}}}},2210:(Ye,ye,N)=>{"use strict";N.d(ye,{z:()=>F,P:()=>ue});var l=N(2869);const F=new(N(8843).v)(l.o),ue=F},1733:(Ye,ye,N)=>{"use strict";N.d(ye,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},2496:(Ye,ye,N)=>{"use strict";N.d(ye,{z:()=>l});const l={setTimeout(...Q){const{delegate:F}=l;return((null==F?void 0:F.setTimeout)||setTimeout)(...Q)},clearTimeout(Q){const{delegate:F}=l;return((null==F?void 0:F.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},5497:(Ye,ye,N)=>{"use strict";N.d(ye,{h:()=>Q});const Q="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(Ye,ye,N)=>{"use strict";N.d(ye,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},7613:(Ye,ye,N)=>{"use strict";N.d(ye,{jO:()=>ue,yG:()=>re,_6:()=>me});var l=N(5044),Q=N(7398);function F(ae){return ae[ae.length-1]}function ue(ae){return(0,l.m)(F(ae))?ae.pop():void 0}function re(ae){return(0,Q.K)(F(ae))?ae.pop():void 0}function me(ae,se){return"number"==typeof F(ae)?ae.pop():se}},3980:(Ye,ye,N)=>{"use strict";function l(Q,F){if(Q){const ue=Q.indexOf(F);0<=ue&&Q.splice(ue,1)}}N.d(ye,{P:()=>l})},4893:(Ye,ye,N)=>{"use strict";function l(Q){const ue=Q(re=>{Error.call(re),re.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}N.d(ye,{d:()=>l})},8706:(Ye,ye,N)=>{"use strict";N.d(ye,{x:()=>F,O:()=>ue});var l=N(5367);let Q=null;function F(re){if(l.v.useDeprecatedSynchronousErrorHandling){const me=!Q;if(me&&(Q={errorThrown:!1,error:null}),re(),me){const{errorThrown:ae,error:se}=Q;if(Q=null,ae)throw se}}else re()}function ue(re){l.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=re)}},8395:(Ye,ye,N)=>{"use strict";function l(Q,F,ue,re=0,me=!1){const ae=F.schedule(function(){ue(),me?Q.add(this.schedule(null,re)):this.unsubscribe()},re);if(Q.add(ae),!me)return ae}N.d(ye,{f:()=>l})},4623:(Ye,ye,N)=>{"use strict";function l(Q){return Q}N.d(ye,{y:()=>l})},1537:(Ye,ye,N)=>{"use strict";N.d(ye,{z:()=>l});const l=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},9908:(Ye,ye,N)=>{"use strict";N.d(ye,{D:()=>Q});var l=N(5044);function Q(F){return Symbol.asyncIterator&&(0,l.m)(null==F?void 0:F[Symbol.asyncIterator])}},5044:(Ye,ye,N)=>{"use strict";function l(Q){return"function"==typeof Q}N.d(ye,{m:()=>l})},1073:(Ye,ye,N)=>{"use strict";N.d(ye,{c:()=>F});var l=N(4816),Q=N(5044);function F(ue){return(0,Q.m)(ue[l.L])}},2317:(Ye,ye,N)=>{"use strict";N.d(ye,{T:()=>F});var l=N(5497),Q=N(5044);function F(ue){return(0,Q.m)(null==ue?void 0:ue[l.h])}},2442:(Ye,ye,N)=>{"use strict";N.d(ye,{t:()=>Q});var l=N(5044);function Q(F){return(0,l.m)(null==F?void 0:F.then)}},7751:(Ye,ye,N)=>{"use strict";N.d(ye,{Q:()=>F,L:()=>ue});var l=N(9162),Q=N(5044);function F(re){return(0,l.FC)(this,arguments,function*(){const ae=re.getReader();try{for(;;){const{value:se,done:he}=yield(0,l.qq)(ae.read());if(he)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(se)}}finally{ae.releaseLock()}})}function ue(re){return(0,Q.m)(null==re?void 0:re.getReader)}},7398:(Ye,ye,N)=>{"use strict";N.d(ye,{K:()=>Q});var l=N(5044);function Q(F){return F&&(0,l.m)(F.schedule)}},9947:(Ye,ye,N)=>{"use strict";N.d(ye,{A:()=>Q,e:()=>F});var l=N(5044);function Q(ue){return(0,l.m)(null==ue?void 0:ue.lift)}function F(ue){return re=>{if(Q(re))return re.lift(function(me){try{return ue(me,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},6921:(Ye,ye,N)=>{"use strict";function l(){}N.d(ye,{Z:()=>l})},5160:(Ye,ye,N)=>{"use strict";N.d(ye,{h:()=>F});var l=N(5367),Q=N(2496);function F(ue){Q.z.setTimeout(()=>{const{onUnhandledError:re}=l.v;if(!re)throw ue;re(ue)})}},3754:(Ye,ye,N)=>{"use strict";function l(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(ye,{z:()=>l})},5515:(Ye,ye,N)=>{"use strict";var l=N(3668);let Q=null;function F(){return Q}const ae=new l.OlP("DocumentToken");let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.LFG)($)},providedIn:"platform"}),n})();const H=new l.OlP("Location Initialized");let $=(()=>{class n extends se{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ee()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ee()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:function(){return new $((0,l.LFG)(ae))},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Ie(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function(n){const e=(0,l.LFG)(ae).location;return new be((0,l.LFG)(se),e&&e.origin||"")}()},providedIn:"root"}),n})();const ce=new l.OlP("appBaseHref");let be=(()=>{class n extends le{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ie(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+Le(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+Le(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(se),l.LFG(ce,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),ve=(()=>{class n extends le{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ie(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+Le(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+Le(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(se),l.LFG(ce,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),He=(()=>{class n{constructor(t,r){this._subject=new l.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Be(Qe(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformStrategy).historyGo)||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Ie,n.stripTrailingSlash=Be,n.\u0275fac=function(t){return new(t||n)(l.LFG(le),l.LFG(se))},n.\u0275prov=l.Yz7({token:n,factory:function(){return new He((0,l.LFG)(le),(0,l.LFG)(se))},providedIn:"root"}),n})();function Qe(n){return n.replace(/\/index.html$/,"")}var fe=(()=>((fe=fe||{})[fe.Zero=0]="Zero",fe[fe.One=1]="One",fe[fe.Two=2]="Two",fe[fe.Few=3]="Few",fe[fe.Many=4]="Many",fe[fe.Other=5]="Other",fe))();const cs=l.kL8;class ri{}let cn=(()=>{class n extends ri{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(cs(r||this.locale)(t)){case fe.Zero:return"zero";case fe.One:return"one";case fe.Two:return"two";case fe.Few:return"few";case fe.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.soG))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class el{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Sr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,a,u)=>{if(null==i.previousIndex){const h=this._viewContainer.createEmbeddedView(this._template,new el(null,this._ngForOf,-1,-1),null===u?void 0:u),_=new tl(i,h);r.push(_)}else if(null==u)this._viewContainer.remove(null===a?void 0:a);else if(null!==a){const h=this._viewContainer.get(a);this._viewContainer.move(h,u);const _=new tl(i,h);r.push(_)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,a=this._viewContainer.length;i<a;i++){const u=this._viewContainer.get(i);u.context.index=i,u.context.count=a,u.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class tl{constructor(e,t){this.record=e,this.view=t}}let tr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class dc{constructor(){this.$implicit=null,this.ngIf=null}}function fo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}class ga{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class np{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Yd=new np,rp=new ga;let vu=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,l.QGY)(t))return Yd;if((0,l.F4k)(t))return rp;throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,l.AaK)(n)}'`)}(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.sBO,16))},n.\u0275pipe=l.Yjl({name:"async",type:n,pure:!1}),n})(),bu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:ri,useClass:cn}]}),n})();const th="browser";function fc(n){return n===th}function Mr(n){return"server"===n}let sp=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new sl((0,l.LFG)(ae),window)}),n})();class sl{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ko(this.window.history)||ko(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ko(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class No extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new No,Q||(Q=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(zr=zr||document.querySelector("base"),zr?zr.getAttribute("href"):null);return null==t?null:function(n){qn=qn||document.createElement("a"),qn.setAttribute("href",n);const e=qn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){zr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let qn,zr=null;const Fo=new l.OlP("TRANSITION_ID"),ln=[{provide:l.ip1,useFactory:function(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Fo,ae,l.zs3],multi:!0}];class Ms{static init(){(0,l.VLi)(new Ms)}addToWindow(e){l.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(r=>{const i=l.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const h=function(_){u=u||_,a--,0==a&&r(u)};i.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ol=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Uo=new l.OlP("EventManagerPlugins");let Gr=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Uo),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class al{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let mo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),et=(()=>{class n extends mo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(mc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(mc))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function mc(n){F().remove(n)}const ll={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ya=/%COMP%/g;function Ps(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ps(n,i,t):(i=i.replace(ya,n),t.push(i))}return t}function An(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Os=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Cr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case l.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Au(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case l.ifc.ShadowDom:return new Du(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ps(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Gr),l.LFG(et),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Cr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ll[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ll[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ll[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,r,i&l.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,An(r)):this.eventManager.addEventListener(e,t,An(r))}}class Au extends Cr{constructor(e,t,r,i){super(e),this.component=r;const a=Ps(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr="_ngcontent-%COMP%".replace(ya,i+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(ya,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Du extends Cr{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ps(i.id,i.styles,[]);for(let u=0;u<a.length;u++){const h=document.createElement("style");h.textContent=a[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let dl=(()=>{class n extends al{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Bo=["alt","control","meta","shift"],Yi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},_o={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let fs=(()=>{class n extends al{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="";if(Bo.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),u+=_+".")}),u+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=u,h}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&hl.hasOwnProperty(e)&&(e=hl[e]))}return Yi[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Bo.forEach(a=>{a!=i&&_o[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const va=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:th},{provide:l.g9A,useValue:function(){No.makeCurrent(),Ms.init()},multi:!0},{provide:ae,useFactory:function(){return(0,l.RDi)(document),document},deps:[]}]),wc=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function(){return new l.qLn},deps:[]},{provide:Uo,useClass:dl,multi:!0,deps:[ae,l.R0b,l.Lbi]},{provide:Uo,useClass:fs,multi:!0,deps:[ae]},{provide:Os,useClass:Os,deps:[Gr,et,l.AFp]},{provide:l.FYo,useExisting:Os},{provide:mo,useExisting:et},{provide:et,useClass:et,deps:[ae]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b]},{provide:Gr,useClass:Gr,deps:[Uo,l.R0b]},{provide:class{},useClass:ol,deps:[]}];let Ca=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:Fo,useExisting:l.AFp},ln]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(n,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:wc,imports:[bu,l.hGG]}),n})();"undefined"!=typeof window&&window;var tn=N(5947),Un=N(8305);const{isArray:Pr}=Array,{getPrototypeOf:xu,prototype:cp,keys:up}=Object;function Zo(n){if(1===n.length){const e=n[0];if(Pr(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&xu(n)===cp}(e)){const t=up(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ps=N(9985),gs=N(7613),Sn=N(8889),rt=N(4753);const{isArray:bl}=Array;function ku(n){return(0,rt.U)(e=>function(n,e){return bl(e)?n(...e):n(e)}(n,e))}function uh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let ba=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),ii=(()=>{class n extends ba{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const si=new l.OlP("NgValueAccessor"),ms={provide:si,useExisting:(0,l.Gpc)(()=>oi),multi:!0},Fu=new l.OlP("CompositionEventMode");let oi=(()=>{class n extends ba{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(Fu,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&l.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[l._Bn([ms]),l.qOj]}),n})();const nn=new l.OlP("NgValidators"),Wr=new l.OlP("NgAsyncValidators");function Dc(n){return null!=n}function Ti(n){const e=(0,l.QGY)(n)?(0,tn.D)(n):n;return(0,l.CqO)(e),e}function dp(n){let e={};return n.forEach(t=>{e=null!=t?gt(gt({},e),t):e}),0===Object.keys(e).length?null:e}function Aa(n,e){return e.map(t=>t(n))}function Sc(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function fh(n){return null!=n?function(n){if(!n)return null;const e=n.filter(Dc);return 0==e.length?null:function(t){return dp(Aa(t,e))}}(Sc(n)):null}function hp(n){return null!=n?function(n){if(!n)return null;const e=n.filter(Dc);return 0==e.length?null:function(t){return function(...n){const e=(0,gs.jO)(n),{args:t,keys:r}=Zo(n),i=new Un.y(a=>{const{length:u}=t;if(!u)return void a.complete();const h=new Array(u);let _=u,w=u;for(let I=0;I<u;I++){let A=!1;(0,ps.Xf)(t[I]).subscribe(new Sn.Q(a,x=>{A||(A=!0,w--),h[I]=x},()=>_--,void 0,()=>{(!_||!A)&&(w||a.next(r?uh(r,h):h),a.complete())}))}});return e?i.pipe(ku(e)):i}(Aa(t,e).map(Ti)).pipe((0,rt.U)(dp))}}(Sc(n)):null}function Uu(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function gh(n){return n?Array.isArray(n)?n:[n]:[]}function Vn(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ns(n,e){const t=gh(e);return gh(n).forEach(i=>{Vn(t,i)||t.push(i)}),t}function Da(n,e){return gh(e).filter(t=>!Vn(n,t))}class fp{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=fh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Or extends fp{get formDirective(){return null}get path(){return null}}class jn extends fp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Kr=(()=>{class n extends class{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null==(t=this._cd)?void 0:t.submitted):!!(null==(i=null==(r=this._cd)?void 0:r.control)?void 0:i[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(jn,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[l.qOj]}),n})();function _s(n,e){(function(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Uu(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Uu(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Sl(e._rawValidators,i),Sl(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&zo(n,e)})}(n,e),function(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&zo(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Sl(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function zo(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function oe(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const We="VALID",$e="INVALID",Ot="PENDING",rn="DISABLED";function rr(n){return(ys(n)?n.validators:n)||null}function yn(n){return Array.isArray(n)?fh(n):n||null}function Fs(n,e){return(ys(e)?e.asyncValidators:n)||null}function Ls(n){return Array.isArray(n)?hp(n):n||null}function ys(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class vs{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=yn(this._rawValidators),this._composedAsyncValidatorFn=Ls(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===We}get invalid(){return this.status===$e}get pending(){return this.status==Ot}get disabled(){return this.status===rn}get enabled(){return this.status!==rn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=yn(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Ls(e)}addValidators(e){this.setValidators(Ns(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ns(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Da(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Da(e,this._rawAsyncValidators))}hasValidator(e){return Vn(this._rawValidators,e)}hasAsyncValidator(e){return Vn(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ot,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=rn,this.errors=null,this._forEachChild(r=>{r.disable(qi(gt({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(qi(gt({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=We,this._forEachChild(r=>{r.enable(qi(gt({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(qi(gt({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===We||this.status===Ot)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rn:We}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ot,this._hasOwnPendingAsyncValidator=!0;const t=Ti(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof Us?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof yh&&r.at(i)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?rn:this.errors?$e:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ot)?Ot:this._anyControlsHaveStatus($e)?$e:We}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ys(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Xi extends vs{constructor(e=null,t,r){super(rr(t),Fs(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){oe(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){oe(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Us extends vs{constructor(e,t,r){super(rr(t),Fs(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof Xi?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class yh extends vs{constructor(e,t,r){super(rr(t),Fs(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Xi?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const kv={provide:jn,useExisting:(0,l.Gpc)(()=>Ai)},Mm=(()=>Promise.resolve(null))();let Ai=(()=>{class n extends jn{constructor(t,r,i,a){super(),this.control=new Xi,this._registered=!1,this.update=new l.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===oi?t=a:function(n){return Object.getPrototypeOf(n.constructor)===ii}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){_s(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Mm.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;Mm.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Or,9),l.Y36(nn,10),l.Y36(Wr,10),l.Y36(si,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([kv]),l.qOj,l.TTD]}),n})(),Rl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const wE={provide:si,useExisting:(0,l.Gpc)(()=>Tp),multi:!0};function Fv(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Tp=(()=>{class n extends ii{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=this._getOptionId(t);null==r&&this.setProperty("selectedIndex",-1);const i=Fv(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&l.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[l._Bn([wE]),l.qOj]}),n})(),km=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Fv(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(Tp,9))},n.\u0275dir=l.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Lv={provide:si,useExisting:(0,l.Gpc)(()=>kc),multi:!0};function Rm(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let kc=(()=>{class n extends ii{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,u)=>{a._setSelected(i.indexOf(u.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const u=a;for(let h=0;h<u.length;h++){const w=this._getOptionValue(u[h].value);i.push(w)}}else{const u=r.options;for(let h=0;h<u.length;h++){const _=u[h];if(_.selected){const w=this._getOptionValue(_.value);i.push(w)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&l.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[l._Bn([Lv]),l.qOj]}),n})(),Ip=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Rm(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Rm(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(kc,9))},n.\u0275dir=l.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Nl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Rl]]}),n})(),ir=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Nl]}),n})();class Zm{}const Bs="*";function jv(n,e=null){return{type:2,steps:n,options:e}}function Fc(n){return{type:6,styles:n,offset:null}}function Ah(n){Promise.resolve(null).then(n)}class Fl{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ah(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class zm{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?Ah(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==a&&this._onFinish()}),u.onDestroy(()=>{++r==a&&this._onDestroy()}),u.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function Gm(){return"undefined"!=typeof window&&void 0!==window.document}function Dh(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Oa(n){switch(n.length){case 0:return new Fl;case 1:return n[0];default:return new zm(n)}}function xp(n,e,t,r,i={},a={}){const u=[],h=[];let _=-1,w=null;if(r.forEach(I=>{const A=I.offset,x=A==_,U=x&&w||{};Object.keys(I).forEach(B=>{let X=B,de=I[B];if("offset"!==B)switch(X=e.normalizePropertyName(X,u),de){case"!":de=i[B];break;case Bs:de=a[B];break;default:de=e.normalizeStyleValue(B,X,de,u)}U[X]=de}),x||h.push(U),w=U,_=A}),u.length){const I="\n - ";throw new Error(`Unable to animate due to the following errors:${I}${u.join(I)}`)}return h}function kp(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Yu(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Yu(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Yu(t,"destroy",n)))}}function Yu(n,e,t){const r=t.totalTime,a=Rp(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),u=n._data;return null!=u&&(a._data=u),a}function Rp(n,e,t,r,i="",a=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!u}}function es(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function Sh(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let Qu=(n,e)=>!1,Mh=(n,e)=>!1,Wm=(n,e,t)=>[];const Lc=Dh();(Lc||"undefined"!=typeof Element)&&(Qu=Gm()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),Mh=(()=>{if(Lc||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,r)=>e.apply(t,[r]):Mh}})(),Wm=(n,e,t)=>{let r=[];if(t){const i=n.querySelectorAll(e);for(let a=0;a<i.length;a++)r.push(i[a])}else{const i=n.querySelector(e);i&&r.push(i)}return r});let Ul=null,Np=!1;function Ju(n){Ul||(Ul=("undefined"!=typeof document?document.body:null)||{},Np=!!Ul.style&&"WebkitAppearance"in Ul.style);let e=!0;return Ul.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ul.style,!e&&Np&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Ul.style)),e}const Xu=Mh,Lp=Qu,ed=Wm;function Si(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let Uc=(()=>{class n{validateStyleProperty(t){return Ju(t)}matchesElement(t,r){return Xu(t,r)}containsElement(t,r){return Lp(t,r)}query(t,r,i){return ed(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,u,h=[],_){return new Fl(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),td=(()=>{class n{}return n.NOOP=new Uc,n})();const xa="ng-enter",Mi="ng-leave",Bc="ng-trigger",Vp=".ng-trigger",Zs="ng-animating",nd=".ng-animating";function Co(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Yr(parseFloat(e[1]),e[2])}function Yr(n,e){return"s"===e?1e3*n:n}function Vl(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let i,a=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=Yr(parseFloat(h[1]),h[2]);const _=h[3];null!=_&&(a=Yr(parseFloat(_),h[4]));const w=h[5];w&&(u=w)}else i=n;if(!t){let h=!1,_=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),h=!0),a<0&&(e.push("Delay values below 0 are not allowed for this animation step."),h=!0),h&&e.splice(_,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:a,easing:u}}(n,e,t)}function Zl(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Pi(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Zl(n,t);return t}function rd(n,e,t){return t?e+":"+t+";":""}function Oh(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=rd(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=rd(0,S(t),n.style[t]));n.setAttribute("style",e)}function Wo(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=C(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),Dh()&&Oh(n))}function Oi(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=C(t);n.style[r]=""}),Dh()&&Oh(n))}function ql(n){return Array.isArray(n)?1==n.length?n[0]:jv(n):n}const Bp=new RegExp("{{\\s*(.+?)\\s*}}","g");function xh(n){let e=[];if("string"==typeof n){let t;for(;t=Bp.exec(n);)e.push(t[1]);Bp.lastIndex=0}return e}function y(n,e,t){const r=n.toString(),i=r.replace(Bp,(a,u)=>{let h=e[u];return e.hasOwnProperty(u)||(t.push(`Please provide a value for the animation param ${u}`),h=""),h.toString()});return i==r?n:i}function p(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const g=/-+([a-z0-9])/g;function C(n){return n.replace(g,(...e)=>e[1].toUpperCase())}function S(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function P(n,e){return 0===n||0===e}function q(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let a=e[0],u=[];if(r.forEach(h=>{a.hasOwnProperty(h)||u.push(h),a[h]=t[h]}),u.length)for(var i=1;i<e.length;i++){let h=e[i];u.forEach(function(_){h[_]=ke(n,_)})}}return e}function J(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function ke(n,e){return window.getComputedStyle(n)[e]}function it(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function(n,e,t){if(":"==n[0]){const _=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],a=r[2],u=r[3];e.push(Zc(i,u));"<"==a[0]&&!("*"==i&&"*"==u)&&e.push(Zc(u,i))}(r,t,e)):t.push(n),t}const $n=new Set(["true","1"]),Rr=new Set(["false","0"]);function Zc(n,e){const t=$n.has(n)||Rr.has(n),r=$n.has(e)||Rr.has(e);return(i,a)=>{let u="*"==n||n==i,h="*"==e||e==a;return!u&&t&&"boolean"==typeof i&&(u=i?$n.has(n):Rr.has(n)),!h&&r&&"boolean"==typeof a&&(h=a?$n.has(e):Rr.has(e)),u&&h}}const Qm=new RegExp("s*:selfs*,?","g");function jl(n,e,t){return new Zp(n).build(e,t)}class Zp{constructor(e){this._driver=e}build(e,t){const r=new Nh(t);return this._resetContextStyleTimingState(r),J(this,ql(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const _=h,w=_.name;w.toString().split(/\s*,\s*/).forEach(I=>{_.name=I,a.push(this.visitState(_,t))}),_.name=w}else if(1==h.type){const _=this.visitTransition(h,t);r+=_.queryCount,i+=_.depCount,u.push(_)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:a,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,u=i||{};if(r.styles.forEach(h=>{if(Ko(h)){const _=h;Object.keys(_).forEach(w=>{xh(_[w]).forEach(I=>{u.hasOwnProperty(I)||a.add(I)})})}}),a.size){const h=p(a.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${h.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=J(this,ql(e.animation),t);return{type:1,matchers:it(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:qc(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>J(this,r,t)),options:qc(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(u=>{t.currentTime=r;const h=J(this,u,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:a,options:qc(e.options)}}visitAnimate(e,t){const r=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return jp(Vl(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=jp(0,0,"");return a.dynamic=!0,a.strValue=r,a}return t=t||Vl(r,e),jp(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:Fc({});if(5==a.type)i=this.visitKeyframes(a,t);else{let u=e.styles,h=!1;if(!u){h=!0;const w={};r.easing&&(w.easing=r.easing),u=Fc(w)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(u,t);_.isEmptyStep=h,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==Bs?r.push(u):t.errors.push(`The provided style string value ${u} is not allowed.`):r.push(u)}):r.push(e.styles);let i=!1,a=null;return r.forEach(u=>{if(Ko(u)){const h=u,_=h.easing;if(_&&(a=_,delete h.easing),!i)for(let w in h)if(h[w].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(h=>{if(!this._driver.validateStyleProperty(h))return void t.errors.push(`The provided animation property "${h}" is not a supported CSS property for animations`);const _=t.collectedStyles[t.currentQuerySelector],w=_[h];let I=!0;w&&(a!=i&&a>=w.startTime&&i<=w.endTime&&(t.errors.push(`The CSS property "${h}" that exists between the times of "${w.startTime}ms" and "${w.endTime}ms" is also being animated in a parallel animation between the times of "${a}ms" and "${i}ms"`),I=!1),a=w.startTime),I&&(_[h]={startTime:a,endTime:i}),t.options&&function(n,e,t){const r=e.params||{},i=xh(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(`Unable to resolve the local animation param ${a} in the given list of values`)})}(u[h],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let a=0;const u=[];let h=!1,_=!1,w=0;const I=e.steps.map(Ge=>{const Ke=this._makeStyleAst(Ge,t);let ot=null!=Ke.offset?Ke.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Ko(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(Ko(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Ke.styles),ze=0;return null!=ot&&(a++,ze=Ke.offset=ot),_=_||ze<0||ze>1,h=h||ze<w,w=ze,u.push(ze),Ke});_&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),h&&t.errors.push("Please ensure that all keyframe offsets are in order");const A=e.steps.length;let x=0;a>0&&a<A?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==a&&(x=1/(A-1));const U=A-1,B=t.currentTime,X=t.currentAnimateTimings,de=X.duration;return I.forEach((Ge,Ke)=>{const ot=x>0?Ke==U?1:x*Ke:u[Ke],ze=ot*de;t.currentTime=B+X.delay+ze,X.duration=ze,this._validateStyleAst(Ge,t),Ge.offset=ot,r.styles.push(Ge)}),r}visitReference(e,t){return{type:8,animation:J(this,ql(e.animation),t),options:qc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:qc(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:qc(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,u]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Qm,"")),n=n.replace(/@\*/g,Vp).replace(/@\w+/g,t=>Vp+"-"+t.substr(1)).replace(/:animating/g,nd),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,es(t.collectedStyles,t.currentQuerySelector,{});const h=J(this,ql(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:h,originalSelector:e.selector,options:qc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Vl(e.timings,t.errors,!0);return{type:12,animation:J(this,ql(e.animation),t),timings:r,options:null}}}class Nh{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Ko(n){return!Array.isArray(n)&&"object"==typeof n}function qc(n){return n?(n=Zl(n)).params&&(n.params=function(n){return n?Zl(n):null}(n.params)):n={},n}function jp(n,e,t){return{duration:n,delay:e,easing:t}}function Xm(n,e,t,r,i,a,u=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:u,subTimeline:h}}class Lh{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const PE=new RegExp(":enter","g"),uA=new RegExp(":leave","g");function e_(n,e,t,r,i,a={},u={},h,_,w=[]){return(new zv).buildKeyframes(n,e,t,r,i,a,u,h,_,w)}class zv{buildKeyframes(e,t,r,i,a,u,h,_,w,I=[]){w=w||new Lh;const A=new OE(e,t,w,i,a,I,[]);A.options=_,A.currentTimeline.setStyles([u],null,A.errors,_),J(this,r,A);const x=A.timelines.filter(U=>U.containsAnimation());if(x.length&&Object.keys(h).length){const U=x[x.length-1];U.allowOnlyTimelineStyles()||U.setStyles([h],null,A.errors,_)}return x.length?x.map(U=>U.buildKeyframes()):[Xm(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.consume(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);a!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const u=null!=r.duration?Co(r.duration):null,h=null!=r.delay?Co(r.delay):null;return 0!==u&&e.forEach(_=>{const w=t.appendInstructionToTimeline(_,u,h);a=Math.max(a,w.duration+w.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),J(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Hp);const u=Co(a.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>J(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Co(e.options.delay):0;e.steps.forEach(u=>{const h=t.createSubContext(e.options);a&&h.delayNextStep(a),J(this,u,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Vl(t.params?y(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(_=>{h.forwardTime((_.offset||0)*a),h.setStyles(_.styles,_.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Co(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Hp);let u=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let _=null;h.forEach((w,I)=>{t.currentQueryIndex=I;const A=t.createSubContext(e.options,w);a&&A.delayNextStep(a),w===t.element&&(_=A.currentTimeline),J(this,e.animation,A),A.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,A.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,u=Math.abs(a.duration),h=u*(t.currentQueryTotal-1);let _=u*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":_=h-_;break;case"full":_=r.currentStaggerTime}const I=t.currentTimeline;_&&I.delayNextStep(_);const A=I.currentTime;J(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-A+(i.startTime-r.currentTimeline.startTime)}}const Hp={};class OE{constructor(e,t,r,i,a,u,h,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Hp,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new zp(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Co(r.duration)),null!=r.delay&&(i.delay=Co(r.delay));const a=r.params;if(a){let u=i.params;u||(u=this.options.params={}),Object.keys(a).forEach(h=>{(!t||!u.hasOwnProperty(h))&&(u[h]=y(a[h],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new OE(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=Hp,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},a=new dA(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,u){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(PE,"."+this._enterClassName)).replace(uA,"."+this._leaveClassName);let w=this._driver.query(this.element,e,1!=r);0!==r&&(w=r<0?w.slice(w.length+r,w.length):w.slice(0,r)),h.push(...w)}return!a&&0==h.length&&u.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),h}}class zp{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new zp(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Bs,this._currentKeyframe[t]=Bs}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const a=i&&i.params||{},u=function(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(a=>{t[a]=Bs})):Pi(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(h=>{const _=y(u[h],a,r);this._pendingStyles[h]=_,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:Bs),this._updateStyle(h,_)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,_)=>{const w=Pi(h,!0);Object.keys(w).forEach(I=>{const A=w[I];"!"==A?e.add(I):A==Bs&&t.add(I)}),r||(w.offset=_/this.duration),i.push(w)});const a=e.size?p(e.values()):[],u=t.size?p(t.values()):[];if(r){const h=i[0],_=Zl(h);h.offset=0,_.offset=1,i=[h,_]}return Xm(this.element,i,a,u,this.duration,this.startTime,this.easing,!1)}}class dA extends zp{constructor(e,t,r,i,a,u,h=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],u=r+t,h=t/u,_=Pi(e[0],!1);_.offset=0,a.push(_);const w=Pi(e[0],!1);w.offset=Gv(h),a.push(w);const I=e.length-1;for(let A=1;A<=I;A++){let x=Pi(e[A],!1);x.offset=Gv((t+x.offset*r)/u),a.push(x)}r=u,t=0,i="",e=a}return Xm(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Gv(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class js{}class xE extends js{normalizePropertyName(e,t){return C(e)}normalizeStyleValue(e,t,r,i){let a="";const u=r.toString().trim();if(fA[t]&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return u+a}}const fA=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function kE(n,e,t,r,i,a,u,h,_,w,I,A,x){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:u,timelines:h,queriedElements:_,preStyleProps:w,postStyleProps:I,totalTime:A,errors:x}}const Wv={};class Kv{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],a=this._stateStyles[e],u=i?i.buildStyles(t,r):{};return a?a.buildStyles(t,r):u}build(e,t,r,i,a,u,h,_,w,I){const A=[],x=this.ast.options&&this.ast.options.params||Wv,B=this.buildStyles(r,h&&h.params||Wv,A),X=_&&_.params||Wv,de=this.buildStyles(i,X,A),Ge=new Set,Ke=new Map,ot=new Map,ze="void"===i,Gt={params:gt(gt({},x),X)},kn=I?[]:e_(e,t,this.ast.animation,a,u,B,de,Gt,w,A);let lr=0;if(kn.forEach(da=>{lr=Math.max(da.duration+da.delay,lr)}),A.length)return kE(t,this._triggerName,r,i,ze,B,de,[],[],Ke,ot,lr,A);kn.forEach(da=>{const Wd=da.element,s3=es(Ke,Wd,{});da.preStyleProps.forEach(pm=>s3[pm]=!0);const fE=es(ot,Wd,{});da.postStyleProps.forEach(pm=>fE[pm]=!0),Wd!==t&&Ge.add(Wd)});const lo=p(Ge.values());return kE(t,this._triggerName,r,i,ze,B,de,kn,lo,Ke,ot,lr)}}class mA{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Zl(this.defaultParams);return Object.keys(e).forEach(a=>{const u=e[a];null!=u&&(i[a]=u)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const u=a;Object.keys(u).forEach(h=>{let _=u[h];_.length>1&&(_=y(_,i,t));const w=this.normalizer.normalizePropertyName(h,t);_=this.normalizer.normalizeStyleValue(h,w,_,t),r[w]=_})}}),r}}class Mt{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new mA(i.style,i.options&&i.options.params||{},r)}),Yv(this.states,"true","1"),Yv(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Kv(e,i,this.states))}),this.fallbackTransition=function(n,e,t){return new Kv(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Yv(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const NE=new Lh;class t_{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=jl(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,a=xp(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations[e];let u;const h=new Map;if(a?(u=e_(this._driver,t,a,xa,Mi,{},{},r,NE,i),u.forEach(I=>{const A=es(h,I.element,{});I.postStyleProps.forEach(x=>A[x]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),u=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);h.forEach((I,A)=>{Object.keys(I).forEach(x=>{I[x]=this._driver.computeStyle(A,x,Bs)})});const w=Oa(u.map(I=>{const A=h.get(I.element);return this._buildPlayer(I,{},A)}));return this._playersById[e]=w,w.onDestroy(()=>this.destroy(e)),this.players.push(w),w}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const a=Rp(t,"","","");return kp(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const wo="ng-animate-queued",LE="ng-animate-disabled",n_=".ng-animate-disabled",UE=[],r_={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Lx={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},$s="__ng_removed";class VE{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=null!=(n=r?e.value:e)?n:null,r){const a=Zl(e);delete a.value,this.options=a}else this.options={};var n;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const jc="void",Uh=new VE(jc);class Jv{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Hs(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(n=r)&&"done"!=n)throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);var n;const a=es(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};a.push(u);const h=es(this._engine.statesByElement,e,{});return h.hasOwnProperty(t)||(Hs(e,Bc),Hs(e,Bc+"-"+t),h[t]=Uh),()=>{this._engine.afterFlush(()=>{const _=a.indexOf(u);_>=0&&a.splice(_,1),this._triggers[t]||delete h[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),u=new Gp(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Hs(e,Bc),Hs(e,Bc+"-"+t),this._engine.statesByElement.set(e,h={}));let _=h[t];const w=new VE(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&w.absorbOptions(_.options),h[t]=w,_||(_=Uh),w.value!==jc&&_.value===w.value){if(!function(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(_.params,w.params)){const X=[],de=a.matchStyles(_.value,_.params,X),Ge=a.matchStyles(w.value,w.params,X);X.length?this._engine.reportError(X):this._engine.afterFlush(()=>{Oi(e,de),Wo(e,Ge)})}return}const x=es(this._engine.playersByElement,e,[]);x.forEach(X=>{X.namespaceId==this.id&&X.triggerName==t&&X.queued&&X.destroy()});let U=a.matchTransition(_.value,w.value,e,w.params),B=!1;if(!U){if(!i)return;U=a.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:U,fromState:_,toState:w,player:u,isFallbackTransition:B}),B||(Hs(e,wo),u.onStart(()=>{sd(e,wo)})),u.onDone(()=>{let X=this.players.indexOf(u);X>=0&&this.players.splice(X,1);const de=this._engine.playersByElement.get(e);if(de){let Ge=de.indexOf(u);Ge>=0&&de.splice(Ge,1)}}),this.players.push(u),x.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Vp,!0);r.forEach(i=>{if(i[$s])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e);if(a){const u=[];if(Object.keys(a).forEach(h=>{if(this._triggers[h]){const _=this.trigger(e,h,jc,i);_&&u.push(_)}}),u.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),r&&Oa(u).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const u=a.name;if(i.has(u))return;i.add(u);const _=this._triggers[u].fallbackTransition,w=r[u]||Uh,I=new VE(jc),A=new Gp(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:_,fromState:w,toState:I,player:A,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[$s];(!a||a===r_)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Hs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,u=this._elementListeners.get(a);u&&u.forEach(h=>{if(h.name==r.triggerName){const _=Rp(a,r.triggerName,r.fromState.value,r.toState.value);_._data=e,kp(r.player,h.phase,_,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==a||0==u?a-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Xv{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Jv(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let a=r;a>=0;a--)if(this.driver.containsElement(this._namespaceList[a].hostElement,t)){this._namespaceList.splice(a+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let a=0;a<i.length;a++){const u=r[i[a]].namespaceId;if(u){const h=this._fetchNamespace(u);h&&t.add(h)}}}return t}trigger(e,t,r,i){if(i_(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!i_(t))return;const a=t[$s];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Hs(e,LE)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),sd(e,LE))}removeNode(e,t,r,i){if(i_(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i){this.collectedLeaveElements.push(t),t[$s]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1}}listen(e,t,r,i,a){return i_(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,Vp,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,nd,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Oa(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[$s];if(t&&t.setForRemoval){if(e[$s]=r_,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,n_)&&this.markElementAsDisabled(e,!1),this.driver.query(e,n_,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Hs(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Oa(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new Lh,i=[],a=new Map,u=[],h=new Map,_=new Map,w=new Map,I=new Set;this.disabledNodes.forEach(at=>{I.add(at);const wt=this.driver.query(at,".ng-animate-queued",!0);for(let kt=0;kt<wt.length;kt++)I.add(wt[kt])});const A=this.bodyNode,x=Array.from(this.statesByElement.keys()),U=CA(x,this.collectedEnterElements),B=new Map;let X=0;U.forEach((at,wt)=>{const kt=xa+X++;B.set(wt,kt),at.forEach(fn=>Hs(fn,kt))});const de=[],Ge=new Set,Ke=new Set;for(let at=0;at<this.collectedLeaveElements.length;at++){const wt=this.collectedLeaveElements[at],kt=wt[$s];kt&&kt.setForRemoval&&(de.push(wt),Ge.add(wt),kt.hasAnimation?this.driver.query(wt,".ng-star-inserted",!0).forEach(fn=>Ge.add(fn)):Ke.add(wt))}const ot=new Map,ze=CA(x,Array.from(Ge));ze.forEach((at,wt)=>{const kt=Mi+X++;ot.set(wt,kt),at.forEach(fn=>Hs(fn,kt))}),e.push(()=>{U.forEach((at,wt)=>{const kt=B.get(wt);at.forEach(fn=>sd(fn,kt))}),ze.forEach((at,wt)=>{const kt=ot.get(wt);at.forEach(fn=>sd(fn,kt))}),de.forEach(at=>{this.processLeaveNode(at)})});const Gt=[],kn=[];for(let at=this._namespaceList.length-1;at>=0;at--)this._namespaceList[at].drainQueuedTransitions(t).forEach(kt=>{const fn=kt.player,Zi=kt.element;if(Gt.push(fn),this.collectedEnterElements.length){const pu=Zi[$s];if(pu&&pu.setForMove)return void fn.destroy()}const fu=!A||!this.driver.containsElement(A,Zi),ha=ot.get(Zi),ep=B.get(Zi),Ir=this._buildInstruction(kt,r,ep,ha,fu);if(Ir.errors&&Ir.errors.length)kn.push(Ir);else{if(fu)return fn.onStart(()=>Oi(Zi,Ir.fromStyles)),fn.onDestroy(()=>Wo(Zi,Ir.toStyles)),void i.push(fn);if(kt.isFallbackTransition)return fn.onStart(()=>Oi(Zi,Ir.fromStyles)),fn.onDestroy(()=>Wo(Zi,Ir.toStyles)),void i.push(fn);Ir.timelines.forEach(pu=>pu.stretchStartingKeyframe=!0),r.append(Zi,Ir.timelines),u.push({instruction:Ir,player:fn,element:Zi}),Ir.queriedElements.forEach(pu=>es(h,pu,[]).push(fn)),Ir.preStyleProps.forEach((pu,pE)=>{const sA=Object.keys(pu);if(sA.length){let gm=_.get(pE);gm||_.set(pE,gm=new Set),sA.forEach(Rx=>gm.add(Rx))}}),Ir.postStyleProps.forEach((pu,pE)=>{const sA=Object.keys(pu);let gm=w.get(pE);gm||w.set(pE,gm=new Set),sA.forEach(Rx=>gm.add(Rx))})}});if(kn.length){const at=[];kn.forEach(wt=>{at.push(`@${wt.triggerName} has failed due to:\n`),wt.errors.forEach(kt=>at.push(`- ${kt}\n`))}),Gt.forEach(wt=>wt.destroy()),this.reportError(at)}const lr=new Map,lo=new Map;u.forEach(at=>{const wt=at.element;r.has(wt)&&(lo.set(wt,wt),this._beforeAnimationBuild(at.player.namespaceId,at.instruction,lr))}),i.forEach(at=>{const wt=at.element;this._getPreviousPlayers(wt,!1,at.namespaceId,at.triggerName,null).forEach(fn=>{es(lr,wt,[]).push(fn),fn.destroy()})});const da=de.filter(at=>bA(at,_,w)),Wd=new Map;e0(Wd,this.driver,Ke,w,Bs).forEach(at=>{bA(at,_,w)&&da.push(at)});const fE=new Map;U.forEach((at,wt)=>{e0(fE,this.driver,new Set(at),_,"!")}),da.forEach(at=>{const wt=Wd.get(at),kt=fE.get(at);Wd.set(at,gt(gt({},wt),kt))});const pm=[],o3=[],a3={};u.forEach(at=>{const{element:wt,player:kt,instruction:fn}=at;if(r.has(wt)){if(I.has(wt))return kt.onDestroy(()=>Wo(wt,fn.toStyles)),kt.disabled=!0,kt.overrideTotalTime(fn.totalTime),void i.push(kt);let Zi=a3;if(lo.size>1){let ha=wt;const ep=[];for(;ha=ha.parentNode;){const Ir=lo.get(ha);if(Ir){Zi=Ir;break}ep.push(ha)}ep.forEach(Ir=>lo.set(Ir,Zi))}const fu=this._buildAnimation(kt.namespaceId,fn,lr,a,fE,Wd);if(kt.setRealPlayer(fu),Zi===a3)pm.push(kt);else{const ha=this.playersByElement.get(Zi);ha&&ha.length&&(kt.parentPlayer=Oa(ha)),i.push(kt)}}else Oi(wt,fn.fromStyles),kt.onDestroy(()=>Wo(wt,fn.toStyles)),o3.push(kt),I.has(wt)&&i.push(kt)}),o3.forEach(at=>{const wt=a.get(at.element);if(wt&&wt.length){const kt=Oa(wt);at.setRealPlayer(kt)}}),i.forEach(at=>{at.parentPlayer?at.syncPlayerEvents(at.parentPlayer):at.destroy()});for(let at=0;at<de.length;at++){const wt=de[at],kt=wt[$s];if(sd(wt,Mi),kt&&kt.hasAnimation)continue;let fn=[];if(h.size){let fu=h.get(wt);fu&&fu.length&&fn.push(...fu);let ha=this.driver.query(wt,nd,!0);for(let ep=0;ep<ha.length;ep++){let Ir=h.get(ha[ep]);Ir&&Ir.length&&fn.push(...Ir)}}const Zi=fn.filter(fu=>!fu.destroyed);Zi.length?wA(this,wt,Zi):this.processLeaveNode(wt)}return de.length=0,pm.forEach(at=>{this.players.push(at),at.onDone(()=>{at.destroy();const wt=this.players.indexOf(at);this.players.splice(wt,1)}),at.play()}),pm}elementContainsData(e,t){let r=!1;const i=t[$s];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let u=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(u=h)}else{const h=this.playersByElement.get(e);if(h){const _=!a||a==jc;h.forEach(w=>{w.queued||!_&&w.triggerName!=i||u.push(w)})}}return(r||i)&&(u=u.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),u}_beforeAnimationBuild(e,t,r){const a=t.element,u=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const w=_.element,I=w!==a,A=es(r,w,[]);this._getPreviousPlayers(w,I,u,h,t.toState).forEach(U=>{const B=U.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),U.destroy(),A.push(U)})}Oi(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,u){const h=t.triggerName,_=t.element,w=[],I=new Set,A=new Set,x=t.timelines.map(B=>{const X=B.element;I.add(X);const de=X[$s];if(de&&de.removedBeforeQueried)return new Fl(B.duration,B.delay);const Ge=X!==_,Ke=function(n){const e=[];return EA(n,e),e}((r.get(X)||UE).map(lr=>lr.getRealPlayer())).filter(lr=>!!lr.element&&lr.element===X),ot=a.get(X),ze=u.get(X),Gt=xp(0,this._normalizer,0,B.keyframes,ot,ze),kn=this._buildPlayer(B,Gt,Ke);if(B.subTimeline&&i&&A.add(X),Ge){const lr=new Gp(e,h,X);lr.setRealPlayer(kn),w.push(lr)}return kn});w.forEach(B=>{es(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,B.element,B))}),I.forEach(B=>Hs(B,Zs));const U=Oa(x);return U.onDestroy(()=>{I.forEach(B=>sd(B,Zs)),Wo(_,t.toStyles)}),A.forEach(B=>{es(i,B,[]).push(U)}),U}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Fl(e.duration,e.delay)}}class Gp{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Fl,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>kp(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){es(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function i_(n){return n&&1===n.nodeType}function BE(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function e0(n,e,t,r,i){const a=[];t.forEach(_=>a.push(BE(_)));const u=[];r.forEach((_,w)=>{const I={};_.forEach(A=>{const x=I[A]=e.computeStyle(w,A,i);(!x||0==x.length)&&(w[$s]=Lx,u.push(w))}),n.set(w,I)});let h=0;return t.forEach(_=>BE(_,a[h++])),u}function CA(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),a=new Map;function u(h){if(!h)return 1;let _=a.get(h);if(_)return _;const w=h.parentNode;return _=t.has(w)?w:i.has(w)?1:u(w),a.set(h,_),_}return e.forEach(h=>{const _=u(h);1!==_&&t.get(_).push(h)}),t}const s_="$$classes";function Hs(n,e){if(n.classList)n.classList.add(e);else{let t=n[s_];t||(t=n[s_]={}),t[e]=!0}}function sd(n,e){if(n.classList)n.classList.remove(e);else{let t=n[s_];t&&delete t[e]}}function wA(n,e,t){Oa(t).onDone(()=>n.processLeaveNode(e))}function EA(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof zm?EA(r.players,e):e.push(r)}}function bA(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class n0{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new Xv(e,t,r),this._timelineEngine=new t_(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const u=e+"-"+i;let h=this._triggerCache[u];if(!h){const _=[],w=jl(this._driver,a,_);if(_.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${_.join("\n - ")}`);h=function(n,e,t){return new Mt(n,e,t)}(i,w,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,u]=Sh(r);this._timelineEngine.command(a,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[u,h]=Sh(r);return this._timelineEngine.listen(u,t,h,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function TA(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=ZE(e[0]),e.length>1&&(r=ZE(e[e.length-1]))):e&&(t=ZE(e)),t||r?new Bx(n,t,r):null}let Bx=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Wo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Wo(this._element,this._initialStyles),this._endStyles&&(Wo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Oi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Oi(this._element,this._endStyles),this._endStyles=null),Wo(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function ZE(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];Zx(i)&&(e=e||{},e[i]=n[i])}return e}function Zx(n){return"display"===n||"position"===n}const IA="animation",Hl="animationend";class AA{constructor(e,t,r,i,a,u,h){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=a,this._fillMode=u,this._onDoneFn=h,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=_=>this._handleCallback(_)}apply(){(function(n,e){const t=l0(n,"").trim();let r=0;t.length&&(function(n,e){let t=0;for(let r=0;r<n.length;r++)","===n.charAt(r)&&t++;return t}(t)+1,e=`${t}, ${e}`),Wp(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),zl(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){s0(this._element,this._name,"paused")}resume(){s0(this._element,this._name,"running")}setPosition(e){const t=o_(this._element,this._name);this._position=e*this._duration,Wp(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),zl(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const r=l0(n,"").split(","),i=a0(r,e);i>=0&&(r.splice(i,1),Wp(n,"",r.join(",")))}(this._element,this._name))}}function s0(n,e,t){Wp(n,"PlayState",t,o_(n,e))}function o_(n,e){const t=l0(n,"");return t.indexOf(",")>0?a0(t.split(","),e):a0([t],e)}function a0(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function zl(n,e,t){t?n.removeEventListener(Hl,e):n.addEventListener(Hl,e)}function Wp(n,e,t,r){const i=IA+e;if(null!=r){const a=n.style[i];if(a.length){const u=a.split(",");u[r]=t,t=u.join(",")}}n.style[i]=t}function l0(n,e){return n.style[IA+e]||""}class $E{constructor(e,t,r,i,a,u,h,_){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=a,this._finalStyles=h,this._specialStyles=_,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=u||"linear",this.totalTime=i+a,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new AA(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:ke(this.element,r))})}this.currentSnapshot=e}}class SA extends Fl{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=Si(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class a_{constructor(){this._count=0}validateStyleProperty(e){return Ju(e)}matchesElement(e,t){return Xu(e,t)}containsElement(e,t){return Lp(e,t)}query(e,t,r){return ed(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(h=>Si(h));let i=`@keyframes ${t} {\n`,a="";r.forEach(h=>{a=" ";const _=parseFloat(h.offset);i+=`${a}${100*_}% {\n`,a+=" ",Object.keys(h).forEach(w=>{const I=h[w];switch(w){case"offset":return;case"easing":return void(I&&(i+=`${a}animation-timing-function: ${I};\n`));default:return void(i+=`${a}${w}: ${I};\n`)}}),i+=`${a}}\n`}),i+="}\n";const u=document.createElement("style");return u.textContent=i,u}animate(e,t,r,i,a,u=[],h){const _=u.filter(de=>de instanceof $E),w={};P(r,i)&&_.forEach(de=>{let Ge=de.currentSnapshot;Object.keys(Ge).forEach(Ke=>w[Ke]=Ge[Ke])});const I=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=q(e,t,w));if(0==r)return new SA(e,I);const A="gen_css_kf_"+this._count++,x=this.buildKeyframeElement(e,A,t);(function(n){var t;const e=null==(t=n.getRootNode)?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(e).appendChild(x);const B=TA(e,t),X=new $E(e,t,A,r,i,a,I,B);return X.onDestroy(()=>{var n;(n=x).parentNode.removeChild(n)}),X}}class u0{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:ke(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class d0{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(f0().toString()),this._cssKeyframesDriver=new a_}validateStyleProperty(e){return Ju(e)}matchesElement(e,t){return Xu(e,t)}containsElement(e,t){return Lp(e,t)}query(e,t,r){return ed(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,a,u=[],h){if(!h&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,a,u);const I={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(I.easing=a);const A={},x=u.filter(B=>B instanceof u0);P(r,i)&&x.forEach(B=>{let X=B.currentSnapshot;Object.keys(X).forEach(de=>A[de]=X[de])});const U=TA(e,t=q(e,t=t.map(B=>Pi(B,!1)),A));return new u0(e,t,I,U)}}function f0(){return Gm()&&Element.prototype.animate||{}}let l_=(()=>{class n extends Zm{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?jv(t):t;return OA(this._renderer,null,r,"register",[i]),new PA(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class PA extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new zE(this._id,e,t||{},this._renderer)}}class zE{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return OA(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!=(t=null==(e=this._renderer.engine.players[+this.id])?void 0:e.getPosition())?t:0}}function OA(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const p0="@.disabled";let xA=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,u)=>{const h=null==u?void 0:u.parentNode(a);h&&u.removeChild(h,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let I=this._rendererCache.get(a);return I||(I=new g0("",a,this.engine),this._rendererCache.set(a,I)),I}const u=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const _=I=>{Array.isArray(I)?I.forEach(_):this.engine.registerTrigger(u,h,t,I.name,I)};return r.data.animation.forEach(_),new kA(this,h,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[u,h]=a;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(n0),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class g0{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==p0?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class kA extends g0{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==p0?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),u="";return"@"!=a.charAt(0)&&([a,u]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let NA=(()=>{class n extends n0{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ae),l.LFG(td),l.LFG(js))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const m0=new l.OlP("AnimationModuleType"),LA=[{provide:Zm,useClass:l_},{provide:js,useFactory:function(){return new xE}},{provide:n0,useClass:NA},{provide:l.FYo,useFactory:function(n,e,t){return new xA(n,e,t)},deps:[Os,n0,l.R0b]}],GE=[{provide:td,useFactory:function(){return"function"==typeof f0()?new d0:new a_}},{provide:m0,useValue:"BrowserAnimations"},...LA],_0=[{provide:td,useClass:Uc},{provide:m0,useValue:"NoopAnimations"},...LA];let WE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?_0:GE}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:GE,imports:[Ca]}),n})();function vt(...n){const e=(0,gs.yG)(n);return(0,tn.D)(n,e)}var Yo=N(273);class Gs extends Yo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Zh=N(4623),KE=N(8395);function y0(n,e,t){n?(0,KE.f)(t,n,e):e()}const c_=(0,N(4893).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ws=N(5373);function Jp(...n){return(0,Ws.J)(1)((0,tn.D)(n,(0,gs.yG)(n)))}function u_(n){return new Un.y(e=>{(0,ps.Xf)(n()).subscribe(e)})}var Xp=N(5583),C0=N(7908),Qr=N(9947);function QE(){return(0,Qr.e)((n,e)=>{let t=null;n._refCount++;const r=new Sn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class JE extends Un.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Qr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new C0.w0;const t=this.getSubject();e.add(this.source.subscribe(new Sn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=C0.w0.EMPTY)}return e}refCount(){return QE()(this)}}function Hn(n,e){return(0,Qr.e)((t,r)=>{let i=null,a=0,u=!1;const h=()=>u&&!i&&r.complete();t.subscribe(new Sn.Q(r,_=>{null==i||i.unsubscribe();let w=0;const I=a++;(0,ps.Xf)(n(_,I)).subscribe(i=new Sn.Q(r,A=>r.next(e?e(_,A,I,w++):A),()=>{i=null,h()}))},()=>{u=!0,h()}))})}var Qo=N(9468);function d_(...n){const e=(0,gs.yG)(n);return(0,Qr.e)((t,r)=>{(e?Jp(n,t,e):Jp(n,t)).subscribe(r)})}function h_(n,e,t,r,i){return(a,u)=>{let h=t,_=e,w=0;a.subscribe(new Sn.Q(u,I=>{const A=w++;_=h?n(_,I,A):(h=!0,I),r&&u.next(_)},i&&(()=>{h&&u.next(_),u.complete()})))}}function Gl(n,e){return(0,Qr.e)(h_(n,e,arguments.length>=2,!0))}function ts(n,e){return(0,Qr.e)((t,r)=>{let i=0;t.subscribe(new Sn.Q(r,a=>n.call(e,a,i++)&&r.next(a)))})}function ka(n){return(0,Qr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe(new Sn.Q(t,void 0,void 0,u=>{a=(0,ps.Xf)(n(u,ka(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var wr=N(5724),Ks=N(5044);function eg(n,e){return(0,Ks.m)(e)?(0,wr.z)(n,e,1):(0,wr.z)(n,1)}function w0(n){return n<=0?()=>Xp.E:(0,Qr.e)((e,t)=>{let r=[];e.subscribe(new Sn.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function f_(n=zx){return(0,Qr.e)((e,t)=>{let r=!1;e.subscribe(new Sn.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function zx(){return new c_}function XE(n){return(0,Qr.e)((e,t)=>{let r=!1;e.subscribe(new Sn.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function $c(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ts((i,a)=>n(i,a,r)):Zh.y,(0,Qo.q)(1),t?XE(e):f_(()=>new c_))}var ns=N(7384);function p_(n){return(0,Qr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Ra{constructor(e,t){this.id=e,this.url=t}}class Jo extends Ra{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Hc extends Ra{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tb extends Ra{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class BA extends Ra{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Gx extends Ra{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E0 extends Ra{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nb extends Ra{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class b0 extends Ra{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tg extends Ra{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rb{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class g_{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ib{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sb{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ob{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZA{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m_{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Bt="primary";class qA{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ad(n){return new qA(n)}const ld="ngNavigationCancelingError";function __(n){const e=Error("NavigationCancelingError: "+n);return e[ld]=!0,e}function $A(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],h=n[a];if(u.startsWith(":"))i[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Na(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!ab(n[i],e[i]))return!1;return!0}function ab(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function lb(n){return Array.prototype.concat.apply([],n)}function cb(n){return n.length>0?n[n.length-1]:null}function Nr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ea(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,tn.D)(Promise.resolve(n)):vt(n)}const db={exact:function fb(n,e,t){if(!Wl(n.segments,e.segments)||!ng(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!fb(n.children[r],e.children[r],t))return!1;return!0},subset:I0},T0={exact:function(n,e){return Na(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ab(n[t],e[t]))},ignored:()=>!0};function hb(n,e,t){return db[t.paths](n.root,e.root,t.matrixParams)&&T0[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function I0(n,e,t){return GA(n,e,e.segments,t)}function GA(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Wl(i,t)||e.hasChildren()||!ng(i,t,r))}if(n.segments.length===t.length){if(!Wl(n.segments,t)||!ng(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!I0(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Wl(n.segments,i)&&ng(n.segments,i,r)&&n.children[Bt])&&GA(n.children[Bt],e,a,r)}}function ng(n,e,t){return e.every((r,i)=>T0[t](n[i].parameters,r.parameters))}class cd{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ad(this.queryParams)),this._queryParamMap}toString(){return Kx.serialize(this)}}class Kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Nr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ws(this)}}class y_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ad(this.parameters)),this._parameterMap}toString(){return S0(this)}}function Wl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class A0{}class D0{parse(e){const t=new nD(e);return new cd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${v_(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${rg(t)}=${rg(i)}`).join("&"):`${rg(t)}=${rg(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${r}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Kx=new D0;function ws(n){return n.segments.map(e=>S0(e)).join("/")}function v_(n,e){if(!n.hasChildren())return ws(n);if(e){const t=n.children[Bt]?v_(n.children[Bt],!1):"",r=[];return Nr(n.children,(i,a)=>{a!==Bt&&r.push(`${a}:${v_(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return Nr(n.children,(r,i)=>{i===Bt&&(t=t.concat(e(r,i)))}),Nr(n.children,(r,i)=>{i!==Bt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Bt?[v_(n.children[Bt],!1)]:[`${i}:${v_(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Bt]?`${ws(n)}/${t[0]}`:`${ws(n)}/(${t.join("//")})`}}function KA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rg(n){return KA(n).replace(/%3B/gi,";")}function C_(n){return KA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function w_(n){return decodeURIComponent(n)}function YA(n){return w_(n.replace(/\+/g,"%20"))}function S0(n){return`${C_(n.path)}${function(n){return Object.keys(n).map(e=>`;${C_(e)}=${C_(n[e])}`).join("")}(n.parameters)}`}const P0=/^[^\/()?;=#]+/;function E_(n){const e=n.match(P0);return e?e[0]:""}const JA=/^[^=?&#]+/,eD=/^[^&#]+/;class nD{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Bt]=new Kt(e,t)),r}parseSegment(){const e=E_(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new y_(w_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=E_(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=E_(this.remaining);i&&(r=i,this.capture(r))}e[w_(t)]=w_(r)}parseQueryParam(e){const t=function(n){const e=n.match(JA);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function(n){const e=n.match(eD);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=YA(t),a=YA(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=E_(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Bt);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[Bt]:new Kt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ig{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=zc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=zc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=O0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return O0(e,this._root).map(t=>t.value)}}function zc(n,e){if(n===e.value)return e;for(const t of e.children){const r=zc(n,t);if(r)return r}return null}function O0(n,e){if(n===e.value)return[e];for(const t of e.children){const r=O0(n,t);if(r.length)return r.unshift(e),r}return[]}class Ys{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function jh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class gb extends ig{constructor(e,t){super(e),this.snapshot=t,sg(this,e)}toString(){return this.snapshot.toString()}}function b_(n,e){const t=function(n,e){const u=new dd([],{},{},"",{},Bt,e,null,n.root,-1,{});return new Qs("",new Ys(u,[]))}(n,e),r=new Gs([new y_("",{})]),i=new Gs({}),a=new Gs({}),u=new Gs({}),h=new Gs(""),_=new xi(r,i,u,h,a,Bt,e,t.root);return _.snapshot=t.root,new gb(new Ys(_,[]),t)}class xi{constructor(e,t,r,i,a,u,h,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=h,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,rt.U)(e=>ad(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,rt.U)(e=>ad(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function li(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:gt(gt({},e.params),t.params),data:gt(gt({},e.data),t.data),resolve:gt(gt({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class dd{constructor(e,t,r,i,a,u,h,_,w,I,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=h,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=I,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ad(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ad(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Qs extends ig{constructor(e,t){super(t),this.url=e,sg(this,t)}toString(){return hd(this._root)}}function sg(n,e){e.value._routerState=n,e.children.forEach(t=>sg(n,t))}function hd(n){const e=n.children.length>0?` { ${n.children.map(hd).join(", ")} } `:"";return`${n.value}${e}`}function Gc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Na(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Na(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Na(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Na(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Wc(n,e){const t=Na(n.params,e.params)&&function(n,e){return Wl(n,e)&&n.every((t,r)=>Na(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Wc(n.parent,e.parent))}function La(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return La(n,r,i);return La(n,r)})}(n,e,t);return new Ys(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>La(n,h)),u}}const r=function(n){return new xi(new Gs(n.url),new Gs(n.params),new Gs(n.queryParams),new Gs(n.fragment),new Gs(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>La(n,a));return new Ys(r,i)}}function Kl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Wh(n){return"object"==typeof n&&null!=n&&n.outlets}function T_(n,e,t,r,i){let a={};return r&&Nr(r,(u,h)=>{a[h]=Array.isArray(u)?u.map(_=>`${_}`):`${u}`}),new cd(t.root===n?e:x0(t.root,n,e),a,i)}function x0(n,e,t){const r={};return Nr(n.children,(i,a)=>{r[a]=i===e?t:x0(i,e,t)}),new Kt(n.segments,r)}class k0{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Kl(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Wh);if(i&&i!==cb(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class I_{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Cb(n,e,t){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return og(n,e,t);const r=function(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],h=t[r];if(Wh(h))break;const _=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!bb(_,w,u))return a;r+=2}else{if(!bb(_,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Kt(n.segments.slice(0,r.pathIndex),{});return a.children[Bt]=new Kt(n.segments.slice(r.pathIndex),n.children),og(a,0,i)}return r.match&&0===i.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?R0(n,e,t):r.match?og(n,0,i):R0(n,e,t)}function og(n,e,t){if(0===t.length)return new Kt(n.segments,{});{const r=function(n){return Wh(n[0])?n[0].outlets:{[Bt]:n}}(t),i={};return Nr(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=Cb(n.children[u],e,a))}),Nr(n.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new Kt(n.segments,i)}}function R0(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Wh(a)){const _=wb(a.outlets);return new Kt(r,_)}if(0===i&&Kl(t[0])){r.push(new y_(n.segments[e].path,Eb(t[0]))),i++;continue}const u=Wh(a)?a.outlets[Bt]:`${a}`,h=i<t.length-1?t[i+1]:null;u&&h&&Kl(h)?(r.push(new y_(u,Eb(h))),i+=2):(r.push(new y_(u,{})),i++)}return new Kt(r,{})}function wb(n){const e={};return Nr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=R0(new Kt([],{}),0,t))}),e}function Eb(n){const e={};return Nr(n,(t,r)=>e[r]=`${t}`),e}function bb(n,e,t){return n==t.path&&Na(e,t.parameters)}class iD{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Gc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=jh(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),Nr(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=jh(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=jh(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=jh(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new ZA(a.value.snapshot))}),e.children.length&&this.forwardEvent(new sb(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Gc(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),Gc(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=h?h.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=_,u.outlet&&u.outlet.activateWith(i,_),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class N0{constructor(e,t){this.routes=e,this.module=t}}function Kc(n){return"function"==typeof n}function fd(n){return n instanceof cd}const A_=Symbol("INITIAL_VALUE");function D_(){return Hn(n=>function(...n){const e=(0,gs.yG)(n),t=(0,gs.jO)(n),{args:r,keys:i}=Zo(n);if(0===r.length)return(0,tn.D)([],e);const a=new Un.y(function(n,e,t=Zh.y){return r=>{y0(e,()=>{const{length:i}=n,a=new Array(i);let u=i,h=i;for(let _=0;_<i;_++)y0(e,()=>{const w=(0,tn.D)(n[_],e);let I=!1;w.subscribe(new Sn.Q(r,A=>{a[_]=A,I||(I=!0,h--),h||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>uh(i,u):Zh.y));return t?a.pipe(ku(t)):a}(n.map(e=>e.pipe((0,Qo.q)(1),d_(A_)))).pipe(Gl((e,t)=>{let r=!1;return t.reduce((i,a,u)=>i!==A_?i:(a===A_&&(r=!0),r||!1!==a&&u!==t.length-1&&!fd(a)?i:a),e)},A_),ts(e=>e!==A_),(0,rt.U)(e=>fd(e)?e:!0===e),(0,Qo.q)(1)))}class oD{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Kh,this.attachRef=null}}class Kh{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new oD,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Ab=(()=>{class n{constructor(t,r,i,a,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=a||Bt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,_=new aD(t,h,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Kh),l.Y36(l.s_b),l.Y36(l._Vd),l.$8M("name"),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class aD{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===xi?this.route:e===Kh?this.childContexts:this.parent.get(e,t)}}let pd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},directives:[Ab],encapsulation:2}),n})();function Db(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Sb(r,lD(e,r))}}function Sb(n,e){n.children&&Db(n.children,e)}function lD(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function S_(n){const e=n.children&&n.children.map(S_),t=e?qi(gt({},n),{children:e}):gt({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Bt&&(t.component=pd),t}function rs(n){return n.outlet||Bt}function Mb(n,e){const t=n.filter(r=>rs(r)===e);return t.push(...n.filter(r=>rs(r)!==e)),t}const U0={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function M_(n,e,t){var h;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?gt({},U0):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||$A)(t,n,e);if(!i)return gt({},U0);const a={};Nr(i.posParams,(_,w)=>{a[w]=_.path});const u=i.consumed.length>0?gt(gt({},a),i.consumed[i.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:u,positionalParamSegments:null!=(h=i.posParams)?h:{}}}function P_(n,e,t,r,i="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>O_(n,e,r)&&rs(r)!==Bt)}(n,t,r)){const u=new Kt(e,function(n,e,t,r){const i={};i[Bt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&rs(a)!==Bt){const u=new Kt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[rs(a)]=u}return i}(n,e,r,new Kt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>O_(n,e,r))}(n,t,r)){const u=new Kt(n.segments,function(n,e,t,r,i,a){const u={};for(const h of r)if(O_(n,t,h)&&!i[rs(h)]){const _=new Kt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,u[rs(h)]=_}return gt(gt({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const a=new Kt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function O_(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function V0(n,e,t,r){return!!(rs(n)===r||r!==Bt&&O_(e,t,n))&&("**"===n.path||M_(e,n,t).matched)}function B0(n,e,t){return 0===e.length&&!n.children[t]}class gd{constructor(e){this.segmentGroup=e||null}}class hD{constructor(e){this.urlTree=e}}function Yh(n){return new Un.y(e=>e.error(new gd(n)))}function Ob(n){return new Un.y(e=>e.error(new hD(n)))}function Jx(n){return new Un.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Z0{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(l.h0i)}apply(){const e=P_(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Bt).pipe((0,rt.U)(a=>this.createUrlTree(j0(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ka(a=>{if(a instanceof hD)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof gd?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Bt).pipe((0,rt.U)(i=>this.createUrlTree(j0(i),e.queryParams,e.fragment))).pipe(ka(i=>{throw i instanceof gd?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Kt([],{[Bt]:e}):e;return new cd(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,rt.U)(a=>new Kt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,tn.D)(i).pipe(eg(a=>{const u=r.children[a],h=Mb(t,a);return this.expandSegmentGroup(e,h,u,a).pipe((0,rt.U)(_=>({segment:_,outlet:a})))}),Gl((a,u)=>(a[u.outlet]=u.segment,a),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ts((i,a)=>n(i,a,r)):Zh.y,w0(1),t?XE(e):f_(()=>new c_))}())}expandSegment(e,t,r,i,a,u){return(0,tn.D)(r).pipe(eg(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,u).pipe(ka(w=>{if(w instanceof gd)return vt(null);throw w}))),$c(h=>!!h),ka((h,_)=>{if(h instanceof c_||"EmptyError"===h.name){if(B0(t,i,a))return vt(new Kt([],{}));throw new gd(t)}throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,u,h){return V0(i,t,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u):Yh(t):Yh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ob(a):this.lineralizeSegments(r,a).pipe((0,wr.z)(u=>{const h=new Kt(u,{});return this.expandSegment(e,h,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:h,consumedSegments:_,lastChild:w,positionalParamSegments:I}=M_(t,i,a);if(!h)return Yh(t);const A=this.applyRedirectCommands(_,i.redirectTo,I);return i.redirectTo.startsWith("/")?Ob(A):this.lineralizeSegments(i,A).pipe((0,wr.z)(x=>this.expandSegment(e,t,r,x.concat(a.slice(w)),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?vt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,rt.U)(x=>(r._loadedConfig=x,new Kt(i,{})))):vt(new Kt(i,{}));const{matched:u,consumedSegments:h,lastChild:_}=M_(t,r,i);if(!u)return Yh(t);const w=i.slice(_);return this.getChildConfig(e,r,i).pipe((0,wr.z)(A=>{const x=A.module,U=A.routes,{segmentGroup:B,slicedSegments:X}=P_(t,h,w,U),de=new Kt(B.segments,B.children);if(0===X.length&&de.hasChildren())return this.expandChildren(x,U,de).pipe((0,rt.U)(ze=>new Kt(h,ze)));if(0===U.length&&0===X.length)return vt(new Kt(h,{}));const Ge=rs(r)===a;return this.expandSegment(x,de,U,X,Ge?Bt:a,!0).pipe((0,rt.U)(ot=>new Kt(h.concat(ot.segments),ot.children)))}))}getChildConfig(e,t,r){return t.children?vt(new N0(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?vt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,wr.z)(i=>{return i?this.configLoader.load(e.injector,t).pipe((0,rt.U)(a=>(t._loadedConfig=a,a))):(n=t,new Un.y(e=>e.error(__(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):vt(new N0([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?vt(i.map(u=>{const h=e.get(u);let _;if((n=h)&&Kc(n.canLoad))_=h.canLoad(t,r);else{if(!Kc(h))throw new Error("Invalid CanLoad guard");_=h(t,r)}var n;return ea(_)})).pipe(D_(),(0,ns.b)(u=>{if(!fd(u))return;const h=__(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw h.url=u,h}),(0,rt.U)(u=>!0===u)):vt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return vt(r);if(i.numberOfChildren>1||!i.children[Bt])return Jx(e.redirectTo);i=i.children[Bt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new cd(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Nr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return Nr(t.children,(h,_)=>{u[_]=this.createSegmentGroup(e,h,r,i)}),new Kt(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function j0(n){const e={};for(const r of Object.keys(n.children)){const a=j0(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function(n){if(1===n.numberOfChildren&&n.children[Bt]){const e=n.children[Bt];return new Kt(n.segments.concat(e.segments),e.children)}return n}(new Kt(n.segments,e))}class x_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class lg{constructor(e,t){this.component=e,this.route=t}}function Xx(n,e,t){const r=n._root;return ug(r,e?e._root:null,t,[r.value])}function cg(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function ug(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=jh(e);return n.children.forEach(u=>{(function(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const _=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Wl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wl(n.url,e.url)||!Na(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wc(n,e)||!Na(n.queryParams,e.queryParams);default:return!Wc(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new x_(r)):(a.data=u.data,a._resolvedData=u._resolvedData),ug(n,e,a.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new lg(h.outlet.component,u))}else u&&Qh(e,h,i),i.canActivateChecks.push(new x_(r)),ug(n,null,a.component?h?h.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),Nr(a,(u,h)=>Qh(u,t.getContext(h),i)),i}function Qh(n,e,t){const r=jh(n),i=n.value;Nr(r,(a,u)=>{Qh(a,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new lg(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class gD{}function Bb(n){return new Un.y(e=>e.error(n))}class Zb{constructor(e,t,r,i,a,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=u}recognize(){const e=P_(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Bt);if(null===t)return null;const r=new dd([],Object.freeze({}),Object.freeze(gt({},this.urlTree.queryParams)),this.urlTree.fragment,{},Bt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ys(r,t),a=new Qs(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=li(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const u=t.children[a],h=Mb(e,a),_=this.processSegmentGroup(h,u,a);if(null===_)return null;r.push(..._)}const i=K0(r);return i.sort((e,t)=>e.value.outlet===Bt?-1:t.value.outlet===Bt?1:e.value.outlet.localeCompare(t.value.outlet)),i}processSegment(e,t,r,i){for(const a of e){const u=this.processSegmentAgainstRoute(a,t,r,i);if(null!==u)return u}return B0(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!V0(e,t,r,i))return null;let a,u=[],h=[];if("**"===e.path){const U=r.length>0?cb(r).parameters:{};a=new dd(r,U,Object.freeze(gt({},this.urlTree.queryParams)),this.urlTree.fragment,J0(e),rs(e),e.component,e,Y0(t),Q0(t)+r.length,X0(e))}else{const U=M_(t,e,r);if(!U.matched)return null;u=U.consumedSegments,h=r.slice(U.lastChild),a=new dd(u,U.parameters,Object.freeze(gt({},this.urlTree.queryParams)),this.urlTree.fragment,J0(e),rs(e),e.component,e,Y0(t),Q0(t)+u.length,X0(e))}const _=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:w,slicedSegments:I}=P_(t,u,h,_.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);var n;if(0===I.length&&w.hasChildren()){const U=this.processChildren(_,w);return null===U?null:[new Ys(a,U)]}if(0===_.length&&0===I.length)return[new Ys(a,[])];const A=rs(e)===i,x=this.processSegment(_,w,I,A?Bt:i);return null===x?null:[new Ys(a,x)]}}function jb(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function K0(n){const e=[],t=new Set;for(const r of n){if(!jb(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=K0(r.children);e.push(new Ys(r.value,i))}return e.filter(r=>!t.has(r))}function Y0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Q0(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function J0(n){return n.data||{}}function X0(n){return n.resolve||{}}function dr(n){return Hn(e=>{const t=n(e);return t?(0,tn.D)(t).pipe((0,rt.U)(()=>e)):vt(e)})}class ED extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const k_=new l.OlP("ROUTES");class zb{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,rt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=a.create(e);return new N0(lb(u.injector.get(k_,void 0,l.XFs.Self|l.XFs.Optional)).map(S_),u)}),ka(a=>{throw t._loader$=void 0,a}));return t._loader$=new JE(i,()=>new Yo.x).pipe(QE()),t._loader$}loadModuleFactory(e){return ea(e()).pipe((0,wr.z)(t=>t instanceof l.YKP?vt(t):(0,tn.D)(this.compiler.compileModuleAsync(t))))}}class Wb{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Jh(n){throw n}function bD(n,e,t){return e.parse("/")}function Kb(n,e){return vt(null)}const Yb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xn=(()=>{class n{constructor(t,r,i,a,u,h,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Yo.x,this.errorHandler=Jh,this.malformedUriErrorHandler=bD,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Kb,afterPreactivation:Kb},this.urlHandlingStrategy=new Wb,this.routeReuseStrategy=new ED,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(l.h0i),this.console=u.get(l.c2e);const A=u.get(l.R0b);this.isNgZoneEnabled=A instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=new cd(new Kt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new zb(u,h,x=>this.triggerEvent(new rb(x)),x=>this.triggerEvent(new g_(x))),this.routerState=b_(this.currentUrlTree,this.rootComponentType),this.transitions=new Gs({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ts(i=>0!==i.id),(0,rt.U)(i=>qi(gt({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Hn(i=>{let a=!1,u=!1;return vt(i).pipe((0,ns.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?qi(gt({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Hn(h=>{const _=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Xh(h.source)&&(this.browserUrlTree=h.extractedUrl),vt(h).pipe(Hn(A=>{const x=this.transitions.getValue();return r.next(new Jo(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),x!==this.transitions.getValue()?Xp.E:Promise.resolve(A)}),function(n,e,t,r){return Hn(i=>function(n,e,t,r,i){return new Z0(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,rt.U)(a=>qi(gt({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ns.b)(A=>{this.currentNavigation=qi(gt({},this.currentNavigation),{finalUrl:A.urlAfterRedirects})}),function(n,e,t,r,i){return(0,wr.z)(a=>function(n,e,t,r,i="emptyOnly",a="legacy"){try{const u=new Zb(n,e,t,r,i,a).recognize();return null===u?Bb(new gD):vt(u)}catch(u){return Bb(u)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,rt.U)(u=>qi(gt({},a),{targetSnapshot:u}))))}(this.rootComponentType,this.config,A=>this.serializeUrl(A),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ns.b)(A=>{if("eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(U,A)}this.browserUrlTree=A.urlAfterRedirects}const x=new Gx(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(x)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:U,source:B,restoredState:X,extras:de}=h,Ge=new Jo(x,this.serializeUrl(U),B,X);r.next(Ge);const Ke=b_(U,this.rootComponentType).snapshot;return vt(qi(gt({},h),{targetSnapshot:Ke,urlAfterRedirects:U,extras:qi(gt({},de),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Xp.E}),dr(h=>{const{targetSnapshot:_,id:w,extractedUrl:I,rawUrl:A,extras:{skipLocationChange:x,replaceUrl:U}}=h;return this.hooks.beforePreactivation(_,{navigationId:w,appliedUrlTree:I,rawUrlTree:A,skipLocationChange:!!x,replaceUrl:!!U})}),(0,ns.b)(h=>{const _=new E0(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(_)}),(0,rt.U)(h=>qi(gt({},h),{guards:Xx(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function(n,e){return(0,wr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?vt(qi(gt({},t),{guardsResult:!0})):function(n,e,t,r){return(0,tn.D)(n).pipe((0,wr.z)(i=>function(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?vt(a.map(h=>{const _=cg(h,e,i);let w;if(function(n){return n&&Kc(n.canDeactivate)}(_))w=ea(_.canDeactivate(n,e,t,r));else{if(!Kc(_))throw new Error("Invalid CanDeactivate guard");w=ea(_(n,e,t,r))}return w.pipe($c())})).pipe(D_()):vt(!0)}(i.component,i.route,t,e,r)),$c(i=>!0!==i,!0))}(u,r,i,n).pipe((0,wr.z)(h=>h&&function(n){return"boolean"==typeof n}(h)?function(n,e,t,r){return(0,tn.D)(e).pipe(eg(i=>Jp(function(n,e){return null!==n&&e&&e(new ib(n)),vt(!0)}(i.route.parent,r),function(n,e){return null!==n&&e&&e(new ob(n)),vt(!0)}(i.route,r),function(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>u_(()=>vt(u.guards.map(_=>{const w=cg(_,u.node,t);let I;if(function(n){return n&&Kc(n.canActivateChild)}(w))I=ea(w.canActivateChild(r,n));else{if(!Kc(w))throw new Error("Invalid CanActivateChild guard");I=ea(w(r,n))}return I.pipe($c())})).pipe(D_())));return vt(a).pipe(D_())}(n,i.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return vt(!0);const i=r.map(a=>u_(()=>{const u=cg(a,e,t);let h;if(function(n){return n&&Kc(n.canActivate)}(u))h=ea(u.canActivate(e,n));else{if(!Kc(u))throw new Error("Invalid CanActivate guard");h=ea(u(e,n))}return h.pipe($c())}));return vt(i).pipe(D_())}(n,i.route,t))),$c(i=>!0!==i,!0))}(r,a,n,e):vt(h)),(0,rt.U)(h=>qi(gt({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,ns.b)(h=>{if(fd(h.guardsResult)){const w=__(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw w.url=h.guardsResult,w}const _=new nb(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(_)}),ts(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),dr(h=>{if(h.guards.canActivateChecks.length)return vt(h).pipe((0,ns.b)(_=>{const w=new b0(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),Hn(_=>{let w=!1;return vt(_).pipe(function(n,e){return(0,wr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return vt(t);let a=0;return(0,tn.D)(i).pipe(eg(u=>function(n,e,t,r){return function(n,e,t,r){const i=Object.keys(n);if(0===i.length)return vt({});const a={};return(0,tn.D)(i).pipe((0,wr.z)(u=>function(n,e,t,r){const i=cg(n,e,r);return ea(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,ns.b)(h=>{a[u]=h}))),w0(1),(0,wr.z)(()=>Object.keys(a).length===i.length?vt(a):Xp.E))}(n._resolve,n,e,r).pipe((0,rt.U)(a=>(n._resolvedData=a,n.data=gt(gt({},n.data),li(n,t).resolve),null)))}(u.route,r,n,e)),(0,ns.b)(()=>a++),w0(1),(0,wr.z)(u=>a===i.length?vt(t):Xp.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ns.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,ns.b)(_=>{const w=new tg(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),dr(h=>{const{targetSnapshot:_,id:w,extractedUrl:I,rawUrl:A,extras:{skipLocationChange:x,replaceUrl:U}}=h;return this.hooks.afterPreactivation(_,{navigationId:w,appliedUrlTree:I,rawUrlTree:A,skipLocationChange:!!x,replaceUrl:!!U})}),(0,rt.U)(h=>{const _=function(n,e,t){const r=La(n,e._root,t?t._root:void 0);return new gb(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return qi(gt({},h),{targetRouterState:_})}),(0,ns.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,rt.U)(r=>(new iD(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,ns.b)({next(){a=!0},complete(){a=!0}}),p_(()=>{var h;a||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null==(h=this.currentNavigation)?void 0:h.id)===i.id&&(this.currentNavigation=null)}),ka(h=>{if(u=!0,function(n){return n&&n[ld]}(h)){const _=fd(h.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const w=new tb(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(w),_?setTimeout(()=>{const I=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),A={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Xh(i.source)};this.scheduleNavigation(I,"imperative",null,A,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new BA(i.id,this.serializeUrl(i.extractedUrl),h);r.next(_);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return Xp.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(gt(gt({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var h;const i={replaceUrl:!0},a=(null==(h=t.state)?void 0:h.navigationId)?t.state:null;if(a){const _=gt({},a);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(i.state=_)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Db(t),this.config=t.map(S_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:h,preserveFragment:_}=r,w=i||this.routerState.root,I=_?this.currentUrlTree.fragment:u;let A=null;switch(h){case"merge":A=gt(gt({},this.currentUrlTree.queryParams),a);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=a||null}return null!==A&&(A=this.removeEmptyProps(A)),function(n,e,t,r,i){if(0===t.length)return T_(e.root,e.root,e,r,i);const a=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new k0(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Nr(a.outlets,(_,w)=>{h[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new k0(t,e,r)}(t);if(a.toRoot())return T_(e.root,new Kt([],{}),e,r,i);const u=function(n,e,t){if(n.isAbsolute)return new I_(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new I_(a,a===e.root,0)}const r=Kl(n.commands[0])?0:1;return function(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new I_(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=u.processChildren?og(u.segmentGroup,u.index,a.commands):Cb(u.segmentGroup,u.index,a.commands);return T_(u.segmentGroup,h,e,r,i)}(w,this.currentUrlTree,t,A,null!=I?I:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=fd(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?gt({},Yb):!1===r?gt({},TD):r,fd(t))return hb(this.currentUrlTree,t,i);const a=this.parseUrl(t);return hb(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Hc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,u){var Ge,Ke,ot;if(this.disposed)return Promise.resolve(!1);const h=this.transitions.value,_=Xh(r)&&h&&!Xh(h.source),w=h.rawUrl.toString()===t.toString(),I=h.id===(null==(Ge=this.currentNavigation)?void 0:Ge.id);if(_&&w&&I)return Promise.resolve(!0);let x,U,B;u?(x=u.resolve,U=u.reject,B=u.promise):B=new Promise((ze,Gt)=>{x=ze,U=Gt});const X=++this.navigationId;let de;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),de=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!=(Ke=this.browserPageId)?Ke:0:(null!=(ot=this.browserPageId)?ot:0)+1):de=0,this.setTransition({id:X,targetPageId:de,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:x,reject:U,promise:B,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),B.catch(ze=>Promise.reject(ze))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=gt(gt({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(i=this.currentNavigation)?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null==(a=this.currentNavigation)?void 0:a.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new tb(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Xh(n){return"imperative"!==n}let dg=(()=>{class n{constructor(t,r,i,a,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=u,this.commands=null,this.onChanges=new Yo.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:ef(this.skipLocationChange),replaceUrl:ef(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ef(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xn),l.Y36(xi),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&l.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[l.TTD]}),n})(),Js=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Yo.x,this.subscription=t.events.subscribe(a=>{a instanceof Hc&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,u){if(0!==t||r||i||a||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:ef(this.skipLocationChange),replaceUrl:ef(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ef(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xn),l.Y36(xi),l.Y36(le))},n.\u0275dir=l.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&l.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&l.uIk("target",r.target)("href",r.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[l.TTD]}),n})();function ef(n){return""===n||!!n}let Qb=(()=>{class n{constructor(t,r,i,a,u,h){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=u,this.linkWithHref=h,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new l.vpe,this.routerEventsSubscription=t.events.subscribe(_=>{_ instanceof Hc&&this.update()})}ngAfterContentInit(){vt(this.links.changes,this.linksWithHrefs.changes,vt(null)).pipe((0,Ws.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var r;null==(r=this.linkInputChangesSubscription)||r.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,tn.D)(t).pipe((0,Ws.J)()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null==(t=this.linkInputChangesSubscription)||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xn),l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.sBO),l.Y36(dg,8),l.Y36(Js,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(l.Suo(i,dg,5),l.Suo(i,Js,5)),2&t){let a;l.iGM(a=l.CRH())&&(r.links=a),l.iGM(a=l.CRH())&&(r.linksWithHrefs=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[l.TTD]}),n})();class Eo{}class eC{preload(e,t){return vt(null)}}let tC=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new zb(i,r,_=>t.triggerEvent(new rb(_)),_=>t.triggerEvent(new g_(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(ts(t=>t instanceof Hc),eg(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(l.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const u=a._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,tn.D)(i).pipe((0,Ws.J)(),(0,rt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?vt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,wr.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(xn),l.LFG(l.Sil),l.LFG(l.zs3),l.LFG(Eo))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),nC=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Jo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof m_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new m_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const md=new l.OlP("ROUTER_CONFIGURATION"),Jb=new l.OlP("ROUTER_FORROOT_GUARD"),rC=[He,{provide:A0,useClass:D0},{provide:xn,useFactory:function(n,e,t,r,i,a,u={},h,_){const w=new xn(null,n,e,t,r,i,lb(a));return h&&(w.urlHandlingStrategy=h),_&&(w.routeReuseStrategy=_),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,w),u.enableTracing&&w.events.subscribe(I=>{var A,x;null==(A=console.group)||A.call(console,`Router Event: ${I.constructor.name}`),console.log(I.toString()),console.log(I),null==(x=console.groupEnd)||x.call(console)}),w},deps:[A0,Kh,He,l.zs3,l.Sil,k_,md,[class{},new l.FiY],[class{},new l.FiY]]},Kh,{provide:xi,useFactory:function(n){return n.routerState.root},deps:[xn]},tC,eC,class{preload(e,t){return t().pipe(ka(()=>vt(null)))}},{provide:md,useValue:{enableTracing:!1}}];function hg(){return new l.PXZ("Router",xn)}let Xb=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[rC,iC(t),{provide:Jb,useFactory:tT,deps:[[xn,new l.FiY,new l.tp0]]},{provide:md,useValue:r||{}},{provide:le,useFactory:ID,deps:[se,[new l.tBr(ce),new l.FiY],md]},{provide:nC,useFactory:eT,deps:[xn,sp,md]},{provide:Eo,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:eC},{provide:l.PXZ,multi:!0,useFactory:hg},[N_,{provide:l.ip1,multi:!0,useFactory:sC,deps:[N_]},{provide:L_,useFactory:F_,deps:[N_]},{provide:l.tb,multi:!0,useExisting:L_}]]}}static forChild(t){return{ngModule:n,providers:[iC(t)]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Jb,8),l.LFG(xn,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function eT(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new nC(n,e,t)}function ID(n,e,t={}){return t.useHash?new ve(n,e):new be(n,e)}function tT(n){return"guarded"}function iC(n){return[{provide:l.deG,multi:!0,useValue:n},{provide:k_,multi:!0,useValue:n}]}let N_=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Yo.x}appInitializer(){return this.injector.get(H,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get(xn),u=this.injector.get(md);return"disabled"===u.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?vt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(md),i=this.injector.get(tC),a=this.injector.get(nC),u=this.injector.get(xn),h=this.injector.get(l.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),a.init(),u.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function sC(n){return n.appInitializer.bind(n)}function F_(n){return n.bootstrapListener.bind(n)}const L_=new l.OlP("Router Initializer");var ie=N(8239),Yt=N(7233);N(7713);var tt,is=N(1572),na=N(1177),ra=N(3855),R=N(4213),sT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Va={},U_=U_||{},At=sT||self;function fg(){}function V_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function nf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var B_="closure_uid_"+(1e9*Math.random()>>>0),_d=0;function kD(n,e,t){return n.call.apply(n.bind,arguments)}function RD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function sr(n,e,t){return(sr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kD:RD).apply(null,arguments)}function lC(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Fr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function yd(){this.s=this.s,this.o=this.o}var lT={};yd.prototype.s=!1,yd.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,B_)&&n[B_]||(n[B_]=++_d)}(this);delete lT[n]}},yd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ND=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Ct=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function cT(n){return Array.prototype.concat.apply([],arguments)}function cC(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function vd(n){return/^[\s\xa0]*$/.test(n)}var Qt,uT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Jr(n,e){return-1!=n.indexOf(e)}function rf(n,e){return n<e?-1:n>e?1:0}e:{var LD=At.navigator;if(LD){var uC=LD.userAgent;if(uC){Qt=uC;break e}}Qt=""}function dC(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function dT(n){const e={};for(const t in n)e[t]=n[t];return e}var hC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fC(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<hC.length;a++)t=hC[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Z_(n){return Z_[" "](n),n}Z_[" "]=fg;var wd,n,UD=Jr(Qt,"Opera"),sf=Jr(Qt,"Trident")||Jr(Qt,"MSIE"),fT=Jr(Qt,"Edge"),Cd=fT||sf,pT=Jr(Qt,"Gecko")&&!(Jr(Qt.toLowerCase(),"webkit")&&!Jr(Qt,"Edge"))&&!(Jr(Qt,"Trident")||Jr(Qt,"MSIE"))&&!Jr(Qt,"Edge"),VD=Jr(Qt.toLowerCase(),"webkit")&&!Jr(Qt,"Edge");function gT(){var n=At.document;return n?n.documentMode:void 0}e:{var q_="",j_=(n=Qt,pT?/rv:([^\);]+)(\)|;)/.exec(n):fT?/Edge\/([\d\.]+)/.exec(n):sf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):VD?/WebKit\/(\S+)/.exec(n):UD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(j_&&(q_=j_?j_[1]:""),sf){var $_=gT();if(null!=$_&&$_>parseFloat(q_)){wd=String($_);break e}}wd=q_}var BD={};function pg(){return e=BD,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=uT(String(wd)).split("."),t=uT("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=rf(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||rf(0==i[2].length,0==a[2].length)||rf(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n}();var e}var ZD=At.document&&sf&&(gT()||parseInt(wd,10))||void 0,qD=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",fg,e),At.removeEventListener("test",fg,e)}catch(t){}return n}();function ci(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function af(n,e){if(ci.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(pT){e:{try{Z_(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:_T[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&af.Z.h.call(this)}}ci.prototype.h=function(){this.defaultPrevented=!0},Fr(af,ci);var _T={2:"touch",3:"pen",4:"mouse"};af.prototype.h=function(){af.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var gg="closure_listenable_"+(1e6*Math.random()|0),yT=0;function jD(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++yT,this.ca=this.fa=!1}function H_(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function pC(n){this.src=n,this.g={},this.h=0}function vT(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=ND(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(H_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function CT(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}pC.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=CT(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new jD(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var wT="closure_lm_"+(1e6*Math.random()|0),z_={};function mg(n,e,t,r,i){if(r&&r.once)return gC(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)mg(n,e[a],t,r,i);return null}return t=G_(t),n&&n[gg]?n.N(e,t,nf(r)?!!r.capture:!!r,i):ET(n,e,t,!1,r,i)}function ET(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=nf(i)?!!i.capture:!!i,h=_C(n);if(h||(n[wT]=h=new pC(n)),(t=h.add(e,t,r,u,a)).proxy)return t;if(r=function(){var e=HD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)qD||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(bT(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function gC(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)gC(n,e[a],t,r,i);return null}return t=G_(t),n&&n[gg]?n.O(e,t,nf(r)?!!r.capture:!!r,i):ET(n,e,t,!0,r,i)}function lf(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)lf(n,e[a],t,r,i);else r=nf(r)?!!r.capture:!!r,t=G_(t),n&&n[gg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=CT(a=n.g[e],t,r,i))&&(H_(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=_C(n))&&(e=n.g[e.toString()],n=-1,e&&(n=CT(e,t,r,i)),(t=-1<n?e[n]:null)&&mC(t))}function mC(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[gg])vT(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(bT(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=_C(e))?(vT(t,n),0==t.h&&(t.src=null,e[wT]=null)):H_(n)}}}function bT(n){return n in z_?z_[n]:z_[n]="on"+n}function HD(n,e){if(n.ca)n=!0;else{e=new af(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&mC(n),n=t.call(r,e)}return n}function _C(n){return(n=n[wT])instanceof pC?n:null}var yC="__closure_events_fn_"+(1e9*Math.random()>>>0);function G_(n){return"function"==typeof n?n:(n[yC]||(n[yC]=function(e){return n.handleEvent(e)}),n[yC])}function Xr(){yd.call(this),this.i=new pC(this),this.P=this,this.I=null}function ui(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ci(e,n);else if(e instanceof ci)e.target=e.target||n;else{var i=e;fC(e=new ci(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=Yl(u,r,!0,e)&&i}if(i=Yl(u=e.g=n,r,!0,e)&&i,i=Yl(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Yl(u=e.g=t[a],r,!1,e)&&i}function Yl(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ca&&u.capture==t){var h=u.listener,_=u.ia||u.src;u.fa&&vT(n.i,u),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}Fr(Xr,yd),Xr.prototype[gg]=!0,Xr.prototype.removeEventListener=function(n,e,t,r){lf(this,n,e,t,r)},Xr.prototype.M=function(){if(Xr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)H_(t[r]);delete n.g[e],n.h--}}this.I=null},Xr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Xr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var vC=At.JSON.stringify;function TT(){var n=EC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var _g,CC=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new GD,n=>n.reset());class GD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function IT(n){At.setTimeout(()=>{throw n},0)}function wC(n,e){_g||function(){var n=At.Promise.resolve(void 0);_g=function(){n.then(KD)}}(),W_||(_g(),W_=!0),EC.add(n,e)}var W_=!1,EC=new class{constructor(){this.h=this.g=null}add(e,t){const r=CC.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function KD(){for(var n;n=TT();){try{n.h.call(n.g)}catch(t){IT(t)}var e=CC;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}W_=!1}function K_(n,e){Xr.call(this),this.h=n||1,this.g=e||At,this.j=sr(this.kb,this),this.l=Date.now()}function bC(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function yg(n,e,t){if("function"==typeof n)t&&(n=sr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=sr(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function AT(n){n.g=yg(()=>{n.g=null,n.i&&(n.i=!1,AT(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Fr(K_,Xr),(tt=K_.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ui(this,"tick"),this.da&&(bC(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){K_.Z.M.call(this),bC(this),delete this.g};class DT extends yd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:AT(this)}M(){super.M(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vg(n){yd.call(this),this.h=n,this.g={}}Fr(vg,yd);var ST=[];function MT(n,e,t,r){Array.isArray(t)||(t&&(ST[0]=t.toString()),t=ST);for(var i=0;i<t.length;i++){var a=mg(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function PT(n){dC(n.g,function(e,t){this.g.hasOwnProperty(t)&&mC(e)},n),n.g={}}function Y_(){this.g=!0}function cf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return vC(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}vg.prototype.M=function(){vg.Z.M.call(this),PT(this)},vg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Y_.prototype.Aa=function(){this.g=!1},Y_.prototype.info=function(){};var bd={},kT=null;function Cg(){return kT=kT||new Xr}function RT(n){ci.call(this,bd.Ma,n)}function wg(n){const e=Cg();ui(e,new RT(e,n))}function NT(n,e){ci.call(this,bd.STAT_EVENT,n),this.stat=e}function di(n){const e=Cg();ui(e,new NT(e,n))}function Q_(n,e){ci.call(this,bd.Na,n),this.size=e}function uf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}bd.Ma="serverreachability",Fr(RT,ci),bd.STAT_EVENT="statevent",Fr(NT,ci),bd.Na="timingevent",Fr(Q_,ci);var df={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},FT={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function TC(){}function LT(){}TC.prototype.h=null;var AC,hf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function IC(){ci.call(this,"d")}function X_(){ci.call(this,"c")}function Eg(){}function ey(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new vg(this),this.P=bg,this.W=new K_(n=Cd?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new UT}function UT(){this.i=null,this.g="",this.h=!1}Fr(IC,ci),Fr(X_,ci),Fr(Eg,TC),Eg.prototype.g=function(){return new XMLHttpRequest},Eg.prototype.i=function(){return{}},AC=new Eg;var bg=45e3,DC={},Ql={};function Td(n,e,t){n.K=1,n.v=Ag(ia(e)),n.s=t,n.U=!0,VT(n,null)}function VT(n,e){n.F=Date.now(),Tg(n),n.A=ia(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),GT(t.h,"t",r),n.C=0,t=n.l.H,n.h=new UT,n.g=ki(n.l,t?e:null,!n.s),0<n.O&&(n.L=new DT(sr(n.Ia,n,n.g),n.O)),MT(n.V,n.g,"readystatechange",n.gb),e=n.H?dT(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),wg(1),function(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",h=a.split("&"),_=0;_<h.length;_++){var w=h[_].split("=");if(1<w.length){var I=w[0];w=w[1];var A=I.split("_");u=2<=A.length&&"type"==A[1]?u+(I+"=")+w+"&":u+(I+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function JD(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function SC(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=XD(n,t),i==Ql){4==e&&(n.o=4,di(14),r=!1),cf(n.j,n.m,null,"[Incomplete Response]");break}if(i==DC){n.o=4,di(15),cf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}cf(n.j,n.m,i,null),Ig(n,i)}JD(n)&&i!=Ql&&i!=DC&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,di(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),yy(e),e.L=!0,di(11))):(cf(n.j,n.m,t,"[Invalid Chunked Response]"),Yc(n),ff(n))}function XD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ql:(t=Number(e.substring(t,r)),isNaN(t)?DC:(r+=1)+t>e.length?Ql:(e=e.substr(r,t),n.C=r+t,e))}function Tg(n){n.Y=Date.now()+n.P,BT(n,n.P)}function BT(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=uf(sr(n.eb,n),e)}function ty(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function ff(n){0==n.l.G||n.I||$C(n.l,n)}function Yc(n){ty(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,bC(n.W),PT(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ig(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||oy(t.i,n)))if(t.I=n.N,!n.J&&oy(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=uf(sr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;vy(t),yf(t)}qC(t),di(18)}if(1>=kC(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else Sd(t,11)}else if((n.J||t.g==n)&&vy(t),!vd(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const I=w[3];null!=I&&(t.ma=I,t.h.info("VER="+t.ma));const A=w[4];null!=A&&(t.za=A,t.h.info("SVER="+t.za));const x=w[5];null!=x&&"number"==typeof x&&0<x&&(t.K=r=1.5*x,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const B=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var a=r.i;!a.g&&(Jr(B,"spdy")||Jr(B,"quic")||Jr(B,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(ay(a,a.h),a.h=null))}if(r.D){const X=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;X&&(r.sa=X,Tn(r.F,r.D,X))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=nI(r,r.H?r.la:null,r.W),u.J){RC(r.i,u);var h=u,_=r.K;_&&h.setTimeout(_),h.B&&(ty(h),Tg(h)),r.g=u}else ZC(r);0<t.l.length&&my(t)}else"stop"!=w[0]&&"close"!=w[0]||Sd(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Sd(t,7):py(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}wg(4)}catch(w){}}function Id(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(V_(n)||"string"==typeof n)Ct(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(V_(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(V_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function pf(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof pf)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function ry(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Qc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Qc(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Qc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(tt=ey.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const e=this.L;e&&3==Ba(n)?e.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const I=Ba(this.g);var e=this.g.Da();const A=this.g.ba();if(!(3>I)&&(3!=I||Cd||this.g&&(this.h.h||this.g.ga()||XT(this.g)))){this.I||4!=I||7==e||wg(8==e||0>=A?3:2),ty(this);var t=this.g.ba();this.N=t;t:if(JD(this)){var r=XT(this.g);n="";var i=r.length,a=4==Ba(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Yc(this),ff(this);var u="";break t}this.h.i=new At.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.X,I,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vd(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,di(12),Yc(this),ff(this);break e}cf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ig(this,t)}this.U?(SC(this,I,u),Cd&&this.i&&3==I&&(MT(this.V,this.W,"tick",this.fb),this.W.start())):(cf(this.j,this.m,u,null),Ig(this,u)),4==I&&Yc(this),this.i&&!this.I&&(4==I?$C(this.l,this):(this.i=!1,Tg(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,di(12)):(this.o=0,di(13)),Yc(this),ff(this)}}}catch(I){}},tt.fb=function(){if(this.g){var n=Ba(this.g),e=this.g.ga();this.C<e.length&&(ty(this),SC(this,n,e),this.i&&4!=n&&Tg(this))}},tt.cancel=function(){this.I=!0,Yc(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(wg(3),di(17)),Yc(this),this.o=2,ff(this)):BT(this,this.Y-n)},(tt=pf.prototype).R=function(){ry(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},tt.T=function(){return ry(this),this.g.concat()},tt.get=function(n,e){return Qc(this.h,n)?this.h[n]:e},tt.set=function(n,e){Qc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var ZT=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ad(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ad){this.g=void 0!==e?e:n.g,iy(this,n.j),this.s=n.s,MC(this,n.i),sy(this,n.m),this.l=n.l,e=n.h;var t=new Sg;t.i=e.i,e.g&&(t.g=new pf(e.g),t.h=e.h),qT(this,t),this.o=n.o}else n&&(t=String(n).match(ZT))?(this.g=!!e,iy(this,t[1]||"",!0),this.s=mf(t[2]||""),MC(this,t[3]||"",!0),sy(this,t[4]),this.l=mf(t[5]||"",!0),qT(this,t[6]||"",!0),this.o=mf(t[7]||"")):(this.g=!!e,this.h=new Sg(null,this.g))}function ia(n){return new Ad(n)}function iy(n,e,t){n.j=t?mf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function MC(n,e,t){n.i=t?mf(e,!0):e}function sy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function qT(n,e,t){e instanceof Sg?(n.h=e,function(n,e){e&&!n.j&&(Jc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(HT(this,r),GT(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Dg(e,OC)),n.h=new Sg(e,n.g))}function Tn(n,e,t){n.h.set(e,t)}function Ag(n){return Tn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function mf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Dg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,fk),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function fk(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ad.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Dg(e,PC,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Dg(e,PC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Dg(t,"/"==t.charAt(0)?jT:pk,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Dg(t,$T)),n.join("")};var PC=/[#\/\?@]/g,pk=/[#\?:]/g,jT=/[#\?]/g,OC=/[#\?@]/g,$T=/#/g;function Sg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Jc(n){n.g||(n.g=new pf,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function HT(n,e){Jc(n),e=_f(n,e),Qc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Qc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&ry(n)))}function zT(n,e){return Jc(n),e=_f(n,e),Qc(n.g.h,e)}function GT(n,e,t){HT(n,e),0<t.length&&(n.i=null,n.g.set(_f(n,e),cC(t)),n.h+=t.length)}function _f(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function WT(n){this.l=n||Mg,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ea&&At.g.Ea()&&At.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=Sg.prototype).add=function(n,e){Jc(this),this.i=null,n=_f(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){Jc(this),this.g.forEach(function(t,r){Ct(t,function(i){n.call(e,i,r,this)},this)},this)},tt.T=function(){Jc(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},tt.R=function(n){Jc(this);var e=[];if("string"==typeof n)zT(this,n)&&(e=cT(e,this.g.get(_f(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=cT(e,n[t])}return e},tt.set=function(n,e){return Jc(this),this.i=null,zT(this,n=_f(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var u=i;""!==r[a]&&(u+="="+encodeURIComponent(String(r[a]))),n.push(u)}}return this.i=n.join("&")};var Mg=10;function xC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function kC(n){return n.h?1:n.g?n.g.size:0}function oy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ay(n,e){n.g?n.g.add(e):n.h=e}function RC(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function NC(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return cC(n.i)}function FC(){}function KT(){this.g=new FC}function rS(n,e,t){const r=t||"";try{Id(n,function(i,a){let u=i;nf(i)&&(u=vC(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ly(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Pg(n){this.l=n.$b||null,this.j=n.ib||!1}function Xc(n,e){Xr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=LC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}WT.prototype.cancel=function(){if(this.i=NC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},FC.prototype.stringify=function(n){return At.JSON.stringify(n,void 0)},FC.prototype.parse=function(n){return At.JSON.parse(n,void 0)},Fr(Pg,TC),Pg.prototype.g=function(){return new Xc(this.l,this.j)},Pg.prototype.i=function(n){return function(){return n}}({}),Fr(Xc,Xr);var LC=0;function cy(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Es(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Og(n)}function Og(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=Xc.prototype).open=function(n,e){if(this.readyState!=LC)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Og(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||At).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Es(this)),this.readyState=LC},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Og(this)),this.g&&(this.readyState=3,Og(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==At.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cy(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Es(this):Og(this),3==this.readyState&&cy(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,Es(this))},tt.Ta=function(n){this.g&&(this.response=n,Es(this))},tt.ha=function(){this.g&&Es(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Xc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var UC=At.JSON.parse;function zn(n){Xr.call(this),this.headers=new pf,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=YT,this.K=this.L=!1}Fr(zn,Xr);var YT="",sS=/^https?$/i,oS=["POST","PUT"];function dy(n){return"content-type"==n.toLowerCase()}function QT(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,JT(n),xg(n)}function JT(n){n.D||(n.D=!0,ui(n,"complete"),ui(n,"error"))}function VC(n){if(n.h&&void 0!==U_&&(!n.C[1]||4!=Ba(n)||2!=n.ba()))if(n.v&&4==Ba(n))yg(n.Fa,0,n);else if(ui(n,"readystatechange"),4==Ba(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(ZT)[1]||null;if(!i&&At.self&&At.self.location){var a=At.self.location.protocol;i=a.substr(0,a.length-1)}r=!sS.test(i?i.toLowerCase():"")}t=r}if(t)ui(n,"complete"),ui(n,"success");else{n.m=6;try{var u=2<Ba(n)?n.g.statusText:""}catch(_){u=""}n.j=u+" ["+n.ba()+"]",JT(n)}}finally{xg(n)}}}function xg(n,e){if(n.g){hy(n);const t=n.g,r=n.C[0]?fg:null;n.g=null,n.C=null,e||ui(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function hy(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function Ba(n){return n.g?n.g.readyState:0}function XT(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case YT:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function eI(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return dC(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Tn(n,e,t))}function Dd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function fy(n){this.za=0,this.l=[],this.h=new Y_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Dd("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Dd("baseRetryDelayMs",5e3,n),this.$a=Dd("retryDelaySeedMs",1e4,n),this.Ya=Dd("forwardChannelMaxRetries",2,n),this.ra=Dd("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new WT(n&&n.concurrentRequestLimit),this.Ca=new KT,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function py(n){if(gy(n),3==n.G){var e=n.V++,t=ia(n.F);Tn(t,"SID",n.J),Tn(t,"RID",e),Tn(t,"TYPE","terminate"),vf(n,t),(e=new ey(n,n.h,e,void 0)).K=2,e.v=Ag(ia(t)),t=!1,At.navigator&&At.navigator.sendBeacon&&(t=At.navigator.sendBeacon(e.v.toString(),"")),!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=ki(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Tg(e)}zC(n)}function yf(n){n.g&&(yy(n),n.g.cancel(),n.g=null)}function gy(n){yf(n),n.u&&(At.clearTimeout(n.u),n.u=null),vy(n),n.i.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function BC(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&my(n)}function my(n){xC(n.i)||n.m||(n.m=!0,wC(n.Ha,n),n.C=0)}function tI(n,e){var t;t=e?e.m:n.V++;const r=ia(n.F);Tn(r,"SID",n.J),Tn(r,"RID",t),Tn(r,"AID",n.U),vf(n,r),n.o&&n.s&&eI(r,n.o,n.s),t=new ey(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=_y(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),ay(n.i,t),Td(t,r,e)}function vf(n,e){n.j&&Id({},function(t,r){Tn(e,r,t)})}function _y(n,e,t){t=Math.min(n.l.length,t);var r=n.j?sr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let h=!0;for(let _=0;_<t;_++){let w=i[_].h;const I=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),h=!1;else try{rS(I,u,"req"+w+"_")}catch(A){r&&r(I)}}if(h){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function ZC(n){n.g||n.u||(n.Y=1,wC(n.Ga,n),n.A=0)}function qC(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=uf(sr(n.Ga,n),HC(n,n.A)),n.A++,0))}function yy(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function jC(n){n.g=new ey(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ia(n.oa);Tn(e,"RID","rpc"),Tn(e,"SID",n.J),Tn(e,"CI",n.N?"0":"1"),Tn(e,"AID",n.U),vf(n,e),Tn(e,"TYPE","xmlhttp"),n.o&&n.s&&eI(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Ag(ia(e)),t.s=null,t.U=!0,VT(t,n)}function vy(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function $C(n,e){var t=null;if(n.g==e){vy(n),yy(n),n.g=null;var r=2}else{if(!oy(n.i,e))return;t=e.D,RC(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ui(r=Cg(),new Q_(r,t,e,i)),my(n)}else ZC(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function(n,e){return!(kC(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=uf(sr(n.Ha,n,e),HC(n,n.C)),n.C++,0)))}(n,e)||2==r&&qC(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Sd(n,5);break;case 4:Sd(n,10);break;case 3:Sd(n,6);break;default:Sd(n,2)}}function HC(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Sd(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=sr(n.jb,n);t||(t=new Ad("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||iy(t,"https"),Ag(t)),function(n,e){const t=new Y_;if(At.Image){const r=new Image;r.onload=lC(ly,t,r,"TestLoadImage: loaded",!0,e),r.onerror=lC(ly,t,r,"TestLoadImage: error",!1,e),r.onabort=lC(ly,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=lC(ly,t,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else di(2);n.G=0,n.j&&n.j.va(e),zC(n),gy(n)}function zC(n){n.G=0,n.I=-1,n.j&&((0!=NC(n.i).length||0!=n.l.length)&&(n.i.i.length=0,cC(n.l),n.l.length=0),n.j.ua())}function nI(n,e,t){let r=function(n){return n instanceof Ad?ia(n):new Ad(n,void 0)}(t);if(""!=r.i)e&&MC(r,e+"."+r.i),sy(r,r.m);else{const i=At.location;r=function(n,e,t,r){var i=new Ad(null,void 0);return n&&iy(i,n),e&&MC(i,e),t&&sy(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&dC(n.aa,function(i,a){Tn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Tn(r,e,t),Tn(r,"VER",n.ma),vf(n,r),r}function ki(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new zn(t&&n.Ba&&!n.qa?new Pg({ib:!0}):n.qa)).L=n.H,e}function Md(){}function Cy(){if(sf&&!(10<=Number(ZD)))throw Error("Environmental error: no available transport.")}function Xs(n,e){Xr.call(this),this.g=new fy(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!vd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new wf(this)}function cS(n){IC.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Cf(){X_.call(this),this.status=1}function wf(n){this.g=n}(tt=zn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():AC.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:AC),this.g.onreadystatechange=sr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void QT(this,a)}n=t||"";const i=new pf(this.headers);r&&Id(r,function(a,u){i.set(u,a)}),r=function(n){e:{var e=dy;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=At.FormData&&n instanceof At.FormData,!(0<=ND(oS,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,u){this.g.setRequestHeader(u,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{hy(this),0<this.B&&((this.K=function(n){return sf&&pg()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=sr(this.pa,this)):this.A=yg(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){QT(this,a)}},tt.pa=function(){void 0!==U_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ui(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ui(this,"complete"),ui(this,"abort"),xg(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xg(this,!0)),zn.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?VC(this):this.cb())},tt.cb=function(){VC(this)},tt.ba=function(){try{return 2<Ba(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),UC(e)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=fy.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new ey(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=dT(a),fC(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_y(this,i,e),Tn(t=ia(this.F),"RID",n),Tn(t,"CVER",22),this.D&&Tn(t,"X-HTTP-Session-Id",this.D),vf(this,t),this.o&&a&&eI(t,this.o,a),ay(this.i,i),this.Ra&&Tn(t,"TYPE","init"),this.ja?(Tn(t,"$req",e),Tn(t,"SID","null"),i.$=!0,Td(i,t,null)):Td(i,t,e),this.G=2}}else 3==this.G&&(n?tI(this,n):0==this.l.length||xC(this.i)||tI(this))},tt.Ga=function(){if(this.u=null,jC(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=uf(sr(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,di(10),yf(this),jC(this))},tt.ab=function(){null!=this.v&&(this.v=null,yf(this),qC(this),di(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),di(2)):(this.h.info("Failed to ping google.com"),di(1))},(tt=Md.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},Cy.prototype.g=function(n,e){return new Xs(n,e)},Fr(Xs,Xr),Xs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),wC(sr(n.hb,n,e))),di(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=nI(n,null,n.W),my(n)},Xs.prototype.close=function(){py(this.g)},Xs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,BC(this.g,e)}else this.v?((e={}).__data__=vC(n),BC(this.g,e)):BC(this.g,n)},Xs.prototype.M=function(){this.g.j=null,delete this.j,py(this.g),delete this.g,Xs.Z.M.call(this)},Fr(cS,IC),Fr(Cf,X_),Fr(wf,Md),wf.prototype.xa=function(){ui(this.g,"a")},wf.prototype.wa=function(n){ui(this.g,new cS(n))},wf.prototype.va=function(n){ui(this.g,new Cf(n))},wf.prototype.ua=function(){ui(this.g,"b")},Cy.prototype.createWebChannel=Cy.prototype.g,Xs.prototype.send=Xs.prototype.u,Xs.prototype.open=Xs.prototype.m,Xs.prototype.close=Xs.prototype.close,df.NO_ERROR=0,df.TIMEOUT=8,df.HTTP_ERROR=6,FT.COMPLETE="complete",LT.EventType=hf,hf.OPEN="a",hf.CLOSE="b",hf.ERROR="c",hf.MESSAGE="d",Xr.prototype.listen=Xr.prototype.N,zn.prototype.listenOnce=zn.prototype.O,zn.prototype.getLastError=zn.prototype.La,zn.prototype.getLastErrorCode=zn.prototype.Da,zn.prototype.getStatus=zn.prototype.ba,zn.prototype.getResponseJson=zn.prototype.Qa,zn.prototype.getResponseText=zn.prototype.ga,zn.prototype.send=zn.prototype.ea;var GC=Va.createWebChannelTransport=function(){return new Cy},uS=Va.getStatEventTarget=function(){return Cg()},wy=Va.ErrorCode=df,dS=Va.EventType=FT,hS=Va.Event=bd,Ey=Va.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},rI=Va.FetchXmlHttpFactory=Pg,kg=Va.WebChannel=LT,by=Va.XhrIo=zn;const Ty="@firebase/firestore";class Ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ri.UNAUTHENTICATED=new Ri(null),Ri.GOOGLE_CREDENTIALS=new Ri("google-credentials-uid"),Ri.FIRST_PARTY=new Ri("first-party-uid"),Ri.MOCK_USER=new Ri("mock-user");let Pd="9.6.3";const eu=new ra.Yd("@firebase/firestore");function Iy(){return eu.logLevel}function Fe(n,...e){if(eu.logLevel<=ra.in.DEBUG){const t=e.map(Rg);eu.debug(`Firestore (${Pd}): ${n}`,...t)}}function Er(n,...e){if(eu.logLevel<=ra.in.ERROR){const t=e.map(Rg);eu.error(`Firestore (${Pd}): ${n}`,...t)}}function Od(n,...e){if(eu.logLevel<=ra.in.WARN){const t=e.map(Rg);eu.warn(`Firestore (${Pd}): ${n}`,...t)}}function Rg(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${Pd}) INTERNAL ASSERTION FAILED: `+n;throw Er(e),new Error(e)}function Tt(n,e){n||dt()}function qe(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends R.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class WC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ri.UNAUTHENTICATED))}shutdown(){}}class pS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class sI{constructor(e){this.t=e,this.currentUser=Ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let u=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Lr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=u;e.enqueueRetryable((0,ie.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Lr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new WC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new Ri(e)}}class gS{constructor(e,t,r){this.type="FirstParty",this.user=Ri.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class oI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new gS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aI{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=i=>{e.enqueueRetryable(()=>{return null!=(a=i).error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`),t(a.token);var a})};const r=i=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.g.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.g.getImmediate({optional:!0});i?r(i):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),new KC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class eo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.p(r),this.T=r=>t.writeSequenceNumber(r))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function _S(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}eo.I=-1;class lI{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=_S(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function qt(n,e){return n<e?-1:n>e?1:0}function Ng(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function yS(n){return n+"\0"}class hi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hi.fromMillis(Date.now())}static fromDate(e){return hi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new hi(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xt(e)}static min(){return new xt(new hi(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function vS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ef(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Dy{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Dy.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dy?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends Dy{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const gk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ur extends Dy{construct(e,t,r){return new Ur(e,t,r)}static isValidIdentifier(e){return gk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ur(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new xe(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new xe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new xe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(a(),i++)}if(a(),u)throw new xe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ur(t)}static emptyPath(){return new Ur([])}}class sa{constructor(e){this.fields=e,e.sort(Ur.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ng(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Vr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Vr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Vr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vr.EMPTY_BYTE_STRING=new Vr("");const wS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Za(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=wS.exec(n);if(Tt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:hr(n.seconds),nanos:hr(n.nanos)}}function hr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function xd(n){return"string"==typeof n?Vr.fromBase64String(n):Vr.fromUint8Array(n)}function Sy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ES(n){const e=n.mapValue.fields.__previous_value__;return Sy(e)?ES(e):e}function bf(n){const e=Za(n.mapValue.fields.__local_write_time__.timestampValue);return new hi(e.seconds,e.nanos)}function qa(n){return null==n}function Fg(n){return 0===n&&1/n==-1/0}function bS(n){return"number"==typeof n&&Number.isInteger(n)&&!Fg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class lt{constructor(e){this.path=e}static fromPath(e){return new lt(sn.fromString(e))}static fromName(e){return new lt(sn.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lt(new sn(e.slice()))}}function Tf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sy(n)?4:10:dt()}function ja(n,e){if(n===e)return!0;const t=Tf(n);if(t!==Tf(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return bf(n).isEqual(bf(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Za(r.timestampValue),u=Za(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,xd(n.bytesValue).isEqual(xd(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return hr(r.geoPointValue.latitude)===hr(i.geoPointValue.latitude)&&hr(r.geoPointValue.longitude)===hr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return hr(r.integerValue)===hr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=hr(r.doubleValue),u=hr(i.doubleValue);return a===u?Fg(a)===Fg(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return Ng(n.arrayValue.values||[],e.arrayValue.values||[],ja);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(vS(a)!==vS(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===u[h]||!ja(a[h],u[h])))return!1;return!0}(n,e);default:return dt()}var i}function kd(n,e){return void 0!==(n.values||[]).find(t=>ja(t,e))}function If(n,e){if(n===e)return 0;const t=Tf(n),r=Tf(e);if(t!==r)return qt(t,r);switch(t){case 0:return 0;case 1:return qt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=hr(i.integerValue||i.doubleValue),h=hr(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return TS(n.timestampValue,e.timestampValue);case 4:return TS(bf(n),bf(e));case 5:return qt(n.stringValue,e.stringValue);case 6:return function(i,a){const u=xd(i),h=xd(a);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),h=a.split("/");for(let _=0;_<u.length&&_<h.length;_++){const w=qt(u[_],h[_]);if(0!==w)return w}return qt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=qt(hr(i.latitude),hr(a.latitude));return 0!==u?u:qt(hr(i.longitude),hr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],h=a.values||[];for(let _=0;_<u.length&&_<h.length;++_){const w=If(u[_],h[_]);if(w)return w}return qt(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const u=i.fields||{},h=Object.keys(u),_=a.fields||{},w=Object.keys(_);h.sort(),w.sort();for(let I=0;I<h.length&&I<w.length;++I){const A=qt(h[I],w[I]);if(0!==A)return A;const x=If(u[h[I]],_[w[I]]);if(0!==x)return x}return qt(h.length,w.length)}(n.mapValue,e.mapValue);default:throw dt()}}function TS(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return qt(n,e);const t=Za(n),r=Za(e),i=qt(t.seconds,r.seconds);return 0!==i?i:qt(t.nanos,r.nanos)}function YC(n){return Lg(n)}function Lg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Za(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?xd(n.bytesValue).toBase64():"referenceValue"in n?lt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=Lg(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const h of i)u?u=!1:a+=",",a+=`${h}:${Lg(r.fields[h])}`;return a+"}"}(n.mapValue):dt();var e}function My(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ss(n){return!!n&&"integerValue"in n}function QC(n){return!!n&&"arrayValue"in n}function Py(n){return!!n&&"nullValue"in n}function uI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Oy(n){return!!n&&"mapValue"in n}function Rd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ef(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Rd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rd(n.arrayValue.values[t]);return e}return Object.assign({},n)}class fi{constructor(e){this.value=e}static empty(){return new fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Oy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rd(t)}setAll(e){let t=Ur.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=Rd(u):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Oy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ja(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Oy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ef(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new fi(Rd(this.value))}}function JC(n){const e=[];return Ef(n.fields,(t,r)=>{const i=new Ur([t]);if(Oy(r)){const a=JC(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new sa(e)}class Gn{constructor(e,t,r,i,a){this.key=e,this.documentType=t,this.version=r,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Gn(e,0,xt.min(),fi.empty(),0)}static newFoundDocument(e,t,r){return new Gn(e,1,t,r,0)}static newNoDocument(e,t){return new Gn(e,2,t,fi.empty(),0)}static newUnknownDocument(e,t){return new Gn(e,3,t,fi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class dI{constructor(e,t=null,r=[],i=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=h,this.R=null}}function XC(n,e=null,t=[],r=[],i=null,a=null,u=null){return new dI(n,e,t,r,i,a,u)}function Ug(n){const e=qe(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+YC(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),qa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=xy(e.startAt)),e.endAt&&(t+="|ub:",t+=xy(e.endAt)),e.R=t}return e.R}function Af(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!mI(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ja(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ky(n.startAt,e.startAt)&&ky(n.endAt,e.endAt)}function bs(n){return lt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class os extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new DS(e,t,r):"array-contains"===t?new pI(e,r):"in"===t?new MS(e,r):"not-in"===t?new mk(e,r):"array-contains-any"===t?new gI(e,r):new os(e,t,r)}static P(e,t,r){return"in"===t?new hI(e,r):new SS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(If(t,this.value)):null!==t&&Tf(this.value)===Tf(t)&&this.v(If(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class DS extends os{constructor(e,t,r){super(e,t,r),this.key=lt.fromName(r.referenceValue)}matches(e){const t=lt.comparator(e.key,this.key);return this.v(t)}}class hI extends os{constructor(e,t){super(e,"in",t),this.keys=fI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class SS extends os{constructor(e,t){super(e,"not-in",t),this.keys=fI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>lt.fromName(r.referenceValue))}class pI extends os{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return QC(t)&&kd(t.arrayValue,this.value)}}class MS extends os{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kd(this.value.arrayValue,t)}}class mk extends os{constructor(e,t){super(e,"not-in",t)}matches(e){if(kd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!kd(this.value.arrayValue,t)}}class gI extends os{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!QC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>kd(this.value.arrayValue,r))}}class Df{constructor(e,t){this.position=e,this.before=t}}function xy(n){return`${n.before?"b":"a"}:${n.position.map(e=>YC(e)).join(",")}`}class Sf{constructor(e,t="asc"){this.field=e,this.dir=t}}function mI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Mf(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?lt.comparator(lt.fromName(u.referenceValue),t.key):If(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function ky(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ja(n.position[t],e.position[t]))return!1;return!0}class $a{constructor(e,t=null,r=[],i=[],a=null,u="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=_,this.S=null,this.D=null}}function _I(n,e,t,r,i,a,u,h){return new $a(n,e,t,r,i,a,u,h)}function Nd(n){return new $a(n)}function Vg(n){return!qa(n.limit)&&"F"===n.limitType}function Ry(n){return!qa(n.limit)&&"L"===n.limitType}function ew(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function yI(n){for(const e of n.filters)if(e.V())return e.field;return null}function vI(n){return null!==n.collectionGroup}function Fd(n){const e=qe(n);if(null===e.S){e.S=[];const t=yI(e),r=ew(e);if(null!==t&&null===r)t.isKeyField()||e.S.push(new Sf(t)),e.S.push(new Sf(Ur.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.S.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Sf(Ur.keyField(),a))}}}return e.S}function bo(n){const e=qe(n);if(!e.D)if("F"===e.limitType)e.D=XC(e.path,e.collectionGroup,Fd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Fd(e))t.push(new Sf(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Df(e.endAt.position,!e.endAt.before):null,i=e.startAt?new Df(e.startAt.position,!e.startAt.before):null;e.D=XC(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.D}function CI(n,e,t){return new $a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bg(n,e){return Af(bo(n),bo(e))&&n.limitType===e.limitType}function PS(n){return`${Ug(bo(n))}|lt:${n.limitType}`}function wI(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${YC(r.value)}`;var r}).join(", ")}]`),qa(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+xy(n.startAt)),n.endAt&&(e+=", endAt: "+xy(n.endAt)),`Target(${e})`}(bo(n))}; limitType=${n.limitType})`}function Ny(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):lt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!Mf(t.startAt,Fd(t),r)||t.endAt&&Mf(t.endAt,Fd(t),r)));var t,r}function OS(n){return(e,t)=>{let r=!1;for(const i of Fd(n)){const a=_k(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function _k(n,e,t){const r=n.field.isKeyField()?lt.comparator(e.key,t.key):function(i,a,u){const h=a.data.field(i),_=u.data.field(i);return null!==h&&null!==_?If(h,_):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function EI(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fg(e)?"-0":e}}function Zg(n){return{integerValue:""+n}}function bI(n,e){return bS(e)?Zg(e):EI(n,e)}class Fy{constructor(){this._=void 0}}function TI(n,e,t){return n instanceof tu?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Jl?II(n,e):n instanceof Xl?Ly(n,e):function(r,i){const a=tw(r,i),u=nw(a)+nw(r.N);return ss(a)&&ss(r.N)?Zg(u):EI(r.k,u)}(n,e)}function Ld(n,e,t){return n instanceof Jl?II(n,e):n instanceof Xl?Ly(n,e):t}function tw(n,e){return n instanceof Ud?ss(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class tu extends Fy{}class Jl extends Fy{constructor(e){super(),this.elements=e}}function II(n,e){const t=xS(e);for(const r of n.elements)t.some(i=>ja(i,r))||t.push(r);return{arrayValue:{values:t}}}class Xl extends Fy{constructor(e){super(),this.elements=e}}function Ly(n,e){let t=xS(e);for(const r of n.elements)t=t.filter(i=>!ja(i,r));return{arrayValue:{values:t}}}class Ud extends Fy{constructor(e,t){super(),this.k=e,this.N=t}}function nw(n){return hr(n.integerValue||n.doubleValue)}function xS(n){return QC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Uy{constructor(e,t){this.field=e,this.transform=t}}class vk{constructor(e,t){this.version=e,this.transformResults=t}}class Br{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Br}static exists(e){return new Br(void 0,e)}static updateTime(e){return new Br(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rw(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class iw{}function AI(n,e,t){n instanceof Pf?function(r,i,a){const u=r.value.clone(),h=MI(r.fieldTransforms,i,a.transformResults);u.setAll(h),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof ec?function(r,i,a){if(!rw(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=MI(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(ow(r)),h.setAll(u),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function sw(n,e,t){var i;n instanceof Pf?function(r,i,a){if(!rw(r.precondition,i))return;const u=r.value.clone(),h=PI(r.fieldTransforms,a,i);u.setAll(h),i.convertToFoundDocument(SI(i),u).setHasLocalMutations()}(n,e,t):n instanceof ec?function(r,i,a){if(!rw(r.precondition,i))return;const u=PI(r.fieldTransforms,a,i),h=i.data;h.setAll(ow(r)),h.setAll(u),i.convertToFoundDocument(SI(i),h).setHasLocalMutations()}(n,e,t):rw(n.precondition,i=e)&&i.convertToNoDocument(xt.min())}function kS(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=tw(r.transform,i||null);null!=a&&(null==t&&(t=fi.empty()),t.set(r.field,a))}return t||null}function DI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ng(t,r,(i,a)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Jl&&r instanceof Jl||t instanceof Xl&&r instanceof Xl?Ng(t.elements,r.elements,ja):t instanceof Ud&&r instanceof Ud?ja(t.N,r.N):t instanceof tu&&r instanceof tu);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function SI(n){return n.isFoundDocument()?n.version:xt.min()}class Pf extends iw{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class ec extends iw{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function ow(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function MI(n,e,t){const r=new Map;Tt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,h=e.data.field(a.field);r.set(a.field,Ld(u,h,t[i]))}return r}function PI(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,TI(a,u,e))}return r}class Of extends iw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class xf extends iw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class RS{constructor(e){this.count=e}}var fr,jt;function OI(n){switch(n){default:return dt();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function xI(n){if(void 0===n)return Er("GRPC error has no .code"),pe.UNKNOWN;switch(n){case fr.OK:return pe.OK;case fr.CANCELLED:return pe.CANCELLED;case fr.UNKNOWN:return pe.UNKNOWN;case fr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case fr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case fr.INTERNAL:return pe.INTERNAL;case fr.UNAVAILABLE:return pe.UNAVAILABLE;case fr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case fr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case fr.NOT_FOUND:return pe.NOT_FOUND;case fr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case fr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case fr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case fr.ABORTED:return pe.ABORTED;case fr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case fr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case fr.DATA_LOSS:return pe.DATA_LOSS;default:return dt()}}(jt=fr||(fr={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";class Zr{constructor(e,t){this.comparator=e,this.root=t||Ni.EMPTY}insert(e,t){return new Zr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ni.BLACK,null,null))}remove(e){return new Zr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vy(this.root,e,this.comparator,!0)}}class Vy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ni{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Ni.RED,this.left=null!=i?i:Ni.EMPTY,this.right=null!=a?a:Ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ni(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ni.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}Ni.EMPTY=null,Ni.RED=!0,Ni.BLACK=!1,Ni.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ni(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class or{constructor(e){this.comparator=e,this.data=new Zr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kI(this.data.getIterator())}getIteratorFrom(e){return new kI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof or)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new or(this.comparator);return t.data=e,t}}class kI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const NS=new Zr(lt.comparator);function To(){return NS}const FS=new Zr(lt.comparator);function aw(){return FS}const LS=new Zr(lt.comparator);function RI(){return LS}const Ck=new or(lt.comparator);function Mn(...n){let e=Ck;for(const t of n)e=e.add(t);return e}const wk=new or(qt);function lw(){return wk}class By{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,qg.createSynthesizedTargetChangeForCurrentChange(e,t)),new By(xt.min(),r,lw(),To(),Mn())}}class qg{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new qg(Vr.EMPTY_BYTE_STRING,t,Mn(),Mn(),Mn())}}class cw{constructor(e,t,r,i){this.$=e,this.removedTargetIds=t,this.key=r,this.O=i}}class US{constructor(e,t){this.targetId=e,this.M=t}}class VS{constructor(e,t,r=Vr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class BS{constructor(){this.F=0,this.L=c(),this.B=Vr.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.F}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=Mn(),t=Mn(),r=Mn();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new qg(this.B,this.U,e,t,r)}H(){this.q=!1,this.L=c()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.F+=1}Z(){this.F-=1}tt(){this.q=!0,this.U=!0}}class s{constructor(e){this.et=e,this.nt=new Map,this.st=To(),this.it=o(),this.rt=new or(qt)}ot(e){for(const t of e.$)e.O&&e.O.isFoundDocument()?this.ct(t,e.O):this.at(t,e.key,e.O);for(const t of e.removedTargetIds)this.at(t,e.key,e.O)}ut(e){this.forEachTarget(e,t=>{const r=this.ht(t);switch(e.state){case 0:this.lt(t)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||this.removeTarget(t);break;case 3:this.lt(t)&&(r.tt(),r.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),r.W(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((r,i)=>{this.lt(i)&&t(i)})}dt(e){const t=e.targetId,r=e.M.count,i=this.wt(t);if(i){const a=i.target;if(bs(a))if(0===r){const u=new lt(a.path);this.at(t,u,Gn.newNoDocument(u,xt.min()))}else Tt(1===r);else this._t(t)!==r&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((a,u)=>{const h=this.wt(u);if(h){if(a.current&&bs(h.target)){const _=new lt(h.target.path);null!==this.st.get(_)||this.yt(u,_)||this.at(u,_,Gn.newNoDocument(_,e))}a.j&&(t.set(u,a.G()),a.H())}});let r=Mn();this.it.forEach((a,u)=>{let h=!0;u.forEachWhile(_=>{const w=this.wt(_);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))});const i=new By(e,t,this.rt,this.st,r);return this.st=To(),this.it=o(),this.rt=new or(qt),i}ct(e,t){if(!this.lt(e))return;const r=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,r),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}at(e,t,r){if(!this.lt(e))return;const i=this.ht(e);this.yt(e,t)?i.J(t,1):i.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),r&&(this.st=this.st.insert(t,r))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new BS,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new or(qt),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new BS),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function o(){return new Zr(lt.comparator)}function c(){return new Zr(lt.comparator)}const d={asc:"ASCENDING",desc:"DESCENDING"},f={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class m{constructor(e,t){this.databaseId=e,this.C=t}}function v(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E(n,e){return n.C?e.toBase64():e.toUint8Array()}function b(n,e){return v(n,e.toTimestamp())}function M(n){return Tt(!!n),xt.fromTimestamp(function(e){const t=Za(e);return new hi(t.seconds,t.nanos)}(n))}function O(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function L(n){const e=sn.fromString(n);return Tt(Ek(e)),e}function j(n,e){return O(n.databaseId,e.path)}function K(n,e){const t=L(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new lt(nt(t))}function _e(n,e){return O(n.databaseId,e)}function Ne(n){const e=L(n);return 4===e.length?sn.emptyPath():nt(e)}function Ue(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nt(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Te(n,e,t){return{name:j(n,e),fields:t.value.mapValue.fields}}function pt(n,e,t){const r=K(n,e.name),i=M(e.updateTime),a=new fi({mapValue:{fields:e.fields}}),u=Gn.newFoundDocument(r,i,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function Fi(n,e){let t;if(e instanceof Pf)t={update:Te(n,e.key,e.value)};else if(e instanceof Of)t={delete:j(n,e.key)};else if(e instanceof ec)t={update:Te(n,e.key,e.data),updateMask:p3(e.fieldMask)};else{if(!(e instanceof xf))return dt();t={verify:j(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof tu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Jl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Xl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ud)return{fieldPath:a.field.canonicalString(),increment:u.N};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:b(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function nu(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Br.updateTime(M(i.updateTime)):void 0!==i.exists?Br.exists(i.exists):Br.none():Br.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let h=null;"setToServerValue"in u?(Tt("REQUEST_TIME"===u.setToServerValue),h=new tu):"appendMissingElements"in u?h=new Jl(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new Xl(u.removeAllFromArray.values||[]):"increment"in u?h=new Ud(a,u.increment):dt();const _=Ur.fromServerFormat(u.fieldPath);return new Uy(_,h)}(n,i)):[];var i;if(e.update){const i=K(n,e.update.name),a=new fi({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new sa((e.updateMask.fieldPaths||[]).map(w=>Ur.fromServerFormat(w)));return new ec(i,a,u,t,r)}return new Pf(i,a,t,r)}if(e.delete){const i=K(n,e.delete);return new Of(i,t)}if(e.verify){const i=K(n,e.verify);return new xf(i,t)}return dt()}function Zy(n,e){return{documents:[_e(n,e.path)]}}function qy(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=_e(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=_e(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(h){if(0===h.length)return;const _=h.map(w=>function(I){if("=="===I.op){if(uI(I.value))return{unaryFilter:{field:Gy(I.field),op:"IS_NAN"}};if(Py(I.value))return{unaryFilter:{field:Gy(I.field),op:"IS_NULL"}}}else if("!="===I.op){if(uI(I.value))return{unaryFilter:{field:Gy(I.field),op:"IS_NOT_NAN"}};if(Py(I.value))return{unaryFilter:{field:Gy(I.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gy(I.field),op:d3(I.op),value:I.value}}}(w));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(h){if(0!==h.length)return h.map(_=>{return{field:Gy((w=_).field),direction:hw(w.dir)};var w})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(_=e.limit,n.C||qa(_)?_:{value:_});var _;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=Hy(e.startAt)),e.endAt&&(t.structuredQuery.endAt=Hy(e.endAt)),t}function jy(n){let e=Ne(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Tt(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let a=[];t.where&&(a=$y(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(I=>{return new Sf(Wy((A=I).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let h=null;t.limit&&(h=function(I){let A;return A="object"==typeof I?I.value:I,qa(A)?null:A}(t.limit));let _=null;t.startAt&&(_=zy(t.startAt));let w=null;return t.endAt&&(w=zy(t.endAt)),_I(e,i,u,a,h,"F",_,w)}function $y(n){return n?void 0!==n.unaryFilter?[f3(n)]:void 0!==n.fieldFilter?[h3(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>$y(e)).reduce((e,t)=>e.concat(t)):dt():[]}function Hy(n){return{before:n.before,values:n.position}}function zy(n){return new Df(n.values||[],!!n.before)}function hw(n){return d[n]}function d3(n){return f[n]}function Gy(n){return{fieldPath:n.canonicalString()}}function Wy(n){return Ur.fromServerFormat(n.fieldPath)}function h3(n){return os.create(Wy(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function f3(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Wy(n.unaryFilter.field);return os.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Wy(n.unaryFilter.field);return os.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Wy(n.unaryFilter.field);return os.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Wy(n.unaryFilter.field);return os.create(i,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function p3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ek(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function tc(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bk(e)),e=g3(n.get(t),e);return bk(e)}function g3(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function bk(n){return n+"\x01\x01"}function Vd(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&dt(),n.charAt(u+1)){case"\x01":const h=n.substring(a,u);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:dt()}a=u+2}return new sn(r)}class m3{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class oa{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}oa.store="owner",oa.key="owner";class kf{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}kf.store="mutationQueues",kf.keyPath="userId";class Xn{constructor(e,t,r,i,a){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}}Xn.store="mutations",Xn.keyPath="batchId",Xn.userMutationsIndex="userMutationsIndex",Xn.userMutationsKeyPath=["userId","batchId"];class Ts{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,tc(t)]}static key(e,t,r){return[e,tc(t),r]}}Ts.store="documentMutations",Ts.PLACEHOLDER=new Ts;class _3{constructor(e,t){this.path=e,this.readTime=t}}class y3{constructor(e,t){this.path=e,this.version=t}}class br{constructor(e,t,r,i,a,u){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=u}}br.store="remoteDocuments",br.readTimeIndex="readTimeIndex",br.readTimeIndexPath="readTime",br.collectionReadTimeIndex="collectionReadTimeIndex",br.collectionReadTimeIndexPath=["parentPath","readTime"];class ru{constructor(e){this.byteSize=e}}ru.store="remoteDocumentGlobal",ru.key="remoteDocumentGlobalKey";class Io{constructor(e,t,r,i,a,u,h){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=u,this.query=h}}Io.store="targets",Io.keyPath="targetId",Io.queryTargetsIndexName="queryTargetsIndex",Io.queryTargetsKeyPath=["canonicalId","targetId"];class as{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}as.store="targetDocuments",as.keyPath=["targetId","path"],as.documentTargetsIndex="documentTargetsIndex",as.documentTargetsKeyPath=["path","targetId"];class aa{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}aa.key="targetGlobalKey",aa.store="targetGlobal";class jg{constructor(e,t){this.collectionId=e,this.parent=t}}jg.store="collectionParents",jg.keyPath=["collectionId","parent"];class Bd{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}Bd.store="clientMetadata",Bd.keyPath="clientId";class Ky{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Ky.store="bundles",Ky.keyPath="bundleId";class Yy{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Yy.store="namedQueries",Yy.keyPath="name";const v3=[kf.store,Xn.store,Ts.store,br.store,Io.store,oa.store,aa.store,as.store,Bd.store,ru.store,jg.store,Ky.store,Yy.store],Tk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ik{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Pe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Pe?t:Pe.resolve(t)}catch(t){return Pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Pe.reject(t)}static resolve(e){return new Pe((t,r)=>{t(e)})}static reject(e){return new Pe((t,r)=>{r(e)})}static waitFor(e){return new Pe((t,r)=>{let i=0,a=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++a,u&&a===i&&t()},_=>r(_))}),u=!0,a===i&&t()})}static or(e){let t=Pe.resolve(!1);for(const r of e)t=t.next(i=>i?Pe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class NI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new Lr,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new fw(e,t.error)):this.It.resolve()},this.transaction.onerror=r=>{const i=ZS(r.target.error);this.It.reject(new fw(e,i))}}static open(e,t,r,i){try{return new NI(t,e.transaction(i,r))}catch(a){throw new fw(t,a)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new w3(t)}}class nc{constructor(e,t,r){this.name=e,this.version=t,this.Rt=r,12.2===nc.bt((0,R.z$)())&&Er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Hg(window.indexedDB.deleteDatabase(e)).toPromise()}static Pt(){if(!(0,R.hl)())return!1;if(nc.vt())return!0;const e=(0,R.z$)(),t=nc.bt(e),r=0<t&&t<10,i=nc.Vt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static bt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Ct(e){var t=this;return(0,ie.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new fw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const h=u.target.error;i("VersionError"===h.name?new xe(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new xe(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new fw(e,h))},a.onupgradeneeded=u=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.Rt.Nt(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=r=>t.kt(r)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ie.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.Ct(e);const _=NI.open(a.db,e,u?"readonly":"readwrite",r),w=i(_).catch(I=>(_.abort(I),Pe.reject(I))).toPromise();return w.catch(()=>{}),yield _.At,w}catch(_){const w="FirebaseError"!==_.name&&h<3;if(Fe("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),a.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class C3{constructor(e){this.$t=e,this.Ot=!1,this.Mt=null}get isDone(){return this.Ot}get Ft(){return this.Mt}set cursor(e){this.$t=e}done(){this.Ot=!0}Lt(e){this.Mt=e}delete(){return Hg(this.$t.delete())}}class fw extends xe{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $g(n){return"IndexedDbTransactionError"===n.name}class w3{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hg(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Hg(this.store.add(e))}get(e){return Hg(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Hg(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Hg(this.store.count())}Bt(e,t){const r=this.cursor(this.options(e,t)),i=[];return this.Ut(r,(a,u)=>{i.push(u)}).next(()=>i)}qt(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Kt=!1;const i=this.cursor(r);return this.Ut(i,(a,u,h)=>h.delete())}jt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Ut(i,t)}Qt(e){const t=this.cursor({});return new Pe((r,i)=>{t.onerror=a=>{const u=ZS(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}Ut(e,t){const r=[];return new Pe((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void i();const _=new C3(h),w=t(h.primaryKey,h.value,_);if(w instanceof Pe){const I=w.catch(A=>(_.done(),Pe.reject(A)));r.push(I)}_.isDone?i():null===_.Ft?h.continue():h.continue(_.Ft)}}).next(()=>Pe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Kt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hg(n){return new Pe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=ZS(r.target.error);t(i)}})}let Ak=!1;function ZS(n){const e=nc.bt((0,R.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ak||(Ak=!0,setTimeout(()=>{throw r},0)),r}}return n}class Dk extends Ik{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function Ao(n,e){const t=qe(n);return nc.Dt(t.Wt,e)}class qS{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&AI(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&sw(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&sw(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(xt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Mn())}isEqual(e){return this.batchId===e.batchId&&Ng(this.mutations,e.mutations,(t,r)=>DI(t,r))&&Ng(this.baseMutations,e.baseMutations,(t,r)=>DI(t,r))}}class jS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Tt(e.mutations.length===r.length);let i=RI();const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new jS(e,t,r,i)}}class Rf{constructor(e,t,r,i,a=xt.min(),u=xt.min(),h=Vr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new Rf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Rf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Rf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Sk{constructor(e){this.Gt=e}}function $S(n,e){if(e.document)return pt(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=lt.fromSegments(e.noDocument.path),r=Jy(e.noDocument.readTime),i=Gn.newNoDocument(t,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){const t=lt.fromSegments(e.unknownDocument.path),r=Jy(e.unknownDocument.version);return Gn.newUnknownDocument(t,r)}return dt()}function Mk(n,e,t){const r=HS(t),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){const a={name:j(h=n.Gt,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:v(h,_.version.toTimestamp())};return new br(null,null,a,e.hasCommittedMutations,r,i)}var h,_;if(e.isNoDocument()){const a=e.key.path.toArray(),u=Qy(e.version),h=e.hasCommittedMutations;return new br(null,new _3(a,u),null,h,r,i)}if(e.isUnknownDocument()){const a=e.key.path.toArray(),u=Qy(e.version);return new br(new y3(a,u),null,null,!0,r,i)}return dt()}function HS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Pk(n){const e=new hi(n[0],n[1]);return xt.fromTimestamp(e)}function Qy(n){const e=n.toTimestamp();return new m3(e.seconds,e.nanoseconds)}function Jy(n){const e=new hi(n.seconds,n.nanoseconds);return xt.fromTimestamp(e)}function Xy(n,e){const t=(e.baseMutations||[]).map(a=>nu(n.Gt,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>nu(n.Gt,a)),i=hi.fromMillis(e.localWriteTimeMs);return new qS(e.batchId,i,t,r)}function pw(n){const e=Jy(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Jy(n.lastLimboFreeSnapshotVersion):xt.min();let r;var i;return void 0!==n.query.documents?(Tt(1===(i=n.query).documents.length),r=bo(Nd(Ne(i.documents[0])))):r=bo(jy(n.query)),new Rf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Vr.fromBase64String(n.resumeToken))}function Ok(n,e){const t=Qy(e.snapshotVersion),r=Qy(e.lastLimboFreeSnapshotVersion);let i;i=bs(e.target)?Zy(n.Gt,e.target):qy(n.Gt,e.target);const a=e.resumeToken.toBase64();return new Io(e.targetId,Ug(e.target),t,a,e.sequenceNumber,r,i)}function zS(n){const e=jy({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?CI(e,e.limit,"L"):e}class E3{getBundleMetadata(e,t){return xk(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Jy(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return xk(e).put({bundleId:(r=t).id,createTime:Qy(M(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return kk(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:zS(i.bundledQuery),readTime:Jy(i.readTime)};var i})}saveNamedQuery(e,t){return kk(e).put({name:(r=t).name,readTime:Qy(M(r.readTime)),bundledQuery:r.bundledQuery});var r}}function xk(n){return Ao(n,Ky.store)}function kk(n){return Ao(n,Yy.store)}class b3{constructor(){this.zt=new GS}addToCollectionParentIndex(e,t){return this.zt.add(t),Pe.resolve()}getCollectionParents(e,t){return Pe.resolve(this.zt.getEntries(t))}}class GS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new or(sn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new or(sn.comparator)).toArray()}}class T3{constructor(){this.Ht=new GS}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const a={collectionId:r,parent:tc(i)};return Rk(e).put(a)}return Pe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[yS(t),""],!1,!0);return Rk(e).Bt(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(Vd(u.parent))}return r})}}function Rk(n){return Ao(n,jg.store)}const Nk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Do{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Do(e,Do.DEFAULT_COLLECTION_PERCENTILE,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Fk(n,e,t){const r=n.store(Xn.store),i=n.store(Ts.store),a=[],u=IDBKeyRange.only(t.batchId);let h=0;const _=r.jt({range:u},(I,A,x)=>(h++,x.delete()));a.push(_.next(()=>{Tt(1===h)}));const w=[];for(const I of t.mutations){const A=Ts.key(e,I.key.path,t.batchId);a.push(i.delete(A)),w.push(I.key)}return Pe.waitFor(a).next(()=>w)}function FI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}Do.DEFAULT_COLLECTION_PERCENTILE=10,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Do.DEFAULT=new Do(41943040,Do.DEFAULT_COLLECTION_PERCENTILE,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Do.DISABLED=new Do(-1,0,0);class WS{constructor(e,t,r,i){this.userId=e,this.k=t,this.Jt=r,this.referenceDelegate=i,this.Yt={}}static Xt(e,t,r,i){Tt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new WS(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nf(e).jt({index:Xn.userMutationsIndex,range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=ev(e),u=Nf(e);return u.add({}).next(h=>{Tt("number"==typeof h);const _=new qS(h,t,r,i),w=function(x,U,B){const X=B.baseMutations.map(Ge=>Fi(x.Gt,Ge)),de=B.mutations.map(Ge=>Fi(x.Gt,Ge));return new Xn(U,B.batchId,B.localWriteTime.toMillis(),X,de)}(this.k,this.userId,_),I=[];let A=new or((x,U)=>qt(x.canonicalString(),U.canonicalString()));for(const x of i){const U=Ts.key(this.userId,x.key.path,h);A=A.add(x.key.path.popLast()),I.push(u.put(w)),I.push(a.put(U,Ts.PLACEHOLDER))}return A.forEach(x=>{I.push(this.Jt.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.Yt[h]=_.keys()}),Pe.waitFor(I).next(()=>_)})}lookupMutationBatch(e,t){return Nf(e).get(t).next(r=>r?(Tt(r.userId===this.userId),Xy(this.k,r)):null)}Zt(e,t){return this.Yt[t]?Pe.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Yt[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Nf(e).jt({index:Xn.userMutationsIndex,range:i},(u,h,_)=>{h.userId===this.userId&&(Tt(h.batchId>=r),a=Xy(this.k,h)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Nf(e).jt({index:Xn.userMutationsIndex,range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nf(e).Bt(Xn.userMutationsIndex,t).next(r=>r.map(i=>Xy(this.k,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ts.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return ev(e).jt({range:i},(u,h,_)=>{const[w,I,A]=u,x=Vd(I);if(w===this.userId&&t.path.isEqual(x))return Nf(e).get(A).next(U=>{if(!U)throw dt();Tt(U.userId===this.userId),a.push(Xy(this.k,U))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or(qt);const i=[];return t.forEach(a=>{const u=Ts.prefixForPath(this.userId,a.path),h=IDBKeyRange.lowerBound(u),_=ev(e).jt({range:h},(w,I,A)=>{const[x,U,B]=w,X=Vd(U);x===this.userId&&a.path.isEqual(X)?r=r.add(B):A.done()});i.push(_)}),Pe.waitFor(i).next(()=>this.te(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Ts.prefixForPath(this.userId,r),u=IDBKeyRange.lowerBound(a);let h=new or(qt);return ev(e).jt({range:u},(_,w,I)=>{const[A,x,U]=_,B=Vd(x);A===this.userId&&r.isPrefixOf(B)?B.length===i&&(h=h.add(U)):I.done()}).next(()=>this.te(e,h))}te(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Nf(e).get(a).next(u=>{if(null===u)throw dt();Tt(u.userId===this.userId),r.push(Xy(this.k,u))}))}),Pe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Fk(e.Wt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),Pe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Pe.resolve();const r=IDBKeyRange.lowerBound(Ts.prefixForUser(this.userId)),i=[];return ev(e).jt({range:r},(a,u,h)=>{if(a[0]===this.userId){const _=Vd(a[1]);i.push(_)}else h.done()}).next(()=>{Tt(0===i.length)})})}containsKey(e,t){return Lk(e,this.userId,t)}ne(e){return Uk(e).get(this.userId).next(t=>t||new kf(this.userId,-1,""))}}function Lk(n,e,t){const r=Ts.prefixForPath(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return ev(n).jt({range:a,Kt:!0},(h,_,w)=>{const[I,A,x]=h;I===e&&A===i&&(u=!0),w.done()}).next(()=>u)}function Nf(n){return Ao(n,Xn.store)}function ev(n){return Ao(n,Ts.store)}function Uk(n){return Ao(n,kf.store)}class zg{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new zg(0)}static re(){return new zg(-1)}}class I3{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const r=new zg(t.highestTargetId);return t.highestTargetId=r.next(),this.ce(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>xt.fromTimestamp(new hi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.oe(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.ce(e,i)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.oe(e).next(r=>(r.targetCount+=1,this.ue(t,r),this.ce(e,r))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>tv(e).delete(t.targetId)).next(()=>this.oe(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.ce(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return tv(e).jt((u,h)=>{const _=pw(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>Pe.waitFor(a)).next(()=>i)}forEachTarget(e,t){return tv(e).jt((r,i)=>{const a=pw(i);t(a)})}oe(e){return Vk(e).get(aa.key).next(t=>(Tt(null!==t),t))}ce(e,t){return Vk(e).put(aa.key,t)}ae(e,t){return tv(e).put(Ok(this.k,t))}ue(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ug(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return tv(e).jt({range:i,index:Io.queryTargetsIndexName},(u,h,_)=>{const w=pw(h);Af(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Ff(e);return t.forEach(u=>{const h=tc(u.path);i.push(a.put(new as(r,h))),i.push(this.referenceDelegate.addReference(e,r,u))}),Pe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ff(e);return Pe.forEach(t,a=>{const u=tc(a.path);return Pe.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Ff(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ff(e);let a=Mn();return i.jt({range:r,Kt:!0},(u,h,_)=>{const w=Vd(u[1]),I=new lt(w);a=a.add(I)}).next(()=>a)}containsKey(e,t){const r=tc(t.path),i=IDBKeyRange.bound([r],[yS(r)],!1,!0);let a=0;return Ff(e).jt({index:as.documentTargetsIndex,Kt:!0,range:i},([u,h],_,w)=>{0!==u&&(a++,w.done())}).next(()=>a>0)}Et(e,t){return tv(e).get(t).next(r=>r?pw(r):null)}}function tv(n){return Ao(n,Io.store)}function Vk(n){return Ao(n,aa.store)}function Ff(n){return Ao(n,as.store)}function Gg(n){return KS.apply(this,arguments)}function KS(){return KS=(0,ie.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==Tk)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),KS.apply(this,arguments)}function Bk([n,e],[t,r]){const i=qt(n,t);return 0===i?qt(e,r):i}class A3{constructor(e){this.he=e,this.buffer=new or(Bk),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Bk(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class D3{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const r=this.we?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ie.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){$g(i)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Gg(i)}yield t.me(e)}))}}class S3{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Pe.resolve(eo.I);const r=new A3(t);return this.ge.forEachTarget(e,i=>r.de(i.sequenceNumber)).next(()=>this.ge.pe(e,i=>r.de(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.ge.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),Pe.resolve(Nk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nk):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let r,i,a,u,h,_,w;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,u=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,h=Date.now(),this.removeTargets(e,r,t))).next(A=>(a=A,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(w=Date.now(),Iy()<=ra.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-I}ms\n\tDetermined least recently used ${i} in `+(h-u)+`ms\n\tRemoved ${a} targets in `+(_-h)+`ms\n\tRemoved ${A} documents in `+(w-_)+`ms\nTotal Duration: ${w-I}ms`),Pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:A})))}}class M3{constructor(e,t){this.db=e,this.garbageCollector=new S3(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Ee(e){let t=0;return this.pe(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(r,i)=>t(i))}addReference(e,t,r){return LI(e,r)}removeReference(e,t,r){return LI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return LI(e,t)}Ae(e,t){return function(r,i){let a=!1;return Uk(r).Qt(u=>Lk(r,u,i).next(h=>(h&&(a=!0),Pe.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ie(e,(u,h)=>{if(h<=t){const _=this.Ae(e,u).next(w=>{if(!w)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u),Ff(e).delete([0,tc(u.path)])))});i.push(_)}}).next(()=>Pe.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return LI(e,t)}Ie(e,t){const r=Ff(e);let i,a=eo.I;return r.jt({index:as.documentTargetsIndex},([u,h],{path:_,sequenceNumber:w})=>{0===u?(a!==eo.I&&t(new lt(Vd(i)),a),a=w,i=_):a=eo.I}).next(()=>{a!==eo.I&&t(new lt(Vd(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function LI(n,e){return Ff(n).put((r=n.currentSequenceNumber,new as(0,tc(e.path),r)));var r}class nv{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){Ef(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return CS(this.inner)}}class Zk{constructor(){this.changes=new nv(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:xt.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Gn.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Pe.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class P3{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,r){return Lf(e).put(UI(t),r)}removeEntry(e,t){const r=Lf(e),i=UI(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Re(e,r)))}getEntry(e,t){return Lf(e).get(UI(t)).next(r=>this.be(t,r))}Pe(e,t){return Lf(e).get(UI(t)).next(r=>({document:this.be(t,r),size:FI(r)}))}getEntries(e,t){let r=To();return this.ve(e,t,(i,a)=>{const u=this.be(i,a);r=r.insert(i,u)}).next(()=>r)}Ve(e,t){let r=To(),i=new Zr(lt.comparator);return this.ve(e,t,(a,u)=>{const h=this.be(a,u);r=r.insert(a,h),i=i.insert(a,FI(u))}).next(()=>({documents:r,Se:i}))}ve(e,t,r){if(t.isEmpty())return Pe.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),a=t.getIterator();let u=a.getNext();return Lf(e).jt({range:i},(h,_,w)=>{const I=lt.fromSegments(h);for(;u&&lt.comparator(u,I)<0;)r(u,null),u=a.getNext();u&&u.isEqual(I)&&(r(u,_),u=a.hasNext()?a.getNext():null),u?w.Lt(u.path.toArray()):w.done()}).next(()=>{for(;u;)r(u,null),u=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r){let i=To();const a=t.path.length+1,u={};if(r.isEqual(xt.min())){const h=t.path.toArray();u.range=IDBKeyRange.lowerBound(h)}else{const h=t.path.toArray(),_=HS(r);u.range=IDBKeyRange.lowerBound([h,_],!0),u.index=br.collectionReadTimeIndex}return Lf(e).jt(u,(h,_,w)=>{if(h.length!==a)return;const I=$S(this.k,_);t.path.isPrefixOf(I.key.path)?Ny(t,I)&&(i=i.insert(I.key,I)):w.done()}).next(()=>i)}newChangeBuffer(e){return new O3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qk(e).get(ru.key).next(t=>(Tt(!!t),t))}Re(e,t){return qk(e).put(ru.key,t)}be(e,t){if(t){const r=$S(this.k,t);if(!r.isNoDocument()||!r.version.isEqual(xt.min()))return r}return Gn.newInvalidDocument(e)}}class O3 extends Zk{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new nv(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new or((a,u)=>qt(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const h=this.Ce.get(a);if(u.document.isValidDocument()){const _=Mk(this.De.k,u.document,this.getReadTime(a));i=i.add(a.path.popLast()),r+=FI(_)-h,t.push(this.De.addEntry(e,a,_))}else if(r-=h,this.trackRemovals){const _=Mk(this.De.k,Gn.newNoDocument(a,xt.min()),this.getReadTime(a));t.push(this.De.addEntry(e,a,_))}else t.push(this.De.removeEntry(e,a))}),i.forEach(a=>{t.push(this.De.Jt.addToCollectionParentIndex(e,a))}),t.push(this.De.updateMetadata(e,r)),Pe.waitFor(t)}getFromCache(e,t){return this.De.Pe(e,t).next(r=>(this.Ce.set(t,r.size),r.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:r,Se:i})=>(i.forEach((a,u)=>{this.Ce.set(a,u)}),r))}}function qk(n){return Ao(n,ru.store)}function Lf(n){return Ao(n,br.store)}function UI(n){return n.path.toArray()}class x3{constructor(e){this.k=e}Nt(e,t,r,i){Tt(r<i&&r>=0&&i<=11);const a=new NI("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore(oa.store),(h=e).createObjectStore(kf.store,{keyPath:kf.keyPath}),h.createObjectStore(Xn.store,{keyPath:Xn.keyPath,autoIncrement:!0}).createIndex(Xn.userMutationsIndex,Xn.userMutationsKeyPath,{unique:!0}),h.createObjectStore(Ts.store),jk(e),function(h){h.createObjectStore(br.store)}(e));let u=Pe.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore(as.store),h.deleteObjectStore(Io.store),h.deleteObjectStore(aa.store)}(e),jk(e)),u=u.next(()=>function(h){const _=h.store(aa.store),w=new aa(0,0,xt.min().toTimestamp(),0);return _.put(aa.key,w)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(h,_){return _.store(Xn.store).Bt().next(w=>{h.deleteObjectStore(Xn.store),h.createObjectStore(Xn.store,{keyPath:Xn.keyPath,autoIncrement:!0}).createIndex(Xn.userMutationsIndex,Xn.userMutationsKeyPath,{unique:!0});const I=_.store(Xn.store),A=w.map(x=>I.put(x));return Pe.waitFor(A)})}(e,a))),u=u.next(()=>{!function(h){h.createObjectStore(Bd.store,{keyPath:Bd.keyPath})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Ne(a))),r<6&&i>=6&&(u=u.next(()=>(function(h){h.createObjectStore(ru.store)}(e),this.ke(a)))),r<7&&i>=7&&(u=u.next(()=>this.xe(a))),r<8&&i>=8&&(u=u.next(()=>this.$e(e,a))),r<9&&i>=9&&(u=u.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e),function(h){const _=h.objectStore(br.store);_.createIndex(br.readTimeIndex,br.readTimeIndexPath,{unique:!1}),_.createIndex(br.collectionReadTimeIndex,br.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(u=u.next(()=>this.Oe(a))),r<11&&i>=11&&(u=u.next(()=>{(function(h){h.createObjectStore(Ky.store,{keyPath:Ky.keyPath})})(e),function(h){h.createObjectStore(Yy.store,{keyPath:Yy.keyPath})}(e)})),u}ke(e){let t=0;return e.store(br.store).jt((r,i)=>{t+=FI(i)}).next(()=>{const r=new ru(t);return e.store(ru.store).put(ru.key,r)})}Ne(e){const t=e.store(kf.store),r=e.store(Xn.store);return t.Bt().next(i=>Pe.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.Bt(Xn.userMutationsIndex,u).next(h=>Pe.forEach(h,_=>{Tt(_.userId===a.userId);const w=Xy(this.k,_);return Fk(e,a.userId,w).next(()=>{})}))}))}xe(e){const t=e.store(as.store),r=e.store(br.store);return e.store(aa.store).get(aa.key).next(i=>{const a=[];return r.jt((u,h)=>{const _=new sn(u),w=[0,tc(_)];a.push(t.get(w).next(I=>I?Pe.resolve():t.put(new as(0,tc(_),i.highestListenSequenceNumber))))}).next(()=>Pe.waitFor(a))})}$e(e,t){e.createObjectStore(jg.store,{keyPath:jg.keyPath});const r=t.store(jg.store),i=new GS,a=u=>{if(i.add(u)){const h=u.lastSegment(),_=u.popLast();return r.put({collectionId:h,parent:tc(_)})}};return t.store(br.store).jt({Kt:!0},(u,h)=>{const _=new sn(u);return a(_.popLast())}).next(()=>t.store(Ts.store).jt({Kt:!0},([u,h,_],w)=>{const I=Vd(h);return a(I.popLast())}))}Oe(e){const t=e.store(Io.store);return t.jt((r,i)=>{const a=pw(i),u=Ok(this.k,a);return t.put(u)})}}function jk(n){n.createObjectStore(as.store,{keyPath:as.keyPath}).createIndex(as.documentTargetsIndex,as.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Io.store,{keyPath:Io.keyPath}).createIndex(Io.queryTargetsIndexName,Io.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(aa.store)}const YS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class QS{constructor(e,t,r,i,a,u,h,_,w,I){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Me=a,this.window=u,this.document=h,this.Fe=w,this.Le=I,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=A=>Promise.resolve(),!QS.Pt())throw new xe(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new M3(this,i),this.Ge=t+"main",this.k=new Sk(_),this.ze=new nc(this.Ge,11,new x3(this.k)),this.He=new I3(this.referenceDelegate,this.k),this.Jt=new T3,this.Je=new P3(this.k,this.Jt),this.Ye=new E3,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===I&&Er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(pe.FAILED_PRECONDITION,YS);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new eo(e,this.Fe)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var r=(0,ie.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Me.enqueueAndForget((0,ie.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>VI(e).put(new Bd(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Me.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.cn(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if($g(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Me.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return gw(e).get(oa.key).next(t=>Pe.resolve(this.un(t)))}hn(e){return VI(e).delete(this.clientId)}ln(){var e=this;return(0,ie.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ao(r,Bd.store);return i.Bt().next(a=>{const u=e.dn(a,18e5),h=a.filter(_=>-1===u.indexOf(_));return Pe.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e.Xe)for(const r of t)e.Xe.removeItem(e.wn(r.clientId))}})()}nn(){this.je=this.Me.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Pe.resolve(!0):gw(e).get(oa.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new xe(pe.FAILED_PRECONDITION,YS);return!1}}return!(!this.networkEnabled||!this.inForeground)||VI(e).Bt().next(r=>void 0===this.dn(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ie.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[oa.store,Bd.store],t=>{const r=new Dk(t,eo.I);return e.cn(r).next(()=>e.hn(r))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(r=>this.fn(r.updateTimeMs,t)&&!this._n(r.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>VI(e).Bt().next(t=>this.dn(t,18e5).map(r=>r.clientId)))}get started(){return this.Ue}getMutationQueue(e){return WS.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,r){let a;return Fe("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",v3,u=>(a=new Dk(u,this.Be?this.Be.next():eo.I),"readwrite-primary"===t?this.rn(a).next(h=>!!h||this.on(a)).next(h=>{if(!h)throw Er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Me.enqueueRetryable(()=>this.We(!1)),new xe(pe.FAILED_PRECONDITION,Tk);return r(a)}).next(h=>this.an(a).next(()=>h)):this.En(a).next(()=>r(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}En(e){return gw(e).get(oa.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(pe.FAILED_PRECONDITION,YS)})}an(e){const t=new oa(this.clientId,this.allowTabSynchronization,Date.now());return gw(e).put(oa.key,t)}static Pt(){return nc.Pt()}cn(e){const t=gw(e);return t.get(oa.key).next(r=>this.un(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete(oa.key)):Pe.resolve())}fn(e,t){const r=Date.now();return!(e<r-t||e>r&&(Er(`Detected an update time that is in the future: ${e} > ${r}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Me.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,R.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Me.enterRestrictedMode(!0),this.Me.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const r=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Er("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gw(n){return Ao(n,oa.store)}function VI(n){return Ao(n,Bd.store)}function JS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class k3{constructor(e,t){this.progress=e,this.In=t}}class $k{constructor(e,t,r){this.Je=e,this.An=t,this.Jt=r}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.bn(e,t,r))}bn(e,t,r){return this.Je.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Pn(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}vn(e,t){return this.Je.getEntries(e,t).next(r=>this.Vn(e,r).next(()=>r))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Pn(t,r))}getDocumentsMatchingQuery(e,t,r){return lt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Sn(e,t.path):vI(t)?this.Dn(e,t,r):this.Cn(e,t,r);var i}Sn(e,t){return this.Rn(e,new lt(t)).next(r=>{let i=aw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Dn(e,t,r){const i=t.collectionGroup;let a=aw();return this.Jt.getCollectionParents(e,i).next(u=>Pe.forEach(u,h=>{const _=(w=t,I=h.child(i),new $a(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,I;return this.Cn(e,_,r).next(w=>{w.forEach((I,A)=>{a=a.insert(I,A)})})}).next(()=>a))}Cn(e,t,r){let i,a;return this.Je.getDocumentsMatchingQuery(e,t,r).next(u=>(i=u,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(u=>(a=u,this.Nn(e,a,i).next(h=>{i=h;for(const _ of a)for(const w of _.mutations){const I=w.key;let A=i.get(I);null==A&&(A=Gn.newInvalidDocument(I),i=i.insert(I,A)),sw(w,A,_.localWriteTime),A.isFoundDocument()||(i=i.remove(I))}}))).next(()=>(i.forEach((u,h)=>{Ny(t,h)||(i=i.remove(u))}),i))}Nn(e,t,r){let i=Mn();for(const u of t)for(const h of u.mutations)h instanceof ec&&null===r.get(h.key)&&(i=i.add(h.key));let a=r;return this.Je.getEntries(e,i).next(u=>(u.forEach((h,_)=>{_.isFoundDocument()&&(a=a.insert(h,_))}),a))}}class XS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.kn=r,this.xn=i}static $n(e,t){let r=Mn(),i=Mn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new XS(e,t.fromCache,r,i)}}class Hk{On(e){this.Mn=e}getDocumentsMatchingQuery(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(xt.min())?this.Fn(e,t):this.Mn.vn(e,i).next(a=>{const u=this.Ln(t,a);return(Vg(t)||Ry(t))&&this.Bn(t.limitType,u,i,r)?this.Fn(e,t):(Iy()<=ra.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),wI(t)),this.Mn.getDocumentsMatchingQuery(e,t,r).next(h=>(u.forEach(_=>{h=h.insert(_.key,_)}),h)))});var a}Ln(e,t){let r=new or(OS(e));return t.forEach((i,a)=>{Ny(e,a)&&(r=r.add(a))}),r}Bn(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Fn(e,t){return Iy()<=ra.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",wI(t)),this.Mn.getDocumentsMatchingQuery(e,t,xt.min())}}class R3{constructor(e,t,r,i){this.persistence=e,this.Un=t,this.k=i,this.qn=new Zr(qt),this.Kn=new nv(a=>Ug(a),Af),this.jn=xt.min(),this.An=e.getMutationQueue(r),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new $k(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function zk(n,e,t,r){return new R3(n,e,t,r)}function Gk(n,e){return eM.apply(this,arguments)}function eM(){return eM=(0,ie.Z)(function*(n,e){const t=qe(n);let r=t.An,i=t.Wn;const a=yield t.persistence.runTransaction("Handle user change","readonly",u=>{let h;return t.An.getAllMutationBatches(u).next(_=>(h=_,r=t.persistence.getMutationQueue(e),i=new $k(t.Qn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(u))).next(_=>{const w=[],I=[];let A=Mn();for(const x of h){w.push(x.batchId);for(const U of x.mutations)A=A.add(U.key)}for(const x of _){I.push(x.batchId);for(const U of x.mutations)A=A.add(U.key)}return i.vn(u,A).next(x=>({Gn:x,removedBatchIds:w,addedBatchIds:I}))})});return t.An=r,t.Wn=i,t.Un.On(t.Wn),a}),eM.apply(this,arguments)}function N3(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Qn.newChangeBuffer({trackRemovals:!0});return function(u,h,_,w){const I=_.batch,A=I.keys();let x=Pe.resolve();return A.forEach(U=>{x=x.next(()=>w.getEntry(h,U)).next(B=>{const X=_.docVersions.get(U);Tt(null!==X),B.version.compareTo(X)<0&&(I.applyToRemoteDocument(B,_),B.isValidDocument()&&w.addEntry(B,_.commitVersion))})}),x.next(()=>u.An.removeMutationBatch(h,I))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.An.performConsistencyCheck(r)).next(()=>t.Wn.vn(r,i))})}function Wk(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function F3(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Qn.newChangeBuffer({trackRemovals:!0});i=t.qn;const h=[];e.targetChanges.forEach((w,I)=>{const A=i.get(I);if(!A)return;h.push(t.He.removeMatchingKeys(a,w.removedDocuments,I).next(()=>t.He.addMatchingKeys(a,w.addedDocuments,I)));let x=A.withSequenceNumber(a.currentSequenceNumber);var U,B,X;e.targetMismatches.has(I)?x=x.withResumeToken(Vr.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):w.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(w.resumeToken,r)),i=i.insert(I,x),B=x,X=w,(0===(U=A).resumeToken.approximateByteSize()||B.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0)&&h.push(t.He.updateTargetData(a,x))});let _=To();if(e.documentUpdates.forEach((w,I)=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,w))}),h.push(Kk(a,u,e.documentUpdates,r,void 0).next(w=>{_=w})),!r.isEqual(xt.min())){const w=t.He.getLastRemoteSnapshotVersion(a).next(I=>t.He.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(w)}return Pe.waitFor(h).next(()=>u.apply(a)).next(()=>t.Wn.Vn(a,_)).next(()=>_)}).then(a=>(t.qn=i,a))}function Kk(n,e,t,r,i){let a=Mn();return t.forEach(u=>a=a.add(u)),e.getEntries(n,a).next(u=>{let h=To();return t.forEach((_,w)=>{const I=u.get(_),A=(null==i?void 0:i.get(_))||r;w.isNoDocument()&&w.version.isEqual(xt.min())?(e.removeEntry(_,A),h=h.insert(_,w)):!I.isValidDocument()||w.version.compareTo(I.version)>0||0===w.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(w,A),h=h.insert(_,w)):Fe("LocalStore","Ignoring outdated watch update for ",_,". Current version:",I.version," Watch version:",w.version)}),h})}function L3(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(r,e)))}function rv(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.He.getTargetData(r,e).next(a=>a?(i=a,Pe.resolve(i)):t.He.allocateTargetId(r).next(u=>(i=new Rf(e,u,0,r.currentSequenceNumber),t.He.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qn.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qn=t.qn.insert(r.targetId,r),t.Kn.set(e,r.targetId)),r})}function iv(n,e,t){return tM.apply(this,arguments)}function tM(){return tM=(0,ie.Z)(function*(n,e,t){const r=qe(n),i=r.qn.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!$g(u))throw u;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.qn=r.qn.remove(e),r.Kn.delete(i.target)}),tM.apply(this,arguments)}function BI(n,e,t){const r=qe(n);let i=xt.min(),a=Mn();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,_,w){const I=qe(h),A=I.Kn.get(w);return void 0!==A?Pe.resolve(I.qn.get(A)):I.He.getTargetData(_,w)}(r,u,bo(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(u,h.targetId).next(_=>{a=_})}).next(()=>r.Un.getDocumentsMatchingQuery(u,e,t?i:xt.min(),t?a:Mn())).next(h=>({documents:h,zn:a})))}function Yk(n,e){const t=qe(n),r=qe(t.He),i=t.qn.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(u=>u?u.target:null))}function Qk(n){const e=qe(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,a){const u=qe(r);let h=To(),_=HS(a);const w=Lf(i),I=IDBKeyRange.lowerBound(_,!0);return w.jt({index:br.readTimeIndex,range:I},(A,x)=>{const U=$S(u.k,x);h=h.insert(U.key,U),_=x.readTime}).next(()=>({In:h,readTime:Pk(_)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:r})=>(e.jn=r,t))}function nM(){return nM=(0,ie.Z)(function*(n){const e=qe(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=Lf(r);let a=xt.min();return i.jt({index:br.readTimeIndex,reverse:!0},(u,h,_)=>{h.readTime&&(a=Pk(h.readTime)),_.done()}).next(()=>a)}(t)).then(t=>{e.jn=t})}),nM.apply(this,arguments)}function rM(){return rM=(0,ie.Z)(function*(n,e,t,r){const i=qe(n);let a=Mn(),u=To(),h=RI();for(const I of t){const A=e.Hn(I.metadata.name);I.document&&(a=a.add(A)),u=u.insert(A,e.Jn(I)),h=h.insert(A,e.Yn(I.metadata.readTime))}const _=i.Qn.newChangeBuffer({trackRemovals:!0}),w=yield rv(i,(I=r,bo(Nd(sn.fromString(`__bundle__/docs/${I}`)))));var I;return i.persistence.runTransaction("Apply bundle documents","readwrite",I=>Kk(I,_,u,xt.min(),h).next(A=>(_.apply(I),A)).next(A=>i.He.removeMatchingKeysForTargetId(I,w.targetId).next(()=>i.He.addMatchingKeys(I,a,w.targetId)).next(()=>i.Wn.Vn(I,A)).next(()=>A)))}),rM.apply(this,arguments)}function B3(n,e){return iM.apply(this,arguments)}function iM(){return iM=(0,ie.Z)(function*(n,e,t=Mn()){const r=yield rv(n,bo(zS(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=M(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ye.saveNamedQuery(a,e);const h=r.withResumeToken(Vr.EMPTY_BYTE_STRING,u);return i.qn=i.qn.insert(h.targetId,h),i.He.updateTargetData(a,h).next(()=>i.He.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.He.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ye.saveNamedQuery(a,e))})}),iM.apply(this,arguments)}class Z3{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Pe.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var r;return this.Xn.set(t.id,{id:(r=t).id,version:r.version,createTime:M(r.createTime)}),Pe.resolve()}getNamedQuery(e,t){return Pe.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(r=t).name,query:zS(r.bundledQuery),readTime:M(r.readTime)}),Pe.resolve();var r}}class sM{constructor(){this.ts=new or(Li.es),this.ns=new or(Li.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const r=new Li(e,t);this.ts=this.ts.add(r),this.ns=this.ns.add(r)}rs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.os(new Li(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new lt(new sn([])),r=new Li(t,e),i=new Li(t,e+1),a=[];return this.ns.forEachInRange([r,i],u=>{this.os(u),a.push(u.key)}),a}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new lt(new sn([])),r=new Li(t,e),i=new Li(t,e+1);let a=Mn();return this.ns.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Li(e,0),r=this.ts.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Li{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return lt.comparator(e.key,t.key)||qt(e.fs,t.fs)}static ss(e,t){return qt(e.fs,t.fs)||lt.comparator(e.key,t.key)}}class q3{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new or(Li.es)}checkEmpty(e){return Pe.resolve(0===this.An.length)}addMutationBatch(e,t,r,i){const a=this.ds;this.ds++;const u=new qS(a,t,r,i);this.An.push(u);for(const h of i)this.ws=this.ws.add(new Li(h.key,a)),this.Jt.addToCollectionParentIndex(e,h.key.path.popLast());return Pe.resolve(u)}lookupMutationBatch(e,t){return Pe.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.gs(t+1),a=i<0?0:i;return Pe.resolve(this.An.length>a?this.An[a]:null)}getHighestUnacknowledgedBatchId(){return Pe.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Pe.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Li(t,0),i=new Li(t,Number.POSITIVE_INFINITY),a=[];return this.ws.forEachInRange([r,i],u=>{const h=this._s(u.fs);a.push(h)}),Pe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or(qt);return t.forEach(i=>{const a=new Li(i,0),u=new Li(i,Number.POSITIVE_INFINITY);this.ws.forEachInRange([a,u],h=>{r=r.add(h.fs)})}),Pe.resolve(this.ys(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;lt.isDocumentKey(a)||(a=a.child(""));const u=new Li(new lt(a),0);let h=new or(qt);return this.ws.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(_.fs)),!0)},u),Pe.resolve(this.ys(h))}ys(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Tt(0===this.ps(t.batchId,"removed")),this.An.shift();let r=this.ws;return Pe.forEach(t.mutations,i=>{const a=new Li(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ws=r})}ee(e){}containsKey(e,t){const r=new Li(t,0),i=this.ws.firstAfterOrEqual(r);return Pe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Pe.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class j3{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new Zr(lt.comparator),this.size=0}addEntry(e,t,r){const i=t.key,a=this.docs.get(i),u=a?a.size:0,h=this.Ts(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h,readTime:r}),this.size+=h-u,this.Jt.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Pe.resolve(r?r.document.mutableCopy():Gn.newInvalidDocument(t))}getEntries(e,t){let r=To();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Gn.newInvalidDocument(i))}),Pe.resolve(r)}getDocumentsMatchingQuery(e,t,r){let i=To();const a=new lt(t.path.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:h,value:{document:_,readTime:w}}=u.getNext();if(!t.path.isPrefixOf(h.path))break;w.compareTo(r)<=0||Ny(t,_)&&(i=i.insert(_.key,_.mutableCopy()))}return Pe.resolve(i)}Es(e,t){return Pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $3(this)}getSize(e){return Pe.resolve(this.size)}}class $3 extends Zk{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.document.isValidDocument()?t.push(this.De.addEntry(e,i.document,this.getReadTime(r))):this.De.removeEntry(r)}),Pe.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class H3{constructor(e){this.persistence=e,this.Is=new nv(t=>Ug(t),Af),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.As=0,this.Rs=new sM,this.targetCount=0,this.bs=zg.ie()}forEachTarget(e,t){return this.Is.forEach((r,i)=>t(i)),Pe.resolve()}getLastRemoteSnapshotVersion(e){return Pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Pe.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),Pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.As&&(this.As=t),Pe.resolve()}ae(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new zg(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,Pe.resolve()}updateTargetData(e,t){return this.ae(t),Pe.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Pe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Is.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Is.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),Pe.waitFor(a).next(()=>i)}getTargetCount(e){return Pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Is.get(t)||null;return Pe.resolve(r)}addMatchingKeys(e,t,r){return this.Rs.rs(t,r),Pe.resolve()}removeMatchingKeys(e,t,r){this.Rs.cs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),Pe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Rs.ls(t);return Pe.resolve(r)}containsKey(e,t){return Pe.resolve(this.Rs.containsKey(t))}}class z3{constructor(e,t){this.Ps={},this.Be=new eo(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new H3(this),this.Jt=new b3,this.Je=new j3(this.Jt,r=>this.referenceDelegate.vs(r)),this.k=new Sk(t),this.Ye=new Z3(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.Ps[e.toKey()];return t||(t=new q3(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const i=new G3(this.Be.next());return this.referenceDelegate.Vs(),r(i).next(a=>this.referenceDelegate.Ss(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ds(e,t){return Pe.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class G3 extends Ik{constructor(e){super(),this.currentSequenceNumber=e}}class oM{constructor(e){this.persistence=e,this.Cs=new sM,this.Ns=null}static ks(e){return new oM(e)}get xs(){if(this.Ns)return this.Ns;throw dt()}addReference(e,t,r){return this.Cs.addReference(r,t),this.xs.delete(r.toString()),Pe.resolve()}removeReference(e,t,r){return this.Cs.removeReference(r,t),this.xs.add(r.toString()),Pe.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Pe.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(i=>this.xs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.xs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pe.forEach(this.xs,r=>{const i=lt.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return Pe.or([()=>Pe.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function Jk(n,e){return`firestore_clients_${n}_${e}`}function Xk(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function aM(n,e){return`firestore_targets_${n}_${e}`}class ZI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Os(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new xe(i.error.code,i.error.message))),u?new ZI(e,t,i.state,a):(Er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Os(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new xe(r.error.code,r.error.message))),a?new mw(e,r.state,i):(Er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Os(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=lw();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=bS(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new qI(e,a):(Er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class lM{constructor(e,t){this.clientId=e,this.onlineState=t}static Os(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new lM(t.clientId,t.onlineState):(Er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class cM{constructor(){this.activeTargetIds=lw()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ms(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uM{constructor(e,t,r,i,a){this.window=e,this.Me=t,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Zr(qt),this.started=!1,this.js=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Qs=Jk(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new cM),this.Gs=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(h){return`firestore_bundle_loaded_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static Pt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ie.Z)(function*(){const t=yield e.syncEngine.Tn();for(const i of t){if(i===e.Bs)continue;const a=e.getItem(Jk(e.persistenceKey,i));if(a){const u=qI.Os(i,a);u&&(e.Ks=e.Ks.insert(u.clientId,u))}}e.Xs();const r=e.storage.getItem(e.Js);if(r){const i=e.Zs(r);i&&e.ti(i)}for(const i of e.js)e.qs(i);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,r){this.ni(e,t,r),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(aM(this.persistenceKey,e));if(r){const i=mw.Os(e,r);i&&(t=i.state)}}return this.ii.Fs(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(aM(this.persistenceKey,e))}updateQueryState(e,t,r){this.ri(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.si(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ci()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Qs)return void Er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Me.enqueueRetryable((0,ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.Gs.test(r.key)){if(null==r.newValue){const i=t.ai(r.key);return t.ui(i,null)}{const i=t.hi(r.key,r.newValue);if(i)return t.ui(i.clientId,i)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const i=t.li(r.key,r.newValue);if(i)return t.fi(i)}}else if(t.Hs.test(r.key)){if(null!==r.newValue){const i=t.di(r.key,r.newValue);if(i)return t.wi(i)}}else if(r.key===t.Js){if(null!==r.newValue){const i=t.Zs(r.newValue);if(i)return t.ti(i)}}else if(r.key===t.Ws){const i=function(a){let u=eo.I;if(null!=a)try{const h=JSON.parse(a);Tt("number"==typeof h),u=h}catch(h){Er("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);i!==eo.I&&t.sequenceNumberHandler(i)}else if(r.key===t.Ys)return t.syncEngine._i()}else t.js.push(r)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Ms())}ni(e,t,r){const i=new ZI(this.currentUser,e,t,r),a=Xk(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Ms())}si(e){const t=Xk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,r){const i=aM(this.persistenceKey,e),a=new mw(e,t,r);this.setItem(i,a.Ms())}ci(){this.setItem(this.Ys,"value-not-used")}ai(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const r=this.ai(e);return qI.Os(r,t)}li(e,t){const r=this.zs.exec(e),i=Number(r[1]);return ZI.Os(new Ri(void 0!==r[2]?r[2]:null),i,t)}di(e,t){const r=this.Hs.exec(e),i=Number(r[1]);return mw.Os(i,t)}Zs(e){return lM.Os(e)}fi(e){var t=this;return(0,ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),a=this.ei(r),u=[],h=[];return a.forEach(_=>{i.has(_)||u.push(_)}),i.forEach(_=>{a.has(_)||h.push(_)}),this.syncEngine.yi(u,h).then(()=>{this.Ks=r})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=lw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class eR{constructor(){this.pi=new cM,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.pi.Fs(e),this.Ti[e]||"not-current"}updateQueryState(e,t,r){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new cM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class W3{Ei(e){}shutdown(){}}class tR{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(e){this.Pi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Pi)e(0)}bi(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Pi)e(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const K3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Y3{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Oi(e){this.ki(e)}Mi(e){this.xi(e)}}class Q3 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,r,i,a){const u=this.Ui(e,t);Fe("RestConnection","Sending: ",u,r);const h={};return this.qi(h,i,a),this.Ki(e,u,h,r).then(_=>(Fe("RestConnection","Received: ",_),_),_=>{throw Od("RestConnection",`${e} failed with error: `,_,"url: ",u,"request:",r),_})}ji(e,t,r,i,a){return this.Bi(e,t,r,i,a)}qi(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Pd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Ui(e,t){return`${this.Fi}/v1/${t}:${K3[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,r,i){return new Promise((a,u)=>{const h=new by;h.listenOnce(dS.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case wy.NO_ERROR:const w=h.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(w)),a(w);break;case wy.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),u(new xe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case wy.HTTP_ERROR:const I=h.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',I,"response text:",h.getResponseText()),I>0){const A=h.getResponseJson().error;if(A&&A.status&&A.message){const x=function(U){const B=U.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(B)>=0?B:pe.UNKNOWN}(A.status);u(new xe(x,A.message))}else u(new xe(pe.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new xe(pe.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);h.send(t,"POST",_,r,15)})}Qi(e,t,r){const i=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=GC(),u=uS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new rI({})),this.qi(h.initMessageHeaders,t,r),(0,R.uI)()||(0,R.b$)()||(0,R.d)()||(0,R.w1)()||(0,R.Mn)()||(0,R.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Fe("Connection","Creating WebChannel: "+_,h);const w=a.createWebChannel(_,h);let I=!1,A=!1;const x=new Y3({Vi:B=>{A?Fe("Connection","Not sending because WebChannel is closed:",B):(I||(Fe("Connection","Opening WebChannel transport."),w.open(),I=!0),Fe("Connection","WebChannel sending:",B),w.send(B))},Si:()=>w.close()}),U=(B,X,de)=>{B.listen(X,Ge=>{try{de(Ge)}catch(Ke){setTimeout(()=>{throw Ke},0)}})};return U(w,kg.EventType.OPEN,()=>{A||Fe("Connection","WebChannel transport opened.")}),U(w,kg.EventType.CLOSE,()=>{A||(A=!0,Fe("Connection","WebChannel transport closed"),x.Oi())}),U(w,kg.EventType.ERROR,B=>{A||(A=!0,Od("Connection","WebChannel transport errored:",B),x.Oi(new xe(pe.UNAVAILABLE,"The operation could not be completed")))}),U(w,kg.EventType.MESSAGE,B=>{var X;if(!A){const de=B.data[0];Tt(!!de);const Ge=de,Ke=Ge.error||(null===(X=Ge[0])||void 0===X?void 0:X.error);if(Ke){Fe("Connection","WebChannel received error:",Ke);const ot=Ke.status;let ze=function(kn){const lr=fr[kn];if(void 0!==lr)return xI(lr)}(ot),Gt=Ke.message;void 0===ze&&(ze=pe.INTERNAL,Gt="Unknown error status: "+ot+" with message "+Ke.message),A=!0,x.Oi(new xe(ze,Gt)),w.close()}else Fe("Connection","WebChannel received:",de),x.Mi(de)}}),U(u,hS.STAT_EVENT,B=>{B.stat===Ey.PROXY?Fe("Connection","Detected buffering proxy"):B.stat===Ey.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.$i()},0),x}}function nR(){return"undefined"!=typeof window?window:null}function jI(){return"undefined"!=typeof document?document:null}function _w(n){return new m(n,!0)}class dM{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Me=e,this.timerId=t,this.Wi=r,this.Gi=i,this.zi=a,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,t-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ji=this.Me.enqueueAfterDelay(this.timerId,i,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class rR{constructor(e,t,r,i,a,u,h,_){this.Me=e,this.nr=r,this.sr=i,this.ir=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new dM(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,ie.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.cr&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,ie.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}pr(){this.ar&&(this.ar.cancel(),this.ar=null)}close(e,t){var r=this;return(0,ie.Z)(function*(){r.yr(),r.pr(),r.ur.cancel(),r.rr++,4!==e?r.ur.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(Er(t.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),r.ur.Xi()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Tr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.rr===t&&this.Ir(r,i)},r=>{e(()=>{const i=new xe(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ar(i)})})}Ir(e,t){const r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{r(()=>(this.state=2,this.ar=this.Me.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(i=>{r(()=>this.Ar(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}dr(){var e=this;this.state=5,this.ur.Zi((0,ie.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Me.enqueueAndForget(()=>this.rr===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class J3 extends rR{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.k=a}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:dt(),i=e.targetChange.targetIds||[],a=function(_,w){return _.C?(Tt(void 0===w||"string"==typeof w),Vr.fromBase64String(w||"")):(Tt(void 0===w||w instanceof Uint8Array),Vr.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(_){const w=void 0===_.code?pe.UNKNOWN:xI(_.code);return new xe(w,_.message||"")}(u);t=new VS(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=K(n,r.document.name),a=M(r.document.updateTime),u=new fi({mapValue:{fields:r.document.fields}}),h=Gn.newFoundDocument(i,a,u);t=new cw(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=K(n,r.document),a=r.readTime?M(r.readTime):xt.min(),u=Gn.newNoDocument(i,a);t=new cw([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=K(n,r.document);t=new cw([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,a=new RS(r.count||0);t=new US(r.targetId,a)}}var _;return t}(this.k,e),r=function(i){if(!("targetChange"in i))return xt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?xt.min():a.readTime?M(a.readTime):xt.min()}(e);return this.listener.br(t,r)}Pr(e){const t={};t.database=Ue(this.k),t.addTarget=function(i,a){let u;const h=a.target;return u=bs(h)?{documents:Zy(i,h)}:{query:qy(i,h)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=E(i,a.resumeToken):a.snapshotVersion.compareTo(xt.min())>0&&(u.readTime=v(i,a.snapshotVersion.toTimestamp())),u}(this.k,e);const r=function(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.gr(t)}vr(e){const t={};t.database=Ue(this.k),t.removeTarget=e,this.gr(t)}}class X3 extends rR{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.k=a,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,i){let a=M(r.updateTime?r.updateTime:i);return a.isEqual(xt.min())&&(a=M(i)),new vk(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=M(e.commitTime);return this.listener.Cr(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=Ue(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Fi(this.k,r))};this.gr(t)}}class eU extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=r,this.k=i,this.$r=!1}Or(){if(this.$r)throw new xe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.ir.Bi(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(pe.UNKNOWN,i.toString())})}ji(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.ir.ji(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(pe.UNKNOWN,i.toString())})}terminate(){this.$r=!0}}class tU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}Br(){0===this.Mr&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Mr=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Er(t),this.Lr=!1):Fe("OnlineStateTracker",t)}jr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class nU{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=a,this.Hr.Ei(h=>{r.enqueueAndForget((0,ie.Z)(function*(){var _;Uf(u)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ie.Z)(function*(w){const I=qe(w);I.Gr.add(4),yield sv(I),I.Jr.set("Unknown"),I.Gr.delete(4),yield yw(I)}),function(w){return _.apply(this,arguments)})(u))}))}),this.Jr=new tU(r,i)}}function yw(n){return hM.apply(this,arguments)}function hM(){return hM=(0,ie.Z)(function*(n){if(Uf(n))for(const e of n.zr)yield e(!0)}),hM.apply(this,arguments)}function sv(n){return fM.apply(this,arguments)}function fM(){return fM=(0,ie.Z)(function*(n){for(const e of n.zr)yield e(!1)}),fM.apply(this,arguments)}function $I(n,e){const t=qe(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),mM(t)?gM(t):av(t).lr()&&pM(t,e))}function vw(n,e){const t=qe(n),r=av(t);t.Wr.delete(e),r.lr()&&iR(t,e),0===t.Wr.size&&(r.lr()?r._r():Uf(t)&&t.Jr.set("Unknown"))}function pM(n,e){n.Yr.X(e.targetId),av(n).Pr(e)}function iR(n,e){n.Yr.X(e),av(n).vr(e)}function gM(n){n.Yr=new s({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),av(n).start(),n.Jr.Br()}function mM(n){return Uf(n)&&!av(n).hr()&&n.Wr.size>0}function Uf(n){return 0===qe(n).Gr.size}function sR(n){n.Yr=void 0}function rU(n){return _M.apply(this,arguments)}function _M(){return _M=(0,ie.Z)(function*(n){n.Wr.forEach((e,t)=>{pM(n,e)})}),_M.apply(this,arguments)}function iU(n,e){return yM.apply(this,arguments)}function yM(){return yM=(0,ie.Z)(function*(n,e){sR(n),mM(n)?(n.Jr.Kr(e),gM(n)):n.Jr.set("Unknown")}),yM.apply(this,arguments)}function sU(n,e,t){return vM.apply(this,arguments)}function vM(){return vM=(0,ie.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof VS&&2===e.state&&e.cause)try{yield(r=(0,ie.Z)(function*(i,a){const u=a.cause;for(const h of a.targetIds)i.Wr.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i.Wr.delete(h),i.Yr.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield HI(n,r)}else if(e instanceof cw?n.Yr.ot(e):e instanceof US?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(xt.min()))try{const r=yield Wk(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.Yr.gt(a);return u.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.Wr.get(_);w&&i.Wr.set(_,w.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach(h=>{const _=i.Wr.get(h);if(!_)return;i.Wr.set(h,_.withResumeToken(Vr.EMPTY_BYTE_STRING,_.snapshotVersion)),iR(i,h);const w=new Rf(_.target,h,1,_.sequenceNumber);pM(i,w)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield HI(n,r)}var r}),vM.apply(this,arguments)}function HI(n,e,t){return CM.apply(this,arguments)}function CM(){return CM=(0,ie.Z)(function*(n,e,t){if(!$g(e))throw e;n.Gr.add(1),yield sv(n),n.Jr.set("Offline"),t||(t=()=>Wk(n.localStore)),n.asyncQueue.enqueueRetryable((0,ie.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield yw(n)}))}),CM.apply(this,arguments)}function oR(n,e){return e().catch(t=>HI(n,t,e))}function ov(n){return wM.apply(this,arguments)}function wM(){return wM=(0,ie.Z)(function*(n){const e=qe(n),t=Vf(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;oU(e);)try{const i=yield L3(e.localStore,r);if(null===i){0===e.Qr.length&&t._r();break}r=i.batchId,aU(e,i)}catch(i){yield HI(e,i)}aR(e)&&lR(e)}),wM.apply(this,arguments)}function oU(n){return Uf(n)&&n.Qr.length<10}function aU(n,e){n.Qr.push(e);const t=Vf(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function aR(n){return Uf(n)&&!Vf(n).hr()&&n.Qr.length>0}function lR(n){Vf(n).start()}function lU(n){return EM.apply(this,arguments)}function EM(){return EM=(0,ie.Z)(function*(n){Vf(n).kr()}),EM.apply(this,arguments)}function cU(n){return bM.apply(this,arguments)}function bM(){return bM=(0,ie.Z)(function*(n){const e=Vf(n);for(const t of n.Qr)e.Dr(t.mutations)}),bM.apply(this,arguments)}function uU(n,e,t){return TM.apply(this,arguments)}function TM(){return TM=(0,ie.Z)(function*(n,e,t){const r=n.Qr.shift(),i=jS.from(r,e,t);yield oR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ov(n)}),TM.apply(this,arguments)}function dU(n,e){return IM.apply(this,arguments)}function IM(){return IM=(0,ie.Z)(function*(n,e){var t;e&&Vf(n).Sr&&(yield(t=(0,ie.Z)(function*(r,i){if(OI(a=i.code)&&a!==pe.ABORTED){const u=r.Qr.shift();Vf(r).wr(),yield oR(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield ov(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),aR(n)&&lR(n)}),IM.apply(this,arguments)}function AM(n,e){return DM.apply(this,arguments)}function DM(){return DM=(0,ie.Z)(function*(n,e){const t=qe(n);e?(t.Gr.delete(2),yield yw(t)):e||(t.Gr.add(2),yield sv(t),t.Jr.set("Unknown"))}),DM.apply(this,arguments)}function av(n){return n.Xr||(n.Xr=function(e,t,r){const i=qe(e);return i.Or(),new J3(t,i.ir,i.authCredentials,i.appCheckCredentials,i.k,r)}(n.datastore,n.asyncQueue,{Di:rU.bind(null,n),Ni:iU.bind(null,n),br:sU.bind(null,n)}),n.zr.push(function(){var e=(0,ie.Z)(function*(t){t?(n.Xr.wr(),mM(n)?gM(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),sR(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function Vf(n){return n.Zr||(n.Zr=function(e,t,r){const i=qe(e);return i.Or(),new X3(t,i.ir,i.authCredentials,i.appCheckCredentials,i.k,r)}(n.datastore,n.asyncQueue,{Di:lU.bind(null,n),Ni:dU.bind(null,n),Nr:cU.bind(null,n),Cr:uU.bind(null,n)}),n.zr.push(function(){var e=(0,ie.Z)(function*(t){t?(n.Zr.wr(),yield ov(n)):(yield n.Zr.stop(),n.Qr.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class SM{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,h=new SM(e,t,u,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lv(n,e){if(Er("AsyncQueue",`${e}: ${n}`),$g(n))return new xe(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class cv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||lt.comparator(t.key,r.key):(t,r)=>lt.comparator(t.key,r.key),this.keyedMap=aw(),this.sortedSet=new Zr(this.comparator)}static emptySet(e){return new cv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new cv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class cR{constructor(){this.eo=new Zr(lt.comparator)}track(e){const t=e.doc.key,r=this.eo.get(t);r?0!==e.type&&3===r.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==r.type?this.eo=this.eo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.eo=this.eo.remove(t):1===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):dt():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,r)=>{e.push(r)}),e}}class uv{constructor(e,t,r,i,a,u,h,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new uv(e,t,cv.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class hU{constructor(){this.so=void 0,this.listeners=[]}}class fU{constructor(){this.queries=new nv(e=>PS(e),Bg),this.onlineState="Unknown",this.io=new Set}}function MM(n,e){return PM.apply(this,arguments)}function PM(){return PM=(0,ie.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new hU),i)try{a.so=yield t.onListen(r)}catch(u){const h=lv(u,`Initialization of query '${wI(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.ro(t.onlineState),a.so&&e.oo(a.so)&&kM(t)}),PM.apply(this,arguments)}function OM(n,e){return xM.apply(this,arguments)}function xM(){return xM=(0,ie.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),xM.apply(this,arguments)}function pU(n,e){const t=qe(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.oo(i)&&(r=!0);u.so=i}}r&&kM(t)}function gU(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function kM(n){n.io.forEach(e=>{e.next()})}class RM{constructor(e,t,r){this.query=e,this.co=t,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}oo(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new uv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.ao?this.ho(e)&&(this.co.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.co.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.ao&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=uv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.ao=!0,this.co.next(e)}}class mU{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class uR{constructor(e){this.k=e}Hn(e){return K(this.k,e)}Jn(e){return e.metadata.exists?pt(this.k,e.document,!1):Gn.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return M(e)}}class _U{constructor(e,t,r){this.mo=e,this.localStore=t,this.k=r,this.queries=[],this.documents=[],this.progress=dR(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,r=new uR(this.k);for(const i of e)if(i.metadata.queries){const a=r.Hn(i.metadata.name);for(const u of i.metadata.queries){const h=(t.get(u)||Mn()).add(a);t.set(u,h)}}return t}complete(){var e=this;return(0,ie.Z)(function*(){const t=yield function(n,e,t,r){return rM.apply(this,arguments)}(e.localStore,new uR(e.k),e.documents,e.mo.id),r=e.po(e.documents);for(const i of e.queries)yield B3(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new k3(Object.assign({},e.progress),t)})()}}function dR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class hR{constructor(e){this.key=e}}class fR{constructor(e){this.key=e}}class pR{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=Mn(),this.mutatedKeys=Mn(),this.Ao=OS(e),this.Ro=new cv(this.Ao)}get bo(){return this.To}Po(e,t){const r=t?t.vo:new cR,i=t?t.Ro:this.Ro;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const _=Vg(this.query)&&i.size===this.query.limit?i.last():null,w=Ry(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,A)=>{const x=i.get(I),U=Ny(this.query,A)?A:null,B=!!x&&this.mutatedKeys.has(x.key),X=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let de=!1;x&&U?x.data.isEqual(U.data)?B!==X&&(r.track({type:3,doc:U}),de=!0):this.Vo(x,U)||(r.track({type:2,doc:U}),de=!0,(_&&this.Ao(U,_)>0||w&&this.Ao(U,w)<0)&&(h=!0)):!x&&U?(r.track({type:0,doc:U}),de=!0):x&&!U&&(r.track({type:1,doc:x}),de=!0,(_||w)&&(h=!0)),de&&(U?(u=u.add(U),a=X?a.add(I):a.delete(I)):(u=u.delete(I),a=a.delete(I)))}),Vg(this.query)||Ry(this.query))for(;u.size>this.query.limit;){const I=Vg(this.query)?u.last():u.first();u=u.delete(I.key),a=a.delete(I.key),r.track({type:1,doc:I})}return{Ro:u,vo:r,Bn:h,mutatedKeys:a}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const a=e.vo.no();a.sort((w,I)=>function(A,x){const U=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return U(A)-U(x)}(w.type,I.type)||this.Ao(w.doc,I.doc)),this.So(r);const u=t?this.Do():[],h=0===this.Io.size&&this.current?1:0,_=h!==this.Eo;return this.Eo=h,0!==a.length||_?{snapshot:new uv(this.query,e.Ro,i,a,e.mutatedKeys,0===h,_,!1),Co:u}:{Co:u}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new cR,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=Mn(),this.Ro.forEach(r=>{this.No(r.key)&&(this.Io=this.Io.add(r.key))});const t=[];return e.forEach(r=>{this.Io.has(r)||t.push(new fR(r))}),this.Io.forEach(r=>{e.has(r)||t.push(new hR(r))}),t}ko(e){this.To=e.zn,this.Io=Mn();const t=this.Po(e.documents);return this.applyChanges(t,!0)}xo(){return uv.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class yU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vU{constructor(e){this.key=e,this.$o=!1}}class CU{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Oo={},this.Mo=new nv(h=>PS(h),Bg),this.Fo=new Map,this.Lo=new Set,this.Bo=new Zr(lt.comparator),this.Uo=new Map,this.qo=new sM,this.Ko={},this.jo=new Map,this.Qo=zg.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function wU(n,e){return NM.apply(this,arguments)}function NM(){return NM=(0,ie.Z)(function*(n,e){const t=iP(n);let r,i;const a=t.Mo.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.xo();else{const u=yield rv(t.localStore,bo(e)),h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield FM(t,e,r,"current"===h),t.isPrimaryClient&&$I(t.remoteStore,u)}return i}),NM.apply(this,arguments)}function FM(n,e,t,r){return LM.apply(this,arguments)}function LM(){return LM=(0,ie.Z)(function*(n,e,t,r){n.Go=(I,A,x)=>{return(U=(0,ie.Z)(function*(B,X,de,Ge){let Ke=X.view.Po(de);Ke.Bn&&(Ke=yield BI(B.localStore,X.query,!1).then(({documents:Gt})=>X.view.Po(Gt,Ke)));const ot=Ge&&Ge.targetChanges.get(X.targetId),ze=X.view.applyChanges(Ke,B.isPrimaryClient,ot);return GM(B,X.targetId,ze.Co),ze.snapshot}),function(B,X,de,Ge){return U.apply(this,arguments)})(n,I,A,x);var U};const i=yield BI(n.localStore,e,!0),a=new pR(e,i.zn),u=a.Po(i.documents),h=qg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(u,n.isPrimaryClient,h);GM(n,t,_.Co);const w=new yU(e,t,a);return n.Mo.set(e,w),n.Fo.has(t)?n.Fo.get(t).push(e):n.Fo.set(t,[e]),_.snapshot}),LM.apply(this,arguments)}function EU(n,e){return UM.apply(this,arguments)}function UM(){return UM=(0,ie.Z)(function*(n,e){const t=qe(n),r=t.Mo.get(e),i=t.Fo.get(r.targetId);if(i.length>1)return t.Fo.set(r.targetId,i.filter(a=>!Bg(a,e))),void t.Mo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield iv(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),vw(t.remoteStore,r.targetId),dv(t,r.targetId)}).catch(Gg))):(dv(t,r.targetId),yield iv(t.localStore,r.targetId,!0))}),UM.apply(this,arguments)}function VM(){return VM=(0,ie.Z)(function*(n,e,t){const r=sP(n);try{const i=yield function(a,u){const h=qe(a),_=hi.now(),w=u.reduce((A,x)=>A.add(x.key),Mn());let I;return h.persistence.runTransaction("Locally write mutations","readwrite",A=>h.Wn.vn(A,w).next(x=>{I=x;const U=[];for(const B of u){const X=kS(B,I.get(B.key));null!=X&&U.push(new ec(B.key,X,JC(X.value.mapValue),Br.exists(!0)))}return h.An.addMutationBatch(A,_,U,u)})).then(A=>(A.applyToLocalDocumentSet(I),{batchId:A.batchId,changes:I}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,h){let _=a.Ko[a.currentUser.toKey()];_||(_=new Zr(qt)),_=_.insert(u,h),a.Ko[a.currentUser.toKey()]=_}(r,i.batchId,t),yield Zd(r,i.changes),yield ov(r.remoteStore)}catch(i){const a=lv(i,"Failed to persist write");t.reject(a)}}),VM.apply(this,arguments)}function gR(n,e){return BM.apply(this,arguments)}function BM(){return BM=(0,ie.Z)(function*(n,e){const t=qe(n);try{const r=yield F3(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.Uo.get(a);u&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.$o=!0:i.modifiedDocuments.size>0?Tt(u.$o):i.removedDocuments.size>0&&(Tt(u.$o),u.$o=!1))}),yield Zd(t,r,e)}catch(r){yield Gg(r)}}),BM.apply(this,arguments)}function mR(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Mo.forEach((a,u)=>{const h=u.view.ro(e);h.snapshot&&i.push(h.snapshot)}),function(a,u){const h=qe(a);h.onlineState=u;let _=!1;h.queries.forEach((w,I)=>{for(const A of I.listeners)A.ro(u)&&(_=!0)}),_&&kM(h)}(r.eventManager,e),i.length&&r.Oo.br(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function TU(n,e,t){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,ie.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Uo.get(e),a=i&&i.key;if(a){let u=new Zr(lt.comparator);u=u.insert(a,Gn.newNoDocument(a,xt.min()));const h=Mn().add(a),_=new By(xt.min(),new Map,new or(qt),u,h);yield gR(r,_),r.Bo=r.Bo.remove(a),r.Uo.delete(e),WM(r)}else yield iv(r.localStore,e,!1).then(()=>dv(r,e,t)).catch(Gg)}),ZM.apply(this,arguments)}function IU(n,e){return qM.apply(this,arguments)}function qM(){return qM=(0,ie.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield N3(t.localStore,e);zM(t,r,null),HM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Zd(t,i)}catch(i){yield Gg(i)}}),qM.apply(this,arguments)}function AU(n,e,t){return jM.apply(this,arguments)}function jM(){return jM=(0,ie.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(a,u){const h=qe(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return h.An.lookupMutationBatch(_,u).next(I=>(Tt(null!==I),w=I.keys(),h.An.removeMutationBatch(_,I))).next(()=>h.An.performConsistencyCheck(_)).next(()=>h.Wn.vn(_,w))})}(r.localStore,e);zM(r,e,t),HM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Zd(r,i)}catch(i){yield Gg(i)}}),jM.apply(this,arguments)}function $M(){return $M=(0,ie.Z)(function*(n,e){const t=qe(n);Uf(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=qe(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.An.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.jo.get(r)||[];i.push(e),t.jo.set(r,i)}catch(r){const i=lv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),$M.apply(this,arguments)}function HM(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function zM(n,e,t){const r=qe(n);let i=r.Ko[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ko[r.currentUser.toKey()]=i}}function dv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Fo.get(e))n.Mo.delete(r),t&&n.Oo.zo(r,t);n.Fo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(r=>{n.qo.containsKey(r)||_R(n,r)})}function _R(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(vw(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),WM(n))}function GM(n,e,t){for(const r of t)r instanceof hR?(n.qo.addReference(r.key,e),SU(n,r)):r instanceof fR?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.qo.removeReference(r.key,e),n.qo.containsKey(r.key)||_R(n,r.key)):dt()}function SU(n,e){const t=e.key,r=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.Lo.add(r),WM(n))}function WM(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new lt(sn.fromString(e)),r=n.Qo.next();n.Uo.set(r,new vU(t)),n.Bo=n.Bo.insert(t,r),$I(n.remoteStore,new Rf(bo(Nd(t.path)),r,2,eo.I))}}function Zd(n,e,t){return KM.apply(this,arguments)}function KM(){return KM=(0,ie.Z)(function*(n,e,t){const r=qe(n),i=[],a=[],u=[];var h;r.Mo.isEmpty()||(r.Mo.forEach((h,_)=>{u.push(r.Go(_,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w.fromCache?"not-current":"current"),i.push(w);const I=XS.$n(_.targetId,w);a.push(I)}}))}),yield Promise.all(u),r.Oo.br(i),yield(h=(0,ie.Z)(function*(_,w){const I=qe(_);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>Pe.forEach(w,x=>Pe.forEach(x.kn,U=>I.persistence.referenceDelegate.addReference(A,x.targetId,U)).next(()=>Pe.forEach(x.xn,U=>I.persistence.referenceDelegate.removeReference(A,x.targetId,U)))))}catch(A){if(!$g(A))throw A;Fe("LocalStore","Failed to update sequence numbers: "+A)}for(const A of w){const x=A.targetId;if(!A.fromCache){const U=I.qn.get(x),X=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);I.qn=I.qn.insert(x,X)}}}),function(_,w){return h.apply(this,arguments)})(r.localStore,a))}),KM.apply(this,arguments)}function MU(n,e){return YM.apply(this,arguments)}function YM(){return YM=(0,ie.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield Gk(t.localStore,e);t.currentUser=e,(i=t).jo.forEach(u=>{u.forEach(h=>{h.reject(new xe(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.jo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Zd(t,r.Gn)}var i}),YM.apply(this,arguments)}function PU(n,e){const t=qe(n),r=t.Uo.get(e);if(r&&r.$o)return Mn().add(r.key);{let i=Mn();const a=t.Fo.get(e);if(!a)return i;for(const u of a){const h=t.Mo.get(u);i=i.unionWith(h.view.bo)}return i}}function OU(n,e){return QM.apply(this,arguments)}function QM(){return QM=(0,ie.Z)(function*(n,e){const t=qe(n),r=yield BI(t.localStore,e.query,!0),i=e.view.ko(r);return t.isPrimaryClient&&GM(t,e.targetId,i.Co),i}),QM.apply(this,arguments)}function xU(n){return JM.apply(this,arguments)}function JM(){return JM=(0,ie.Z)(function*(n){const e=qe(n);return Qk(e.localStore).then(t=>Zd(e,t))}),JM.apply(this,arguments)}function kU(n,e,t,r){return XM.apply(this,arguments)}function XM(){return XM=(0,ie.Z)(function*(n,e,t,r){const i=qe(n),a=yield function(u,h){const _=qe(u),w=qe(_.An);return _.persistence.runTransaction("Lookup mutation documents","readonly",I=>w.Zt(I,h).next(A=>A?_.Wn.vn(I,A):Pe.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield ov(i.remoteStore):"acknowledged"===t||"rejected"===t?(zM(i,e,r||null),HM(i,e),h=e,qe(qe(i.localStore).An).ee(h)):dt(),yield Zd(i,a)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),XM.apply(this,arguments)}function eP(){return eP=(0,ie.Z)(function*(n,e){const t=qe(n);if(iP(t),sP(t),!0===e&&!0!==t.Wo){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield yR(t,r.toArray());t.Wo=!0,yield AM(t.remoteStore,!0);for(const a of i)$I(t.remoteStore,a)}else if(!1===e&&!1!==t.Wo){const r=[];let i=Promise.resolve();t.Fo.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(dv(t,u),iv(t.localStore,u,!0))),vw(t.remoteStore,u)}),yield i,yield yR(t,r),function(a){const u=qe(a);u.Uo.forEach((h,_)=>{vw(u.remoteStore,_)}),u.qo.hs(),u.Uo=new Map,u.Bo=new Zr(lt.comparator)}(t),t.Wo=!1,yield AM(t.remoteStore,!1)}}),eP.apply(this,arguments)}function yR(n,e,t){return tP.apply(this,arguments)}function tP(){return tP=(0,ie.Z)(function*(n,e,t){const r=qe(n),i=[],a=[];for(const u of e){let h;const _=r.Fo.get(u);if(_&&0!==_.length){h=yield rv(r.localStore,bo(_[0]));for(const w of _){const I=r.Mo.get(w),A=yield OU(r,I);A.snapshot&&a.push(A.snapshot)}}else{const w=yield Yk(r.localStore,u);h=yield rv(r.localStore,w),yield FM(r,vR(w),u,!1)}i.push(h)}return r.Oo.br(a),i}),tP.apply(this,arguments)}function vR(n){return _I(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function NU(n){const e=qe(n);return qe(qe(e.localStore).persistence).Tn()}function FU(n,e,t,r){return nP.apply(this,arguments)}function nP(){return nP=(0,ie.Z)(function*(n,e,t,r){const i=qe(n);if(i.Wo)Fe("SyncEngine","Ignoring unexpected query state notification.");else if(i.Fo.has(e))switch(t){case"current":case"not-current":{const a=yield Qk(i.localStore),u=By.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Zd(i,a,u);break}case"rejected":yield iv(i.localStore,e,!0),dv(i,e,r);break;default:dt()}}),nP.apply(this,arguments)}function LU(n,e,t){return rP.apply(this,arguments)}function rP(){return rP=(0,ie.Z)(function*(n,e,t){const r=iP(n);if(r.Wo){for(const i of e){if(r.Fo.has(i)){Fe("SyncEngine","Adding an already active target "+i);continue}const a=yield Yk(r.localStore,i),u=yield rv(r.localStore,a);yield FM(r,vR(a),u.targetId,!1),$I(r.remoteStore,u)}for(const i of t)r.Fo.has(i)&&(yield iv(r.localStore,i,!1).then(()=>{vw(r.remoteStore,i),dv(r,i)}).catch(Gg))}}),rP.apply(this,arguments)}function iP(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TU.bind(null,e),e.Oo.br=pU.bind(null,e.eventManager),e.Oo.zo=gU.bind(null,e.eventManager),e}function sP(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AU.bind(null,e),e}class CR{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ie.Z)(function*(){t.k=_w(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return zk(this.persistence,new Hk,e.initialUser,this.k)}Yo(e){return new z3(oM.ks,this.k)}Jo(e){return new eR}terminate(){var e=this;return(0,ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class wR extends CR{constructor(e,t,r){super(),this.tc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ie.Z)(function*(){yield t().call(r,e),yield function(n){return nM.apply(this,arguments)}(r.localStore),yield r.tc.initialize(r,e),yield sP(r.tc.syncEngine),yield ov(r.tc.remoteStore),yield r.persistence.sn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Zo(e){return zk(this.persistence,new Hk,e.initialUser,this.k)}Xo(e){return new D3(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=JS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Do.withCacheSize(this.cacheSizeBytes):Do.DEFAULT;return new QS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,nR(),jI(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new eR}}class VU extends wR{constructor(e,t){super(e,t,!1),this.tc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ie.Z)(function*(){yield t().call(r,e);const i=r.tc.syncEngine;r.sharedClientState instanceof uM&&(r.sharedClientState.syncEngine={mi:kU.bind(null,i),gi:FU.bind(null,i),yi:LU.bind(null,i),Tn:NU.bind(null,i),_i:xU.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.sn(function(){var a=(0,ie.Z)(function*(u){yield function(n,e){return eP.apply(this,arguments)}(r.tc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}Jo(e){const t=nR();if(!uM.Pt(t))throw new xe(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=JS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new uM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class oP{initialize(e,t){var r=this;return(0,ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>mR(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=MU.bind(null,r.syncEngine),yield AM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new fU}createDatastore(e){const t=_w(e.databaseInfo.databaseId),r=new Q3(e.databaseInfo);return new eU(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>mR(this.syncEngine,h,0),u=tR.Pt()?new tR:new W3,new nU(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,h,_,w){const I=new CU(r,i,a,u,h,_);return w&&(I.Wo=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ie.Z)(function*(t){const r=qe(t);Fe("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),yield sv(r),r.Hr.shutdown(),r.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ER(n,e=10240){let t=0;return{read:()=>(0,ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class zI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ec(this.observer.next,e)}error(e){this.observer.error?this.ec(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}nc(){this.muted=!0}ec(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class BU{constructor(e,t){this.sc=e,this.k=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.ic=new TextDecoder("utf-8"),this.rc().then(r=>{r&&r._o()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.sc.cancel()}getMetadata(){var e=this;return(0,ie.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,ie.Z)(function*(){return yield e.getMetadata(),e.rc()})()}rc(){var e=this;return(0,ie.Z)(function*(){const t=yield e.oc();if(null===t)return null;const r=e.ic.decode(t),i=Number(r);isNaN(i)&&e.cc(`length string (${r}) is not valid number`);const a=yield e.ac(i);return new mU(JSON.parse(a),t.length+i)})()}uc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oc(){var e=this;return(0,ie.Z)(function*(){for(;e.uc()<0&&!(yield e.hc()););if(0===e.buffer.length)return null;const t=e.uc();t<0&&e.cc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ac(e){var t=this;return(0,ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.hc())&&t.cc("Reached the end of bundle when more is expected.");const r=t.ic.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}cc(e){throw this.sc.cancel(),new Error(`Invalid bundle format: ${e}`)}hc(){var e=this;return(0,ie.Z)(function*(){const t=yield e.sc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class ZU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ie.Z)(function*(a,u){const h=qe(a),_=Ue(h.k)+"/documents",w={documents:u.map(U=>j(h.k,U))},I=yield h.ji("BatchGetDocuments",_,w),A=new Map;I.forEach(U=>{const B=function(n,e){return"found"in e?function(t,r){Tt(!!r.found);const i=K(t,r.found.name),a=M(r.found.updateTime),u=new fi({mapValue:{fields:r.found.fields}});return Gn.newFoundDocument(i,a,u)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const i=K(t,r.missing),a=M(r.readTime);return Gn.newNoDocument(i,a)}(n,e):dt()}(h.k,U);A.set(B.key.toString(),B)});const x=[];return u.forEach(U=>{const B=A.get(U.toString());Tt(!!B),x.push(B)}),x}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Of(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=lt.fromPath(i);e.mutations.push(new xf(a,e.precondition(a)))}),yield(r=(0,ie.Z)(function*(i,a){const u=qe(i),h=Ue(u.k)+"/documents",_={writes:a.map(w=>Fi(u.k,w))};yield u.Bi("Commit",h,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=xt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Br.updateTime(t):Br.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xt.min()))throw new xe(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Br.updateTime(t)}return Br.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qU{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.lc=5,this.ur=new dM(this.asyncQueue,"transaction_retry")}run(){this.lc-=1,this.fc()}fc(){var e=this;this.ur.Zi((0,ie.Z)(function*(){const t=new ZU(e.datastore),r=e.dc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.wc(a)}))}).catch(i=>{e.wc(i)})}))}dc(e){try{const t=this.updateFunction(e);return!qa(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wc(e){this.lc>0&&this._c(e)?(this.lc-=1,this.asyncQueue.enqueueAndForget(()=>(this.fc(),Promise.resolve()))):this.deferred.reject(e)}_c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!OI(t)}return!1}}class jU{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ri.UNAUTHENTICATED,this.clientId=lI.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,ie.Z)(function*(h){Fe("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=lv(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function bR(n,e){return aP.apply(this,arguments)}function aP(){return aP=(0,ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ie.Z)(function*(a){r.isEqual(a)||(yield Gk(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),aP.apply(this,arguments)}function TR(n,e){return lP.apply(this,arguments)}function lP(){return lP=(0,ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield cP(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>{return(a=(0,ie.Z)(function*(u,h){const _=qe(u);_.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const w=Uf(_);_.Gr.add(3),yield sv(_),w&&_.Jr.set("Unknown"),yield _.remoteSyncer.handleCredentialChange(h),_.Gr.delete(3),yield yw(_)}),function(u,h){return a.apply(this,arguments)})(e.remoteStore,i);var a}),n.onlineComponents=e}),lP.apply(this,arguments)}function cP(n){return uP.apply(this,arguments)}function uP(){return uP=(0,ie.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield bR(n,new CR)),n.offlineComponents}),uP.apply(this,arguments)}function GI(n){return dP.apply(this,arguments)}function dP(){return dP=(0,ie.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield TR(n,new oP)),n.onlineComponents}),dP.apply(this,arguments)}function IR(n){return cP(n).then(e=>e.persistence)}function hP(n){return cP(n).then(e=>e.localStore)}function AR(n){return GI(n).then(e=>e.remoteStore)}function fP(n){return GI(n).then(e=>e.syncEngine)}function hv(n){return pP.apply(this,arguments)}function pP(){return pP=(0,ie.Z)(function*(n){const e=yield GI(n),t=e.eventManager;return t.onListen=wU.bind(null,e.syncEngine),t.onUnlisten=EU.bind(null,e.syncEngine),t}),pP.apply(this,arguments)}function DR(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function(i,a,u,h,_){const w=new zI({next:A=>{a.enqueueAndForget(()=>OM(i,I));const x=A.docs.has(u);!x&&A.fromCache?_.reject(new xe(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&A.fromCache&&h&&"server"===h.source?_.reject(new xe(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),I=new RM(Nd(u.path),w,{includeMetadataChanges:!0,wo:!0});return MM(i,I)}(yield hv(n),n.asyncQueue,e,t,r)})),r.promise}function SR(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function(i,a,u,h,_){const w=new zI({next:A=>{a.enqueueAndForget(()=>OM(i,I)),A.fromCache&&"server"===h.source?_.reject(new xe(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),I=new RM(u,w,{includeMetadataChanges:!0,wo:!0});return MM(i,I)}(yield hv(n),n.asyncQueue,e,t,r)})),r.promise}class JU{constructor(e,t,r,i,a,u,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=_}}class fv{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fv&&e.projectId===this.projectId&&e.database===this.database}}const MR=new Map;function gP(n,e,t){if(!t)throw new xe(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PR(n,e,t,r){if(!0===e&&!0===r)throw new xe(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function OR(n){if(!lt.isDocumentKey(n))throw new xe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xR(n){if(lt.isDocumentKey(n))throw new xe(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function hn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=WI(n);throw new xe(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kR(n,e){if(e<=0)throw new xe(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class RR{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,PR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cw{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RR({}),this._settingsFrozen=!1,e instanceof fv?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new xe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fv(i.options.projectId)}(e))}get app(){if(!this._app)throw new xe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new fS;switch(t.type){case"gapi":const r=t.client;return Tt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new oI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=MR.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),MR.delete(e),t.terminate())}(this),Promise.resolve()}}class er{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new iu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new er(this.firestore,e,this._key)}}class Is{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Is(this.firestore,e,this._query)}}class iu extends Is{constructor(e,t,r){super(e,t,Nd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new er(this.firestore,null,new lt(e))}withConverter(e){return new iu(this.firestore,e,this._path)}}function NR(n,e,...t){if(n=(0,R.m9)(n),gP("collection","path",e),n instanceof Cw){const r=sn.fromString(e,...t);return xR(r),new iu(n,null,r)}{if(!(n instanceof er||n instanceof iu))throw new xe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return xR(r),new iu(n.firestore,null,r)}}function KI(n,e,...t){if(n=(0,R.m9)(n),1===arguments.length&&(e=lI.A()),gP("doc","path",e),n instanceof Cw){const r=sn.fromString(e,...t);return OR(r),new er(n,null,new lt(r))}{if(!(n instanceof er||n instanceof iu))throw new xe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return OR(r),new er(n.firestore,n instanceof iu?n.converter:null,new lt(r))}}function FR(n,e){return n=(0,R.m9)(n),e=(0,R.m9)(e),(n instanceof er||n instanceof iu)&&(e instanceof er||e instanceof iu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LR(n,e){return n=(0,R.m9)(n),e=(0,R.m9)(e),n instanceof Is&&e instanceof Is&&n.firestore===e.firestore&&Bg(n._query,e._query)&&n.converter===e.converter}class tV{constructor(){this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new dM(this,"async_queue_retry"),this.bc=()=>{const t=jI();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=jI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}get isShuttingDown(){return this.yc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pc(),this.vc(e)}enterRestrictedMode(e){if(!this.yc){this.yc=!0,this.Ac=e||!1;const t=jI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}}enqueue(e){if(this.Pc(),this.yc)return new Promise(()=>{});const t=new Lr;return this.vc(()=>this.yc&&this.Ac?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.gc.push(e),this.Vc()))}Vc(){var e=this;return(0,ie.Z)(function*(){if(0!==e.gc.length){try{yield e.gc[0](),e.gc.shift(),e.ur.reset()}catch(t){if(!$g(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.gc.length>0&&e.ur.Zi(()=>e.Vc())}})()}vc(e){const t=this.mc.then(()=>(this.Ic=!0,e().catch(r=>{throw this.Ec=r,this.Ic=!1,Er("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Ic=!1,r))));return this.mc=t,t}enqueueAfterDelay(e,t,r){this.Pc(),this.Rc.indexOf(e)>-1&&(t=0);const i=SM.createAndSchedule(this,e,t,r,a=>this.Sc(a));return this.Tc.push(i),i}Pc(){this.Ec&&dt()}verifyOperationInProgress(){}Dc(){var e=this;return(0,ie.Z)(function*(){let t;do{t=e.mc,yield t}while(t!==e.mc)})()}Cc(e){for(const t of this.Tc)if(t.timerId===e)return!0;return!1}Nc(e){return this.Dc().then(()=>{this.Tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Dc()})}kc(e){this.Rc.push(e)}Sc(e){const t=this.Tc.indexOf(e);this.Tc.splice(t,1)}}function mP(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class nV{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class pr extends Cw{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new tV,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||UR(this),this._firestoreClient.terminate()}}function pi(n){return n._firestoreClient||UR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function UR(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new JU(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new jU(n._authCredentials,n._appCheckCredentials,n._queue,r)}function VR(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,ie.Z)(function*(){try{yield bR(n,t),yield TR(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===pe.FAILED_PRECONDITION||a.code===pe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function BR(n){if(n._initialized||n._terminated)throw new xe(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class qd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class su{constructor(e){this._byteString=e}static fromBase64String(e){try{return new su(Vr.fromBase64String(e))}catch(t){throw new xe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new su(Vr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wg{constructor(e){this._methodName=e}}class YI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qt(this._lat,e._lat)||qt(this._long,e._long)}}const hV=/^__.*__$/;class fV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ec(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pf(e,this.data,t,this.fieldTransforms)}}class ZR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ec(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class QI{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.k=r,this.ignoreUndefinedProperties=i,void 0===a&&this.xc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get $c(){return this.settings.$c}Oc(e){return new QI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Oc({path:r,Fc:!1});return i.Lc(e),i}Bc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Oc({path:r,Fc:!1});return i.xc(),i}Uc(e){return this.Oc({path:void 0,Fc:!0})}qc(e){return XI(e,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lc(this.path.get(e))}Lc(e){if(0===e.length)throw this.qc("Document fields must not be empty");if(qR(this.$c)&&hV.test(e))throw this.qc('Document fields cannot begin and end with "__"')}}class pV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=r||_w(e)}Qc(e,t,r,i=!1){return new QI({$c:e,methodName:t,jc:r,path:Ur.emptyPath(),Fc:!1,Kc:i},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function Kg(n){const e=n._freezeSettings(),t=_w(n._databaseId);return new pV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function JI(n,e,t,r,i,a={}){const u=n.Qc(a.merge||a.mergeFields?2:0,e,t,i);CP("Data must be an object, but it was:",u,r);const h=HR(r,u);let _,w;if(a.merge)_=new sa(u.fieldMask),w=u.fieldTransforms;else if(a.mergeFields){const I=[];for(const A of a.mergeFields){const x=wP(e,A,t);if(!u.contains(x))throw new xe(pe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);GR(I,x)||I.push(x)}_=new sa(I),w=u.fieldTransforms.filter(A=>_.covers(A.field))}else _=null,w=u.fieldTransforms;return new fV(new fi(h),_,w)}class ww extends Wg{_toFieldTransform(e){if(2!==e.$c)throw e.qc(1===e.$c?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ww}}function jR(n,e,t){return new QI({$c:3,jc:e.settings.jc,methodName:n._methodName,Fc:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class _P extends Wg{_toFieldTransform(e){return new Uy(e.path,new tu)}isEqual(e){return e instanceof _P}}class gV extends Wg{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=jR(this,e,!0),r=this.Wc.map(a=>Yg(a,t)),i=new Jl(r);return new Uy(e.path,i)}isEqual(e){return this===e}}class mV extends Wg{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=jR(this,e,!0),r=this.Wc.map(a=>Yg(a,t)),i=new Xl(r);return new Uy(e.path,i)}isEqual(e){return this===e}}class _V extends Wg{constructor(e,t){super(e),this.Gc=t}_toFieldTransform(e){const t=new Ud(e.k,bI(e.k,this.Gc));return new Uy(e.path,t)}isEqual(e){return this===e}}function yP(n,e,t,r){const i=n.Qc(1,e,t);CP("Data must be an object, but it was:",i,r);const a=[],u=fi.empty();Ef(r,(_,w)=>{const I=EP(e,_,t);w=(0,R.m9)(w);const A=i.Bc(I);if(w instanceof ww)a.push(I);else{const x=Yg(w,A);null!=x&&(a.push(I),u.set(I,x))}});const h=new sa(a);return new ZR(u,h,i.fieldTransforms)}function vP(n,e,t,r,i,a){const u=n.Qc(1,e,t),h=[wP(e,r,t)],_=[i];if(a.length%2!=0)throw new xe(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)h.push(wP(e,a[x])),_.push(a[x+1]);const w=[],I=fi.empty();for(let x=h.length-1;x>=0;--x)if(!GR(w,h[x])){const U=h[x];let B=_[x];B=(0,R.m9)(B);const X=u.Bc(U);if(B instanceof ww)w.push(U);else{const de=Yg(B,X);null!=de&&(w.push(U),I.set(U,de))}}const A=new sa(w);return new ZR(I,A,u.fieldTransforms)}function $R(n,e,t,r=!1){return Yg(t,n.Qc(r?4:3,e))}function Yg(n,e){if(zR(n=(0,R.m9)(n)))return CP("Unsupported field value:",e,n),HR(n,e);if(n instanceof Wg)return function(t,r){if(!qR(r.$c))throw r.qc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.qc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Fc&&4!==e.$c)throw e.qc("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let h=Yg(u,r.Uc(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,R.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return bI(r.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=hi.fromDate(t);return{timestampValue:v(r.k,i)}}if(t instanceof hi){const i=new hi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:v(r.k,i)}}if(t instanceof YI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof su)return{bytesValue:E(r.k,t._byteString)};if(t instanceof er){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.qc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:O(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.qc(`Unsupported field value: ${WI(t)}`)}(n,e)}function HR(n,e){const t={};return CS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ef(n,(r,i)=>{const a=Yg(i,e.Mc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function zR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof hi||n instanceof YI||n instanceof su||n instanceof er||n instanceof Wg)}function CP(n,e,t){if(!zR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=WI(t);throw e.qc("an object"===r?n+" a custom object":n+" "+r)}var r}function wP(n,e,t){if((e=(0,R.m9)(e))instanceof qd)return e._internalPath;if("string"==typeof e)return EP(n,e);throw XI("Field path arguments must be of type string or ",n,!1,void 0,t)}const yV=new RegExp("[~\\*/\\[\\]]");function EP(n,e,t){if(e.search(yV)>=0)throw XI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qd(...e.split("."))._internalPath}catch(r){throw XI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function XI(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(a||u)&&(_+=" (found",a&&(_+=` in field ${r}`),u&&(_+=` in document ${i}`),_+=")"),new xe(pe.INVALID_ARGUMENT,h+n+_)}function GR(n,e){return n.some(t=>t.isEqual(e))}class Ew{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new er(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(e1("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vV extends Ew{data(){return super.data()}}function e1(n,e){return"string"==typeof e?EP(n,e):e instanceof qd?e._internalPath:e._delegate._internalPath}class Qg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jd extends Ew{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(e1("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class bw extends jd{data(e={}){return super.data(e)}}class Bf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new bw(this._firestore,this._userDataWriter,r.key,r,new Qg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new bw(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Qg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new bw(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Qg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==u.type&&(_=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),w=a.indexOf(u.doc.key)),{type:CV(u.type),doc:h,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function CV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function WR(n,e){return n instanceof jd&&e instanceof jd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Bf&&e instanceof Bf&&n._firestore===e._firestore&&LR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function KR(n){if(Ry(n)&&0===n.explicitOrderBy.length)throw new xe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tw{}function Zf(n,...e){for(const t of e)n=t._apply(n);return n}class wV extends Tw{constructor(e,t,r){super(),this.zc=e,this.Hc=t,this.Jc=r,this.type="where"}_apply(e){const t=Kg(e.firestore),r=function(i,a,u,h,_,w,I){let A;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new xe(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){tN(I,w);const U=[];for(const B of I)U.push(eN(h,i,B));A={arrayValue:{values:U}}}else A=eN(h,i,I)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||tN(I,w),A=$R(u,"where",I,"in"===w||"not-in"===w);const x=os.create(_,w,A);return function(U,B){if(B.V()){const de=yI(U);if(null!==de&&!de.isEqual(B.field))throw new xe(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${de.toString()}' and '${B.field.toString()}'`);const Ge=ew(U);null!==Ge&&nN(0,B.field,Ge)}const X=function(de,Ge){for(const Ke of de.filters)if(Ge.indexOf(Ke.op)>=0)return Ke.op;return null}(U,function(de){switch(de){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==X)throw new xe(pe.INVALID_ARGUMENT,X===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${X.toString()}' filters.`)}(i,x),x}(e._query,0,t,e.firestore._databaseId,this.zc,this.Hc,this.Jc);return new Is(e.firestore,e.converter,function(i,a){const u=i.filters.concat([a]);return new $a(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class bV extends Tw{constructor(e,t){super(),this.zc=e,this.Yc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new xe(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Sf(i,a);return function(h,_){if(null===ew(h)){const w=yI(h);null!==w&&nN(0,w,_.field)}}(r,u),u}(e._query,this.zc,this.Yc);return new Is(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new $a(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class YR extends Tw{constructor(e,t,r){super(),this.type=e,this.Xc=t,this.Zc=r}_apply(e){return new Is(e.firestore,e.converter,CI(e._query,this.Xc,this.Zc))}}class QR extends Tw{constructor(e,t,r){super(),this.type=e,this.ta=t,this.ea=r}_apply(e){const t=XR(e,this.type,this.ta,this.ea);return new Is(e.firestore,e.converter,(i=t,new $a((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class JR extends Tw{constructor(e,t,r){super(),this.type=e,this.ta=t,this.ea=r}_apply(e){const t=XR(e,this.type,this.ta,this.ea);return new Is(e.firestore,e.converter,(i=t,new $a((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function XR(n,e,t,r){if(t[0]=(0,R.m9)(t[0]),t[0]instanceof Ew)return function(i,a,u,h,_){if(!h)throw new xe(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const w=[];for(const I of Fd(i))if(I.field.isKeyField())w.push(My(a,h.key));else{const A=h.data.field(I.field);if(Sy(A))throw new xe(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const x=I.field.canonicalString();throw new xe(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}w.push(A)}return new Df(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Kg(n.firestore);return function(a,u,h,_,w,I){const A=a.explicitOrderBy;if(w.length>A.length)throw new xe(pe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let U=0;U<w.length;U++){const B=w[U];if(A[U].field.isKeyField()){if("string"!=typeof B)throw new xe(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof B}`);if(!vI(a)&&-1!==B.indexOf("/"))throw new xe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${B}' contains a slash.`);const X=a.path.child(sn.fromString(B));if(!lt.isDocumentKey(X))throw new xe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${X}' is not because it contains an odd number of segments.`);const de=new lt(X);x.push(My(u,de))}else{const X=$R(h,_,B);x.push(X)}}return new Df(x,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function eN(n,e,t){if("string"==typeof(t=(0,R.m9)(t))){if(""===t)throw new xe(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vI(e)&&-1!==t.indexOf("/"))throw new xe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!lt.isDocumentKey(r))throw new xe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return My(n,new lt(r))}if(t instanceof er)return My(n,t._key);throw new xe(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${WI(t)}.`)}function tN(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function nN(n,e,t){if(!t.isEqual(e))throw new xe(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class bP{convertValue(e,t="none"){switch(Tf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return Ef(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new YI(hr(e.latitude),hr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ES(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(bf(e));default:return null}}convertTimestamp(e){const t=Za(e);return new hi(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);Tt(Ek(r));const i=new fv(r.get(1),r.get(3)),a=new lt(r.popFirst(5));return i.isEqual(t)||Er(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function t1(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class OV extends bP{constructor(e){super(),this.firestore=e}convertBytes(e){return new su(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,t)}}class rN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kg(e)}set(e,t,r){this._verifyNotCommitted();const i=qf(e,this._firestore),a=t1(i.converter,t,r),u=JI(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Br.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=qf(e,this._firestore);let u;return u="string"==typeof(t=(0,R.m9)(t))||t instanceof qd?vP(this._dataReader,"WriteBatch.update",a._key,t,r,i):yP(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,Br.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=qf(e,this._firestore);return this._mutations=this._mutations.concat(new Of(t._key,Br.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qf(n,e){if((n=(0,R.m9)(n)).firestore!==e)throw new xe(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Jg extends bP{constructor(e){super(),this.firestore=e}convertBytes(e){return new su(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,t)}}function iN(n,e,t){n=hn(n,er);const r=hn(n.firestore,pr),i=t1(n.converter,e,t);return pv(r,[JI(Kg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Br.none())])}function sN(n,e,t,...r){n=hn(n,er);const i=hn(n.firestore,pr),a=Kg(i);let u;return u="string"==typeof(e=(0,R.m9)(e))||e instanceof qd?vP(a,"updateDoc",n._key,e,t,r):yP(a,"updateDoc",n._key,e),pv(i,[u.toMutation(n._key,Br.exists(!0))])}function oN(n,...e){var t,r,i;n=(0,R.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||mP(e[u])||(a=e[u],u++);const h={includeMetadataChanges:a.includeMetadataChanges};if(mP(e[u])){const A=e[u];e[u]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[u+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[u+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let _,w,I;if(n instanceof er)w=hn(n.firestore,pr),I=Nd(n._key.path),_={next:A=>{e[u]&&e[u](TP(w,n,A))},error:e[u+1],complete:e[u+2]};else{const A=hn(n,Is);w=hn(A.firestore,pr),I=A._query;const x=new Jg(w);_={next:U=>{e[u]&&e[u](new Bf(w,x,A,U))},error:e[u+1],complete:e[u+2]},KR(n._query)}return function(A,x,U,B){const X=new zI(B),de=new RM(x,X,U);return A.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return MM(yield hv(A),de)})),()=>{X.nc(),A.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return OM(yield hv(A),de)}))}}(pi(w),I,h,_)}function pv(n,e){return function(t,r){const i=new Lr;return t.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function(n,e,t){return VM.apply(this,arguments)}(yield fP(t),r,i)})),i.promise}(pi(n),e)}function TP(n,e,t){const r=t.docs.get(e._key),i=new Jg(n);return new jd(n,i,e._key,r,new Qg(t.hasPendingWrites,t.fromCache),e.converter)}class ZV extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Kg(e)}get(e){const t=qf(e,this._firestore),r=new OV(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const a=i[0];if(a.isFoundDocument())return new Ew(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Ew(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=qf(e,this._firestore),a=t1(i.converter,t,r),u=JI(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=qf(e,this._firestore);let u;return u="string"==typeof(t=(0,R.m9)(t))||t instanceof qd?vP(this._dataReader,"Transaction.update",a._key,t,r,i):yP(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=qf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=qf(e,this._firestore),r=new Jg(this._firestore);return super.get(e).then(i=>new jd(this._firestore,r,t._key,i._document,new Qg(!1,!1),t.converter))}}function aN(...n){return new gV("arrayUnion",n)}function lN(...n){return new mV("arrayRemove",n)}!function(n,e=!0){Pd=is.SDK_VERSION,(0,is._registerComponent)(new na.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new pr(i,new sI(t.getProvider("auth-internal")),new aI(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,is.registerVersion)(Ty,"3.4.3",n),(0,is.registerVersion)(Ty,"3.4.3","esm2017")}();const uN=(0,Yt.u3)(lN,!0),dN=(0,Yt.u3)(aN,!0);var Iw=N(2210);function DP(){return(0,Qr.e)((n,e)=>{let t,r=!1;n.subscribe(new Sn.Q(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function hN(n,e=Zh.y){return n=null!=n?n:YV,(0,Qr.e)((t,r)=>{let i,a=!0;t.subscribe(new Sn.Q(r,u=>{const h=e(u);(a||!n(i,h))&&(a=!1,i=h,r.next(u))}))})}function YV(n,e){return n===e}var gi=N(7905),SP=(N(9836),N(6293));function MP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function fN(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function pN(){if("undefined"==typeof atob)throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Aw{constructor(e){this._delegate=e}static fromBase64String(e){return pN(),new Aw(su.fromBase64String(e))}static fromUint8Array(e){return fN(),new Aw(su.fromUint8Array(e))}toBase64(){return pN(),this._delegate.toBase64()}toUint8Array(){return fN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function PP(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class e4{enableIndexedDbPersistence(e,t){return function(n,e){BR(n=hn(n,pr));const t=pi(n),r=n._freezeSettings(),i=new oP;return VR(t,i,new wR(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){BR(n=hn(n,pr));const e=pi(n),t=n._freezeSettings(),r=new oP;return VR(e,r,new VU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new xe(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ie.Z)(function*(){try{yield(t=(0,ie.Z)(function*(r){if(!nc.Pt())return Promise.resolve();const i=r+"main";yield nc.delete(i)}),function(r){return t.apply(this,arguments)})(JS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class gN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fv||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Od("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var i;const a=(n=hn(n,Cw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Od("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=Ri.MOCK_USER;else{u=(0,R.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new xe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ri(_)}n._authCredentials=new pS(new WC(u,h))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ie.Z)(function*(){const e=yield IR(n),t=yield AR(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i.Gr.delete(0),yw(i)}(t)}))}(pi(n=hn(n,pr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ie.Z)(function*(){const e=yield IR(n),t=yield AR(n);return e.setNetworkEnabled(!1),(r=(0,ie.Z)(function*(i){const a=qe(i);a.Gr.add(0),yield sv(a),a.Jr.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(pi(n=hn(n,pr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,PR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function(n,e){return $M.apply(this,arguments)}(yield fP(e),t)})),t.promise}(pi(n=hn(n,pr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new zI(e);return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return r=yield hv(n),i=t,qe(r).io.add(i),void i.next();var r,i})),()=>{t.nc(),n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return r=yield hv(n),i=t,void qe(r).io.delete(i);var r,i}))}}(pi(n=hn(n,pr)),mP(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gv(this,NR(this._delegate,e))}catch(t){throw to(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ha(this,KI(this._delegate,e))}catch(t){throw to(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new no(this,function(n,e){if(n=hn(n,Cw),gP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Is(n,null,(t=e,new $a(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw to(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){const r=yield(i=n,GI(i).then(a=>a.datastore));var i;new qU(n.asyncQueue,r,e,t).run()})),t.promise}(pi(n=hn(n,pr)),t=>e(new ZV(n,t)))}(this._delegate,t=>e(new mN(this,t)))}batch(){return pi(this._delegate),new _N(new rN(this._delegate,e=>pv(this._delegate,e)))}loadBundle(e){return function(n,e){const t=pi(n=hn(n,pr)),r=new nV;return function(n,e,t,r){const i=function(a,u){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return ER(_,w);if(_ instanceof ArrayBuffer)return ER(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new BU(_,u);var _}(t,_w(e));n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){!function(n,e,t){const r=qe(n);var i;(i=(0,ie.Z)(function*(a,u,h){try{const _=yield u.getMetadata();if(yield function(x,U){const B=qe(x),X=M(U.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",de=>B.Ye.getBundleMetadata(de,U.id)).then(de=>!!de&&de.createTime.compareTo(X)>=0)}(a.localStore,_))return yield u.close(),void h._completeWith((x=_,{taskState:"Success",documentsLoaded:x.totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}));h._updateProgress(dR(_));const w=new _U(_,a.localStore,u.k);let I=yield u.Ho();for(;I;){const x=yield w.yo(I);x&&h._updateProgress(x),I=yield u.Ho()}const A=yield w.complete();yield Zd(a,A.In,void 0),yield function(x,U){const B=qe(x);return B.persistence.runTransaction("Save bundle","readwrite",X=>B.Ye.saveBundleMetadata(X,U))}(a.localStore,_),h._completeWith(A.progress)}catch(_){Od("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_)}var x}),function(a,u,h){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield fP(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,ie.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ye.getNamedQuery(a,r))}(yield hP(n),e)}))}(pi(n=hn(n,pr)),e).then(t=>t?new Is(n,null,t.query):null)}(this._delegate,e).then(t=>t?new no(this,t):null)}}class n1 extends bP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aw(new su(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ha.forKey(t,this.firestore,null)}}class mN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new n1(e)}get(e){const t=em(e);return this._delegate.get(t).then(r=>new Dw(this._firestore,new jd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=em(e);return r?(MP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=em(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=em(e);return this._delegate.delete(t),this}}class _N{constructor(e){this._delegate=e}set(e,t,r){const i=em(e);return r?(MP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=em(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=em(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Xg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new bw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Xg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Xg(e,new n1(e),t),i.set(t,a)),a}}Xg.INSTANCES=new WeakMap;class Ha{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new n1(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ha(t,new er(t._delegate,r,new lt(e)))}static forKey(e,t,r){return new Ha(t,new er(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new gv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gv(this.firestore,NR(this._delegate,e))}catch(t){throw to(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,R.m9)(e))instanceof er&&FR(this._delegate,e)}set(e,t){t=MP("DocumentReference.set",t);try{return t?iN(this._delegate,e,t):iN(this._delegate,e)}catch(r){throw to(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?sN(this._delegate,e):sN(this._delegate,e,t,...r)}catch(i){throw to(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return pv(hn(n.firestore,pr),[new Of(n._key,Br.none())])}(this._delegate)}onSnapshot(...e){const t=yN(e),r=vN(e,i=>new Dw(this.firestore,new jd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return oN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=hn(n,er);const e=hn(n.firestore,pr),t=pi(e),r=new Jg(e);return function(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return(r=(0,ie.Z)(function*(i,a,u){try{const h=yield function(_,w){const I=qe(_);return I.persistence.runTransaction("read document","readonly",A=>I.Wn.Rn(A,w))}(i,a);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new xe(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=lv(h,`Failed to get document '${a} from cache`);u.reject(_)}}),function(i,a,u){return r.apply(this,arguments)})(yield hP(n),e,t);var r})),t.promise}(t,n._key).then(i=>new jd(e,r,n._key,i,new Qg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=hn(n,er);const e=hn(n.firestore,pr);return DR(pi(e),n._key,{source:"server"}).then(t=>TP(e,n,t))}(this._delegate):function(n){n=hn(n,er);const e=hn(n.firestore,pr);return DR(pi(e),n._key).then(t=>TP(e,n,t))}(this._delegate),t.then(r=>new Dw(this.firestore,new jd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ha(this.firestore,this._delegate.withConverter(e?Xg.getInstance(this.firestore,e):null))}}function to(n,e,t){return n.message=n.message.replace(e,t),n}function yN(n){for(const e of n)if("object"==typeof e&&!PP(e))return e;return{}}function vN(n,e){var t,r;let i;return i=PP(n[0])?n[0]:PP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Dw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ha(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return WR(this._delegate,e._delegate)}}class Sw extends Dw{data(e){const t=this._delegate.data(e);return function(n,e){n||dt()}(void 0!==t),t}}class no{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new n1(e)}where(e,t,r){try{return new no(this.firestore,Zf(this._delegate,function(n,e,t){const r=e,i=e1("where",n);return new wV(i,r,t)}(e,t,r)))}catch(i){throw to(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new no(this.firestore,Zf(this._delegate,function(n,e="asc"){const t=e,r=e1("orderBy",n);return new bV(r,t)}(e,t)))}catch(r){throw to(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new no(this.firestore,Zf(this._delegate,function(n){return kR("limit",n),new YR("limit",n,"F")}(e)))}catch(t){throw to(t,"limit()","Query.limit()")}}limitToLast(e){try{return new no(this.firestore,Zf(this._delegate,function(n){return kR("limitToLast",n),new YR("limitToLast",n,"L")}(e)))}catch(t){throw to(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new no(this.firestore,Zf(this._delegate,function(...n){return new QR("startAt",n,!0)}(...e)))}catch(t){throw to(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new no(this.firestore,Zf(this._delegate,function(...n){return new QR("startAfter",n,!1)}(...e)))}catch(t){throw to(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new no(this.firestore,Zf(this._delegate,function(...n){return new JR("endBefore",n,!0)}(...e)))}catch(t){throw to(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new no(this.firestore,Zf(this._delegate,function(...n){return new JR("endAt",n,!1)}(...e)))}catch(t){throw to(t,"endAt()","Query.endAt()")}}isEqual(e){return LR(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=hn(n,Is);const e=hn(n.firestore,pr),t=pi(e),r=new Jg(e);return function(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return(r=(0,ie.Z)(function*(i,a,u){try{const h=yield BI(i,a,!0),_=new pR(a,h.zn),w=_.Po(h.documents),I=_.applyChanges(w,!1);u.resolve(I.snapshot)}catch(h){const _=lv(h,`Failed to execute query '${a} against cache`);u.reject(_)}}),function(i,a,u){return r.apply(this,arguments)})(yield hP(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Bf(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=hn(n,Is);const e=hn(n.firestore,pr),t=pi(e),r=new Jg(e);return SR(t,n._query,{source:"server"}).then(i=>new Bf(e,r,n,i))}(this._delegate):function(n){n=hn(n,Is);const e=hn(n.firestore,pr),t=pi(e),r=new Jg(e);return KR(n._query),SR(t,n._query).then(i=>new Bf(e,r,n,i))}(this._delegate),t.then(r=>new OP(this.firestore,new Bf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=yN(e),r=vN(e,i=>new OP(this.firestore,new Bf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return oN(this._delegate,t,r)}withConverter(e){return new no(this.firestore,this._delegate.withConverter(e?Xg.getInstance(this.firestore,e):null))}}class n4{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Sw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class OP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new no(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Sw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new n4(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Sw(this._firestore,r))})}isEqual(e){return WR(this._delegate,e._delegate)}}class gv extends no{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ha(this.firestore,e):null}doc(e){try{return new Ha(this.firestore,void 0===e?KI(this._delegate):KI(this._delegate,e))}catch(t){throw to(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=hn(n.firestore,pr),r=KI(n),i=t1(n.converter,e);return pv(t,[JI(Kg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Br.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ha(this.firestore,t))}isEqual(e){return FR(this._delegate,e._delegate)}withConverter(e){return new gv(this.firestore,this._delegate.withConverter(e?Xg.getInstance(this.firestore,e):null))}}function em(n){return hn(n,er)}class xP{constructor(...e){this._delegate=new qd(...e)}static documentId(){return new xP(Ur.keyField().canonicalString())}isEqual(e){return(e=(0,R.m9)(e))instanceof qd&&this._delegate._internalPath.isEqual(e._internalPath)}}class tm{constructor(e){this._delegate=e}static serverTimestamp(){const e=new _P("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new tm(e)}static delete(){const e=new ww("deleteField");return e._methodName="FieldValue.delete",new tm(e)}static arrayUnion(...e){const t=aN(...e);return t._methodName="FieldValue.arrayUnion",new tm(t)}static arrayRemove(...e){const t=lN(...e);return t._methodName="FieldValue.arrayRemove",new tm(t)}static increment(e){const t=function(n){return new _V("increment",n)}(e);return t._methodName="FieldValue.increment",new tm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const r4={Firestore:gN,GeoPoint:YI,Timestamp:hi,Blob:Aw,Transaction:mN,WriteBatch:_N,DocumentReference:Ha,DocumentSnapshot:Dw,Query:no,QueryDocumentSnapshot:Sw,QuerySnapshot:OP,CollectionReference:gv,FieldPath:xP,FieldValue:tm,setLogLevel:function(n){!function(n){eu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new na.wA("firestore-compat",t=>((e,t)=>new gN(e,t,new e4))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},r4)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.12")}(SP.Z);var Mw=N(3719),r1=N(4763),o4=N(1733);class a4 extends Yo.x{constructor(e=1/0,t=1/0,r=o4.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=u;_+=2)h=_;h&&r.splice(0,h+1)}}}var CN=N(3174);function wN(n,e,t){var r,i;let a,u=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,u=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,CN.B)({connector:()=>new a4(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}function EN(n,e){return(0,Ks.m)(e)?Hn(()=>n,e):Hn(()=>n)}var kP=N(5222);const bN=new Map,l4={activated:!1,tokenObservers:[]},c4={initialized:!1,enabled:!1};function Ui(n){return bN.get(n)||l4}function rc(n,e){bN.set(n,e)}function i1(){return c4}class p4{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ie.Z)(function*(){t.stop();try{t.pending=new R.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new R.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ro=new R.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function IN(n){if(!Ui(n).activated)throw ro.create("use-before-activation",{appName:n.name})}function FP(n,e){return LP.apply(this,arguments)}function LP(){return LP=(0,ie.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const a={method:"POST",body:JSON.stringify(e),headers:r};let u,h;try{u=yield fetch(n,a)}catch(A){throw ro.create("fetch-network-error",{originalErrorMessage:A.message})}if(200!==u.status)throw ro.create("fetch-status-error",{httpStatus:u.status});try{h=yield u.json()}catch(A){throw ro.create("fetch-parse-error",{originalErrorMessage:A.message})}const _=h.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw ro.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const w=1e3*Number(_[1]),I=Date.now();return{token:h.attestationToken,expireTimeMillis:I+w,issuedAtTimeMillis:I}}),LP.apply(this,arguments)}function C4(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Pw="firebase-app-check-store";let a1=null;function DN(){return a1||(a1=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ro.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Pw,{keyPath:"compositeKey"})}}catch(t){e(ro.create("storage-open",{originalErrorMessage:t.message}))}}),a1)}function UP(){return UP=(0,ie.Z)(function*(n,e){const r=(yield DN()).transaction(Pw,"readwrite"),a=r.objectStore(Pw).put({compositeKey:n,value:e});return new Promise((u,h)=>{a.onsuccess=_=>{u()},r.onerror=_=>{var w;h(ro.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})}),UP.apply(this,arguments)}const Ow=new ra.Yd("@firebase/app-check");function ON(n,e){return(0,R.hl)()?function(n,e){return function(n,e){return UP.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ow.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function xN(){return i1().enabled}function kN(){return qP.apply(this,arguments)}function qP(){return qP=(0,ie.Z)(function*(){const n=i1();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),qP.apply(this,arguments)}const P4={error:"UNKNOWN_ERROR"};function O4(n){return R.US.encodeString(JSON.stringify(n),!1)}function l1(n){return jP.apply(this,arguments)}function jP(){return jP=(0,ie.Z)(function*(n,e=!1){const t=n.app;IN(t);const r=Ui(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&c1(_)&&(i=_)}if(!e&&i&&c1(i))return{token:i.token};let h,u=!1;if(xN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=FP(C4(t,yield kN()),n.platformLoggerProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),u=!0);const _=yield r.exchangeTokenPromise;return yield ON(t,_),rc(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),u=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Ow.warn(_.message):Ow.error(_),a=_}return i?(h={token:i.token},rc(t,Object.assign(Object.assign({},r),{token:i})),yield ON(t,i)):h=k4(a),u&&NN(t,h),h}),jP.apply(this,arguments)}function HP(n,e){const t=Ui(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),rc(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function RN(n){const{app:e}=n,t=Ui(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new p4((0,ie.Z)(function*(){let r;if(r=Ui(e).token?yield l1(n,!0):yield l1(n),r.error)throw r.error}),()=>!0,()=>{const t=Ui(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),rc(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function NN(n,e){const t=Ui(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function c1(n){return n.expireTimeMillis-Date.now()>0}function k4(n){return{token:O4(P4),error:n}}class R4{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Ui(this.app);for(const t of e)HP(this.app,t.next);return Promise.resolve()}}const jN="app-check-internal";(0,is._registerComponent)(new na.wA("app-check",n=>function(n,e){return new R4(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(jN).initialize()})),(0,is._registerComponent)(new na.wA(jN,n=>function(n){return{getToken:e=>l1(n,e),addTokenListener:e=>function(n,e,t,r){const{app:i}=n,a=Ui(i),u={next:t,error:r,type:e};if(rc(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,u]})),a.token&&c1(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),RN(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>RN(n))}(n,"INTERNAL",e),removeTokenListener:e=>HP(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,is.registerVersion)("@firebase/app-check","0.5.3");class xw{constructor(){return(0,Yt.vb)("app-check")}}"undefined"!=typeof window&&window;var YP=N(7892);const QP=new l.OlP("angularfire2.auth.use-emulator"),JP=new l.OlP("angularfire2.auth.settings"),XP=new l.OlP("angularfire2.auth.tenant-id"),eO=new l.OlP("angularfire2.auth.langugage-code"),tO=new l.OlP("angularfire2.auth.use-device-language"),nO=new l.OlP("angularfire.auth.persistence"),rO=(n,e,t,r,i,a,u,h)=>(0,gi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),u)for(const[w,I]of Object.entries(u))_.settings[w]=I;return h&&_.setPersistence(h),_},[t,r,i,a,u,h]);let d1=(()=>{class n{constructor(t,r,i,a,u,h,_,w,I,A,x,U){const B=new Yo.x,X=vt(void 0).pipe((0,r1.Q)(u.outsideAngular),Hn(()=>a.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,9836)))),(0,rt.U)(()=>(0,gi.on)(t,a,r)),(0,rt.U)(de=>rO(de,a,h,w,I,A,_,x)),wN({bufferSize:1,refCount:!1}));if(Mr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=vt(null);else{X.pipe($c()).subscribe();const Ge=X.pipe(Hn(ze=>ze.getRedirectResult().then(Gt=>Gt,()=>null)),Yt.iC,wN({bufferSize:1,refCount:!1})),Ke=X.pipe(Hn(ze=>new Un.y(Gt=>({unsubscribe:a.runOutsideAngular(()=>ze.onAuthStateChanged(kn=>Gt.next(kn),kn=>Gt.error(kn),()=>Gt.complete()))})))),ot=X.pipe(Hn(ze=>new Un.y(Gt=>({unsubscribe:a.runOutsideAngular(()=>ze.onIdTokenChanged(kn=>Gt.next(kn),kn=>Gt.error(kn),()=>Gt.complete()))}))));this.authState=Ge.pipe(EN(Ke),(0,kP.R)(u.outsideAngular),(0,r1.Q)(u.insideAngular)),this.user=Ge.pipe(EN(ot),(0,kP.R)(u.outsideAngular),(0,r1.Q)(u.insideAngular)),this.idToken=this.user.pipe(Hn(ze=>ze?(0,tn.D)(ze.getIdToken()):vt(null))),this.idTokenResult=this.user.pipe(Hn(ze=>ze?(0,tn.D)(ze.getIdTokenResult()):vt(null))),this.credential=(0,Mw.T)(Ge,B,this.authState.pipe(ts(ze=>!ze))).pipe((0,rt.U)(ze=>(null==ze?void 0:ze.user)?ze:null),(0,kP.R)(u.outsideAngular),(0,r1.Q)(u.insideAngular))}return(0,gi.pX)(this,X,a,{spy:{apply:(de,Ge,Ke)=>{(de.startsWith("signIn")||de.startsWith("createUser"))&&Ke.then(ot=>B.next(ot))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(gi.Dh),l.LFG(gi.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Yt.HU),l.LFG(QP,8),l.LFG(JP,8),l.LFG(XP,8),l.LFG(eO,8),l.LFG(tO,8),l.LFG(nO,8),l.LFG(xw,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),eB=(()=>{class n{constructor(){YP.Z.registerVersion("angularfire",Yt.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[d1]}),n})();function HN(n,e){return function(n,e=Iw.z){return new Un.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function iO(n,e){return HN(n,e).pipe((0,rt.U)(t=>({payload:t,type:"query"})))}function h1(n,e){return iO(n,e).pipe(d_(void 0),DP(),(0,rt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const _=i.find(I=>I.doc.ref.isEqual(u.ref)),w=null==t?void 0:t.payload.docs.find(I=>I.ref.isEqual(u.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(u.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),a}))}function zN(n,e,t){return h1(n,t).pipe(Gl((r,i)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return sO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return sO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return sO(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),hN(),(0,rt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function sO(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function GN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class WN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=h1(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,rt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(d_(void 0),DP(),ts(([r,i])=>i.length>0||!r),(0,rt.U)(([r,i])=>i),Yt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Gl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GN(e);return zN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yt.iC)}valueChanges(e={}){return iO(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Yt.iC)}get(e){return(0,tn.D)(this.query.get(e)).pipe(Yt.iC)}add(e){return this.ref.add(e)}doc(e){return new KN(this.ref.doc(e),this.afs)}}class KN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=YN(r,t);return new WN(i,a,this.afs)}snapshotChanges(){return function(n,e){return HN(n,e).pipe(d_(void 0),DP(),(0,rt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Yt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,rt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,tn.D)(this.ref.get(e)).pipe(Yt.iC)}}class sB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?h1(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ts(t=>t.length>0),Yt.iC):h1(this.query,this.afs.schedulers.outsideAngular).pipe(Yt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Gl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GN(e);return zN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yt.iC)}valueChanges(e={}){return iO(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Yt.iC)}get(e){return(0,tn.D)(this.query.get(e)).pipe(Yt.iC)}}const oB=new l.OlP("angularfire2.enableFirestorePersistence"),aB=new l.OlP("angularfire2.firestore.persistenceSettings"),lB=new l.OlP("angularfire2.firestore.settings"),cB=new l.OlP("angularfire2.firestore.use-emulator");function YN(n,e=(t=>t)){return{query:e(n),ref:n}}let uB=(()=>{class n{constructor(t,r,i,a,u,h,_,w,I,A,x,U,B,X,de,Ge,Ke){this.schedulers=_;const ot=(0,gi.on)(t,h,r),ze=I;A&&rO(ot,h,x,B,X,de,U,Ge),[this.firestore,this.persistenceEnabled$]=(0,gi.cc)(`${ot.name}.firestore`,"AngularFirestore",ot.name,()=>{const Gt=h.runOutsideAngular(()=>ot.firestore());if(a&&Gt.settings(a),ze&&Gt.useEmulator(...ze),i&&!Mr(u)){const kn=()=>{try{return(0,tn.D)(Gt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(lr){return"undefined"!=typeof console&&console.warn(lr),vt(!1)}};return[Gt,h.runOutsideAngular(kn)]}return[Gt,vt(!1)]},[a,ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=YN(i,r),h=this.schedulers.ngZone.run(()=>a);return new WN(h,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new sB(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new KN(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(gi.Dh),l.LFG(gi.xv,8),l.LFG(oB,8),l.LFG(lB,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Yt.HU),l.LFG(aB,8),l.LFG(cB,8),l.LFG(d1,8),l.LFG(QP,8),l.LFG(JP,8),l.LFG(XP,8),l.LFG(eO,8),l.LFG(tO,8),l.LFG(nO,8),l.LFG(xw,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const QN="firebasestorage.googleapis.com",JN="storageBucket";class Tr extends R.ZR{constructor(e,t){super(oO(e),`Firebase Storage: ${t} (${oO(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tr.prototype)}_codeEquals(e){return oO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function oO(n){return"storage/"+n}function aO(){return new Tr("unknown","An unknown error occurred, please check the error payload for server response.")}function XN(){return new Tr("canceled","User canceled the upload/download.")}function eF(){return new Tr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function mv(n){return new Tr("invalid-argument",n)}function tF(){return new Tr("app-deleted","The Firebase app was deleted.")}function nF(n){return new Tr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function kw(n,e){return new Tr("invalid-format","String does not match format '"+n+"': "+e)}function Rw(n){throw new Tr("internal-error","Internal error: "+n)}class As{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=As.makeFromUrl(e,t)}catch(i){return new As(e,"")}if(""===r.path)return r;throw function(n){return new Tr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(ze){ze.path_=decodeURIComponent(ze.path)}const A=t.replace(/[.]/g,"\\."),ot=[{regex:h,indices:{bucket:1,path:3},postModify:function(ze){"/"===ze.path.charAt(ze.path.length-1)&&(ze.path_=ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===QN?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let ze=0;ze<ot.length;ze++){const Gt=ot[ze],kn=Gt.regex.exec(e);if(kn){let lo=kn[Gt.indices.path];lo||(lo=""),r=new As(kn[Gt.indices.bucket],lo),Gt.postModify(r);break}}if(null==r)throw function(n){return new Tr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class IB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function f1(n){return"string"==typeof n||n instanceof String}function rF(n){return lO()&&n instanceof Blob}function lO(){return"undefined"!=typeof Blob}function cO(n,e,t,r){if(r<e)throw mv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw mv(`Invalid value for '${n}'. Expected ${t} or less.`)}function $d(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function iF(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var jf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(jf||(jf={})),jf))();class OB{constructor(e,t,r,i,a,u,h,_,w,I,A){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=I,this.connectionFactory_=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,U)=>{this.resolve_=x,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,u=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(h,h.getResponse());!function(n){return void 0!==n}(_)?a():a(_)}catch(_){u(_)}else if(null!==h){const _=aO();_.serverResponse=h.getErrorText(),u(this.errorCallback_?this.errorCallback_(h,_):_)}else u(i.canceled?this.appDelete_?tF():XN():new Tr("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new p1(!1,null,!0)):this.backoffId_=function(n,e,t){let r=1,i=null,a=null,u=!1,h=0;function _(){return 2===h}let w=!1;function I(...de){w||(w=!0,e.apply(null,de))}function A(de){i=setTimeout(()=>{i=null,n(U,_())},de)}function x(){a&&clearTimeout(a)}function U(de,...Ge){if(w)return void x();if(de)return x(),void I.call(null,de,...Ge);if(_()||u)return x(),void I.call(null,de,...Ge);let ot;r<64&&(r*=2),1===h?(h=2,ot=0):ot=1e3*(r+Math.random()),A(ot)}let B=!1;function X(de){B||(B=!0,x(),!w&&(null!==i?(de||(h=2),clearTimeout(i),A(0)):de||(h=1)))}return A(0),a=setTimeout(()=>{u=!0,X(!0)},t),X}((r,i)=>{if(i)return void r(!1,new p1(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const u=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const h=a.getErrorCode()===jf.NO_ERROR,_=a.getStatus();if(!h||this.isRetryStatusCode_(_)){const I=a.getErrorCode()===jf.ABORT;return void r(!1,new p1(!1,null,I))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new p1(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class p1{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function UB(...n){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(lO())return new Blob(n);throw new Tr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const la={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class uO{constructor(e,t){this.data=e,this.contentType=t||null}}function dO(n,e){switch(n){case la.RAW:return new uO(sF(e));case la.BASE64:case la.BASE64URL:return new uO(oF(n,e));case la.DATA_URL:return new uO(function(n){const e=new aF(n);return e.base64?oF(la.BASE64,e.rest):function(n){let e;try{e=decodeURIComponent(n)}catch(t){throw kw(la.DATA_URL,"Malformed data URL.")}return sF(e)}(e.rest)}(e),function(n){return new aF(n).contentType}(e))}throw aO()}function sF(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function oF(n,e){switch(n){case la.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw kw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case la.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw kw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(n){return atob(n)}(e)}catch(i){throw kw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class aF{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw kw(la.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class ou{constructor(e,t){let r=0,i="";rF(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(rF(this.data_)){const i=function(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ou(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ou(r,!0)}}static getBlob(...e){if(lO()){const t=e.map(r=>r instanceof ou?r.data_:r);return new ou(UB.apply(null,t))}{const t=e.map(u=>f1(u)?dO(la.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)i[a++]=u[h]}),new ou(i,!0)}}uploadData(){return this.data_}}function hO(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function lF(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function GB(n,e){return e}class io{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||GB}}let g1=null;function Nw(){if(g1)return g1;const n=[];n.push(new io("bucket")),n.push(new io("generation")),n.push(new io("metageneration")),n.push(new io("name","fullPath",!0));const t=new io("name");t.xform=function(a,u){return function(n){return!f1(n)||n.length<2?n:lF(n)}(u)},n.push(t);const i=new io("size");return i.xform=function(a,u){return void 0!==u?Number(u):u},n.push(i),n.push(new io("timeCreated")),n.push(new io("updated")),n.push(new io("md5Hash",null,!0)),n.push(new io("cacheControl",null,!0)),n.push(new io("contentDisposition",null,!0)),n.push(new io("contentEncoding",null,!0)),n.push(new io("contentLanguage",null,!0)),n.push(new io("contentType",null,!0)),n.push(new io("metadata","customMetadata",!0)),g1=n,g1}function cF(n,e,t){const r=hO(e);return null===r?null:function(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return function(n,e){Object.defineProperty(n,"ref",{get:function(){const a=new As(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function fO(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const uF="prefixes";class au{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function lu(n){if(!n)throw aO()}function m1(n,e){return function(r,i){const a=cF(n,i,e);return lu(null!==a),a}}function _v(n){return function(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new Tr("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Tr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(n){return new Tr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function(n){return new Tr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Fw(n){const e=_v(n);return function(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function(n){return new Tr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function hF(n,e,t){const i=$d(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new au(i,"GET",m1(n,t),u);return h.errorHandler=Fw(e),h}function n6(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=$d(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,I=new au(h,"GET",function(n,e){return function(r,i){const a=function(n,e,t){const r=hO(t);return null===r?null:function(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[uF])for(const i of t[uF]){const a=i.replace(/\/$/,""),u=n._makeStorageReference(new As(e,a));r.prefixes.push(u)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new As(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return lu(null!==a),a}}(n,e.bucket),w);return I.urlParams=a,I.errorHandler=_v(e),I}function pF(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function(n,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}class _1{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function pO(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){lu(!1)}return lu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const u6={STATE_CHANGED:"state_changed"},so={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function gO(n){switch(n){case"running":case"pausing":case"canceling":return so.RUNNING;case"paused":return so.PAUSED;case"success":return so.SUCCESS;case"canceled":return so.CANCELED;default:return so.ERROR}}class d6{constructor(e,t,r){if(function(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function yv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class f6 extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Rw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Rw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Rw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Rw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Rw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function ic(){return new f6}class yF{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Nw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u=pF(e,r,i),h={name:u.fullPath},_=$d(a,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},A=fO(u,t),B=new au(_,"POST",function(X){let de;pO(X);try{de=X.getResponseHeader("X-Goog-Upload-URL")}catch(Ge){lu(!1)}return lu(f1(de)),de},n.maxUploadRetryTime);return B.urlParams=h,B.headers=I,B.body=A,B.errorHandler=_v(e),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ic,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function(n,e,t,r){const _=new au(t,"POST",function(w){const I=pO(w,["active","final"]);let A=null;try{A=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch(U){lu(!1)}A||lu(!1);const x=Number(A);return lu(!isNaN(x)),new _1(x,r.size(),"final"===I)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=_v(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,ic,t,r);this._request=a,a.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new _1(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let u;try{u=function(n,e,t,r,i,a,u,h){const _=new _1(0,0);if(u?(_.current=u.current,_.total=u.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw new Tr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const w=_.total-_.current;let I=w;i>0&&(I=Math.min(I,i));const A=_.current,B={"X-Goog-Upload-Command":I===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},X=r.slice(A,A+I);if(null===X)throw eF();const ot=new au(t,"POST",function(ze,Gt){const kn=pO(ze,["active","final"]),lr=_.current+I,lo=r.size();let da;return da="final"===kn?m1(e,a)(ze,Gt):null,new _1(lr,lo,"final"===kn,da)},e.maxUploadRetryTime);return ot.headers=B,ot.body=X.uploadData(),ot.progressCallback=h||null,ot.errorHandler=_v(n),ot}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const h=this._ref.storage._makeRequest(u,ic,i,a);this._request=h,h.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=hF(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ic,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},_=function(){let ot="";for(let ze=0;ze<2;ze++)ot+=Math.random().toString().slice(2);return ot}();u["Content-Type"]="multipart/related; boundary="+_;const w=pF(e,r,i),I=fO(w,t),U=ou.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===U)throw eF();const B={name:w.fullPath},X=$d(a,n.host,n._protocol),Ge=n.maxUploadRetryTime,Ke=new au(X,"POST",m1(n,t),Ge);return Ke.urlParams=B,Ke.headers=u,Ke.body=U.uploadData(),Ke.errorHandler=_v(e),Ke}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ic,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=XN(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=gO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new d6(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(gO(this._state)){case so.SUCCESS:yv(this._resolve.bind(null,this.snapshot))();break;case so.CANCELED:case so.ERROR:yv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(gO(this._state)){case so.RUNNING:case so.PAUSED:e.next&&yv(e.next.bind(e,this.snapshot))();break;case so.SUCCESS:e.complete&&yv(e.complete.bind(e))();break;default:e.error&&yv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class nm{constructor(e,t){this._service=e,this._location=t instanceof As?t:As.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new nm(e,t)}get root(){const e=new As(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lF(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new As(this._location.bucket,e);return new nm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw nF(e)}}function CF(n,e,t){return mO.apply(this,arguments)}function mO(){return mO=(0,ie.Z)(function*(n,e,t){const i=yield wF(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield CF(n,e,i.nextPageToken))}),mO.apply(this,arguments)}function wF(n,e){null!=e&&"number"==typeof e.maxResults&&cO("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=n6(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ic)}function I6(n){n._throwIfRoot("getDownloadURL");const e=function(n,e,t){const i=$d(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new au(i,"GET",function(n,e){return function(r,i){const a=cF(n,i,e);return lu(null!==a),function(n,e,t,r){const i=hO(e);if(null===i||!f1(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const u=encodeURIComponent;return a.split(",").map(w=>{const A=n.fullPath;return $d("/b/"+u(n.bucket)+"/o/"+u(A),t,r)+iF({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),u);return h.errorHandler=Fw(e),h}(n.storage,n._location,Nw());return n.storage.makeRequestWithTokens(e,ic).then(t=>{if(null===t)throw new Tr("no-download-url","The given file does not have any download URLs.");return t})}function EF(n,e){const t=function(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new As(n._location.bucket,t);return new nm(n.storage,r)}function bF(n,e){if(n instanceof _O){const t=n;if(null==t._bucket)throw new Tr("no-default-bucket","No default bucket found. Did you set the '"+JN+"' property when initializing the app?");const r=new nm(t,t._bucket);return null!=e?bF(r,e):r}return void 0!==e?EF(n,e):n}function M6(n,e){if(e&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof _O)return function(n,e){return new nm(n,e)}(n,e);throw mv("To use ref(service, url), the first argument must be a Storage instance.")}return bF(n,e)}function TF(n,e){const t=null==e?void 0:e[JN];return null==t?null:As.makeFromBucketSpec(t,n)}class _O{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=QN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?As.makeFromBucketSpec(i,this._host):TF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?As.makeFromBucketSpec(this._url,e):TF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ie.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ie.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new nm(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new IB(tF());{const a=function(n,e,t,r,i,a){const u=iF(n.urlParams),h=n.url+u,_=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new OB(h,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,ie.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const IF="@firebase/storage";function SF(n,e){return M6(n=(0,R.m9)(n),e)}(0,is._registerComponent)(new na.wA("storage",function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new _O(t,r,i,e,is.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,is.registerVersion)(IF,"0.9.1",""),(0,is.registerVersion)(IF,"0.9.1","esm2017");class y1{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class MF{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new y1(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new y1(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?u=>t(new y1(u,this,this._ref)):{next:t.next?u=>t.next(new y1(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class PF{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Hd(e,this._service))}get items(){return this._delegate.items.map(e=>new Hd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Hd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(n,e){return EF(n,e)}(this._delegate,e);return new Hd(t,this.storage)}get root(){return new Hd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Hd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new MF(function(n,e,t){return function(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new yF(n,new ou(e),t)}(n=(0,R.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=la.RAW,r){this._throwIfRoot("putString");const i=dO(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new MF(new yF(this._delegate,new ou(i.data,!0),a),this)}listAll(){return function(n){return function(n){const e={prefixes:[],items:[]};return CF(n,e).then(()=>e)}(n=(0,R.m9)(n))}(this._delegate).then(e=>new PF(e,this.storage))}list(e){return function(n,e){return wF(n=(0,R.m9)(n),e)}(this._delegate,e||void 0).then(t=>new PF(t,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const e=hF(n.storage,n._location,Nw());return n.storage.makeRequestWithTokens(e,ic)}(n=(0,R.m9)(n))}(this._delegate)}updateMetadata(e){return function(n,e){return function(n,e){n._throwIfRoot("updateMetadata");const t=function(n,e,t,r){const a=$d(e.fullServerUrl(),n.host,n._protocol),h=fO(t,r),w=n.maxOperationRetryTime,I=new au(a,"PATCH",m1(n,r),w);return I.headers={"Content-Type":"application/json; charset=utf-8"},I.body=h,I.errorHandler=Fw(e),I}(n.storage,n._location,e,Nw());return n.storage.makeRequestWithTokens(t,ic)}(n=(0,R.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function(n){return I6(n=(0,R.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const e=function(n,e){const r=$d(e.fullServerUrl(),n.host,n._protocol),h=new au(r,"DELETE",function(_,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=Fw(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ic)}(n=(0,R.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw nF(e)}}class OF{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(xF(e))throw mv("ref() expected a child path but got a URL, use refFromURL instead.");return new Hd(SF(this._delegate,e),this)}refFromURL(e){if(!xF(e))throw mv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{As.makeFromUrl(e,this._delegate.host)}catch(t){throw mv("refFromUrl() expected a valid full URL but got an invalid one.")}return new Hd(SF(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function(n,e,t,r={}){!function(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,R.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function xF(n){return/^[A-Za-z]+:\/\//.test(n)}function H6(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new OF(t,r)}function kF(n){const e=function(n){return new Un.y(e=>{const t=u=>e.next(u);t(n.snapshot);const a=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){a()}}).pipe(function(n,e=Iw.z){return(0,Qr.e)((t,r)=>{let i=null,a=null,u=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=u+n,I=e.now();if(I<w)return i=this.schedule(void 0,w-I),void r.add(i);h()}t.subscribe(new Sn.Q(r,w=>{a=w,u=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,rt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function v1(n){return{getDownloadURL:()=>vt(void 0).pipe(Yt.fc,Hn(()=>n.getDownloadURL()),Yt.iC),getMetadata:()=>vt(void 0).pipe(Yt.fc,Hn(()=>n.getMetadata()),Yt.iC),delete:()=>(0,tn.D)(n.delete()),child:e=>v1(n.child(e)),updateMetadata:e=>(0,tn.D)(n.updateMetadata(e)),put:(e,t)=>kF(n.put(e,t)),putString:(e,t,r)=>kF(n.putString(e,t,r)),list:e=>(0,tn.D)(n.list(e)),listAll:()=>(0,tn.D)(n.listAll())}}!function(n){const e={TaskState:so,TaskEvent:u6,StringFormat:la,Storage:OF,Reference:Hd};n.INTERNAL.registerComponent(new na.wA("storage-compat",H6,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.9")}(SP.Z);const W6=new l.OlP("angularfire2.storageBucket"),K6=new l.OlP("angularfire2.storage.maxUploadRetryTime"),Y6=new l.OlP("angularfire2.storage.maxOperationRetryTime"),Q6=new l.OlP("angularfire2.storage.use-emulator");let C1=(()=>{class n{constructor(t,r,i,a,u,h,_,w,I,A){const x=(0,gi.on)(t,u,r);this.storage=(0,gi.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const U=u.runOutsideAngular(()=>x.storage(i||void 0)),B=I;return B&&U.useEmulator(...B),_&&U.setMaxUploadRetryTime(_),w&&U.setMaxOperationRetryTime(w),U},[_,w])}ref(t){return v1(this.storage.ref(t))}refFromURL(t){return v1(this.storage.refFromURL(t))}upload(t,r,i){return v1(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(gi.Dh),l.LFG(gi.xv,8),l.LFG(W6,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Yt.HU),l.LFG(K6,8),l.LFG(Y6,8),l.LFG(Q6,8),l.LFG(xw,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),J6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),X6=(()=>{class n{constructor(){YP.Z.registerVersion("angularfire",Yt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[C1],imports:[J6]}),n})(),ca=(()=>{class n{constructor(t,r){this.afs=t,this.afStore=r,this.levels=[],this.semesters=[],this.departments=[],this.faculties=[{faculty:"all",id:"all",active:!1,order:1},{faculty:"fmmt",id:"fmmt",active:!1,order:5},{faculty:"foe",id:"foe",active:!0,order:3},{faculty:"fges",id:"fges",active:!1,order:2},{faculty:"spets",id:"spets",active:!1,order:4}],this.programmes=[],this.files=[],this.courses=[],this.filter_Course={programme:"",programmes:[],faculties:[],semester:"",level:"",faculty:""},this.colorPallet=["#444746","#C2E7FF","#F1F5FB"],this.courseList=[],this.selectedCourses=[],this.selectedProgramme=this.programmes[0],this.selectedCourse={course:"",programmes:[],faculties:[],semester:"",level:"",image:"",fontColor:"",views:0,id:"",files:[],liked:!1},this.selectionMode="selection",this.editMode="selection",this.selectedProgrammeImage="../../../../assets/admin-header.png",this.selectedProgrammeImageFile="",this.imageChange=!1,this.previousImage="",this.uploadedFiles=[],this.uploadCounter=new Gs(0),this.level="",this.semester="",this.prog=""}resetCourse(){this.courseList=[],this.selectedCourses=[],this.selectedProgramme=this.programmes[0],this.selectedCourse={course:"",programmes:[],faculties:[],semester:"",level:"",image:"",fontColor:"",views:0,id:"",files:[],liked:!1},this.selectionMode="selection",this.editMode="selection",this.selectedProgrammeImage="../../../../assets/admin-header.png",this.selectedProgrammeImageFile="",this.filter_Course={programme:"",programmes:[],faculties:[],semester:"",level:"",faculty:""}}getLevels(){return this.afs.collection("levels",t=>t.orderBy("level","asc")).snapshotChanges()}setLevel(t){this.afs.collection("levels").add(t)}updateLevels(t){var r=this;return(0,ie.Z)(function*(){let i=0;yield r.afs.collection("levels").get().subscribe(function(u){u.forEach(function(h){h.ref.update(Object.assign({},t[i])),i++})})})()}deleteLevel(t){delete this.levels[t]}getSemesters(){return this.afs.collection("semesters",t=>t.orderBy("semester","asc")).snapshotChanges()}setSemester(t){this.afs.collection("semesters").add(t)}updateSemesters(t){var r=this;return(0,ie.Z)(function*(){let i=0;yield r.afs.collection("semesters").get().subscribe(function(a){a.forEach(function(u){u.ref.update(Object.assign({},t[i])),i++})})})()}deleteSemesters(t){delete this.semesters[t]}getFaculties(){return this.afs.collection("faculties",t=>t.orderBy("order","asc")).snapshotChanges()}setFaculties(t){var r=this;return(0,ie.Z)(function*(){const i=r.afs.collection("faculties");yield i.add(t).then(function(){var u=(0,ie.Z)(function*(h){yield i.doc(h.id).update({id:h.id})});return function(h){return u.apply(this,arguments)}}())})()}updateFaculties(t,r){this.faculties[t]=r}deleteFaculties(t){this.afs.collection("faculties").doc(t).delete()}getProgrammes(){return this.afs.collection("programmes").snapshotChanges()}setProgrammes(t){var r=this;return(0,ie.Z)(function*(){const i=r.afs.collection("programmes");yield i.add(t).then(function(){var u=(0,ie.Z)(function*(h){yield i.doc(h.id).update({id:h.id})});return function(h){return u.apply(this,arguments)}}())})()}updateProgrammes(t){var r=this;return(0,ie.Z)(function*(){yield r.afs.collection("programmes").doc(t.id).update(Object.assign({},t))})()}deleteProgrammes(t){var r=this;return(0,ie.Z)(function*(){yield r.afs.collection("programmes").doc(t).delete()})()}getCourses(){return this.afs.collection("courses").snapshotChanges()}setCourses(t){var r=this;return(0,ie.Z)(function*(){const i=r.afs.collection("courses");yield i.add(t).then(function(){var u=(0,ie.Z)(function*(h){yield i.doc(h.id).update({id:h.id})});return function(h){return u.apply(this,arguments)}}())})()}updateCourses(t){var r=this;return(0,ie.Z)(function*(){yield r.afs.collection("courses").doc(t.id).update(Object.assign({},t))})()}deleteCourses(t,r,i){var a=this;return(0,ie.Z)(function*(){yield a.afs.collection("courses").doc(t).delete(),i.length>0&&i.forEach(h=>{a.deleteDuplicateImage(h.url)}),a.deleteDuplicateImage(r)})()}getFiles(){return this.files}setFiles(t,r){this.afs.collection("courses").doc(t).update({files:dN(r)})}updateFiles(t,r,i,a){var u=this;return(0,ie.Z)(function*(){const h=yield u.afs.collection("courses").doc(t);yield h.update({files:uN({course:a.course,id:a.id,preview:a.preview,size:a.size,title:a.title,type:a.type,url:a.url})}).then(_=>{i.title=r,h.update({files:dN(i)})})})()}deleteFiles(t,r){var i=this;return(0,ie.Z)(function*(){(yield i.afs.collection("courses").doc(t)).update({files:uN({course:r.course,id:r.id,preview:r.preview,size:r.size,title:r.title,type:r.type,url:r.url})}).then(function(){var u=(0,ie.Z)(function*(h){yield i.deleteDuplicateImage(r.url)});return function(h){return u.apply(this,arguments)}}())})()}getColors(){return this.colorPallet}setColor(t){this.colorPallet.push(t)}filterCourses(t,r,i){this.level=t,this.semester=r,this.prog=i}getFilteredCourses(){return this.afs.collection("courses",t=>t.where("level","==",this.level).where("semester","==",this.semester).where("programmes","array-contains",this.prog)).snapshotChanges()}deleteDuplicateImage(t){var r=this;return(0,ie.Z)(function*(){(yield r.afStore.refFromURL(t)).delete().subscribe(()=>{})})()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(uB),l.LFG(C1))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function e5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",32),l.NdJ("click",function(){const a=l.CHM(t).$implicit,u=l.oxw();return u.toogleLevel(a.id),u.filter_Course.level=a.level}),l._uU(1),l.qZA()}if(2&n){const t=e.$implicit;l.vpz("border: 1px solid ",t.borderColor,"; color: ",t.fontColor,""),l.Q6J("id",t.id),l.xp6(1),l.hij(" ",t.level," ")}}function t5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",33),l.NdJ("click",function(){const a=l.CHM(t).$implicit,u=l.oxw();return u.toogleLevel(a.id,u.semesters),u.filter_Course.semester=a.semester}),l._uU(1),l.qZA()}if(2&n){const t=e.$implicit;l.vpz("border: 1px solid ",t.borderColor,"; color: ",t.fontColor,""),l.Q6J("id",t.id),l.xp6(1),l.hij(" Semester ",t.semester," ")}}function n5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",34),l.NdJ("click",function(){return l.CHM(t),l.oxw().done()}),l._uU(1," Done "),l.qZA()}}function r5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"span",35),l.NdJ("click",function(){const a=l.CHM(t).$implicit,u=l.oxw();return u.getCourses(a.faculty,a.id,a),u.toggleFaculty()}),l._uU(1),l.qZA()}if(2&n){const t=e.$implicit;l.ekj("active",t.active)("inactive",!t.active),l.Q6J("id",t.id),l.xp6(1),l.hij(" ",t.faculty.toUpperCase()," ")}}function i5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",36),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().onclickCourse(a)}),l._uU(1),l.qZA()}if(2&n){const t=e.$implicit;l.vpz("\n                         border:  1px solid  ",t.fontColor,";\n                       color: ",t.fontColor,";\n                       \n                    "),l.Q6J("id",t.id),l.xp6(1),l.hij(" ",t.programme," ")}}let yO=(()=>{class n{constructor(t,r,i){this.router=t,this.dataService=r,this.activatedRoute=i,this.levels=[],this.semesters=[],this.faculties=[],this.programmes=[],this.filter_Course={programme:"",programmes:[],faculties:[],semester:"",level:"",faculty:""},this.programmesList=[],this.levelsubscribed="",this.semestersubscribed="",this.toggle_menu=!1,this.toggle_faculties=!1,this.routeParameter="",this.createRouteParameter="",this.timer="",this.counter=0,this.levelBtns=[],this.selectionList=[],this.selectedFaculty="All"}ngOnInit(){this.levelsubscribed=this.dataService.getLevels().subscribe(t=>{this.levels=t.map(r=>Object.assign({},r.payload.doc.data()))}),this.semestersubscribed=this.dataService.getSemesters().subscribe(t=>{this.semesters=t.map(r=>Object.assign({},r.payload.doc.data()))}),this.semestersubscribed=this.dataService.getProgrammes().subscribe(t=>{this.programmes=t.map(r=>Object.assign({},r.payload.doc.data()))}),this.semestersubscribed=this.dataService.getFaculties().subscribe(t=>{this.faculties=t.map(r=>Object.assign({},r.payload.doc.data())),"selection"==this.routeParameter?(this.setSelectedLevel(),this.setSelectedSemester(),this.setSelectedProgrammes(),this.displayHeader()):this.getCourses("foe",0,this.faculties[0])}),this.routeParameter=this.activatedRoute.snapshot.paramMap.get("selection"),this.createRouteParameter=this.activatedRoute.snapshot.paramMap.get("mode"),this.dataService.editMode=this.createRouteParameter,this.displayHeader(),this.getCourses("foe",0,this.faculties[0]),this.toogleFaculties("foe"),"selection"==this.routeParameter&&this.faculties.forEach(t=>{t.active=!1})}ngAfterViewInit(){}displayHeader(){const t=document.getElementById("header");t&&"selection"!==this.routeParameter&&(t.style.display="block")}setSelectedLevel(){this.levels.forEach((t,r)=>{t.level==this.dataService.selectedCourse.level&&(this.toogleLevel(t.id),this.filter_Course.level=t.level)})}setSelectedSemester(){this.semesters.forEach((t,r)=>{t.semester==this.dataService.selectedCourse.semester&&(this.toogleLevel(t.id,this.semesters),this.filter_Course.semester=t.semester)})}setSelectedProgrammes(){this.programmes.forEach((t,r)=>{this.dataService.selectedCourse.programmes.forEach(i=>{t.programme==i&&(this.onclickCourse(t),this.filter_Course.programmes.push(t.programme))})})}getCourses(t="foe",r=4,i){"selection"!=this.routeParameter?this.toogleFaculties(t):"all"!=i.faculty&&this.toogleFaculties(i),this.programmesList=[],t&&"all"!=t?this.programmes.forEach(a=>{a.faculty.toLowerCase()==t.toLowerCase()&&this.programmesList.push(a)}):this.programmesList=this.programmes}toogleFaculties(t="foe"){"selection"!=this.routeParameter?this.singleSelectFaculty(t):this.multiselectFaculties(t)}singleSelectFaculty(t){this.faculties.forEach(r=>{r.faculty.toLowerCase()==t.toLowerCase()?(r.active=!0,this.selectedFaculty=r.faculty.toUpperCase(),this.filter_Course.faculty=t):r.active=!1})}multiselectFaculties(t){0==t.active?(this.filter_Course.faculties.push(t.faculty),this.faculties.forEach(r=>{r.faculty.toLowerCase()==t.faculty.toLowerCase()&&(r.active=!0)})):(this.filter_Course.faculties=this.filter_Course.faculties.filter(r=>r!=t.faculty),this.faculties.forEach(r=>{r.faculty.toLowerCase()===t.faculty.toLowerCase()&&(r.active=!1,document.getElementById(t.id))}))}toggleFaculty(){this.toggle_faculties=!this.toggle_faculties}toogleLevel(t,r=this.levels){let i;this.levelBtns=[],r.forEach(a=>{this.levelBtns.push(document.getElementById(a.id)),a.id===t&&(i=a.bgColor)}),this.levelBtns.forEach(a=>{a.style.backgroundColor="white",a.style.fontWeight="normal"}),this.switchLevel(t,i)}switchLevel(t,r){const i=document.getElementById(t);i&&(i.style.backgroundColor=r,i.style.fontWeight="bold")}onclickCourse(t){const r=document.getElementById(t.id);if(this.filter_Course.programme=t.programme,"selection"===this.routeParameter){this.multiSelection(t);let i=document.getElementById("done-btn");i&&(i.style.display="block")}else this.singleSelection(r,t);this.validateSelection()}singleSelection(t,r){t&&(t.style.fontWeight="bold",t.style.backgroundColor=r.bgColor,t.style.border="1px solid "+r.fontColor),this.programmes.forEach(i=>{const a=document.getElementById(i.id);a&&i.id!=r.id&&(a.style.fontWeight="normal",a.style.backgroundColor="white",a.style.border="1px solid "+r.fontColor)})}multiSelection(t){let r=document.getElementById(t.id);r&&(t.selected?(r.style.fontWeight="normal",r.style.backgroundColor="white",r.style.border="1px solid "+t.fontColor,this.filter_Course.programmes=this.filter_Course.programmes.filter(i=>i!=t.programme),this.programmes.forEach(i=>{i.id===t.id&&(i.selected=!1)})):(r.style.fontWeight="bold",r.style.backgroundColor=t.bgColor,r.style.border="1px solid "+t.fontColor,this.filter_Course.programmes.push(t.programme),this.programmes.forEach(i=>{i.id===t.id&&(i.selected=!0)})))}validateSelection(){this.filter_Course.level.length>0&&this.filter_Course.semester.length>0&&this.filter_Course.programme.length>0&&"selection"!==this.routeParameter&&(this.dataService.filterCourses(this.filter_Course.level,this.filter_Course.semester,this.filter_Course.programme),"filter-programmes"===this.routeParameter?this.router.navigate(["admin/folders","selection"]):this.navMainPage())}filterProgrammes(){let t=0;this.filter_Course.programmes.forEach(r=>{t=this.filter_Course.programmes.filter(i=>i==r),t.length>1&&(this.filter_Course.programmes[this.filter_Course.programmes.indexOf(r)]=" ")}),this.filter_Course.programmes=this.filter_Course.programmes.filter(r=>" "!=r),this.dataService.filter_Course=this.filter_Course,this.dataService.selectedCourse.programmes=this.filter_Course.programmes}done(){this.filterProgrammes(),this.router.navigate("edit"==this.dataService.editMode?["admin-page","create-course","edit"]:["admin-page","create-course","create"])}toCourses(t){this.router.navigate(["courses",t])}navLogin(){this.router.navigate(["login"])}navMainPage(){this.router.navigate(["main-page"])}toggleMenu(t=!1){this.toggle_menu=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xn),l.Y36(ca),l.Y36(xi))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-course-home"]],decls:37,vars:5,consts:[["id","main-container",1,"main-container"],["id","header",1,"header"],[1,"header-darker"],[1,"wrapper"],[1,"back-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","44.432","height","42.714","viewBox","0 0 44.432 42.714"],["id","icon_","data-name","icon ","transform","translate(-5.813 -5.6)"],["id","Rectangle_7","data-name","Rectangle 7","width","41.777","height","7","rx","3.5","transform","translate(8.468 23.018)","fill"," #444746"],["id","Rectangle_77","data-name","Rectangle 77","width","30","height","7","rx","3.5","transform","translate(5.813 26.813) rotate(-45)","fill"," #444746"],["id","Rectangle_78","data-name","Rectangle 78","width","30","height","7","rx","3.5","transform","translate(27.113 48.314) rotate(-135)","fill"," #444746"],[1,"library"],[1,"more-btn",3,"click"],["id","Kebab_icon","data-name","Kebab icon","xmlns","http://www.w3.org/2000/svg","width","10","height","50","viewBox","0 0 10 50"],["id","Rectangle_53","data-name","Rectangle 53","width","10","height","10","rx","5","transform","translate(10 40) rotate(90)","fill"," #444746"],["id","Rectangle_50","data-name","Rectangle 50","width","10","height","10","rx","5","transform","translate(10 20) rotate(90)","fill"," #444746"],["id","Rectangle_51","data-name","Rectangle 51","width","10","height","10","rx","5","transform","translate(10) rotate(90)","fill"," #444746"],[1,"body-container"],[1,"title-text"],[1,"select-level-text"],[1,"levels"],["class","level",3,"id","style","click",4,"ngFor","ngForOf"],[1,"select-course-p"],[1,"semester"],["class","sem",3,"id","style","click",4,"ngFor","ngForOf"],[1,"select-course"],[1,"title-area"],[1,"title"],["class","done-button","id","done-btn",3,"click",4,"ngIf"],[1,"faculties"],[3,"id","active","inactive","click",4,"ngFor","ngForOf"],[1,"courses"],["class","course course-item",3,"style","id","click",4,"ngFor","ngForOf"],[1,"level",3,"id","click"],[1,"sem",3,"id","click"],["id","done-btn",1,"done-button",3,"click"],[3,"id","click"],[1,"course","course-item",3,"id","click"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.NdJ("click",function(){return r.navLogin()}),l.O4$(),l.TgZ(5,"svg",5),l.TgZ(6,"g",6),l._UZ(7,"rect",7),l._UZ(8,"rect",8),l._UZ(9,"rect",9),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(10,"div",10),l._uU(11,"Library"),l.qZA(),l.TgZ(12,"div",11),l.NdJ("click",function(){return r.toggleMenu(!0)}),l.O4$(),l.TgZ(13,"svg",12),l._UZ(14,"rect",13),l._UZ(15,"rect",14),l._UZ(16,"rect",15),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(17,"div",16),l.TgZ(18,"p",17),l._uU(19," Make Course Selections "),l.qZA(),l.TgZ(20,"p",18),l._uU(21,"Select your Level"),l.qZA(),l.TgZ(22,"div",19),l.YNc(23,e5,2,6,"div",20),l.qZA(),l.TgZ(24,"p",21),l._uU(25,"Select your semester"),l.qZA(),l.TgZ(26,"div",22),l.YNc(27,t5,2,6,"div",23),l.qZA(),l.TgZ(28,"div",24),l.TgZ(29,"div",25),l.TgZ(30,"div",26),l._uU(31,"Select your programme "),l.YNc(32,n5,2,0,"button",27),l.qZA(),l.TgZ(33,"div",28),l.YNc(34,r5,2,6,"span",29),l.qZA(),l.qZA(),l.TgZ(35,"div",30),l.YNc(36,i5,2,6,"div",31),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(23),l.Q6J("ngForOf",r.levels),l.xp6(4),l.Q6J("ngForOf",r.semesters),l.xp6(5),l.Q6J("ngIf","selection"==r.routeParameter),l.xp6(2),l.Q6J("ngForOf",r.faculties),l.xp6(2),l.Q6J("ngForOf",r.programmesList))},directives:[Sr,tr],styles:['.main-container[_ngcontent-%COMP%]{@import"https://fonts.googleapis.com/css2?family=Fira+Sans:wght@100&display=swap";font-family:"Fira Sans",sans-serif!important}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:none;background-position:center;background-repeat:no-repeat;background-size:cover;position:sticky;position:-webkit-sticky;top:0}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{background-color:#ffffff4d;border-radius:50%;width:35px;height:35px;text-align:center;margin-top:0;z-index:100005645435555540}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:15px;height:15px;margin-top:10px;margin-bottom:auto;z-index:100005645435555540}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-darker[_ngcontent-%COMP%]{background-color:#f1f5fb;margin-top:0;padding:.5em}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;padding-bottom:0;margin-bottom:0}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{margin-left:auto}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .library[_ngcontent-%COMP%]{margin-left:20px;margin-top:7px;font-size:20px;font-weight:bold;color:#444746}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .library[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{opacity:1;display:block}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]{padding:0 1em 1em;margin-top:0}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{font-size:25px;font-weight:10px;padding:0;margin:20px 0 0}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-level-text[_ngcontent-%COMP%]{font-size:16px}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-level-text[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10px}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-course-p[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:10px;font-size:16px}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .levels[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;grid-template-rows:auto auto;grid-gap:10px;gap:10px;margin-top:10px}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .levels[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{text-align:center;padding:17px;border-radius:50px;border:1px solid black}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .courses[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .semester[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:10px;gap:10px;text-align:center;justify-content:center;width:100%;margin-left:0;margin-right:0}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .courses[_ngcontent-%COMP%]   .course[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .courses[_ngcontent-%COMP%]   .sem[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .semester[_ngcontent-%COMP%]   .course[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .semester[_ngcontent-%COMP%]   .sem[_ngcontent-%COMP%]{padding:17px;border-radius:50px;width:50%;margin-left:auto;margin-right:auto}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-course[_ngcontent-%COMP%]{margin-top:2em}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-course[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:-20px;font-size:16px!important}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-course[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:7px;font-size:17.5px;display:flex}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-course[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .done-button[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-course[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;padding:10px;width:100px;margin-top:-10px;margin-left:auto;border:1px solid black;border-radius:50px;display:none}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-course[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .faculties[_ngcontent-%COMP%]{display:flex;flex-direction:row;grid-gap:15px;gap:15px;margin-bottom:35px;margin-top:10px;overflow-x:scroll}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-course[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .faculties[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid black;border-radius:50px;width:50px;text-align:center;padding:10px 20px}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-course[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#f5e2e2;font-size:16px;font-weight:bold;border-radius:5px;padding:10px;border:1px solid #BD2A22!important;color:#bd2a22}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-course[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#f5e2e2;font-size:16px;font-weight:bold;border-radius:5px;color:#bd2a22;padding:10px;border:1px solid #BD2A22!important}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-course[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]{background-color:#fff!important;border:1px solid black!important;color:#000!important;font-weight:normal!important}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-course[_ngcontent-%COMP%]   .courses[_ngcontent-%COMP%]{margin-top:.5em;overflow-y:scroll;overflow-x:hidden}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-course[_ngcontent-%COMP%]   .courses[_ngcontent-%COMP%]   .course[_ngcontent-%COMP%]{width:89%}.main-container[_ngcontent-%COMP%]   .body-container[_ngcontent-%COMP%]   .select-course[_ngcontent-%COMP%]   .courses[_ngcontent-%COMP%]   .course-item[_ngcontent-%COMP%]{border:1px solid #DD90AA;color:#dd90aa}.back-btn[_ngcontent-%COMP%], .more-btn[_ngcontent-%COMP%], .more[_ngcontent-%COMP%], .level[_ngcontent-%COMP%], .sem[_ngcontent-%COMP%]:hover{cursor:pointer}']}),n})(),s5=(()=>{class n{constructor(t){this.router=t,this.observable=Un.y.create(r=>{try{r.next("hey guys"),r.next("how are you?"),r.complete()}catch(i){r.error(i)}})}ngOnInit(){this.observable.subscribe(t=>this.addItem(t),t=>this.addItem(t),()=>this.addItem("Completed"))}addItem(t){var r;let i=document.createElement("li"),a=document.createTextNode(t);i.appendChild(a),i.classList.add("li"),i.style.padding="20px",i.style.backgroundColor="white",i.style.marginBottom="20px",null===(r=document.getElementById("output"))||void 0===r||r.appendChild(i)}navHome(){this.router.navigate(["home"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login"]],decls:19,vars:0,consts:[[1,"main_container"],[1,"login_section"],[1,"header_area"],[1,"logo"],[1,"account_section"],[1,"account",3,"click"],["src","../../../assets/job-details-sm-1.jpg","alt",""],[1,"name"],["src","../../../assets/me.png","alt",""],["src","../../../assets/pexels-anna-shvets-3771643.jpg","alt",""]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l._UZ(3,"div",3),l.qZA(),l.TgZ(4,"h2"),l._uU(5,"Continue as:"),l.qZA(),l.TgZ(6,"div",4),l.TgZ(7,"div",5),l.NdJ("click",function(){return r.navHome()}),l._UZ(8,"img",6),l.TgZ(9,"div",7),l._uU(10,"Michael"),l.qZA(),l.qZA(),l.TgZ(11,"div",5),l.NdJ("click",function(){return r.navHome()}),l._UZ(12,"img",8),l.TgZ(13,"div",7),l._uU(14,"Seth "),l.qZA(),l.qZA(),l.TgZ(15,"div",5),l.NdJ("click",function(){return r.navHome()}),l._UZ(16,"img",9),l.TgZ(17,"div",7),l._uU(18,"Derick"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA())},styles:['.li[_ngcontent-%COMP%]{padding:20px;background-color:#fff;margin-bottom:5px}.main_container[_ngcontent-%COMP%]{font-family:"Arial";background-color:#ececec;width:100%;height:100%}.main_container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:20px}.main_container[_ngcontent-%COMP%]   .li[_ngcontent-%COMP%]{padding:20px;background-color:#fff!important;margin-bottom:5px;color:red}.main_container[_ngcontent-%COMP%]   .login_section[_ngcontent-%COMP%]{width:60%;padding:0 1em 1px;box-shadow:5px 5px #f6fbff,-3px -3px #f6fbff;border-radius:10px;margin-top:53%;margin-left:auto;margin-right:auto}.main_container[_ngcontent-%COMP%]   .login_section[_ngcontent-%COMP%]   .header_area[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:80px;margin-top:-1em;margin-left:-20px;padding-left:0}.main_container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:bold;font-family:"SF UI Text"}.main_container[_ngcontent-%COMP%]   .account_section[_ngcontent-%COMP%]   .account[_ngcontent-%COMP%]{display:flex;grid-gap:30px;gap:30px;margin-bottom:20px}.main_container[_ngcontent-%COMP%]   .account_section[_ngcontent-%COMP%]   .account[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;image-rendering:crisp-edges;image-rendering:-moz-crisp-edges;image-rendering:-o-crisp-edges;image-rendering:-webkit-optimize-contrast}.main_container[_ngcontent-%COMP%]   .account_section[_ngcontent-%COMP%]   .account[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-top:5px}.main_container[_ngcontent-%COMP%]   .account_section[_ngcontent-%COMP%]   .account[_ngcontent-%COMP%]:hover{cursor:pointer}']}),n})();function o5(n,e){1&n&&(l.O4$(),l.TgZ(0,"svg",43),l.TgZ(1,"defs"),l.TgZ(2,"style"),l._uU(3," .cls-3 { fill: #444746; } "),l.qZA(),l.qZA(),l._UZ(4,"path",44),l.qZA())}function a5(n,e){1&n&&(l.O4$(),l.TgZ(0,"svg",45),l.TgZ(1,"defs"),l.TgZ(2,"style"),l._uU(3," .cls-3 { fill: #444746; } "),l.qZA(),l.qZA(),l._UZ(4,"path",46),l.qZA())}function l5(n,e){1&n&&(l.O4$(),l.TgZ(0,"svg",55),l._UZ(1,"path",56),l.qZA())}function c5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",49),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw(2).detailsView(a)}),l._UZ(1,"img",50),l.TgZ(2,"div",51),l.TgZ(3,"div",52),l._uU(4),l.qZA(),l.qZA(),l.TgZ(5,"div",53),l.YNc(6,l5,2,0,"svg",54),l.qZA(),l.qZA()}if(2&n){const t=e.$implicit;l.vpz("\n                         border:  1.5px solid  ",t.fontColor,";\n                       color: ",t.fontColor,"\n                    "),l.xp6(1),l.Q6J("src",t.image,l.LSH),l.xp6(3),l.hij(" ",t.course," "),l.xp6(2),l.Q6J("ngIf",null==t?null:t.liked)}}function u5(n,e){if(1&n&&(l.TgZ(0,"div",47),l.YNc(1,c5,7,7,"div",48),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Q6J("ngForOf",t.courses)}}function d5(n,e){1&n&&(l.TgZ(0,"div",53),l.O4$(),l.TgZ(1,"svg",55),l._UZ(2,"path",56),l.qZA(),l.qZA())}function h5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",49),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw(2).detailsView(a)}),l.TgZ(1,"div",58),l.YNc(2,d5,3,0,"div",59),l.qZA(),l.TgZ(3,"div",52),l._uU(4),l.qZA(),l.qZA()}if(2&n){const t=e.$implicit;l.vpz(" border:  1px solid  ",t.fontColor,"; color: ",t.fontColor,"; "),l.xp6(1),l.Jzz('background-image: url("',t.image,'"); background-position: center;background-repeat: no-repeat;background-size: cover;'),l.xp6(1),l.Q6J("ngIf",null==t?null:t.liked),l.xp6(2),l.Oqu(t.course)}}function f5(n,e){if(1&n&&(l.TgZ(0,"div",57),l.YNc(1,h5,5,9,"div",48),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Q6J("ngForOf",t.courses)}}const p5=function(){return["/main-page"]};let RF=(()=>{class n{constructor(t,r){this.router=t,this.dataService=r,this.courses=[],this.grid_view=!1,this.grid_text="Grid View",this.toggle_menu=!1}ngOnInit(){this.dataService.getFilteredCourses().subscribe(t=>{this.courses=t.map(r=>Object.assign({},r.payload.doc.data()))})}changeView(){this.grid_view=!this.grid_view,this.grid_text=this.grid_view?"List View":"Grid View"}navLogin(){this.router.navigate(["home","",""])}navMainPage(){this.router.navigate(["main-page"])}toggleMenu(t=!1){this.toggle_menu=t}detailsView(t){this.dataService.selectedCourse=t,this.router.navigate(["/details"])}adminPage(){this.router.navigate(["admin-page"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xn),l.Y36(ca))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-main-page"]],decls:65,vars:7,consts:[[1,"main-container"],["id","header",1,"header"],[1,"header-darker"],[1,"wrapper"],[1,"back-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","44.432","height","42.714","viewBox","0 0 44.432 42.714"],["id","icon_","data-name","icon ","transform","translate(-5.813 -5.6)"],["id","Rectangle_7","data-name","Rectangle 7","width","41.777","height","7","rx","3.5","transform","translate(8.468 23.018)","fill","#444746"],["id","Rectangle_77","data-name","Rectangle 77","width","30","height","7","rx","3.5","transform","translate(5.813 26.813) rotate(-45)","fill","#444746"],["id","Rectangle_78","data-name","Rectangle 78","width","30","height","7","rx","3.5","transform","translate(27.113 48.314) rotate(-135)","fill","#444746"],[1,"library"],[1,"more-btn",3,"click"],["id","Kebab_icon","data-name","Kebab icon","xmlns","http://www.w3.org/2000/svg","width","10","height","50","viewBox","0 0 10 50"],["id","Rectangle_53","data-name","Rectangle 53","width","10","height","10","rx","5","transform","translate(10 40) rotate(90)","fill","#444746"],["id","Rectangle_50","data-name","Rectangle 50","width","10","height","10","rx","5","transform","translate(10 20) rotate(90)","fill","#444746"],["id","Rectangle_51","data-name","Rectangle 51","width","10","height","10","rx","5","transform","translate(10) rotate(90)","fill","#444746"],[1,"body"],[1,"news-section"],[1,"courses-section"],[1,"top"],[1,"grid-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","33.044","height","33.045","viewBox","0 0 33.044 33.045",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","41.933","height","34","viewBox","0 0 41.933 34",4,"ngIf"],["class","courses",4,"ngIf"],["class","grid-view",4,"ngIf"],[1,"footer"],[1,"mask"],["routerLinkActive","router-link-active",1,"home",3,"routerLink"],[1,"fill-icon"],["xmlns","http://www.w3.org/2000/svg","width","70.588","height","60","viewBox","0 0 70.588 60"],["d","M30.235,63V41.824H44.353V63H62V34.765H72.588L37.294,3,2,34.765H12.588V63Z","transform","translate(-2 -3)",1,"a"],[1,"favorites"],["xmlns","http://www.w3.org/2000/svg","width","65.395","height","60","viewBox","0 0 65.395 60"],["id","favicon_inactive","data-name","favicon inactive","transform","translate(-3875 -2715.95)"],["id","favicon","d","M34.7,63l-4.741-4.316C13.117,43.414,2,33.343,2,20.984A17.809,17.809,0,0,1,19.984,3,19.581,19.581,0,0,1,34.7,9.834,19.581,19.581,0,0,1,49.411,3,17.809,17.809,0,0,1,67.4,20.984c0,12.36-11.117,22.431-27.956,37.733Z","transform","translate(3873 2712.95)",1,"cls-1"],[1,"upload",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","90","height","60","viewBox","0 0 90 60"],["id","upload_inactive","data-name","upload inactive","transform","translate(-3830 -2899)"],["id","ic_cloud_upload_24px","d","M72.563,26.65a28.1,28.1,0,0,0-52.5-7.5A22.491,22.491,0,0,0,22.5,64H71.25a18.7,18.7,0,0,0,1.313-37.35ZM52.5,37.75v15h-15v-15H26.25L45,19,63.75,37.75Z","transform","translate(3830 2895)",1,"cls-1"],[1,"settings"],["xmlns","http://www.w3.org/2000/svg","width","58.363","height","60","viewBox","0 0 58.363 60"],["id","settings_icon_inactive","data-name","settings icon inactive","transform","translate(-3925.638 -2716)"],["id","ic_settings_24px","d","M53.749,34.94a23.378,23.378,0,0,0,.21-2.94,23.379,23.379,0,0,0-.21-2.94l6.33-4.95a1.514,1.514,0,0,0,.36-1.92l-6-10.38a1.508,1.508,0,0,0-1.83-.66l-7.47,3a21.918,21.918,0,0,0-5.07-2.94l-1.14-7.95A1.463,1.463,0,0,0,37.459,2h-12a1.463,1.463,0,0,0-1.47,1.26l-1.14,7.95a23.049,23.049,0,0,0-5.07,2.94l-7.47-3a1.463,1.463,0,0,0-1.83.66l-6,10.38a1.479,1.479,0,0,0,.36,1.92l6.33,4.95A23.792,23.792,0,0,0,8.959,32a23.792,23.792,0,0,0,.21,2.94l-6.33,4.95a1.514,1.514,0,0,0-.36,1.92l6,10.38a1.508,1.508,0,0,0,1.83.66l7.47-3a21.918,21.918,0,0,0,5.07,2.94l1.14,7.95A1.463,1.463,0,0,0,25.459,62h12a1.463,1.463,0,0,0,1.47-1.26l1.14-7.95a23.049,23.049,0,0,0,5.07-2.94l7.47,3a1.463,1.463,0,0,0,1.83-.66l6-10.38a1.514,1.514,0,0,0-.36-1.92ZM31.459,42.5A10.5,10.5,0,1,1,41.959,32,10.512,10.512,0,0,1,31.459,42.5Z","transform","translate(3923.367 2714)",1,"cls-1"],["xmlns","http://www.w3.org/2000/svg","width","33.044","height","33.045","viewBox","0 0 33.044 33.045"],["id","grid_view_icon","data-name","grid view icon","d","M21.174,33.045a3,3,0,0,1-3-3v-8.87a3,3,0,0,1,3-3h8.87a3,3,0,0,1,3,3v8.87a3,3,0,0,1-3,3ZM3,33.045a3,3,0,0,1-3-3v-8.87a3,3,0,0,1,3-3h8.87a3,3,0,0,1,3,3v8.87a3,3,0,0,1-3,3ZM21.174,14.871a3,3,0,0,1-3-3V3a3,3,0,0,1,3-3h8.87a3,3,0,0,1,3,3v8.87a3,3,0,0,1-3,3ZM3,14.871a3,3,0,0,1-3-3V3A3,3,0,0,1,3,0h8.87a3,3,0,0,1,3,3v8.87a3,3,0,0,1-3,3Z",1,"cls-3"],["xmlns","http://www.w3.org/2000/svg","width","41.933","height","34","viewBox","0 0 41.933 34"],["id","list_view_icon","data-name","list view icon","d","M5.9,18.1a3.4,3.4,0,1,0,3.4,3.4A3.4,3.4,0,0,0,5.9,18.1Zm0-13.6A3.4,3.4,0,1,0,9.3,7.9,3.4,3.4,0,0,0,5.9,4.5Zm0,27.2a3.4,3.4,0,1,0,3.4,3.4A3.41,3.41,0,0,0,5.9,31.7Zm6.8,5.667H44.433V32.833H12.7Zm0-13.6H44.433V19.233H12.7Zm0-18.133v4.533H44.433V5.633Z","transform","translate(-2.5 -4.5)",1,"cls-3"],[1,"courses"],["class","course-card",3,"style","click",4,"ngFor","ngForOf"],[1,"course-card",3,"click"],["alt","",3,"src"],[1,"wrap"],[1,"desc"],[1,"like"],["xmlns","http://www.w3.org/2000/svg","width","27.248","height","25","viewBox","0 0 27.248 25",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","27.248","height","25","viewBox","0 0 27.248 25"],["id","favicon","d","M15.624,28l-1.975-1.8C6.632,19.839,2,15.643,2,10.493A7.42,7.42,0,0,1,9.493,3a8.159,8.159,0,0,1,6.131,2.847A8.159,8.159,0,0,1,21.755,3a7.42,7.42,0,0,1,7.493,7.493c0,5.15-4.632,9.346-11.649,15.722Z","transform","translate(-2 -3)","fill","#bd2a22"],[1,"grid-view"],[1,"image"],["class","like",4,"ngIf"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.NdJ("click",function(){return r.navLogin()}),l.O4$(),l.TgZ(5,"svg",5),l.TgZ(6,"g",6),l._UZ(7,"rect",7),l._UZ(8,"rect",8),l._UZ(9,"rect",9),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(10,"div",10),l._uU(11,"Home"),l.qZA(),l.TgZ(12,"div",11),l.NdJ("click",function(){return r.toggleMenu(!0)}),l.O4$(),l.TgZ(13,"svg",12),l._UZ(14,"rect",13),l._UZ(15,"rect",14),l._UZ(16,"rect",15),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(17,"div",16),l._UZ(18,"div",17),l.TgZ(19,"div",18),l.TgZ(20,"div",19),l.TgZ(21,"div",20),l.NdJ("click",function(){return r.changeView()}),l.YNc(22,o5,5,0,"svg",21),l.YNc(23,a5,5,0,"svg",22),l.TgZ(24,"div"),l._uU(25),l.qZA(),l.qZA(),l.qZA(),l.YNc(26,u5,2,1,"div",23),l.YNc(27,f5,2,1,"div",24),l.qZA(),l.qZA(),l.TgZ(28,"div",25),l.TgZ(29,"div",26),l.TgZ(30,"a",27),l.TgZ(31,"span",28),l.O4$(),l.TgZ(32,"svg",29),l.TgZ(33,"defs"),l.TgZ(34,"style"),l._uU(35," .a { } "),l.qZA(),l.qZA(),l._UZ(36,"path",30),l.qZA(),l.qZA(),l._uU(37," Home "),l.qZA(),l.kcU(),l.TgZ(38,"a",31),l.TgZ(39,"span",28),l.O4$(),l.TgZ(40,"svg",32),l.TgZ(41,"defs"),l.TgZ(42,"style"),l._uU(43," .cls-1 {} "),l.qZA(),l.qZA(),l.TgZ(44,"g",33),l._UZ(45,"path",34),l.qZA(),l.qZA(),l.qZA(),l._uU(46," Favorites"),l.qZA(),l.kcU(),l.TgZ(47,"a",35),l.NdJ("click",function(){return r.adminPage()}),l.TgZ(48,"span",28),l.O4$(),l.TgZ(49,"svg",36),l.TgZ(50,"defs"),l.TgZ(51,"style"),l._uU(52," .cls-1 { } "),l.qZA(),l.qZA(),l.TgZ(53,"g",37),l._UZ(54,"path",38),l.qZA(),l.qZA(),l.qZA(),l._uU(55," Upload"),l.qZA(),l.kcU(),l.TgZ(56,"a",39),l.TgZ(57,"span",28),l.O4$(),l.TgZ(58,"svg",40),l.TgZ(59,"defs"),l.TgZ(60,"style"),l._uU(61," .cls-1 { } "),l.qZA(),l.qZA(),l.TgZ(62,"g",41),l._UZ(63,"path",42),l.qZA(),l.qZA(),l.qZA(),l._uU(64," Settings"),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(22),l.Q6J("ngIf",!r.grid_view),l.xp6(1),l.Q6J("ngIf",r.grid_view),l.xp6(2),l.hij(" ",r.grid_text," "),l.xp6(1),l.Q6J("ngIf",!r.grid_view),l.xp6(1),l.Q6J("ngIf",r.grid_view),l.xp6(3),l.Q6J("routerLink",l.DdM(6,p5)))},directives:[tr,Js,Qb,Sr],styles:['.main-container[_ngcontent-%COMP%]{font-family:"Fira Sans",sans-serif!important}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:cover;position:sticky!important;position:-webkit-sticky!important;top:0;transition:.3s}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{background-color:#ffffff4d;border-radius:50%;width:35px;height:35px;text-align:center;margin-top:0;z-index:100005645435555540}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:15px;height:15px;margin-top:10px;margin-bottom:auto;z-index:100005645435555540}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-darker[_ngcontent-%COMP%]{background-color:#f1f5fb;color:#444746;margin-top:0;padding:6px .5em}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{margin-left:auto}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .library[_ngcontent-%COMP%]{color:#444746!important;margin-left:20px;margin-top:7px;font-size:20px;font-weight:bold}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .library.more-btn[_ngcontent-%COMP%]{opacity:1}.main-container[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{overflow-x:hidden}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]{padding:0 1em 1em}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;padding-top:1em;justify-content:center}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .grid-btn[_ngcontent-%COMP%]{margin-left:auto;border-radius:50px;border:1px solid black;padding:8px;width:100px;display:flex;justify-content:space-evenly;font-size:15px}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .grid-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:12px;height:12px;margin-right:10px;margin-top:3px}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .grid-btn[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex-shrink:0;flex-wrap:nowrap}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .courses[_ngcontent-%COMP%]{margin-top:20px;padding:0}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:30% 60% 10%;width:100%;grid-column-gap:0px;padding:0;margin-bottom:34px;border-radius:20px}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]{border-left:0px!important;margin-top:auto;margin-bottom:auto;padding-right:10px}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-top-left-radius:20px;border-bottom-left-radius:20px;height:100px;margin-left:0}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .like[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{margin-left:30px;width:50%;font-size:19px}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .like[_ngcontent-%COMP%]{margin-left:auto;display:none;margin-right:10px}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .courses[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .like[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:3px;width:12px}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .grid-view[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;grid-gap:20px;margin-top:30px}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .grid-view[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]{text-align:center;border-radius:20px;padding:0}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .grid-view[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:100%;height:100px;border-top-left-radius:18px;border-top-right-radius:18px;margin-top:-.1px;display:flex}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .grid-view[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   .like[_ngcontent-%COMP%]{margin-left:auto;margin-right:20px;margin-top:10px;background-color:#fff;width:20px;height:20px;border-radius:50%;text-align:center;display:none}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .grid-view[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   .like[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-1.8px;width:12px}.main-container[_ngcontent-%COMP%]   .courses-section[_ngcontent-%COMP%]   .grid-view[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{padding:10px}.main-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:fixed;width:100%;position:-webkit-sticky;bottom:0;background-image:url("Homepage image - uhall.42bcc07d8b4cfe21.png");background-position:center;background-repeat:no-repeat;background-size:cover}.main-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;padding-top:1em;padding-bottom:.5em}.main-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-align:center;display:flex;flex-direction:column;text-decoration:none;padding:0;margin:0}.main-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin:0 auto 10px;width:40px;height:20px;fill:#fff;background-color:transparent;padding:0}.main-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{font-weight:bold}.main-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .fill-icon[_ngcontent-%COMP%]{background-color:#fff;border-radius:20px;padding:2px 5px 1px;width:50px;margin-bottom:8px}.main-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .fill-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:0;padding-bottom:0;fill:#e47046}.main-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .router-link-active[_ngcontent-%COMP%]{font-weight:bold}.main-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .router-link-active[_ngcontent-%COMP%]   .fill-icon[_ngcontent-%COMP%]{background-color:#fff;border-radius:20px;padding:2px 5px 1px;width:50px;margin-bottom:8px;margin-top:-2px}.main-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .router-link-active[_ngcontent-%COMP%]   .fill-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:0;padding-bottom:0;fill:#e47046}']}),n})();function g5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",11),l.TgZ(1,"div",12),l.TgZ(2,"div",13),l.TgZ(3,"div",14),l._uU(4," Confirm Delete "),l.TgZ(5,"img",15),l.NdJ("click",function(){return l.CHM(t),l.oxw().cancelRename()}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"div",16),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return i.deleteBook(i.selectedBook)}),l._uU(7," Delete "),l.qZA(),l.qZA(),l.qZA()}}function m5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",17),l.TgZ(1,"div",12),l.TgZ(2,"div",13),l.TgZ(3,"div",14),l._uU(4," New Name "),l.TgZ(5,"img",15),l.NdJ("click",function(){return l.CHM(t),l.oxw().cancelRename()}),l.qZA(),l.qZA(),l.TgZ(6,"input",18),l.NdJ("ngModelChange",function(i){return l.CHM(t),l.oxw().rename=i}),l.qZA(),l.qZA(),l.TgZ(7,"div",19),l.TgZ(8,"img",20),l.NdJ("click",function(){return l.CHM(t),l.oxw().renameFiles()}),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=l.oxw();l.xp6(6),l.Q6J("ngModel",t.rename)}}function _5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",21),l._UZ(1,"img",22),l.TgZ(2,"div",23),l.TgZ(3,"div",24),l.TgZ(4,"p",25),l._uU(5),l.qZA(),l.TgZ(6,"span",26),l._uU(7),l.qZA(),l.qZA(),l._UZ(8,"div"),l.O4$(),l.TgZ(9,"svg",27),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().modelDisplay(a)}),l._UZ(10,"rect",28),l._UZ(11,"rect",29),l._UZ(12,"rect",30),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=e.$implicit,r=l.oxw();l.xp6(1),l.Q6J("src",t.preview,l.LSH),l.xp6(4),l.Oqu(t.title),l.xp6(2),l.Oqu(r.formatBytes(t.size))}}let y5=(()=>{class n{constructor(t){this.dataService=t,this.title="",this.rename="",this.showpop=!1,this.showpop2=!1}ngOnInit(){}modelDisplay(t){this.title=t.title,this.selectedBook=t;const r=document.getElementById("popup-model");null==r||r.classList.add("display"),null==r||r.classList.remove("hidemodel");const i=document.getElementById("request-bg");i&&(i.setAttribute("display","block"),i.classList.add("activeRequest"))}modelDismiss(){const t=document.getElementById("popup-model");null==t||t.classList.add("hidemodel")}renameFile(){this.modelDismiss(),this.rename=this.title,this.showpop=!0}renameFiles(){let t="";this.data.forEach(r=>{r.url==this.selectedBook.url&&(t=r)}),0!=this.rename.length&&this.dataService.updateFiles(this.bookId,this.rename,t,this.selectedBook),this.showpop=!1}cancelRename(){this.showpop=!1,this.showpop2=!1}confirmDelete(){this.showpop2=!0,this.modelDismiss()}deleteBook(t,r=this.bookId){this.showpop2=!1;let i="",a=[];this.data.forEach(u=>{u.url==t.url&&(i=u)}),i.url&&this.dataService.deleteFiles(r,i).then(u=>{this.data.forEach(h=>{h.title!=t.title&&a.push(h)}),this.data=a})}formatBytes(t,r=2){if(0===t)return"0 Bytes";const a=r<0?0:r,h=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,h)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][h]}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ca))},n.\u0275cmp=l.Xpm({type:n,selectors:[["books-view"]],inputs:{data:"data",bookId:"bookId"},decls:31,vars:4,consts:[["class"," pallet2","id","pallet2",4,"ngIf"],["class","color-pallet","id","color-pallet",4,"ngIf"],["class","book-card",4,"ngFor","ngForOf"],["id","popup-model",1,"popup-model"],[1,"head"],["src","../../../assets/lib.jpg","alt",""],["src","../../../assets/admin-icons/close icon.svg","alt","",1,"close",3,"click"],[1,"group"],[1,"button"],["src","../../../assets/icons/favicon inactive.svg","alt",""],[1,"button",3,"click"],["id","pallet2",1,"pallet2"],[1,"color-card"],[1,"color-code"],["id","title"],["src","../../../assets//admin-icons/close icon.svg","alt","",3,"click"],[1,"add",3,"click"],["id","color-pallet",1,"color-pallet"],[3,"ngModel","ngModelChange"],[1,"add"],["src","../../../assets/admin-icons/Plus icon.svg","alt","",3,"click"],[1,"book-card"],[1,"image",3,"src"],[1,"info"],[1,"desc"],[1,"title"],[1,"size"],["id","Kebab_icon","data-name","Kebab icon","xmlns","http://www.w3.org/2000/svg","width","10","height","50","viewBox","0 0 10 50",3,"click"],["id","Rectangle_53","data-name","Rectangle 53","width","10","height","10","rx","5","transform","translate(10 40) rotate(90)"],["id","Rectangle_50","data-name","Rectangle 50","width","10","height","10","rx","5","transform","translate(10 20) rotate(90)"],["id","Rectangle_51","data-name","Rectangle 51","width","10","height","10","rx","5","transform","translate(10) rotate(90)"]],template:function(t,r){1&t&&(l.YNc(0,g5,8,0,"div",0),l.YNc(1,m5,9,1,"div",1),l.YNc(2,_5,13,3,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l._UZ(5,"img",5),l.TgZ(6,"span"),l._uU(7),l.qZA(),l.TgZ(8,"img",6),l.NdJ("click",function(){return r.modelDismiss()}),l.qZA(),l.qZA(),l.TgZ(9,"div",7),l.TgZ(10,"div",8),l._UZ(11,"img",9),l.TgZ(12,"span"),l._uU(13,"Add to homescreen"),l.qZA(),l.qZA(),l.TgZ(14,"div",8),l._UZ(15,"img",9),l.TgZ(16,"span"),l._uU(17,"Add to copylink"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(18,"div",7),l.TgZ(19,"div",10),l.NdJ("click",function(){return r.renameFile()}),l._UZ(20,"img",9),l.TgZ(21,"span"),l._uU(22,"Rename"),l.qZA(),l.qZA(),l.TgZ(23,"div",8),l._UZ(24,"img",9),l.TgZ(25,"span"),l._uU(26,"Move"),l.qZA(),l.qZA(),l.TgZ(27,"div",10),l.NdJ("click",function(){return r.confirmDelete()}),l._UZ(28,"img",9),l.TgZ(29,"span"),l._uU(30,"Delete"),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.Q6J("ngIf",r.showpop2),l.xp6(1),l.Q6J("ngIf",r.showpop),l.xp6(1),l.Q6J("ngForOf",r.data),l.xp6(5),l.Oqu(null==r.selectedBook?null:r.selectedBook.title))},directives:[tr,Sr,oi,Kr,Ai],styles:[".book-card[_ngcontent-%COMP%]{display:flex;grid-gap:1em;gap:1em;padding:.5em}.book-card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:17%;border-radius:10px;height:70px;background-position:center;background-size:cover;background-repeat:no-repeat}.book-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;width:80%;padding-bottom:20px;border-bottom:1px solid #878787;margin-top:auto;margin-bottom:auto;color:#000}.book-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2px;font-size:17px}.book-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#8d8d8d;margin-top:-10px}.book-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-left:auto;width:10px;height:20px;margin-top:auto;margin-bottom:auto;padding-right:10px;padding-top:10px;fill:#8d8d8d}.popup-model[_ngcontent-%COMP%]{display:none;position:fixed;background-color:#fff;top:auto;bottom:0;padding-top:1em;border-top:1px solid #8D8D8D;border-radius:15px;width:100%;z-index:10677888879798;animation-duration:.2s;animation-name:transormPopModel;animation-direction:normal;animation-fill-mode:forwards}.popup-model[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;font-weight:bold;padding:1em;border-bottom:1px solid #8D8D8D}.popup-model[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;height:30px;margin-right:20px;border-radius:5px}.popup-model[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.popup-model[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{margin-left:auto;width:20px;margin-right:10px}.popup-model[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{border-bottom:1px solid #8D8D8D}.popup-model[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:flex;font-weight:bold;padding:1em}.popup-model[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;margin-right:20px}.popup-model[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.popup-model[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-color:#add8e6}@keyframes transormPopModel{0%{height:0%}to{height:44%}}@keyframes hidePopModel{0%{height:44%}to{height:0%;opacity:0}}.display[_ngcontent-%COMP%]{display:block}.hidemodel[_ngcontent-%COMP%]{animation-duration:.2s;animation-name:hidePopModel;animation-direction:normal;animation-fill-mode:forwards}.show-pallet[_ngcontent-%COMP%]{opacity:1!important;z-index:947555555555555500000000!important}.pallet2[_ngcontent-%COMP%], .color-pallet[_ngcontent-%COMP%]{position:absolute;margin-top:15%;margin-left:40px;background-color:#fff;width:80%}.pallet2[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%], .color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]{box-shadow:1px 1px 1px 2px #d2d2d2;border-radius:10px;padding:15px}.pallet2[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%], .color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]{background-color:#dfdfdf;border:1px solid #D2D2D2;border-radius:10px;font-size:10px}.pallet2[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%], .color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]{display:flex;font-size:15px;padding:10px;background-color:#fff;border-top-left-radius:10px;border-top-right-radius:10px}.pallet2[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:auto;height:13px;margin-right:8px}.pallet2[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:98.8%;height:40px;background-color:#dfdfdf;border:none;border-bottom-left-radius:10px;border-bottom-right-radius:10px;padding-top:10px;text-align:center;font-size:16px;text-align:left;font-weight:bold}.pallet2[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, .pallet2[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, .color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border:none}.pallet2[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%], .color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{display:flex;padding-top:1.3em;justify-content:flex-end}.pallet2[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%], .color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{color:red}.pallet2[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background-color:#dfdfdf;padding:9px;border-radius:10px;width:15px;height:15px;margin-right:10px}.pallet2[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{justify-content:center;color:red}"]}),n})(),v5=(()=>{class n{constructor(t,r){this.router=t,this.dataService=r,this.course={},this.bgImage="",this.title="",this.views=0,this.id="",this.coursematerials=[],this.books=[],this.sliders=["slide-1","slide-2","slide-3"]}ngOnInit(){this.course=this.dataService.selectedCourse,this.bgImage=this.course.image,this.title=this.course.course,this.views=this.course.views,this.id=this.course.id,this.coursematerials=this.course.files,this.slide(0,"all")}tooglePanes(t){this.books=[],"all"===t?this.books=this.coursematerials:this.coursematerials.forEach(r=>{r.id==t&&this.books.push(r)})}slide(t,r){let i=[];this.tooglePanes(r),this.sliders.forEach((a,u)=>{i.push(document.getElementById(a)),i[u].classList.remove("active")}),i[t].classList.add("active")}back(){this.router.navigate(["main-page"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xn),l.Y36(ca))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-details"]],decls:30,vars:6,consts:[[1,"main-container"],["id","header",1,"header"],[1,"header-darker"],[1,"dark-bg"],[1,"wrapper"],[1,"back-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","44.432","height","42.714","viewBox","0 0 44.432 42.714"],["id","icon_","data-name","icon ","transform","translate(-5.813 -5.6)"],["id","Rectangle_7","data-name","Rectangle 7","width","41.777","height","7","rx","3.5","transform","translate(8.468 23.018)","fill","#444746"],["id","Rectangle_77","data-name","Rectangle 77","width","30","height","7","rx","3.5","transform","translate(5.813 26.813) rotate(-45)","fill","#444746"],["id","Rectangle_78","data-name","Rectangle 78","width","30","height","7","rx","3.5","transform","translate(27.113 48.314) rotate(-135)","fill","#444746"],[1,"library"],[1,"more-btn"],["id","Kebab_icon","data-name","Kebab icon","xmlns","http://www.w3.org/2000/svg","width","10","height","50","viewBox","0 0 10 50"],["id","Rectangle_53","data-name","Rectangle 53","width","10","height","10","rx","5","transform","translate(10 40) rotate(90)","fill","#444746"],["id","Rectangle_50","data-name","Rectangle 50","width","10","height","10","rx","5","transform","translate(10 20) rotate(90)","fill","#444746"],["id","Rectangle_51","data-name","Rectangle 51","width","10","height","10","rx","5","transform","translate(10) rotate(90)","fill","#444746"],[1,"navigation"],["id","slide-1",3,"click"],["id","slide-2",3,"click"],["id","slide-3",3,"click"],[1,"book-list-section"],[3,"data","bookId"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.TgZ(5,"div",5),l.NdJ("click",function(){return r.back()}),l.O4$(),l.TgZ(6,"svg",6),l.TgZ(7,"g",7),l._UZ(8,"rect",8),l._UZ(9,"rect",9),l._UZ(10,"rect",10),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(11,"div",11),l._uU(12),l.qZA(),l.TgZ(13,"div",12),l.O4$(),l.TgZ(14,"svg",13),l._UZ(15,"rect",14),l._UZ(16,"rect",15),l._UZ(17,"rect",16),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(18,"div",17),l.TgZ(19,"div",18),l.NdJ("click",function(){return r.slide(0,"all")}),l._uU(20," All "),l._UZ(21,"span"),l.qZA(),l.TgZ(22,"div",19),l.NdJ("click",function(){return r.slide(1,"passco")}),l._uU(23," Past Questions "),l._UZ(24,"span"),l.qZA(),l.TgZ(25,"div",20),l.NdJ("click",function(){return r.slide(2,"textbook")}),l._uU(26," Text Books "),l._UZ(27,"span"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(28,"div",21),l._UZ(29,"books-view",22),l.qZA(),l.qZA()),2&t&&(l.xp6(2),l.Jzz(" background-image: url('",r.bgImage,"');"),l.xp6(10),l.Oqu(r.title),l.xp6(17),l.Q6J("data",r.books)("bookId",r.id))},directives:[y5],styles:['.main-container[_ngcontent-%COMP%]{padding:0;margin:0;overflow-x:hidden;@import"https://fonts.googleapis.com/css2?family=Fira+Sans:wght@100&display=swap";font-family:"Fira Sans",sans-serif!important}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:100005645435555540}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{background-color:#ffffff4d;border-radius:50%;width:35px;height:35px;text-align:center;margin-top:0;z-index:100005645435555540}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:15px;height:15px;margin-top:10px;margin-bottom:auto;z-index:100005645435555540}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-darker[_ngcontent-%COMP%]{background-color:#f1f5fb;background-position:center;background-repeat:no-repeat;background-size:cover}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dark-bg[_ngcontent-%COMP%]{background-color:#f1f5fb;margin-top:0;padding:.5em}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;padding-bottom:0;margin-bottom:0}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{margin-left:auto}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .library[_ngcontent-%COMP%]{margin-left:20px;margin-top:8px;font-size:16px;font-weight:bold;color:#444746}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .library[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{opacity:1;display:block}.main-container[_ngcontent-%COMP%]   .navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;grid-gap:1em;gap:1em;overflow-x:scroll;color:#a0a0a0;font-weight:700px;font-size:17px;padding-top:20px;box-shadow:1px 1px #000;z-index:5487458475878;z-index:-5667565556555;background-color:#fff}.main-container[_ngcontent-%COMP%]   .navigation[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;text-align:center;margin-bottom:0}.main-container[_ngcontent-%COMP%]   .navigation[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:2px 30px;border-top-left-radius:10px;border-top-right-radius:10px;margin-top:10px;margin-bottom:-1.5px}.main-container[_ngcontent-%COMP%]   .navigation[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#000}.main-container[_ngcontent-%COMP%]   .navigation[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#000}.main-container[_ngcontent-%COMP%]   .active-tab[_ngcontent-%COMP%]{display:block}.main-container[_ngcontent-%COMP%]   .inactive-tab[_ngcontent-%COMP%]{display:none}.main-container[_ngcontent-%COMP%]   .book-list-section[_ngcontent-%COMP%]{margin-top:20px}']}),n})();function C5(n,e){1&n&&(l.TgZ(0,"span",6),l._uU(1,"- cancelled!!!"),l.qZA())}function w5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"img",7),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return i.task.cancel(),i.cancelled=!0}),l.qZA()}}function E5(n,e){1&n&&l._UZ(0,"img",8)}let b5=(()=>{class n{constructor(){this.progressChange=1,this.title="",this.percent=1,this.progressWidth=0,this.cancelled=!1}ngOnInit(){this.calcProgress(),window.onresize=()=>{this.resizeLoadingBar()},this.timer=window.setInterval(()=>{this.loadProgress()},100)}loadProgress(){const t=document.getElementById(this.title);this.progressChange<=100?(this.percent=this.progressChange*this.progressWidth,t&&(t.style.padding="10px",t.style.width=`${this.percent}px`)):window.clearImmediate(this.timer)}calcProgress(){const t=document.getElementById("uploadsbar");t&&(this.progressWidth=t.clientWidth/100)}resizeLoadingBar(){const t=document.getElementById("uploadsbar");if(100==this.progressChange){const r=document.getElementById(this.title);r&&t&&(r.style.width=`${t.clientWidth}px`)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-upload-task"]],inputs:{progressChange:"progressChange",title:"title",task:"task"},decls:8,vars:10,consts:[["id","uploadsbar",1,"uploads"],[1,"loading",3,"id"],[1,"loader"],["class","cancel",4,"ngIf"],["src","../../../assets/admin-icons/close icon.svg","alt","",3,"click",4,"ngIf"],["src","../../../assets/admin-icons/done icon.svg","alt","","class","complete",4,"ngIf"],[1,"cancel"],["src","../../../assets/admin-icons/close icon.svg","alt","",3,"click"],["src","../../../assets/admin-icons/done icon.svg","alt","",1,"complete"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l._UZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"span"),l._uU(4),l.YNc(5,C5,2,0,"span",3),l.qZA(),l.YNc(6,w5,1,0,"img",4),l.YNc(7,E5,1,0,"img",5),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.Jzz("width:",r.percent,""),l.Udp("width",r.percent),l.Q6J("id",r.title),l.xp6(3),l.hij("",r.title," "),l.xp6(1),l.Q6J("ngIf",r.cancelled),l.xp6(1),l.Q6J("ngIf",100!=r.progressChange),l.xp6(1),l.Q6J("ngIf",100==r.progressChange))},directives:[tr],styles:[".uploads[_ngcontent-%COMP%]{margin-top:20px;width:95%;margin-right:10px}.uploads[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{background-color:#dfdfdf;padding:0;position:absolute;width:0px;height:22px;margin-top:-1px;margin-right:40%;z-index:-57566754765767}.uploads[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{z-index:6785788546453453;display:flex;font-size:14px;padding:10px;background:transparent;margin-bottom:10px;width:100%;height:20px}.uploads[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:3px}.uploads[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:auto;width:13px}.uploads[_ngcontent-%COMP%]   .complete[_ngcontent-%COMP%]{height:13px;margin-top:-3px;background-color:#fff;border-radius:50%;padding:7px;margin-right:-3px}.cancel[_ngcontent-%COMP%]{color:red}"]}),n})(),T5=(()=>{class n{constructor(t,r){this.dataService=t,this.afStorage=r,this.docId="",this.path="",this.downloadURL=""}ngOnInit(){this.uploadCourse()}uploadCourse(){const t=this.file,r=`/${this.path}/${Date.now()}_${t.name}`;this.ref=this.afStorage.ref(r),this.task=this.ref.put(t),this.uploadProgress=this.task.percentageChanges(),this.task.snapshotChanges().pipe(p_(()=>{this.downloadURL=this.ref.getDownloadURL(),this.downloadURL.subscribe(i=>{this.fileItem.url=i,this.dataService.uploadedFiles.push(i),this.dataService.uploadCounter.next(this.dataService.uploadedFiles.length),this.dataService.setFiles(this.docId,this.fileItem)})})).subscribe()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ca),l.Y36(C1))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-progress"]],inputs:{file:"file",docId:"docId",path:"path",fileItem:"fileItem"},decls:2,vars:5,consts:[[3,"progressChange","title","task"]],template:function(t,r){1&t&&(l._UZ(0,"app-upload-task",0),l.ALo(1,"async")),2&t&&l.Q6J("progressChange",l.lcZ(1,3,r.uploadProgress))("title",r.fileItem.title)("task",r.task)},directives:[b5],pipes:[vu],styles:[""]}),n})();function I5(n,e){if(1&n&&l._UZ(0,"app-progress",23),2&n){const t=e.$implicit;l.Q6J("file",t.file)("docId",t.docId)("path",t.path)("fileItem",t.progFile)}}function A5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",24),l.NdJ("click",function(){return l.CHM(t),l.oxw().selectFile()}),l._uU(1,"Add Files"),l.qZA()}}function D5(n,e){if(1&n&&(l.TgZ(0,"option",25),l._uU(1),l.qZA()),2&n){const t=e.$implicit;l.Q6J("value",t.course),l.xp6(1),l.Oqu(t.course)}}let S5=(()=>{class n{constructor(t){this.dataService=t,this.courses=[],this.fileItems=[],this.files=[],this.filesCount=0,this.uploadCount=0,this.docId="",this.folder="",this.multiple=!0,this.makeUpload=!1}ngOnInit(){this.dataService.getCourses().subscribe(t=>{this.courses=t.map(r=>Object.assign({},r.payload.doc.data()))}),this.dataService.uploadCounter.subscribe(t=>{this.uploadCount=t,console.log(t)})}selectFile(){let t=document.getElementById("file-input");t&&t.click()}chooseFiles(t){let r="";if(r=t.target,r){for(let i=0;i<r.files.length;i++)this.files.push(r.files[i]);this.filesCount=this.files.length}this.dataService.uploadedFiles=[]}upload(t){let r={title:"",url:"",course:"",size:0,type:"",id:"",preview:""};r.title=t.name.split(".")[0],r.size=t.size,r.type=t.name.split(".")[1],r.course=this.selectedCourse,r.id=this.folder,this.fileItems.push({progFile:r,file:t,path:this.folder,docId:this.docId})}uploadFiles(){this.makeUpload=!0;for(let t=0;t<this.files.length;t++)this.upload(this.files[t]);this.makeUpload=!1,this.files=[]}getCourseId(){this.courses.forEach(t=>{t.course==this.selectedCourse&&(this.docId=t.id)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ca))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-upload-files"]],decls:39,vars:7,consts:[[1,"main-container"],[1,"info-title"],[1,"upload-count"],[1,"selection-area"],[3,"file","docId","path","fileItem",4,"ngFor","ngForOf"],["type","file","multiple","","accept",".pptx, .docx, .pdf","id","file-input",1,"file-input",3,"change"],[3,"click",4,"ngIf"],[1,"course-card"],[1,"title"],[1,"icon"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 30 30"],["id","close_icon","data-name","close icon","d","M35,8.021,31.979,5,20,16.979,8.021,5,5,8.021,16.979,20,5,31.979,8.021,35,20,23.021,31.979,35,35,31.979,23.021,20Z","transform","translate(-5 -5)"],["name","selection","id","","list","courses",3,"ngModel","ngModelChange","change"],["id","courses"],[3,"value",4,"ngFor","ngForOf"],["name","selection","id","","list","folders",3,"ngModel","ngModelChange","change"],["id","folders"],["value","textbook"],["value","passco"],[1,"upload-btn",3,"click"],["id","upload_icon_states","data-name","upload icon states","xmlns","http://www.w3.org/2000/svg","width","60","height","40","viewBox","0 0 60 40"],["id","upload_inactive","data-name","upload inactive"],["id","ic_cloud_upload_24px","d","M48.375,19.1a18.731,18.731,0,0,0-35-5A14.994,14.994,0,0,0,15,44H47.5a12.464,12.464,0,0,0,.875-24.9ZM35,26.5v10H25v-10H17.5L30,14,42.5,26.5Z","transform","translate(0 -4)","fill","#1539eb"],[3,"file","docId","path","fileItem"],[3,"click"],[3,"value"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"span"),l._uU(3,"Select File(s) "),l.qZA(),l.TgZ(4,"span",2),l._uU(5),l.qZA(),l.qZA(),l.TgZ(6,"div",3),l.YNc(7,I5,1,4,"app-progress",4),l.TgZ(8,"input",5),l.NdJ("change",function(a){return r.chooseFiles(a)}),l.qZA(),l.YNc(9,A5,2,0,"button",6),l.TgZ(10,"div",7),l.TgZ(11,"div",8),l.TgZ(12,"span"),l._uU(13,"Course"),l.qZA(),l.TgZ(14,"div",9),l.O4$(),l.TgZ(15,"svg",10),l._UZ(16,"path",11),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(17,"input",12),l.NdJ("ngModelChange",function(a){return r.selectedCourse=a})("change",function(){return r.getCourseId()}),l.qZA(),l.TgZ(18,"datalist",13),l.YNc(19,D5,2,2,"option",14),l.qZA(),l.qZA(),l.TgZ(20,"div",7),l.TgZ(21,"div",8),l.TgZ(22,"span"),l._uU(23,"Folder"),l.qZA(),l.TgZ(24,"div",9),l.O4$(),l.TgZ(25,"svg",10),l._UZ(26,"path",11),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(27,"input",15),l.NdJ("ngModelChange",function(a){return r.folder=a})("change",function(){return r.getCourseId()}),l.qZA(),l.TgZ(28,"datalist",16),l.TgZ(29,"option",17),l._uU(30,"Textbook"),l.qZA(),l.TgZ(31,"option",18),l._uU(32,"Passco"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(33,"div",19),l.NdJ("click",function(){return r.uploadFiles()}),l.O4$(),l.TgZ(34,"svg",20),l.TgZ(35,"g",21),l._UZ(36,"path",22),l.qZA(),l.qZA(),l.kcU(),l.TgZ(37,"p"),l._uU(38,"Publish"),l.qZA(),l.qZA()),2&t&&(l.xp6(5),l.AsE("",r.uploadCount," of ",r.filesCount," uploaded"),l.xp6(2),l.Q6J("ngForOf",r.fileItems),l.xp6(2),l.Q6J("ngIf",0!=r.folder.length&&0!=r.selectedCourse.length),l.xp6(8),l.Q6J("ngModel",r.selectedCourse),l.xp6(2),l.Q6J("ngForOf",r.courses),l.xp6(8),l.Q6J("ngModel",r.folder))},directives:[Sr,tr,oi,Kr,Ai,km,Ip,T5],styles:[".main-container[_ngcontent-%COMP%]{padding:2em 1em 1em}.main-container[_ngcontent-%COMP%]   .info-title[_ngcontent-%COMP%]{display:flex}.main-container[_ngcontent-%COMP%]   .info-title[_ngcontent-%COMP%]   .upload-count[_ngcontent-%COMP%]{margin-left:auto;color:#6915eb;font-size:13px}.main-container[_ngcontent-%COMP%]   .selection-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;width:100%;border:none;padding:10px;border-radius:5px;color:#000;box-shadow:1px 1px 1px 2px #ececf9}.main-container[_ngcontent-%COMP%]   .selection-area[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]{margin-top:20px;border:1px solid #ECECF9;box-shadow:1px 1px 1px #ececf9;background-color:#dfdfdf;border-radius:16px}.main-container[_ngcontent-%COMP%]   .selection-area[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;background-color:#fff;padding:15px;border-top-left-radius:10px;border-top-right-radius:10px}.main-container[_ngcontent-%COMP%]   .selection-area[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:auto}.main-container[_ngcontent-%COMP%]   .selection-area[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:13px;height:13px}.main-container[_ngcontent-%COMP%]   .selection-area[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:95%;padding-top:20px;padding-bottom:20px;background-color:#dfdfdf;border:none;border-bottom-left-radius:10px;border-bottom-right-radius:10px;padding-left:15px;font-size:17px}.main-container[_ngcontent-%COMP%]   .selection-area[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .main-container[_ngcontent-%COMP%]   .selection-area[_ngcontent-%COMP%]   .course-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border:none}.main-container[_ngcontent-%COMP%]   .selection-area[_ngcontent-%COMP%]   .uploads[_ngcontent-%COMP%]{display:none;margin-top:20px}.main-container[_ngcontent-%COMP%]   .selection-area[_ngcontent-%COMP%]   .uploads[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{display:flex;font-size:14px;padding:10px;background-color:#dfdfdf;margin-bottom:10px}.main-container[_ngcontent-%COMP%]   .selection-area[_ngcontent-%COMP%]   .uploads[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:5px}.main-container[_ngcontent-%COMP%]   .selection-area[_ngcontent-%COMP%]   .uploads[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:auto;width:13px}.main-container[_ngcontent-%COMP%]   .selection-area[_ngcontent-%COMP%]   .uploads[_ngcontent-%COMP%]   .complete[_ngcontent-%COMP%]{height:13px;background-color:#fff;border-radius:50%;padding:7px;margin-right:-3px}.upload-btn[_ngcontent-%COMP%]{display:flex;grid-gap:10px;gap:10px;border-radius:50px;box-shadow:1px 1px 1px 1px #f0f0fa;width:130px;text-align:center;padding:0;margin-left:60%;position:absolute;top:auto;bottom:10px}.upload-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:23px;margin-top:auto;margin-left:20px;padding:0;margin-bottom:auto}.upload-btn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:auto;padding:0;margin-bottom:auto}.file-input[_ngcontent-%COMP%]{visibility:none;display:none}"]}),n})();function M5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",14),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().setColor(a)}),l.TgZ(1,"span",15),l.TgZ(2,"span",16),l._UZ(3,"span"),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=e.$implicit;l.xp6(1),l.Jzz(" border: 1px solid ",t," !important;  "),l.xp6(1),l.Jzz("background-color: ",t,";")}}function P5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",19),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().switchProgramme(a.value)}),l._UZ(1,"input",20),l.TgZ(2,"div"),l._uU(3),l.qZA(),l.qZA()}if(2&n){const t=e.$implicit;l.Q6J("id",t.value),l.xp6(1),l.Q6J("name",t.id)("id",t.value+"s"),l.xp6(2),l.Oqu(t.name)}}function O5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",14),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return i.selectItemtoColor(i.programme.programme,"w")}),l.TgZ(1,"span",15),l.TgZ(2,"span",16),l._UZ(3,"span"),l.qZA(),l.qZA(),l._uU(4," Selector W "),l.qZA()}if(2&n){const t=l.oxw();l.xp6(1),l.Jzz(" border: 1px solid ",t.programme.bgColor," !important;  "),l.xp6(1),l.Jzz("background-color: ",t.programme.bgColor,";")}}let x5=(()=>{class n{constructor(t,r,i){this.dataService=t,this.router=r,this.activeRoute=i,this.programmeName="",this.faculties=[{name:"FoE",id:"fac",value:"foe"},{name:"FGES",id:"fac",value:"fges"},{name:"FMMT",id:"fac",value:"fmmt"},{name:"SPETs",id:"fac",value:"spets"}],this.programme={programme:"",fontColor:"#353745",bgColor:"#E5E7ED",faculty:"",id:"",selected:!1},this.colorPallet=["#444746","#C2E7FF","#F1F5FB"],this.color="#FFFFF",this.route=""}ngOnInit(){this.route=this.activeRoute.snapshot.paramMap.get("mode"),"edit"==this.route&&(this.programme=this.dataService.selectedProgramme,this.programmeName=this.dataService.selectedProgramme.programme,this.switchProgramme(this.programme.faculty))}ngAfterViewInit(){"edit"==this.route&&this.switchProgramme(this.programme.faculty)}switchProgramme(t){this.faculties.forEach(r=>{if(r.value===t){this.programme.faculty=r.value.toLowerCase();const i=document.getElementById(r.value),a=document.getElementById(r.value+"s");i&&a&&(i.classList.add("acitve"),i.style.backgroundColor="#DFDFDF ",i.style.borderRadius="10px",a.setAttribute("checked","true"))}else{const i=document.getElementById(r.value),a=document.getElementById(r.value+"s");i&&a&&(i.classList.remove("acitve"),i.style.backgroundColor="white",i.style.borderRadius="0px",a.removeAttribute("checked"))}})}selectItemtoColor(t,r){this.selectedItem={programme:t,prop:r};const i=document.getElementById("request-bg");i&&i.classList.add("activeRequest");const a=document.getElementById("color-pallet");a&&(a.style.display="block");const u=document.getElementById("programme-card");u&&(u.style.zIndex="0")}setColor(t){"font"==this.selectedItem.prop?this.programme.fontColor=t:"w"==this.selectedItem.prop&&(this.programme.bgColor=t),this.color=t;const i=document.getElementById("color-pallet");i&&(i.style.display="none");const a=document.getElementById("request-bg");a&&a.classList.remove("activeRequest")}changeColor(t){let r="";this.setColor(this.color),this.colorPallet.forEach(i=>{this.color===i&&(r=i)}),0===r.length&&this.colorPallet.push(this.color)}closeDialog(){const t=document.getElementById("color-pallet");t&&(t.style.display="none");const r=document.getElementById("request-bg");r&&r.classList.remove("activeRequest")}addProgramme(){"edit"==this.route?this.dataService.updateProgrammes(this.programme):(this.programme.programme=this.programmeName,this.programme.id=this.programmeName+this.programme.faculty,this.dataService.setProgrammes(this.programme)),this.router.navigate(["admin/finder","Programmes"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ca),l.Y36(xn),l.Y36(xi))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-create-programme"]],decls:31,vars:11,consts:[["id","request-bg",1,"request-bg",3,"click"],["id","color-pallet",1,"color-pallet"],[1,"color-card"],[1,"color-code"],[3,"ngModel","ngModelChange"],[1,"color-pallets"],["class","colors",3,"click",4,"ngFor","ngForOf"],[1,"add"],[3,"click"],["src","../../../../assets//admin-icons/Plus icon.svg","alt",""],["id","programme-card",1,"programme-card"],["class","colors",3,"id","click",4,"ngFor","ngForOf"],[1,"container"],[1,"wrap"],[1,"colors",3,"click"],[1,"color"],[1,"color-inner"],["class","colors",3,"click",4,"ngIf"],[1,"add",3,"click"],[1,"colors",3,"id","click"],["type","radio",3,"name","id"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.NdJ("click",function(){return r.closeDialog()}),l.qZA(),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div"),l._uU(5," Color code "),l.qZA(),l.TgZ(6,"input",4),l.NdJ("ngModelChange",function(a){return r.color=a}),l.qZA(),l.qZA(),l.TgZ(7,"div",5),l.YNc(8,M5,4,6,"div",6),l.qZA(),l.TgZ(9,"div",7),l.TgZ(10,"span",8),l.NdJ("click",function(){return r.changeColor(r.color)}),l._UZ(11,"img",9),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"div",10),l.TgZ(13,"div",2),l.TgZ(14,"div",3),l.TgZ(15,"div"),l._uU(16," Programme name "),l.qZA(),l.TgZ(17,"input",4),l.NdJ("ngModelChange",function(a){return r.programmeName=a}),l.qZA(),l.qZA(),l.TgZ(18,"div",5),l.YNc(19,P5,4,4,"div",11),l.qZA(),l.TgZ(20,"div",12),l.TgZ(21,"div",13),l.TgZ(22,"div",14),l.NdJ("click",function(){return r.selectItemtoColor(r.programme.programme,"font")}),l.TgZ(23,"span",15),l.TgZ(24,"span",16),l._UZ(25,"span"),l.qZA(),l.qZA(),l._uU(26," Font & Border "),l.qZA(),l.YNc(27,O5,5,6,"div",17),l.qZA(),l.qZA(),l.TgZ(28,"div",18),l.NdJ("click",function(){return r.addProgramme()}),l.TgZ(29,"span"),l._UZ(30,"img",9),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(6),l.Q6J("ngModel",r.color),l.xp6(2),l.Q6J("ngForOf",r.colorPallet),l.xp6(9),l.Q6J("ngModel",r.programmeName),l.xp6(2),l.Q6J("ngForOf",r.faculties),l.xp6(4),l.Jzz(" border: 1px solid ",r.programme.fontColor," !important; "),l.xp6(1),l.Jzz("background-color: ",r.programme.fontColor,";"),l.xp6(3),l.Q6J("ngIf",r.programme.bgColor))},directives:[oi,Kr,Ai,Sr,tr],styles:[".color-pallet[_ngcontent-%COMP%]{display:none;position:fixed;margin-top:20%;margin-left:9%;margin-right:0;background-color:#fff;z-index:677262367}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]{box-shadow:1px 1px 1px 1px #d2d2d2;border-radius:10px;padding:10px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]{background-color:#dfdfdf;padding:4px;border-radius:10px;font-size:10px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:97%;height:40px;background-color:#dfdfdf;border:none;text-align:center;font-size:20px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, .color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border:none}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-pallets[_ngcontent-%COMP%]{margin-top:2em;display:grid;width:100%;grid-template-columns:auto auto auto auto auto;justify-content:space-evenly;grid-gap:5px;gap:5px;margin-left:10px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{margin-bottom:1em}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{margin-right:20px;width:20px;height:20px;padding:5px;border-radius:50%}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]{border-radius:50%}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:30px;height:30px;padding:10px;border-radius:50%}.color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{display:flex;padding-top:1em}.color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:auto}.color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background-color:#dfdfdf;padding:7px;border-radius:10px;width:15px;height:15px}.request-bg[_ngcontent-%COMP%]{position:fixed;background-color:#0000001a;transform:translate(-50%,-50%) scale(0);transition:1ms ease-in-out;border:1px solid black;border-radius:10px;z-index:1;width:700px;max-width:80%;height:100%;padding:20em;text-align:center}.activeRequest[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.programme-card[_ngcontent-%COMP%]{position:relative;margin:20% auto 20px;top:40%;width:86%;background-color:#fff;z-index:677262367}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]{box-shadow:1px 1px 13px 1px #d2d2d2;border-radius:10px;padding:10px}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]{background-color:#dfdfdf;padding:4px;border-radius:10px;font-size:10px}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:97%;height:40px;background-color:#dfdfdf;border:none;text-align:center;font-size:20px}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, .programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border:none}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-pallets[_ngcontent-%COMP%]{margin-top:2em;display:grid;width:100%;grid-template-columns:auto auto;justify-content:space-evenly;grid-gap:5px;gap:5px;margin-left:10px}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{margin-bottom:1em;margin-left:-35px;padding-left:-10px;display:flex;height:40px;width:auto;grid-gap:10px;gap:10px}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:20px;height:20px;margin-top:auto;margin-bottom:auto}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]{margin-top:30px;margin-left:80px}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{margin-bottom:1em}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{margin-right:20px;width:20px;height:20px;padding:5px;border-radius:50%}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]{border-radius:50%}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:30px;height:30px;padding:10px;border-radius:50%}.programme-card[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#dfdfdf;border-radius:10px}.programme-card[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{display:flex;padding-top:1em}.programme-card[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:auto}.programme-card[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background-color:#dfdfdf;padding:10px;border-radius:10px;width:15px;height:15px}"]}),n})();function k5(n,e){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l._UZ(2,"br"),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.hij(" ",t,"")}}function R5(n,e){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l._UZ(2,"br"),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.hij(" ",t,"")}}function N5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",13),l.NdJ("click",function(){return l.CHM(t),l.oxw().uploadCourse()}),l.TgZ(1,"span"),l._UZ(2,"img",14),l.qZA(),l.qZA()}}let F5=(()=>{class n{constructor(t,r,i,a){this.dataService=t,this.router=r,this.activeRoute=i,this.afStorage=a,this.courseName="",this.courseItem={course:"",programmes:[],faculties:[],semester:"",level:"",image:"",fontColor:"",views:0,id:"",files:[],liked:!1},this.ok=!1,this.route="",this.filePath="../../../../assets/admin-header.png",this.image="../../../../assets/admin-header.png",this.downloadURL="",this.imageChange=!1,this.selectOptions={programmes:[],programme:"",faculties:[],semester:"",level:"",faculty:""},this.hideBtn=!0}ngOnInit(){this.dataService.selectionMode="select-options",this.route=this.activeRoute.snapshot.paramMap.get("mode"),"edit"==this.route?(this.dataService.editMode="edit",this.courseItem=this.dataService.selectedCourse,this.courseName=this.dataService.selectedCourse.course,this.filePath=this.dataService.selectedCourse.image,this.dataService.previousImage=this.dataService.selectedCourse.image,this.patchOptions(this.courseItem)):(this.dataService.editMode="create",this.selectOptions=this.dataService.filter_Course,this.filePath=this.dataService.selectedProgrammeImage,this.courseName=this.dataService.selectedCourse.course,this.dataService.selectionMode="select-options")}patchOptions(t){this.selectOptions.programmes=t.programmes,this.selectOptions.faculties=t.faculties,this.selectOptions.semester=t.semester,this.selectOptions.level=t.level}selectImage(){let t=document.getElementById("file-input");t&&t.click()}imagePreview(t){let r="";r=t.target,r&&(r=r.files[0]);const i=new FileReader;i.onload=()=>{this.filePath=i.result,this.dataService.selectedProgrammeImage=this.filePath,this.dataService.selectedProgrammeImageFile=r,this.dataService.imageChange=!0},i.readAsDataURL(r)}makeSelection(){this.dataService.selectedCourse.course=this.courseName,this.router.navigate("edit"!==this.route?["home","selection","create"]:["home","selection","edit"])}createCourse(t=""){this.courseItem.faculties=[],this.courseItem.programmes=[];let r="";"edit"!==this.dataService.editMode&&(r=(this.courseName+this.selectOptions.programme).replace(" ","-"),this.courseItem.id=r),this.selectOptions.programmes.forEach(i=>{this.courseItem.programmes.push(i)}),this.selectOptions.faculties.forEach(i=>{this.courseItem.faculties.push(i)}),this.courseItem.course=this.courseName,this.courseItem.semester=this.selectOptions.semester,this.courseItem.level=this.selectOptions.level,0!=t.length?this.courseItem.image=t:"edit"!==this.dataService.editMode&&(this.courseItem.image=""),3===this.courseItem.level.length&&this.courseName.length>4&&("edit"!==this.dataService.editMode?this.dataService.setCourses(this.courseItem):(this.dataService.updateCourses(this.courseItem),1==this.dataService.imageChange&&this.dataService.deleteDuplicateImage(this.dataService.previousImage)),this.dataService.imageChange=!1,this.imageChange=!1,this.dataService.resetCourse(),this.router.navigate(["admin/folders",""]))}uploadCourse(){if(this.hideBtn=!1,!0===this.dataService.imageChange){const t=this.dataService.selectedProgrammeImageFile,r=`/images/${Date.now()}_${t.name}`;this.ref=this.afStorage.ref(r),this.task=this.ref.put(t),this.uploadProgress=this.task.percentageChanges(),this.task.snapshotChanges().pipe(p_(()=>{this.downloadURL=this.ref.getDownloadURL(),this.downloadURL.subscribe(i=>{this.createCourse(i)})})).subscribe()}else this.createCourse()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ca),l.Y36(xn),l.Y36(xi),l.Y36(C1))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-create-course"]],decls:37,vars:7,consts:[["id","selection",1,"selection"],["id","course-pane",1,"programme-card"],[1,"color-card"],[1,"color-code"],[3,"ngModel","ngModelChange"],[1,"profile-pic"],["type","file","accept",".png, .jpg","multiple","false","id","file-input",1,"img-input",3,"change"],[3,"src","click"],[3,"click"],[1,"choose-list"],[1,"bold-text"],[4,"ngFor","ngForOf"],["class","add",3,"click",4,"ngIf"],[1,"add",3,"click"],["src","../../../../assets//admin-icons/Plus icon.svg","alt",""]],template:function(t,r){1&t&&(l._UZ(0,"app-course-home",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div"),l._uU(5," Course name "),l.qZA(),l.TgZ(6,"input",4),l.NdJ("ngModelChange",function(a){return r.courseName=a}),l.qZA(),l.qZA(),l.TgZ(7,"div",5),l.TgZ(8,"p"),l._uU(9,"Change picture by long pressing on image"),l.qZA(),l.TgZ(10,"input",6),l.NdJ("change",function(a){return r.imagePreview(a)}),l.qZA(),l.TgZ(11,"img",7),l.NdJ("click",function(){return r.selectImage()}),l.qZA(),l.qZA(),l.TgZ(12,"div",5),l.TgZ(13,"p"),l._uU(14,"Change the level and semester"),l.qZA(),l.TgZ(15,"button",8),l.NdJ("click",function(){return r.makeSelection()}),l._uU(16,"Proceed"),l.qZA(),l.qZA(),l.TgZ(17,"div",9),l.TgZ(18,"p"),l._uU(19,"You choose"),l.qZA(),l.TgZ(20,"span"),l.TgZ(21,"span",10),l._uU(22,"Level:"),l.qZA(),l._uU(23),l.qZA(),l.TgZ(24,"span"),l.TgZ(25,"span",10),l._uU(26,"Semester:"),l.qZA(),l._uU(27),l.qZA(),l.TgZ(28,"div"),l.TgZ(29,"span",10),l._uU(30,"Faculty:"),l.qZA(),l.YNc(31,k5,3,1,"span",11),l.qZA(),l.TgZ(32,"div"),l.TgZ(33,"span",10),l._uU(34,"Programmes:"),l.qZA(),l.YNc(35,R5,3,1,"span",11),l.qZA(),l.qZA(),l.YNc(36,N5,3,0,"div",12),l.qZA(),l.qZA()),2&t&&(l.xp6(6),l.Q6J("ngModel",r.courseName),l.xp6(5),l.Q6J("src",r.filePath,l.LSH),l.xp6(12),l.hij(" ",r.selectOptions.level,""),l.xp6(4),l.hij(" ",r.selectOptions.semester,""),l.xp6(4),l.Q6J("ngForOf",r.selectOptions.faculties),l.xp6(4),l.Q6J("ngForOf",r.selectOptions.programmes),l.xp6(1),l.Q6J("ngIf",r.hideBtn))},directives:[yO,oi,Kr,Ai,Sr,tr],styles:['.programme-card[_ngcontent-%COMP%]{@import"https://fonts.googleapis.com/css2?family=Fira+Sans:wght@100&display=swap";font-family:"Fira Sans",sans-serif!important;position:relative;margin:26% auto auto;top:50%;height:100%;width:86%;background-color:#fff;z-index:677262367}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]{box-shadow:1px 1px 13px 1px #d2d2d2;border-radius:10px;padding:10px;margin-bottom:10px}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]{background-color:#dfdfdf;padding:4px;border-radius:10px;font-size:10px}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:97%;height:40px;background-color:#dfdfdf;border:none;text-align:center;font-size:20px}.programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, .programme-card[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border:none}.programme-card[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]{text-align:center;font-size:10px}.programme-card[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px;width:100px;height:100px}.programme-card[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:#dfdfdf;padding:10px;width:100px}.programme-card[_ngcontent-%COMP%]   .choose-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:20px}.programme-card[_ngcontent-%COMP%]   .choose-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}.programme-card[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{display:flex;padding-top:1em}.programme-card[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:auto}.programme-card[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background-color:#dfdfdf;padding:10px;border-radius:10px;width:15px;height:15px}.img-input[_ngcontent-%COMP%]{visibility:none;display:none}.selection[_ngcontent-%COMP%]{display:none}.bold-text[_ngcontent-%COMP%]{font-weight:bold}']}),n})();function L5(n,e){if(1&n){const t=l.EpF();l.O4$(),l.kcU(),l.TgZ(0,"div",20),l.TgZ(1,"div",21),l._UZ(2,"img",22),l.TgZ(3,"div",23),l.TgZ(4,"h3"),l._uU(5,"Michael"),l.qZA(),l.TgZ(6,"span"),l._uU(7,"Level 2 Admin"),l.qZA(),l.qZA(),l.TgZ(8,"div",24),l.O4$(),l.TgZ(9,"svg",25),l._UZ(10,"path",26),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(11,"div",27),l.TgZ(12,"div",28),l.NdJ("click",function(){return l.CHM(t),l.oxw().finderPage()}),l.O4$(),l.TgZ(13,"svg",29),l._UZ(14,"path",30),l.qZA(),l.kcU(),l.TgZ(15,"div",31),l.TgZ(16,"p",32),l._uU(17,"Finder"),l.qZA(),l.TgZ(18,"p"),l._uU(19," Level "),l.O4$(),l.TgZ(20,"svg",13),l._UZ(21,"rect",33),l.qZA(),l._uU(22," Faculty "),l.TgZ(23,"svg",13),l._UZ(24,"rect",33),l.qZA(),l._uU(25,"Program "),l.TgZ(26,"svg",13),l._UZ(27,"rect",33),l.qZA(),l._uU(28,"Semester"),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(29,"div",34),l.O4$(),l.TgZ(30,"svg",35),l._UZ(31,"path",36),l.qZA(),l.kcU(),l.TgZ(32,"div",31),l.TgZ(33,"p",32),l._uU(34,"Homepage"),l.qZA(),l.TgZ(35,"p"),l._uU(36," Icons "),l.O4$(),l.TgZ(37,"svg",13),l._UZ(38,"rect",33),l.qZA(),l._uU(39," Image "),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(40,"div",37),l.NdJ("click",function(){return l.CHM(t),l.oxw().CoursesPage()}),l.O4$(),l.TgZ(41,"svg",38),l._UZ(42,"path",39),l.qZA(),l.kcU(),l.TgZ(43,"div",31),l.TgZ(44,"p",32),l._uU(45,"Course Folders"),l.qZA(),l.TgZ(46,"p"),l._uU(47," 80 courses available "),l.O4$(),l.TgZ(48,"svg",40),l._UZ(49,"rect",41),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(50,"div",42),l.TgZ(51,"div",43),l.TgZ(52,"div",44),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return i.switchView("upload"),i.uploadActions()}),l.O4$(),l.TgZ(53,"svg",45),l.TgZ(54,"g",46),l._UZ(55,"path",47),l.qZA(),l.qZA(),l._uU(56," Upload File(s) "),l.qZA(),l.kcU(),l.TgZ(57,"div",44),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return i.switchView("add-course"),i.uploadActions()}),l.O4$(),l.TgZ(58,"svg",38),l._UZ(59,"path",39),l.qZA(),l._uU(60," Create Course "),l.qZA(),l.kcU(),l.TgZ(61,"div",44),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return i.switchView("add-programme"),i.uploadActions()}),l.O4$(),l.TgZ(62,"svg",48),l._UZ(63,"path",49),l.qZA(),l._uU(64," Create Programme "),l.qZA(),l.qZA(),l.kcU(),l.TgZ(65,"div",50),l.NdJ("click",function(){return l.CHM(t),l.oxw().openPopup()}),l.O4$(),l.TgZ(66,"svg",51),l._UZ(67,"path",52),l.qZA(),l.qZA(),l.qZA(),l.qZA()}}function U5(n,e){1&n&&(l.O4$(),l.kcU(),l._UZ(0,"app-upload-files"))}function V5(n,e){1&n&&(l.O4$(),l.kcU(),l._UZ(0,"app-create-programme",53))}function B5(n,e){1&n&&(l.O4$(),l.kcU(),l._UZ(0,"app-create-course"))}let vO=(()=>{class n{constructor(t,r){this.router=t,this.activeRoute=r,this.view="",this.route=""}ngOnInit(){this.route=this.activeRoute.snapshot.paramMap.get("page"),"create-course"===this.route?this.switchView("add-course"):"create-programme"===this.route&&this.switchView("add-programme")}finderPage(){this.router.navigate(["admin/finder"])}CoursesPage(){this.router.navigate(["admin/folders",""])}openPopup(){const t=document.getElementById("popup"),r=document.getElementById("icon");t&&r&&(t.style.display="flex",r.style.display="none");const i=document.getElementById("request-bg");i&&i.classList.add("activeRequest")}uploadActions(){const t=document.getElementById("popup"),r=document.getElementById("icon");t&&r&&(t.style.display="none",r.style.display="block");const i=document.getElementById("request-bg");i&&i.classList.remove("activeRequest")}switchView(t){this.view=t}back(){0!=this.view.length?this.view="":this.router.navigate(["home","",""])}closeDialog(){const t=document.getElementById("request-bg");t&&t.classList.remove("activeRequest");const r=document.getElementById("popup"),i=document.getElementById("icon");r&&i&&(r.style.display="none",i.style.display="block")}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xn),l.Y36(xi))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-admin-home"]],decls:22,vars:4,consts:[["id","request-bg",1,"request-bg",3,"click"],[1,"main-container"],["id","header",1,"header"],[1,"header-darker"],[1,"wrapper"],[1,"back-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","44.432","height","42.714","viewBox","0 0 44.432 42.714"],["id","icon_","data-name","icon ","transform","translate(-5.813 -5.6)"],["id","Rectangle_7","data-name","Rectangle 7","width","41.777","height","7","rx","3.5","transform","translate(8.468 23.018)","fill","#fff"],["id","Rectangle_77","data-name","Rectangle 77","width","30","height","7","rx","3.5","transform","translate(5.813 26.813) rotate(-45)","fill","#fff"],["id","Rectangle_78","data-name","Rectangle 78","width","30","height","7","rx","3.5","transform","translate(27.113 48.314) rotate(-135)","fill","#fff"],[1,"library"],[1,"more-btn"],["id","Kebab_icon","data-name","Kebab icon","xmlns","http://www.w3.org/2000/svg","width","10","height","50","viewBox","0 0 10 50"],["id","Rectangle_53","data-name","Rectangle 53","width","10","height","10","rx","5","transform","translate(10 40) rotate(90)","fill","#fff"],["id","Rectangle_50","data-name","Rectangle 50","width","10","height","10","rx","5","transform","translate(10 20) rotate(90)","fill","#fff"],["id","Rectangle_51","data-name","Rectangle 51","width","10","height","10","rx","5","transform","translate(10) rotate(90)","fill","#fff"],["class","contents",4,"ngIf"],[4,"ngIf"],["class","componenets",4,"ngIf"],[1,"contents"],[1,"profile"],["src","../../../assets/me.png",1,"image"],[1,"name"],[1,"icon"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 30 30"],["id","ic_edit_24px","d","M3,26.748V33H9.249L27.68,14.567,21.431,8.318ZM32.513,9.734a1.66,1.66,0,0,0,0-2.35l-3.9-3.9a1.66,1.66,0,0,0-2.35,0l-3.05,3.05,6.249,6.249,3.05-3.05Z","transform","translate(-3 -2.997)"],[1,"container"],[1,"finder",3,"click"],["id","Icon_admin_-_Uhall_-_01.2022","data-name","Icon_admin - Uhall - 01.2022","xmlns","http://www.w3.org/2000/svg","width","73.094","height","76","viewBox","0 0 73.094 76"],["id","admin_icon_-_Uhall_-_01.2022","data-name","admin icon - Uhall - 01.2022","d","M29.809,76a2.477,2.477,0,0,1-2.315-2.069l-1.667-10a27.927,27.927,0,0,1-6.378-3.681L9.956,63.806a2.425,2.425,0,0,1-.871.161,2.479,2.479,0,0,1-2.144-1.241L.332,51.279A2.475,2.475,0,0,1,.9,48.127l7.81-6.432a26.8,26.8,0,0,1,0-7.387L.9,27.877a2.477,2.477,0,0,1-.572-3.153L6.941,13.278a2.478,2.478,0,0,1,2.144-1.241,2.455,2.455,0,0,1,.871.16l9.493,3.556a27.928,27.928,0,0,1,6.378-3.681l1.667-10A2.477,2.477,0,0,1,29.937,0H43.155a2.467,2.467,0,0,1,1.71.685h0A2.461,2.461,0,0,1,45.6,2.072l1.667,10a27.918,27.918,0,0,1,6.377,3.681L63.136,12.2a2.471,2.471,0,0,1,3.015,1.08L72.76,24.723a2.478,2.478,0,0,1-.571,3.154l-7.81,6.431a26.729,26.729,0,0,1,0,7.386l7.81,6.432a2.479,2.479,0,0,1,.9,2.085,2.451,2.451,0,0,1-.327,1.067L66.151,62.726a2.473,2.473,0,0,1-2.144,1.241,2.447,2.447,0,0,1-.871-.16l-9.493-3.555a27.95,27.95,0,0,1-6.377,3.681l-1.667,10a2.562,2.562,0,0,1-.1.407,2.453,2.453,0,0,1-.589.94V54.188a18.321,18.321,0,0,0,6.918-6.2,18.113,18.113,0,0,0-6.918-26.15V33.045L36.646,38l-8.261-4.957V21.838a18.151,18.151,0,0,0,0,32.348V75.454A2.49,2.49,0,0,0,29.809,76Z","transform","translate(0)","fill","#151ceb"],[1,"desc"],[1,"title"],["id","Rectangle_53","data-name","Rectangle 53","width","10","height","10","rx","5","transform","translate(10 40) rotate(90)","fill","black"],[1,"finder"],["id","Icon_home_inactive","data-name","Icon_home inactive","xmlns","http://www.w3.org/2000/svg","width","70.588","height","60","viewBox","0 0 70.588 60"],["id","homeicon","d","M30.235,63V41.824H44.353V63H62V34.765H72.588L37.294,3,2,34.765H12.588V63Z","transform","translate(-2 -3)","fill","#63eb15"],[1,"finder","cfolder",3,"click"],["id","Icon_Course_Folder","data-name","Icon_Course Folder","xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 40 40"],["id","ic_library_books_24px","d","M6,10H2V38a4.012,4.012,0,0,0,4,4H34V38H6ZM38,2H14a4.012,4.012,0,0,0-4,4V30a4.012,4.012,0,0,0,4,4H38a4.012,4.012,0,0,0,4-4V6A4.012,4.012,0,0,0,38,2ZM36,20H16V16H36Zm-8,8H16V24H28Zm8-16H16V8H36Z","transform","translate(-2 -2)","fill","#eb8e15"],["id","Kebab_icon","data-name","Kebab icon","xmlns","http://www.w3.org/2000/svg","width","10","height","50","viewBox","0 0 10 50",2,"visibility","none !important"],["id","Rectangle_53","data-name","Rectangle 53","width","10","height","10","rx","5","transform","translate(10 40) rotate(90)","fill","#DFDFDF"],[1,"uploadpop"],["id","popup",1,"popup"],[3,"click"],["id","upload_icon_states","data-name","upload icon states","xmlns","http://www.w3.org/2000/svg","width","60","height","40","viewBox","0 0 60 40"],["id","upload_inactive","data-name","upload inactive"],["id","ic_cloud_upload_24px","d","M48.375,19.1a18.731,18.731,0,0,0-35-5A14.994,14.994,0,0,0,15,44H47.5a12.464,12.464,0,0,0,.875-24.9ZM35,26.5v10H25v-10H17.5L30,14,42.5,26.5Z","transform","translate(0 -4)","fill","#1539eb"],["id","Component_8","data-name","Component 8","xmlns","http://www.w3.org/2000/svg","width","38.47","height","40","viewBox","0 0 38.47 40"],["id","Exclusion_6","data-name","Exclusion 6","d","M22.713,40H15.756a1.3,1.3,0,0,1-1.286-1.09l-.877-5.263a14.675,14.675,0,0,1-3.357-1.937l-5,1.871a1.28,1.28,0,0,1-.458.085,1.307,1.307,0,0,1-1.128-.653L.176,26.987a1.3,1.3,0,0,1,.3-1.659l4.11-3.385A14.283,14.283,0,0,1,4.452,20a14.11,14.11,0,0,1,.135-1.943L.477,14.671a1.3,1.3,0,0,1-.3-1.659L3.654,6.988a1.309,1.309,0,0,1,1.129-.653,1.285,1.285,0,0,1,.458.084l5,1.871a14.675,14.675,0,0,1,3.357-1.937l.878-5.263A1.3,1.3,0,0,1,15.757,0h6.956A1.3,1.3,0,0,1,24,1.09l.877,5.263A14.687,14.687,0,0,1,28.233,8.29l5-1.871a1.3,1.3,0,0,1,1.587.569l3.479,6.025a1.3,1.3,0,0,1-.3,1.659l-4.11,3.386a14.145,14.145,0,0,1,0,3.886l4.11,3.386a1.306,1.306,0,0,1,.472,1.1,1.286,1.286,0,0,1-.172.562l-3.479,6.025a1.3,1.3,0,0,1-1.587.569l-5-1.871a14.687,14.687,0,0,1-3.356,1.937L24,38.91a1.376,1.376,0,0,1-.054.213A1.305,1.305,0,0,1,22.713,40ZM13.571,11.353v16.91h4.3V23.306H20.72c3.8,0,6.351-2.392,6.351-5.953a5.725,5.725,0,0,0-6.093-6Zm6.247,8.708H17.872v-5.4h1.969c1.859,0,2.883.961,2.883,2.707S21.692,20.06,19.818,20.06Z","transform","translate(0 0)","fill","#bd2a22"],["id","icon",1,"icon",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 40 40"],["id","Plus_icon","data-name","Plus icon","d","M45,27.857H27.857V45H22.143V27.857H5V22.143H22.143V5h5.714V22.143H45Z","transform","translate(-5 -5)"],[1,"componenets"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.NdJ("click",function(){return r.closeDialog()}),l.qZA(),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.TgZ(5,"div",5),l.NdJ("click",function(){return r.back()}),l.O4$(),l.TgZ(6,"svg",6),l.TgZ(7,"g",7),l._UZ(8,"rect",8),l._UZ(9,"rect",9),l._UZ(10,"rect",10),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(11,"div",11),l._uU(12,"Home"),l.qZA(),l.TgZ(13,"div",12),l.O4$(),l.TgZ(14,"svg",13),l._UZ(15,"rect",14),l._UZ(16,"rect",15),l._UZ(17,"rect",16),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(18,L5,68,0,"div",17),l.YNc(19,U5,1,0,"app-upload-files",18),l.YNc(20,V5,1,0,"app-create-programme",19),l.YNc(21,B5,1,0,"app-create-course",18),l.qZA()),2&t&&(l.xp6(18),l.Q6J("ngIf",r.view.length<=0),l.xp6(1),l.Q6J("ngIf","upload"==r.view),l.xp6(1),l.Q6J("ngIf","add-programme"==r.view),l.xp6(1),l.Q6J("ngIf","add-course"==r.view))},directives:[tr,S5,x5,F5],styles:['.main-container[_ngcontent-%COMP%]{width:100%;overflow-x:hidden;@import"https://fonts.googleapis.com/css2?family=Fira+Sans:wght@100&display=swap";font-family:"Fira Sans",sans-serif!important}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-image:url(admin-header.84e37655b573e67b.png);background-position:center;background-repeat:no-repeat;background-size:cover;position:sticky!important;position:-webkit-sticky!important;top:0;transition:.3s}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{background-color:#ffffff4d;border-radius:50%;width:35px;height:35px;text-align:center;margin-top:0;z-index:100005645435555540}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:15px;height:15px;margin-top:10px;margin-bottom:auto;z-index:100005645435555540}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-darker[_ngcontent-%COMP%]{background-color:#0006;margin-top:0;padding:6px 1em}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{margin-left:auto}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .library[_ngcontent-%COMP%]{margin-left:20px;margin-top:7px;font-size:20px;font-weight:bold;color:#fff}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .library.more-btn[_ngcontent-%COMP%]{opacity:1}.main-container[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]{display:flex;grid-gap:1em;gap:1em;padding:0 1em;margin-top:1.5em;margin-bottom:.5em}.main-container[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;border:2px solid #6915EB}.main-container[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-top:-15px}.main-container[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:4px;font-size:25px;font-weight:bold}.main-container[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6915eb;font-size:16px}.main-container[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#dfdfdf;margin-left:auto;margin-top:auto;margin-bottom:auto;width:15px;height:15px;border-radius:50%;padding:10px}.main-container[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:15px;height:15px}.main-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:1em}.main-container[_ngcontent-%COMP%]   .finder[_ngcontent-%COMP%]{background-color:#dfdfdf;border-radius:10px;padding:.1em .1em .1em 10px;display:flex;margin-bottom:30px}.main-container[_ngcontent-%COMP%]   .finder[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:30px;height:30px;margin-top:auto;margin-bottom:auto;padding-right:20px}.main-container[_ngcontent-%COMP%]   .finder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;color:#4a4646}.main-container[_ngcontent-%COMP%]   .finder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{padding:0;margin:0 5px -6px;width:3px}.main-container[_ngcontent-%COMP%]   .finder[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:20px;margin-bottom:-20px}.main-container[_ngcontent-%COMP%]   .cfolder[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{visibility:none}.uploadpop[_ngcontent-%COMP%]{display:flex;top:auto;bottom:20px;margin-top:auto;flex-direction:row;position:fixed;width:100%;z-index:789000000000}.uploadpop[_ngcontent-%COMP%]   .popup[_ngcontent-%COMP%]{margin-left:auto;display:flex;flex-direction:column;grid-gap:30px;gap:30px;display:none;margin-bottom:20px;widows:200px;margin-right:20px}.uploadpop[_ngcontent-%COMP%]   .popup[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bold}.uploadpop[_ngcontent-%COMP%]   .popup[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:10px;height:15px;width:20px}.uploadpop[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#dfdfdf;margin:auto 1em auto auto;width:15px;height:15px;border-radius:50%;padding:10px}.uploadpop[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:15px;height:15px}.request-bg[_ngcontent-%COMP%]{position:fixed;background-color:#dfdfdf4d;transform:translate(-50%,-50%) scale(0);transition:1ms ease-in-out;border:1px solid black;border-radius:10px;z-index:1;width:700px;max-width:80%;height:1000vh;padding:20em;text-align:center}.activeRequest[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}progress[_ngcontent-%COMP%]{padding:20px}']}),n})();function Z5(n,e){if(1&n&&(l.TgZ(0,"div",12),l.TgZ(1,"span",13),l.TgZ(2,"span",14),l._UZ(3,"span"),l.qZA(),l.qZA(),l._uU(4," Selector W "),l.qZA()),2&n){const t=l.oxw().$implicit;l.xp6(1),l.Jzz(" border: 1px solid ",t.bgColor," !important;  "),l.xp6(1),l.Jzz("background-color: ",t.bgColor,";")}}function q5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",8),l.TgZ(1,"div",9),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().editProgramme(a)}),l.TgZ(2,"p"),l._uU(3),l.qZA(),l.TgZ(4,"span",10),l._uU(5),l.qZA(),l.TgZ(6,"div",11),l.TgZ(7,"div",12),l.TgZ(8,"span",13),l.TgZ(9,"span",14),l._UZ(10,"span"),l.qZA(),l.qZA(),l._uU(11," Font & Border "),l.qZA(),l.YNc(12,Z5,5,6,"div",15),l.qZA(),l.qZA(),l.TgZ(13,"div",16),l.TgZ(14,"button",5),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().editProgramme(a)}),l._uU(15,"Edit"),l.qZA(),l.TgZ(16,"button",5),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().confirmDelete(a.id)}),l._uU(17,"Delete"),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=e.$implicit;l.xp6(3),l.Oqu(t.programme),l.xp6(2),l.Oqu(t.faculty),l.xp6(3),l.Jzz(" border: 1px solid ",t.fontColor," !important; "),l.xp6(1),l.Jzz("background-color: ",t.fontColor,";"),l.xp6(3),l.Q6J("ngIf",t.bgColor)}}let j5=(()=>{class n{constructor(t,r){this.dataService=t,this.router=r,this.scrollTimer=-1,this.selectedItem={},this.programmes=[],this.programmesSubscribed=""}onScrollHost(t){const r=document.getElementById("new-program");r&&r.classList.add("small-button"),-1!=this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{const i=document.getElementById("new-program");i&&i.classList.remove("small-button")},100)}ngOnInit(){this.programmesSubscribed=this.dataService.getProgrammes().subscribe(t=>{this.programmes=t.map(r=>Object.assign({},r.payload.doc.data()))})}editProgramme(t){this.dataService.selectedProgramme=t,this.router.navigate(["admin-page","create-programme","edit"])}confirmDelete(t){this.selectedProgramme=t;const r=document.getElementById("confirm-delete");r&&(r.style.display="block")}cancelDelete(){const t=document.getElementById("confirm-delete");t&&(t.style.display="none")}deleteProgramme(t){this.dataService.deleteProgrammes(t);const r=document.getElementById("confirm-delete");r&&(r.style.display="none")}createProgramme(){this.router.navigate(["admin-page","create-programme"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ca),l.Y36(xn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-programs"]],hostBindings:function(t,r){1&t&&l.NdJ("scroll",function(){return r.onScrollHost()},!1,l.Jf7)},decls:15,vars:1,consts:[[1,"main-container"],[1,"container"],["class","card",4,"ngFor","ngForOf"],["id","confirm-delete",1,"confirm-delete"],[1,"buttons"],[3,"click"],["id","new-program",1,"new-program",3,"click"],["src","../../../../assets//admin-icons/Plus icon.svg","alt","","id","add-img"],[1,"card"],[1,"wrap-card",3,"click"],[1,"faculty"],[1,"wrap"],[1,"colors"],[1,"color"],[1,"color-inner"],["class","colors",4,"ngIf"],[1,"image"]],template:function(t,r){1&t&&(l.TgZ(0,"p"),l._uU(1,"Change styles for Programmes"),l.qZA(),l.TgZ(2,"div",0),l.TgZ(3,"div",1),l.YNc(4,q5,18,9,"div",2),l.qZA(),l.TgZ(5,"div",3),l._uU(6," Do you really want to delete this programme ? "),l.TgZ(7,"div",4),l.TgZ(8,"button",5),l.NdJ("click",function(){return r.cancelDelete()}),l._uU(9,"Cancel"),l.qZA(),l.TgZ(10,"button",5),l.NdJ("click",function(){return r.deleteProgramme(r.selectedProgramme)}),l._uU(11,"Delete"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"div",6),l.NdJ("click",function(){return r.createProgramme()}),l._UZ(13,"img",7),l._uU(14," New Programme "),l.qZA(),l.qZA()),2&t&&(l.xp6(4),l.Q6J("ngForOf",r.programmes))},directives:[Sr,tr],styles:['.container[_ngcontent-%COMP%]{@import"https://fonts.googleapis.com/css2?family=Fira+Sans:wght@100&display=swap";font-family:"Fira Sans",sans-serif!important;display:grid;grid-template-columns:auto;grid-gap:20px;gap:20px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:.5em;background-color:#dfdfdf;border-radius:10px;display:flex;grid-gap:20px;gap:20px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:30%;margin-top:auto;margin-bottom:auto;margin-right:10px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;border-radius:10px;padding:5px;margin-bottom:20px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap-card[_ngcontent-%COMP%]{width:70%}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:17px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap-card[_ngcontent-%COMP%]   .faculty[_ngcontent-%COMP%]{font-size:13px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]{margin-top:10px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{margin-bottom:1em}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{margin-right:20px;width:20px;height:20px;padding:5px;border-radius:50%}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]{border-radius:50%}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:30px;height:30px;padding:10px;border-radius:50%}.confirm-delete[_ngcontent-%COMP%]{position:fixed;display:none;top:45%;left:13%;width:70%;background-color:#fff;padding:10px;border-radius:10px}.confirm-delete[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:20px;padding:10px}.new-program[_ngcontent-%COMP%]{background-color:#fff;width:200px;border-radius:20px;position:fixed;top:auto;left:40%;bottom:10px;border-bottom:10px;padding:10px;box-shadow:1px 1px 1px 1px #698cee;display:flex;grid-gap:10px;gap:10px}.new-program[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:20px}.small-button[_ngcontent-%COMP%]{display:none}']}),n})();function $5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",13),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().selectItemtoColor(a.id,a.faculty)}),l.TgZ(1,"p"),l._uU(2),l.qZA(),l.qZA()}if(2&n){const t=e.$implicit;l.xp6(2),l.hij("",t.faculty," ")}}let H5=(()=>{class n{constructor(t,r){this.router=t,this.dataService=r,this.selectedItem={},this.faculties=[],this.faculty="",this.mode="edit"}ngOnInit(){this.dataService.getFaculties().subscribe(t=>{this.faculties=t.map(r=>Object.assign({},r.payload.doc.data()))})}selectItemtoColor(t,r){this.faculty=r,this.selectedItem={id:t};const i=document.getElementById("request-bg");i&&i.classList.add("activeRequest");const a=document.getElementById("color-pallet");a&&(a.style.display="block")}setColor(t){"edit"==this.mode?this.faculties.forEach(a=>{a.id==this.selectedItem.id&&(a.faculty=t)}):this.dataService.setFaculties({faculty:this.faculty,id:"",order:this.faculties.lenght+1,active:!1}),this.faculty=t;const r=document.getElementById("color-pallet");r&&(r.style.display="none");const i=document.getElementById("request-bg");i&&i.classList.remove("activeRequest")}changeColor(){this.setColor(this.faculty)}createFaculty(){this.mode="create";const t=document.getElementById("request-bg");t&&t.classList.add("activeRequest");const r=document.getElementById("color-pallet");r&&(r.style.display="block")}deleteFaculty(){this.dataService.deleteFaculties(this.selectedItem.id),this.closeDialog()}closeDialog(){const t=document.getElementById("color-pallet");t&&(t.style.display="none");const r=document.getElementById("request-bg");r&&r.classList.remove("activeRequest")}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xn),l.Y36(ca))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-faculties"]],decls:20,vars:2,consts:[["id","request-bg",1,"request-bg",3,"click"],[1,"main-container"],["id","color-pallet",1,"color-pallet"],[1,"color-card"],[1,"color-code"],[3,"ngModel","ngModelChange"],[1,"add"],[3,"click"],["src","../../../../assets//admin-icons/Plus icon.svg","alt",""],[1,"delete",3,"click"],[1,"container"],["class","card",3,"click",4,"ngFor","ngForOf"],[1,"new-program",3,"click"],[1,"card",3,"click"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.NdJ("click",function(){return r.closeDialog()}),l.qZA(),l.TgZ(1,"p"),l._uU(2,"Change styles for Faculty"),l.qZA(),l.TgZ(3,"div",1),l.TgZ(4,"div",2),l.TgZ(5,"div",3),l.TgZ(6,"div",4),l.TgZ(7,"div"),l._uU(8," Faculty Name "),l.qZA(),l.TgZ(9,"input",5),l.NdJ("ngModelChange",function(a){return r.faculty=a}),l.qZA(),l.qZA(),l.TgZ(10,"div",6),l.TgZ(11,"span",7),l.NdJ("click",function(){return r.changeColor()}),l._UZ(12,"img",8),l.qZA(),l.TgZ(13,"span",9),l.NdJ("click",function(){return r.deleteFaculty()}),l._uU(14," Delete"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"div",10),l.YNc(16,$5,3,1,"div",11),l.qZA(),l.qZA(),l.TgZ(17,"div",12),l.NdJ("click",function(){return r.createFaculty()}),l._UZ(18,"img",8),l._uU(19," Create Faculty\n"),l.qZA()),2&t&&(l.xp6(9),l.Q6J("ngModel",r.faculty),l.xp6(7),l.Q6J("ngForOf",r.faculties))},directives:[oi,Kr,Ai,Sr],styles:['.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;grid-gap:20px;gap:20px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:.5em;background-color:#dfdfdf;border-radius:10px;text-align:center}.color-pallet[_ngcontent-%COMP%]{display:none;position:absolute;margin-top:30%;margin-left:20px;background-color:#fff;z-index:677262367}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]{box-shadow:1px 1px 1px 1px #d2d2d2;border-radius:10px;padding:10px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]{background-color:#dfdfdf;padding:4px;border-radius:10px;font-size:10px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:97%;height:40px;background-color:#dfdfdf;border:none;text-align:center;font-size:20px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, .color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border:none}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-pallets[_ngcontent-%COMP%]{margin-top:2em;display:grid;width:100%;grid-template-columns:auto auto auto auto auto;justify-content:space-evenly;grid-gap:5px;gap:5px;margin-left:10px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{margin-bottom:1em}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{margin-right:20px;width:20px;height:20px;padding:5px;border-radius:50%}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]{border-radius:50%}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:30px;height:30px;padding:10px;border-radius:50%}.color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{display:flex;padding-top:1.3em}.color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:auto}.color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{color:red;margin-top:7px;margin-right:10px}.color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background-color:#dfdfdf;padding:7px;border-radius:10px;width:15px;height:15px}.request-bg[_ngcontent-%COMP%]{position:fixed;background-color:#0000001a;transform:translate(-50%,-50%) scale(0);transition:1ms ease-in-out;border:1px solid black;border-radius:10px;z-index:1;width:700px;max-width:80%;height:1000vh;padding:20em;text-align:center}.activeRequest[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.new-program[_ngcontent-%COMP%]{background-color:#dfdfdf;width:180px;border-radius:20px;margin-left:35%;padding:10px;position:fixed;top:auto;bottom:15px;margin-top:15vh;display:flex;grid-gap:10px;gap:10px;font-family:"Fira Sans",sans-serif!important}.new-program[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:20px}']}),n})();function z5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",14),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().setColor(a)}),l.TgZ(1,"span",15),l.TgZ(2,"span",16),l._UZ(3,"span"),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=e.$implicit;l.xp6(1),l.Jzz(" border: 1px solid ",t," !important;  "),l.xp6(1),l.Jzz("background-color: ",t,";")}}function G5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",17),l.TgZ(1,"p"),l._uU(2),l.qZA(),l.TgZ(3,"div",18),l.TgZ(4,"div",14),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().selectItemtoColor(a.level,"font")}),l.TgZ(5,"span",15),l.TgZ(6,"span",16),l._UZ(7,"span"),l.qZA(),l.qZA(),l._uU(8," Font & Border "),l.qZA(),l.TgZ(9,"div",14),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().selectItemtoColor(a.level,"w")}),l.TgZ(10,"span",15),l.TgZ(11,"span",16),l._UZ(12,"span"),l.qZA(),l.qZA(),l._uU(13," Selector W "),l.qZA(),l.TgZ(14,"div",14),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().selectItemtoColor(a.level,"d")}),l.TgZ(15,"span",15),l.TgZ(16,"span",16),l._UZ(17,"span"),l.qZA(),l.qZA(),l._uU(18," Selector D "),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=e.$implicit;l.xp6(2),l.hij(" Semester ",t.level,""),l.xp6(3),l.Jzz(" border: 1px solid ",t.fontColor," !important; "),l.xp6(1),l.Jzz("background-color: ",t.fontColor,";"),l.xp6(4),l.Jzz(" border: 1px solid ",t.bgColor," !important;  "),l.xp6(1),l.Jzz("background-color: ",t.bgColor,";"),l.xp6(4),l.Jzz(" border: 1px solid ",t.borderColor," !important;  "),l.xp6(1),l.Jzz("background-color: ",t.borderColor,";")}}let W5=(()=>{class n{constructor(t,r){this.router=t,this.dataService=r,this.selectedItem={},this.semesters=[{level:1,font:"#0F54C9",w:"#DAE4F1",d:"#8B9CB2"},{level:2,font:"#BD2A22",w:"#F5E2E2",d:"#8F4B47"}],this.colorPallet=["#000000","#C23564","#D5EDED","#8F4B47","#8F4B47","#0F56CD","#353745","#FDEDF2","#8F4B47","#8F4B47"],this.color="#FFFFF"}ngOnInit(){this.dataService.getSemesters().subscribe(t=>{this.semesters=t.map(r=>Object.assign({},r.payload.doc.data()))})}selectItemtoColor(t,r){this.selectedItem={level:t,prop:r};const i=document.getElementById("request-bg");i&&i.classList.add("activeRequest");const a=document.getElementById("color-pallet");a&&(a.style.display="block")}setColor(t){this.semesters.forEach(u=>{u.level==this.selectedItem.level&&("font"==this.selectedItem.prop?u.fontColor=t:"w"==this.selectedItem.prop?u.bgColor=t:u.borderColor=t)}),this.color=t;const i=document.getElementById("color-pallet");i&&(i.style.display="none");const a=document.getElementById("request-bg");a&&a.classList.remove("activeRequest")}changeColor(t){let r="";this.setColor(this.color),this.colorPallet.forEach(i=>{this.color===i&&(r=i)}),0===r.length&&this.colorPallet.push(this.color)}closeDialog(){const t=document.getElementById("color-pallet");t&&(t.style.display="none");const r=document.getElementById("request-bg");r&&r.classList.remove("activeRequest")}done(){this.dataService.updateSemesters(this.semesters),this.router.navigate(["home"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xn),l.Y36(ca))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-semester"]],decls:20,vars:3,consts:[["id","request-bg",1,"request-bg",3,"click"],[1,"main-container"],["id","color-pallet",1,"color-pallet"],[1,"color-card"],[1,"color-code"],[3,"ngModel","ngModelChange"],[1,"color-pallets"],["class","colors",3,"click",4,"ngFor","ngForOf"],[1,"add"],[3,"click"],["src","../../../../assets//admin-icons/Plus icon.svg","alt",""],[1,"container"],["class","card",4,"ngFor","ngForOf"],[1,"save-button"],[1,"colors",3,"click"],[1,"color"],[1,"color-inner"],[1,"card"],[1,"wrap"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.NdJ("click",function(){return r.closeDialog()}),l.qZA(),l.TgZ(1,"p"),l._uU(2,"Change styles for semester"),l.qZA(),l.TgZ(3,"div",1),l.TgZ(4,"div",2),l.TgZ(5,"div",3),l.TgZ(6,"div",4),l.TgZ(7,"div"),l._uU(8," Color code "),l.qZA(),l.TgZ(9,"input",5),l.NdJ("ngModelChange",function(a){return r.color=a}),l.qZA(),l.qZA(),l.TgZ(10,"div",6),l.YNc(11,z5,4,6,"div",7),l.qZA(),l.TgZ(12,"div",8),l.TgZ(13,"span",9),l.NdJ("click",function(){return r.changeColor(r.color)}),l._UZ(14,"img",10),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"div",11),l.YNc(16,G5,19,19,"div",12),l.qZA(),l.TgZ(17,"div",13),l.TgZ(18,"button",9),l.NdJ("click",function(){return r.done()}),l._uU(19,"Save"),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(9),l.Q6J("ngModel",r.color),l.xp6(2),l.Q6J("ngForOf",r.colorPallet),l.xp6(5),l.Q6J("ngForOf",r.semesters))},directives:[oi,Kr,Ai,Sr],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto;grid-gap:20px;gap:20px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:.5em;background-color:#dfdfdf;border-radius:10px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{margin-bottom:1em}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{margin-right:20px;width:20px;height:20px;padding:5px;border-radius:50%}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]{border-radius:50%}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:30px;height:30px;padding:10px;border-radius:50%}.color-pallet[_ngcontent-%COMP%]{display:none;position:absolute;margin-top:30%;margin-left:20px;background-color:#fff;z-index:677262367}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]{box-shadow:1px 1px 1px 1px #d2d2d2;border-radius:10px;padding:10px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]{background-color:#dfdfdf;padding:4px;border-radius:10px;font-size:10px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:97%;height:40px;background-color:#dfdfdf;border:none;text-align:center;font-size:20px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, .color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border:none}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-pallets[_ngcontent-%COMP%]{margin-top:2em;display:grid;width:100%;grid-template-columns:auto auto auto auto auto;justify-content:space-evenly;grid-gap:5px;gap:5px;margin-left:10px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{margin-bottom:1em}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{margin-right:20px;width:20px;height:20px;padding:5px;border-radius:50%}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]{border-radius:50%}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:30px;height:30px;padding:10px;border-radius:50%}.color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{display:flex;padding-top:1em}.color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:auto}.color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background-color:#dfdfdf;padding:7px;border-radius:10px;width:15px;height:15px}.request-bg[_ngcontent-%COMP%]{position:fixed;background-color:#0000001a;transform:translate(-50%,-50%) scale(0);transition:1ms ease-in-out;border:1px solid black;border-radius:10px;z-index:1;width:700px;max-width:80%;height:1000vh;padding:20em;text-align:center}.activeRequest[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.save-button[_ngcontent-%COMP%]{position:fixed;top:auto;bottom:120px;margin-left:20%;margin-right:auto}.save-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;width:200px;border:none;top:auto}"]}),n})();function K5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",14),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().setColor(a)}),l.TgZ(1,"span",15),l.TgZ(2,"span",16),l._UZ(3,"span"),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=e.$implicit;l.xp6(1),l.Jzz(" border: 1px solid ",t," !important;  "),l.xp6(1),l.Jzz("background-color: ",t,";")}}function Y5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",17),l.TgZ(1,"p"),l._uU(2),l.qZA(),l.TgZ(3,"div",18),l.TgZ(4,"div",14),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().selectItemtoColor(a.level,"font")}),l.TgZ(5,"span",15),l.TgZ(6,"span",16),l._UZ(7,"span"),l.qZA(),l.qZA(),l._uU(8," Font & Border "),l.qZA(),l.TgZ(9,"div",14),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().selectItemtoColor(a.level,"bg")}),l.TgZ(10,"span",15),l.TgZ(11,"span",16),l._UZ(12,"span"),l.qZA(),l.qZA(),l._uU(13," Selector W "),l.qZA(),l.TgZ(14,"div",14),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().selectItemtoColor(a.level,"bc")}),l.TgZ(15,"span",15),l.TgZ(16,"span",16),l._UZ(17,"span"),l.qZA(),l.qZA(),l._uU(18," Selector D "),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=e.$implicit;l.xp6(2),l.hij(" Level ",t.level,""),l.xp6(3),l.Jzz(" border: 1px solid ",t.fontColor," !important; "),l.xp6(1),l.Jzz("background-color: ",t.fontColor,";"),l.xp6(4),l.Jzz(" border: 1px solid ",t.bgColor," !important;  "),l.xp6(1),l.Jzz("background-color: ",t.bgColor,";"),l.xp6(4),l.Jzz(" border: 1px solid ",t.borderColor," !important;  "),l.xp6(1),l.Jzz("background-color: ",t.borderColor,";")}}let Q5=(()=>{class n{constructor(t,r){this.dataService=t,this.router=r,this.selectedItem={},this.levels=[],this.levelsubscribed="",this.colorPallet=[],this.color="#FFFFF"}ngOnInit(){this.colorPallet=this.dataService.getColors(),this.levelsubscribed=this.dataService.getLevels().subscribe(t=>{this.levels=t.map(r=>Object.assign({},r.payload.doc.data()))})}selectItemtoColor(t,r){this.selectedItem={level:t,prop:r};const i=document.getElementById("request-bg");i&&i.classList.add("activeRequest");const a=document.getElementById("color-pallet");a&&(a.style.display="block")}setColor(t){this.levels.forEach(u=>{u.level==this.selectedItem.level&&("font"==this.selectedItem.prop?u.fontColor=t:"bg"==this.selectedItem.prop?u.bgColor=t:u.borderColor=t)}),this.color=t;const i=document.getElementById("color-pallet");i&&(i.style.display="none");const a=document.getElementById("request-bg");a&&a.classList.remove("activeRequest")}changeColor(t){let r="";this.setColor(this.color),this.colorPallet.forEach(i=>{this.color===i&&(r=i)}),0===r.length&&this.dataService.setColor(this.color)}closeDialog(){const t=document.getElementById("color-pallet");t&&(t.style.display="none");const r=document.getElementById("request-bg");r&&r.classList.remove("activeRequest")}done(){this.dataService.updateLevels(this.levels),this.router.navigate(["home"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ca),l.Y36(xn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-levels"]],decls:20,vars:3,consts:[["id","request-bg",1,"request-bg",3,"click"],[1,"main-container"],["id","color-pallet",1,"color-pallet"],[1,"color-card"],[1,"color-code"],[3,"ngModel","ngModelChange"],[1,"color-pallets"],["class","colors",3,"click",4,"ngFor","ngForOf"],[1,"add"],[3,"click"],["src","../../../../assets//admin-icons/Plus icon.svg","alt",""],[1,"container"],["class","card",4,"ngFor","ngForOf"],[1,"save-button"],[1,"colors",3,"click"],[1,"color"],[1,"color-inner"],[1,"card"],[1,"wrap"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.NdJ("click",function(){return r.closeDialog()}),l.qZA(),l.TgZ(1,"p"),l._uU(2,"Change styles for level"),l.qZA(),l.TgZ(3,"div",1),l.TgZ(4,"div",2),l.TgZ(5,"div",3),l.TgZ(6,"div",4),l.TgZ(7,"div"),l._uU(8," Color code "),l.qZA(),l.TgZ(9,"input",5),l.NdJ("ngModelChange",function(a){return r.color=a}),l.qZA(),l.qZA(),l.TgZ(10,"div",6),l.YNc(11,K5,4,6,"div",7),l.qZA(),l.TgZ(12,"div",8),l.TgZ(13,"span",9),l.NdJ("click",function(){return r.changeColor(r.color)}),l._UZ(14,"img",10),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"div",11),l.YNc(16,Y5,19,19,"div",12),l.qZA(),l.qZA(),l.TgZ(17,"div",13),l.TgZ(18,"button",9),l.NdJ("click",function(){return r.done()}),l._uU(19,"Save"),l.qZA(),l.qZA()),2&t&&(l.xp6(9),l.Q6J("ngModel",r.color),l.xp6(2),l.Q6J("ngForOf",r.colorPallet),l.xp6(5),l.Q6J("ngForOf",r.levels))},directives:[oi,Kr,Ai,Sr],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;grid-gap:20px;gap:20px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:.5em;background-color:#dfdfdf;border-radius:10px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{margin-bottom:1em}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{margin-right:20px;width:20px;height:20px;padding:5px;border-radius:50%}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]{border-radius:50%}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:30px;height:30px;padding:10px;border-radius:50%}.color-pallet[_ngcontent-%COMP%]{display:none;position:absolute;margin-top:30%;margin-left:20px;background-color:#fff;z-index:677262367}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]{box-shadow:1px 1px 1px 1px #d2d2d2;border-radius:10px;padding:10px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]{background-color:#dfdfdf;padding:4px;border-radius:10px;font-size:10px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:97%;height:40px;background-color:#dfdfdf;border:none;text-align:center;font-size:20px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, .color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border:none}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .color-pallets[_ngcontent-%COMP%]{margin-top:2em;display:grid;width:100%;grid-template-columns:auto auto auto auto auto;justify-content:space-evenly;grid-gap:5px;gap:5px;margin-left:10px}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{margin-bottom:1em}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{margin-right:20px;width:20px;height:20px;padding:5px;border-radius:50%}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]{border-radius:50%}.color-pallet[_ngcontent-%COMP%]   .color-card[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   .color-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:30px;height:30px;padding:10px;border-radius:50%}.color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{display:flex;padding-top:1em}.color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:auto}.color-pallet[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background-color:#dfdfdf;padding:7px;border-radius:10px;width:15px;height:15px}.request-bg[_ngcontent-%COMP%]{position:absolute;background-color:#0000001a;transform:translate(-50%,-50%) scale(0);transition:1ms ease-in-out;border:1px solid black;border-radius:10px;z-index:1;width:700px;max-width:80%;height:1000vh;padding:20em;text-align:center}.activeRequest[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.save-button[_ngcontent-%COMP%]{position:absolute;top:auto;bottom:120px;margin-left:20%;margin-right:auto}.save-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;width:200px;border:none;top:auto}"]}),n})();function J5(n,e){1&n&&(l.O4$(),l.kcU(),l._UZ(0,"app-programs"))}function X5(n,e){1&n&&(l.O4$(),l.kcU(),l._UZ(0,"app-faculties"))}function eZ(n,e){1&n&&(l.O4$(),l.kcU(),l._UZ(0,"app-semester"))}function tZ(n,e){1&n&&(l.O4$(),l.kcU(),l._UZ(0,"app-levels"))}let NF=(()=>{class n{constructor(t,r){this.router=t,this.activeRoute=r,this.currentView="Finder Settings",this.route=""}ngOnInit(){var t;this.route=this.activeRoute.snapshot.paramMap.get("page"),this.currentView="Finder Settings",(null===(t=this.route)||void 0===t?void 0:t.length)>3&&this.switchView(this.route)}switchView(t){this.currentView=t;const r=document.getElementById("settings");r&&(r.style.display="none");const i=document.getElementById("button");i&&(i.style.display="block")}settingsDone(){const t=document.getElementById("settings");t&&(t.style.display="block"),this.currentView="Finder Settings"}backHome(){this.router.navigate(["admin-page"])}back(){"Finder Settings"!=this.currentView?this.settingsDone():this.backHome()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xn),l.Y36(xi))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-finder-settings"]],decls:63,vars:5,consts:[[1,"main-container"],["id","header",1,"header"],[1,"header-darker"],[1,"wrapper"],[1,"back-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","44.432","height","42.714","viewBox","0 0 44.432 42.714"],["id","icon_","data-name","icon ","transform","translate(-5.813 -5.6)"],["id","Rectangle_7","data-name","Rectangle 7","width","41.777","height","7","rx","3.5","transform","translate(8.468 23.018)","fill","#fff"],["id","Rectangle_77","data-name","Rectangle 77","width","30","height","7","rx","3.5","transform","translate(5.813 26.813) rotate(-45)","fill","#fff"],["id","Rectangle_78","data-name","Rectangle 78","width","30","height","7","rx","3.5","transform","translate(27.113 48.314) rotate(-135)","fill","#fff"],[1,"library"],[1,"more-btn"],["id","Kebab_icon","data-name","Kebab icon","xmlns","http://www.w3.org/2000/svg","width","10","height","50","viewBox","0 0 10 50"],["id","Rectangle_53","data-name","Rectangle 53","width","10","height","10","rx","5","transform","translate(10 40) rotate(90)","fill","#fff"],["id","Rectangle_50","data-name","Rectangle 50","width","10","height","10","rx","5","transform","translate(10 20) rotate(90)","fill","#fff"],["id","Rectangle_51","data-name","Rectangle 51","width","10","height","10","rx","5","transform","translate(10) rotate(90)","fill","#fff"],[1,"container"],["id","settings",1,"settings"],[1,"finder",3,"click"],["id","Component_7","data-name","Component 7","xmlns","http://www.w3.org/2000/svg","width","73.095","height","76.003","viewBox","0 0 73.095 76.003"],["id","Exclusion_6","data-name","Exclusion 6","d","M-1110.845,929h-13.217a2.469,2.469,0,0,1-2.444-2.072l-1.667-10a27.932,27.932,0,0,1-6.377-3.681l-9.492,3.556a2.437,2.437,0,0,1-.871.161,2.481,2.481,0,0,1-2.144-1.242l-6.61-11.446a2.471,2.471,0,0,1,.572-3.153l7.81-6.432a26.947,26.947,0,0,1-.256-3.693,26.944,26.944,0,0,1,.256-3.693l-7.81-6.432a2.471,2.471,0,0,1-.572-3.153l6.61-11.447a2.482,2.482,0,0,1,2.144-1.24,2.447,2.447,0,0,1,.871.16l9.492,3.556a27.932,27.932,0,0,1,6.377-3.682l1.668-10a2.468,2.468,0,0,1,2.443-2.072h13.217a2.47,2.47,0,0,1,1.71.684,2.461,2.461,0,0,1,.734,1.388l1.668,10a27.96,27.96,0,0,1,6.377,3.681l9.492-3.555a2.462,2.462,0,0,1,.872-.16,2.48,2.48,0,0,1,2.143,1.24l6.609,11.447a2.4,2.4,0,0,1,.169.354,2.474,2.474,0,0,1-.741,2.8l-7.81,6.432a26.945,26.945,0,0,1,.256,3.693,26.943,26.943,0,0,1-.256,3.693l7.81,6.431a2.493,2.493,0,0,1,.735,1.013,2.487,2.487,0,0,1,.163,1.072,2.454,2.454,0,0,1-.327,1.068l-6.609,11.446a2.483,2.483,0,0,1-2.143,1.241,2.451,2.451,0,0,1-.872-.16l-9.492-3.556a27.929,27.929,0,0,1-6.377,3.681l-1.668,10a2.443,2.443,0,0,1-.1.407A2.479,2.479,0,0,1-1110.845,929Zm-17.254-54.119V908h22.49v-6.953h-14.068V874.885Z","transform","translate(1154.002 -853)","fill","#151ceb"],[1,"desc"],[1,"title"],["id","Kebab_icon","data-name","Kebab icon","xmlns","http://www.w3.org/2000/svg","width","10","height","50","viewBox","0 0 10 50",2,"visibility","none !important"],["id","Rectangle_53","data-name","Rectangle 53","width","10","height","10","rx","5","transform","translate(10 40) rotate(90)","fill","#DFDFDF"],["id","icon_Semester","xmlns","http://www.w3.org/2000/svg","width","73.095","height","76.003","viewBox","0 0 73.095 76.003"],["id","Exclusion_6","data-name","Exclusion 6","d","M-1110.845,929h-13.217a2.469,2.469,0,0,1-2.444-2.072l-1.667-10a27.932,27.932,0,0,1-6.377-3.681l-9.492,3.556a2.437,2.437,0,0,1-.871.161,2.481,2.481,0,0,1-2.144-1.242l-6.61-11.446a2.471,2.471,0,0,1,.572-3.153l7.81-6.432a26.947,26.947,0,0,1-.256-3.693,26.944,26.944,0,0,1,.256-3.693l-7.81-6.432a2.471,2.471,0,0,1-.572-3.153l6.61-11.447a2.482,2.482,0,0,1,2.144-1.24,2.447,2.447,0,0,1,.871.16l9.492,3.556a27.932,27.932,0,0,1,6.377-3.682l1.668-10a2.468,2.468,0,0,1,2.443-2.072h13.217a2.47,2.47,0,0,1,1.71.684,2.461,2.461,0,0,1,.734,1.388l1.668,10a27.96,27.96,0,0,1,6.377,3.681l9.492-3.555a2.462,2.462,0,0,1,.872-.16,2.48,2.48,0,0,1,2.143,1.24l6.609,11.447a2.4,2.4,0,0,1,.169.354,2.474,2.474,0,0,1-.741,2.8l-7.81,6.432a26.945,26.945,0,0,1,.256,3.693,26.943,26.943,0,0,1-.256,3.693l7.81,6.431a2.493,2.493,0,0,1,.735,1.013,2.487,2.487,0,0,1,.163,1.072,2.454,2.454,0,0,1-.327,1.068l-6.609,11.446a2.483,2.483,0,0,1-2.143,1.241,2.451,2.451,0,0,1-.872-.16l-9.492-3.556a27.929,27.929,0,0,1-6.377,3.681l-1.668,10a2.443,2.443,0,0,1-.1.407A2.479,2.479,0,0,1-1110.845,929Zm-20.7-30.435c.137,6.37,5.422,10.327,13.792,10.327,8.737,0,13.954-4.144,13.954-11.084,0-5.29-2.923-8.213-9.478-9.478l-4.269-.826c-3.475-.686-4.957-1.75-4.957-3.557,0-2.189,1.928-3.6,4.911-3.6s5.187,1.633,5.37,3.971h7.78c-.139-6.177-5.469-10.328-13.265-10.328-8,0-13.172,4.207-13.172,10.717,0,5.183,3.174,8.524,9.18,9.661l4.36.872a11.306,11.306,0,0,1,4.037,1.386,2.484,2.484,0,0,1,1.2,2.194,3.176,3.176,0,0,1-1.472,2.665,6.667,6.667,0,0,1-3.829,1.03c-3.5,0-5.9-1.549-6.1-3.947Z","transform","translate(1154.002 -853)","fill","#27772c"],[1,"finder","cfolder",3,"click"],["id","icon_Faculty","xmlns","http://www.w3.org/2000/svg","width","73.095","height","76.003","viewBox","0 0 73.095 76.003"],["id","Exclusion_6","data-name","Exclusion 6","d","M-1110.845,929h-13.217a2.469,2.469,0,0,1-2.444-2.072l-1.667-10a27.932,27.932,0,0,1-6.377-3.681l-9.492,3.556a2.437,2.437,0,0,1-.871.161,2.481,2.481,0,0,1-2.144-1.242l-6.61-11.446a2.471,2.471,0,0,1,.572-3.153l7.81-6.432a26.947,26.947,0,0,1-.256-3.693,26.944,26.944,0,0,1,.256-3.693l-7.81-6.432a2.471,2.471,0,0,1-.572-3.153l6.61-11.447a2.482,2.482,0,0,1,2.144-1.24,2.447,2.447,0,0,1,.871.16l9.492,3.556a27.932,27.932,0,0,1,6.377-3.682l1.668-10a2.468,2.468,0,0,1,2.443-2.072h13.217a2.47,2.47,0,0,1,1.71.684,2.461,2.461,0,0,1,.734,1.388l1.668,10a27.96,27.96,0,0,1,6.377,3.681l9.492-3.555a2.462,2.462,0,0,1,.872-.16,2.48,2.48,0,0,1,2.143,1.24l6.609,11.447a2.4,2.4,0,0,1,.169.354,2.474,2.474,0,0,1-.741,2.8l-7.81,6.432a26.945,26.945,0,0,1,.256,3.693,26.943,26.943,0,0,1-.256,3.693l7.81,6.431a2.493,2.493,0,0,1,.735,1.013,2.487,2.487,0,0,1,.163,1.072,2.454,2.454,0,0,1-.327,1.068l-6.609,11.446a2.483,2.483,0,0,1-2.143,1.241,2.451,2.451,0,0,1-.872-.16l-9.492-3.556a27.929,27.929,0,0,1-6.377,3.681l-1.668,10a2.443,2.443,0,0,1-.1.407A2.479,2.479,0,0,1-1110.845,929Zm-17.254-54.119V908h8.422V895.653h12.806V889.2h-12.806v-7.55h14.114v-6.77Z","transform","translate(1154.002 -853)","fill","#6915eb"],["id","Component_8","data-name","Component 8","xmlns","http://www.w3.org/2000/svg","width","38.47","height","40","viewBox","0 0 38.47 40"],["id","Exclusion_6","data-name","Exclusion 6","d","M22.713,40H15.756a1.3,1.3,0,0,1-1.286-1.09l-.877-5.263a14.675,14.675,0,0,1-3.357-1.937l-5,1.871a1.28,1.28,0,0,1-.458.085,1.307,1.307,0,0,1-1.128-.653L.176,26.987a1.3,1.3,0,0,1,.3-1.659l4.11-3.385A14.283,14.283,0,0,1,4.452,20a14.11,14.11,0,0,1,.135-1.943L.477,14.671a1.3,1.3,0,0,1-.3-1.659L3.654,6.988a1.309,1.309,0,0,1,1.129-.653,1.285,1.285,0,0,1,.458.084l5,1.871a14.675,14.675,0,0,1,3.357-1.937l.878-5.263A1.3,1.3,0,0,1,15.757,0h6.956A1.3,1.3,0,0,1,24,1.09l.877,5.263A14.687,14.687,0,0,1,28.233,8.29l5-1.871a1.3,1.3,0,0,1,1.587.569l3.479,6.025a1.3,1.3,0,0,1-.3,1.659l-4.11,3.386a14.145,14.145,0,0,1,0,3.886l4.11,3.386a1.306,1.306,0,0,1,.472,1.1,1.286,1.286,0,0,1-.172.562l-3.479,6.025a1.3,1.3,0,0,1-1.587.569l-5-1.871a14.687,14.687,0,0,1-3.356,1.937L24,38.91a1.376,1.376,0,0,1-.054.213A1.305,1.305,0,0,1,22.713,40ZM13.571,11.353v16.91h4.3V23.306H20.72c3.8,0,6.351-2.392,6.351-5.953a5.725,5.725,0,0,0-6.093-6Zm6.247,8.708H17.872v-5.4h1.969c1.859,0,2.883.961,2.883,2.707S21.692,20.06,19.818,20.06Z","transform","translate(0 0)","fill","#bd2a22"],[4,"ngIf"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.NdJ("click",function(){return r.back()}),l.O4$(),l.TgZ(5,"svg",5),l.TgZ(6,"g",6),l._UZ(7,"rect",7),l._UZ(8,"rect",8),l._UZ(9,"rect",9),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(10,"div",10),l._uU(11),l.qZA(),l.TgZ(12,"div",11),l.O4$(),l.TgZ(13,"svg",12),l._UZ(14,"rect",13),l._UZ(15,"rect",14),l._UZ(16,"rect",15),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(17,"div",16),l.TgZ(18,"div",17),l.TgZ(19,"div",18),l.NdJ("click",function(){return r.switchView("Level")}),l.O4$(),l.TgZ(20,"svg",19),l._UZ(21,"path",20),l.qZA(),l.kcU(),l.TgZ(22,"div",21),l.TgZ(23,"p",22),l._uU(24,"Level"),l.qZA(),l.TgZ(25,"p"),l._uU(26," Change styles for level 100, 200, 300, & 400 "),l.O4$(),l.TgZ(27,"svg",23),l._UZ(28,"rect",24),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(29,"div",18),l.NdJ("click",function(){return r.switchView("Semester")}),l.O4$(),l.TgZ(30,"svg",25),l._UZ(31,"path",26),l.qZA(),l.kcU(),l.TgZ(32,"div",21),l.TgZ(33,"p",22),l._uU(34,"Semester"),l.qZA(),l.TgZ(35,"p"),l._uU(36," Change styles for Semester 1 & 2 "),l.O4$(),l.TgZ(37,"svg",23),l._UZ(38,"rect",24),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(39,"div",27),l.NdJ("click",function(){return r.switchView("Faculty")}),l.O4$(),l.TgZ(40,"svg",28),l._UZ(41,"path",29),l.qZA(),l.kcU(),l.TgZ(42,"div",21),l.TgZ(43,"p",22),l._uU(44,"Faculties"),l.qZA(),l.TgZ(45,"p"),l._uU(46," Change styles for Faculties "),l.O4$(),l.TgZ(47,"svg",23),l._UZ(48,"rect",24),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(49,"div",27),l.NdJ("click",function(){return r.switchView("Programmes")}),l.O4$(),l.TgZ(50,"svg",30),l._UZ(51,"path",31),l.qZA(),l.kcU(),l.TgZ(52,"div",21),l.TgZ(53,"p",22),l._uU(54,"Programmes"),l.qZA(),l.TgZ(55,"p"),l._uU(56," Change styles for various programmes "),l.O4$(),l.TgZ(57,"svg",23),l._UZ(58,"rect",24),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(59,J5,1,0,"app-programs",32),l.YNc(60,X5,1,0,"app-faculties",32),l.YNc(61,eZ,1,0,"app-semester",32),l.YNc(62,tZ,1,0,"app-levels",32),l.qZA(),l.qZA()),2&t&&(l.xp6(11),l.Oqu(r.currentView),l.xp6(48),l.Q6J("ngIf","Programmes"==r.currentView),l.xp6(1),l.Q6J("ngIf","Faculty"==r.currentView),l.xp6(1),l.Q6J("ngIf","Semester"==r.currentView),l.xp6(1),l.Q6J("ngIf","Level"==r.currentView))},directives:[tr,j5,H5,W5,Q5],styles:['.main-container[_ngcontent-%COMP%]{@import"https://fonts.googleapis.com/css2?family=Fira+Sans:wght@100&display=swap";font-family:"Fira Sans",sans-serif!important;text-align:center}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-image:url(admin-header.84e37655b573e67b.png);background-position:center;background-repeat:no-repeat;background-size:cover;position:sticky!important;top:0;transition:.3s}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{background-color:#ffffff4d;border-radius:50%;width:35px;height:35px;text-align:center;margin-top:0;z-index:100005645435555540}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:15px;height:15px;margin-top:10px;margin-bottom:auto;z-index:100005645435555540}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-darker[_ngcontent-%COMP%]{margin-top:0;padding:6px 1em}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{margin-left:auto}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .library[_ngcontent-%COMP%]{margin-left:20px;margin-top:7px;font-size:20px;font-weight:bold;color:#fff}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .library.more-btn[_ngcontent-%COMP%]{opacity:1}.main-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:1em;text-align:left}.main-container[_ngcontent-%COMP%]   .finder[_ngcontent-%COMP%]{background-color:#dfdfdf;border-radius:10px;padding:.1em .1em .1em 10px;display:flex;margin-bottom:20px}.main-container[_ngcontent-%COMP%]   .finder[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:30px;height:30px;margin-top:auto;margin-bottom:auto;padding-right:20px}.main-container[_ngcontent-%COMP%]   .finder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;color:#4a4646}.main-container[_ngcontent-%COMP%]   .finder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{padding:0;margin-left:5px;margin-right:5px;margin-top:0;width:5px}.main-container[_ngcontent-%COMP%]   .finder[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:20px;margin-bottom:-20px}.main-container[_ngcontent-%COMP%]   .cfolder[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{visibility:none}']}),n})();function nZ(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",26),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw().courseClick(a)}),l.TgZ(1,"div",27),l.TgZ(2,"p"),l._uU(3),l.qZA(),l.TgZ(4,"div",28),l.TgZ(5,"span",29),l._uU(6),l.qZA(),l.TgZ(7,"span",29),l._uU(8),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"div",30),l._UZ(10,"img",31),l.qZA(),l.qZA()}if(2&n){const t=e.$implicit;l.Q6J("id",t.course),l.xp6(3),l.Oqu(t.course),l.xp6(3),l.hij("Programmes: ",t.programmes.length,""),l.xp6(2),l.hij("Files: ",t.files.length,""),l.xp6(2),l.Q6J("src",t.image,l.LSH)}}function rZ(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",32),l.TgZ(1,"button",33),l.NdJ("click",function(){return l.CHM(t),l.oxw().viewDetails()}),l._uU(2,"View"),l.qZA(),l.TgZ(3,"button",33),l.NdJ("click",function(){return l.CHM(t),l.oxw().editCourse()}),l._uU(4,"Edit"),l.qZA(),l.TgZ(5,"button",33),l.NdJ("click",function(){return l.CHM(t),l.oxw().deleteCourse()}),l._uU(6,"Delete"),l.qZA(),l.qZA()}}const iZ=[{path:"",redirectTo:"admin-page",pathMatch:"full"},{path:"home",component:yO},{path:"home/:selection/:mode",component:yO},{path:"login",component:s5},{path:"main-page",component:RF},{path:"courses/:id",component:RF},{path:"details",component:v5},{path:"admin-page",component:vO},{path:"admin-page/:page",component:vO},{path:"admin-page/:page/:mode",component:vO},{path:"admin/finder",component:NF},{path:"admin/finder/:page",component:NF},{path:"admin/folders/:selection",component:(()=>{class n{constructor(t,r,i){this.router=t,this.dataService=r,this.activeRoute=i,this.courses=[],this.route="",this.selectedCourse={},this.menuup=!1}ngOnInit(){this.dataService.getCourses().subscribe(t=>{this.courses=t.map(r=>Object.assign({},r.payload.doc.data()))}),this.route=this.activeRoute.snapshot.paramMap.get("selection"),"selection"==this.route&&this.dataService.getFilteredCourses().subscribe(t=>{this.courses=t.map(r=>Object.assign({},r.payload.doc.data()))})}back(){this.router.navigate(["admin-page"])}filterCourses(){this.router.navigate(["home","filter-programmes",""])}courseClick(t){this.selectedCourse=t,this.menuup=!0,this.removeStyles();let r=document.getElementById(t.course);r&&(r.style.border="2px solid yellow")}removeStyles(){this.courses.forEach(t=>{const r=document.getElementById(t.course);r&&(r.style.border="none")})}viewDetails(){this.dataService.selectedCourse=this.selectedCourse,this.router.navigate(["/details"]),this.menuup=!1}editCourse(){this.dataService.selectedCourse=this.selectedCourse,this.menuup=!1,this.router.navigate(["admin-page","create-course","edit"])}deleteCourse(){this.dataService.deleteCourses(this.selectedCourse.id,this.selectedCourse.image,this.selectedCourse.files),this.menuup=!1}createCourse(){this.router.navigate(["admin-page","create-course","create"]),this.menuup=!1}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xn),l.Y36(ca),l.Y36(xi))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-course-settings"]],decls:34,vars:2,consts:[[1,"main-container"],["id","header",1,"header"],[1,"header-darker"],[1,"wrapper"],[1,"back-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","44.432","height","42.714","viewBox","0 0 44.432 42.714"],["id","icon_","data-name","icon ","transform","translate(-5.813 -5.6)"],["id","Rectangle_7","data-name","Rectangle 7","width","41.777","height","7","rx","3.5","transform","translate(8.468 23.018)","fill","#fff"],["id","Rectangle_77","data-name","Rectangle 77","width","30","height","7","rx","3.5","transform","translate(5.813 26.813) rotate(-45)","fill","#fff"],["id","Rectangle_78","data-name","Rectangle 78","width","30","height","7","rx","3.5","transform","translate(27.113 48.314) rotate(-135)","fill","#fff"],[1,"library"],[1,"more-btn"],["id","Kebab_icon","data-name","Kebab icon","xmlns","http://www.w3.org/2000/svg","width","10","height","50","viewBox","0 0 10 50"],["id","Rectangle_53","data-name","Rectangle 53","width","10","height","10","rx","5","transform","translate(10 40) rotate(90)","fill","#fff"],["id","Rectangle_50","data-name","Rectangle 50","width","10","height","10","rx","5","transform","translate(10 20) rotate(90)","fill","#fff"],["id","Rectangle_51","data-name","Rectangle 51","width","10","height","10","rx","5","transform","translate(10) rotate(90)","fill","#fff"],[1,"wrap-item"],[1,"grid-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","33.044","height","33.045","viewBox","0 0 33.044 33.045"],["id","grid_view_icon","data-name","grid view icon","d","M21.174,33.045a3,3,0,0,1-3-3v-8.87a3,3,0,0,1,3-3h8.87a3,3,0,0,1,3,3v8.87a3,3,0,0,1-3,3ZM3,33.045a3,3,0,0,1-3-3v-8.87a3,3,0,0,1,3-3h8.87a3,3,0,0,1,3,3v8.87a3,3,0,0,1-3,3ZM21.174,14.871a3,3,0,0,1-3-3V3a3,3,0,0,1,3-3h8.87a3,3,0,0,1,3,3v8.87a3,3,0,0,1-3,3ZM3,14.871a3,3,0,0,1-3-3V3A3,3,0,0,1,3,0h8.87a3,3,0,0,1,3,3v8.87a3,3,0,0,1-3,3Z",1,"cls-3"],[1,"title-text"],[1,"container"],["class","card",3,"id","click",4,"ngFor","ngForOf"],["class","action-sheet","id","options",4,"ngIf"],[1,"new-program",3,"click"],["src","../../../../assets//admin-icons/Plus icon.svg","alt",""],[1,"card",3,"id","click"],[1,"wrap-card"],[1,"info"],[1,"faculty"],[1,"image"],["alt","","srcset","",3,"src"],["id","options",1,"action-sheet"],[3,"click"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.NdJ("click",function(){return r.back()}),l.O4$(),l.TgZ(5,"svg",5),l.TgZ(6,"g",6),l._UZ(7,"rect",7),l._UZ(8,"rect",8),l._UZ(9,"rect",9),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(10,"div",10),l._uU(11,"Course Settings"),l.qZA(),l.TgZ(12,"div",11),l.O4$(),l.TgZ(13,"svg",12),l._UZ(14,"rect",13),l._UZ(15,"rect",14),l._UZ(16,"rect",15),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(17,"div",16),l.TgZ(18,"div",17),l.NdJ("click",function(){return r.filterCourses()}),l.O4$(),l.TgZ(19,"svg",18),l.TgZ(20,"defs"),l.TgZ(21,"style"),l._uU(22," .cls-3 { fill: black; } "),l.qZA(),l.qZA(),l._UZ(23,"path",19),l.qZA(),l.kcU(),l.TgZ(24,"div"),l._uU(25," sort by "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(26,"p",20),l._uU(27,"Change structure for course"),l.qZA(),l.TgZ(28,"div",21),l.YNc(29,nZ,11,5,"div",22),l.qZA(),l.YNc(30,rZ,7,0,"div",23),l.qZA(),l.TgZ(31,"div",24),l.NdJ("click",function(){return r.createCourse()}),l._UZ(32,"img",25),l._uU(33," New course "),l.qZA()),2&t&&(l.xp6(29),l.Q6J("ngForOf",r.courses),l.xp6(1),l.Q6J("ngIf",r.menuup))},directives:[Sr,tr],styles:['.main-container[_ngcontent-%COMP%]{@import"https://fonts.googleapis.com/css2?family=Fira+Sans:wght@100&display=swap";font-family:"Fira Sans",sans-serif!important}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-image:url(admin-header.84e37655b573e67b.png);background-position:center;background-repeat:no-repeat;background-size:cover;position:sticky!important;top:0;transition:.3s}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{background-color:#ffffff4d;border-radius:50%;width:35px;height:35px;text-align:center;margin-top:0;z-index:100005645435555540}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:15px;height:15px;margin-top:10px;margin-bottom:auto;z-index:100005645435555540}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-darker[_ngcontent-%COMP%]{margin-top:0;padding:6px 1em}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{margin-left:auto}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .library[_ngcontent-%COMP%]{margin-left:20px;margin-top:7px;font-size:20px;font-weight:bold;color:#fff}.main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .library.more-btn[_ngcontent-%COMP%]{opacity:1}.main-container[_ngcontent-%COMP%]   .wrap-item[_ngcontent-%COMP%]{padding:1em 1em 20px}.main-container[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{padding-left:1em;padding-bottom:0;padding-top:0}.main-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto;grid-gap:20px;gap:20px;padding:20px 1em 1em}.main-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:.5em;background-color:#dfdfdf;border-radius:10px;display:flex;grid-gap:20px;gap:20px;height:100px}.main-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:30%;height:100%;margin-top:auto;margin-bottom:auto;margin-right:10px}.main-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:10px}.main-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap-card[_ngcontent-%COMP%]{width:70%}.main-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:17px}.main-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;grid-gap:20px;gap:20px}.main-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .wrap-card[_ngcontent-%COMP%]   .faculty[_ngcontent-%COMP%]{font-size:13px}.wrap-item[_ngcontent-%COMP%]   .grid-btn[_ngcontent-%COMP%]{margin-left:auto;border-radius:50px;border:1px solid black;padding:5px;width:90px;display:flex;justify-content:space-evenly;font-size:15px}.wrap-item[_ngcontent-%COMP%]   .grid-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:12px;height:12px;margin-right:5px;margin-top:3px}.wrap-item[_ngcontent-%COMP%]   .grid-btn[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex-shrink:0;flex-wrap:nowrap}.new-program[_ngcontent-%COMP%]{background-color:#dfdfdf;width:160px;border-radius:20px;margin-left:49%;padding:10px;position:fixed;top:auto;bottom:15px;margin-top:15vh;display:flex;grid-gap:10px;gap:10px;font-family:"Fira Sans",sans-serif!important}.new-program[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:20px}.action-sheet[_ngcontent-%COMP%]{position:fixed;margin-left:20%;top:37%;background-color:#fff;padding:1em;border-radius:10px}.action-sheet[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;padding:10px;margin-right:20px;margin-top:0;border:none;border-radius:10px}']}),n})()},{path:"admin-page-folder/upload",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-books-upload"]],decls:2,vars:0,template:function(t,r){1&t&&(l.TgZ(0,"p"),l._uU(1,"books-upload works!"),l.qZA())},styles:[""]}),n})()}];let sZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Xb.forRoot(iZ)],Xb]}),n})(),oZ=(()=>{class n{constructor(){this.title="uhall"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},directives:[Ab],styles:[""]}),n})();const CO_firebase={apiKey:"AIzaSyBn_Szhuu32DC2YdnV_En18f-AMRZ41WeM",authDomain:"uhall-library.firebaseapp.com",projectId:"uhall-library",storageBucket:"uhall-library.appspot.com",messagingSenderId:"739179792893",appId:"1:739179792893:web:cbc75d09d84781fee5f194",measurementId:"G-C02NQK0GF1"};var wO=N(6921);const FF="@firebase/database";let EO="";function UF(n){EO=n}class cZ{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,R.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,R.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class uZ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,R.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const VF=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new cZ(e)}}catch(e){}return new uZ},rm=VF("localStorage"),bO=VF("sessionStorage"),vv=new ra.Yd("@firebase/database"),BF=function(){let n=1;return function(){return n++}}(),ZF=function(n){const e=(0,R.dS)(n),t=new R.gQ;t.update(e);const r=t.digest();return R.US.encodeByteArray(r)},Lw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Lw.apply(null,r):e+="object"==typeof r?(0,R.Pz)(r):r,e+=" "}return e};let im=null,qF=!0;const jF=function(n,e){(0,R.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(vv.logLevel=ra.in.VERBOSE,im=vv.log.bind(vv),e&&bO.set("logging_enabled",!0)):"function"==typeof n?im=n:(im=null,bO.remove("logging_enabled"))},Vi=function(...n){if(!0===qF&&(qF=!1,null===im&&!0===bO.get("logging_enabled")&&jF(!0)),im){const e=Lw.apply(null,n);im(e)}},Uw=function(n){return function(...e){Vi(n,...e)}},TO=function(...n){const e="FIREBASE INTERNAL ERROR: "+Lw(...n);vv.error(e)},cu=function(...n){const e=`FIREBASE FATAL ERROR: ${Lw(...n)}`;throw vv.error(e),new Error(e)},oo=function(...n){const e="FIREBASE WARNING: "+Lw(...n);vv.warn(e)},w1=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},zd="[MIN_NAME]",uu="[MAX_NAME]",sm=function(n,e){if(n===e)return 0;if(n===zd||e===uu)return-1;if(e===zd||n===uu)return 1;{const t=E1(n),r=E1(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},fZ=function(n,e){return n===e?0:n<e?-1:1},Vw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,R.Pz)(e))},IO=function(n){if("object"!=typeof n||null===n)return(0,R.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,R.Pz)(e[r]),t+=":",t+=IO(n[e[r]]);return t+="}",t},$F=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Bi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const HF=function(n){(0,R.hu)(!w1(n),"Invalid JSON number");const r=1023;let i,a,u,h,_;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(u%2?1:0),u=Math.floor(u/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const I=w.join("");let A="";for(_=0;_<64;_+=8){let x=parseInt(I.substr(_,8),2).toString(16);1===x.length&&(x="0"+x),A+=x}return A.toLowerCase()},_Z=new RegExp("^-?(0*)\\d{1,10}$"),zF=-2147483648,AO=2147483647,E1=function(n){if(_Z.test(n)){const e=Number(n);if(e>=zF&&e<=AO)return e}return null},Cv=function(n){try{n()}catch(e){setTimeout(()=>{throw oo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Bw=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class vZ{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){oo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class CZ{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Vi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',oo(e)}}let Zw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const QF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,XF="websocket",eL="long_polling";class SO{constructor(e,t,r,i,a=!1,u="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=rm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&rm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function tL(n,e,t){let r;if((0,R.hu)("string"==typeof e,"typeof type must == string"),(0,R.hu)("object"==typeof t,"typeof params must == object"),e===XF)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==eL)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Bi(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class bZ{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,R.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,R.p$)(this.counters_)}}const MO={},PO={};function OO(n){const e=n.toString();return MO[e]||(MO[e]=new bZ),MO[e]}class IZ{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Cv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class wv{constructor(e,t,r,i,a,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Uw(e),this.stats_=OO(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),tL(t,eL,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new IZ(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,R.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xO((...a)=>{const[u,h,_,w,I]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=_;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&QF.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wv.forceAllow_=!0}static forceDisallow(){wv.forceDisallow_=!0}static isAvailable(){return!((0,R.Yr)()||!wv.forceAllow_&&(wv.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,R.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,R.h$)(t),i=$F(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,R.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,R.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class xO{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,R.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=BF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=xO.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Vi("frame writing exception"),h.stack&&Vi(h.stack),Vi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Vi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,R.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Vi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let qw=null;"undefined"!=typeof MozWebSocket?qw=MozWebSocket:"undefined"!=typeof WebSocket&&(qw=WebSocket);let jw=(()=>{class n{constructor(t,r,i,a,u,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Uw(this.connId),this.stats_=OO(r),this.connURL=n.connectionURL_(r,h,_,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const u={v:"5"};return!(0,R.Yr)()&&"undefined"!=typeof location&&location.hostname&&QF.test(location.hostname)&&(u.r="f"),r&&(u.s=r),i&&(u.ls=i),a&&(u.ac=a),tL(t,XF,u)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,rm.set("previous_websocket_failure",!0);try{if((0,R.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${EO}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(a.proxy={origin:h}),this.mySock=new qw(this.connURL,[],a)}else this.mySock=new qw(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==qw&&!n.forceDisallow_}static previouslyFailed(){return rm.isInMemoryStorage||!0===rm.get("previous_websocket_failure")}markConnectionHealthy(){rm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,R.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,R.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,R.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=$F(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class kO{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[wv,jw]}initTransports_(e){const t=jw&&jw.isAvailable();let r=t&&!jw.previouslyFailed();if(e.webSocketOnly&&(t||oo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[jw];else{const i=this.transports_=[];for(const a of kO.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class pL{constructor(e,t,r,i,a,u,h,_,w,I){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Uw("c:"+this.id+":"),this.transportManager_=new kO(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Bw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Vw("t",e),r=Vw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Vw("t",e),r=Vw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Vw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?TO("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):TO("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&oo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Bw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(rm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class gL{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class mL{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,R.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,R.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class T1 extends mL{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,R.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new T1}getInitialEvent(e){return(0,R.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Pn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Cn(){return new Pn("")}function Ht(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function $f(n){return n.pieces_.length-n.pieceNum_}function Bn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Pn(n.pieces_,e)}function NO(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function $w(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function vL(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Pn(e,0)}function ar(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Pn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Pn(t,0)}function zt(n){return n.pieceNum_>=n.pieces_.length}function ao(n,e){const t=Ht(n),r=Ht(e);if(null===t)return e;if(t===r)return ao(Bn(n),Bn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function GZ(n,e){const t=$w(n,0),r=$w(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=sm(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function FO(n,e){if($f(n)!==$f(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function za(n,e){let t=n.pieceNum_,r=e.pieceNum_;if($f(n)>$f(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class WZ{constructor(e,t){this.errorPrefix_=t,this.parts_=$w(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,R.ug)(this.parts_[r]);CL(this)}}function CL(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+om(n))}function om(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class LO extends mL{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new LO}getInitialEvent(e){return(0,R.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Hw=1e3;let A1,am=(()=>{class n extends gL{constructor(t,r,i,a,u,h,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=Uw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,R.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");LO.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&T1.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,R.Pz)(u)),(0,R.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new R.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:h=>{const _=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[u];void 0===h||a!==h||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,R.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,R.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(u,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,_=>{const w=_.d,I=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==I&&this.removeListen_(i,a),t.onComplete&&t.onComplete(I,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,R.r3)(t,"w")){const i=(0,R.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();oo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,R.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,R.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,h=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,R.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const h={p:r,d:i};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,R.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):TO("Unrecognized action received from server: "+(0,R.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,R.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Hw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Hw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ie.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,w=null;const I=function(){w?w.close():(_=!0,a())};t.realtime_={close:I,sendRequest:function(U){(0,R.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(U)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,B]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);_?Vi("getToken() completed but was canceled"):(Vi("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=B&&B.token,w=new pL(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,X=>{oo(X+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(U){t.log_("Failed to get token: "+U),_||(t.repoInfo_.nodeAdmin&&oo(U),I())}}})()}interrupt(t){Vi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Vi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,R.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Hw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>IO(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Pn(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Vi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Vi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,R.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+EO.replace(/\./g,"-")]=1,(0,R.uI)()?t["framework.cordova"]=1:(0,R.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=T1.getInstance().currentlyOnline();return(0,R.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Jt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Jt(e,t)}}class I1{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Jt(zd,e),i=new Jt(zd,t);return 0!==this.compare(r,i)}minPost(){return Jt.MIN}}class bL extends I1{static get __EMPTY_NODE(){return A1}static set __EMPTY_NODE(e){A1=e}compare(e,t){return sm(e.name,t.name)}isDefinedOn(e){throw(0,R.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Jt.MIN}maxPost(){return new Jt(uu,A1)}makePost(e,t){return(0,R.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Jt(e,A1)}toString(){return".key"}}const du=new bL;class D1{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let VO,sc=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:So.EMPTY_NODE,this.right=null!=u?u:So.EMPTY_NODE}copy(t,r,i,a,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return So.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return So.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class So{constructor(e,t=So.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new So(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,sc.BLACK,null,null))}remove(e){return new So(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,sc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new D1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new D1(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new D1(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new D1(this.root_,null,this.comparator_,!0,e)}}function r7(n,e){return sm(n.name,e.name)}function UO(n,e){return sm(n,e)}So.EMPTY_NODE=new class{copy(e,t,r,i,a){return this}insert(e,t,r){return new sc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const TL=function(n){return"number"==typeof n?"number:"+HF(n):"string:"+n},IL=function(n){if(n.isLeafNode()){const e=n.val();(0,R.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,R.r3)(e,".sv"),"Priority must be a string or number.")}else(0,R.hu)(n===VO||n.isEmpty(),"priority of unexpected type.");(0,R.hu)(n===VO||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let AL,DL,SL,Ev=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,R.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),IL(this.priorityNode_)}static set __childrenNodeConstructor(t){AL=t}static get __childrenNodeConstructor(){return AL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return zt(t)?this:".priority"===Ht(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Ht(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,R.hu)(".priority"!==i||1===$f(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Bn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+TL(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?HF(this.value_):this.value_,this.lazyHash_=ZF(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,R.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,R.hu)(a>=0,"Unknown leaf type: "+r),(0,R.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Wn=new class extends I1{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?sm(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Jt.MIN}maxPost(){return new Jt(uu,new Ev("[PRIORITY-POST]",SL))}makePost(e,t){const r=DL(e);return new Jt(t,new Ev("[PRIORITY-POST]",r))}toString(){return".priority"}},l7=Math.log(2);class c7{constructor(e){this.count=parseInt(Math.log(e+1)/l7,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const S1=function(n,e,t,r){n.sort(e);const i=function(_,w){const I=w-_;let A,x;if(0===I)return null;if(1===I)return A=n[_],x=t?t(A):A,new sc(x,A.node,sc.BLACK,null,null);{const U=parseInt(I/2,10)+_,B=i(_,U),X=i(U+1,w);return A=n[U],x=t?t(A):A,new sc(x,A.node,sc.BLACK,B,X)}},h=function(_){let w=null,I=null,A=n.length;const x=function(B,X){const de=A-B,Ge=A;A-=B;const Ke=i(de+1,Ge),ot=n[de],ze=t?t(ot):ot;U(new sc(ze,ot.node,X,null,Ke))},U=function(B){w?(w.left=B,w=B):(I=B,w=B)};for(let B=0;B<_.count;++B){const X=_.nextBitIsOne(),de=Math.pow(2,_.count-(B+1));X?x(de,sc.BLACK):(x(de,sc.BLACK),x(de,sc.RED))}return I}(new c7(n.length));return new So(r||e,h)};let BO;const bv={};class Gd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,R.hu)(bv&&Wn,"ChildrenNode.ts has not been loaded"),BO=BO||new Gd({".priority":bv},{".priority":Wn}),BO}get(e){const t=(0,R.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof So?t:null}hasIndex(e){return(0,R.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,R.hu)(e!==du,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Jt.Wrap);let h,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();h=i?S1(r,e.getCompare()):bv;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const I=Object.assign({},this.indexes_);return I[_]=h,new Gd(I,w)}addToIndexes(e,t){const r=(0,R.UI)(this.indexes_,(i,a)=>{const u=(0,R.DV)(this.indexSet_,a);if((0,R.hu)(u,"Missing index implementation for "+a),i===bv){if(u.isDefinedOn(e.node)){const h=[],_=t.getIterator(Jt.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&h.push(w),w=_.getNext();return h.push(e),S1(h,u.getCompare())}return bv}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new Jt(e.name,h))),_.insert(e,e.node)}});return new Gd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,R.UI)(this.indexes_,i=>{if(i===bv)return i;{const a=t.get(e.name);return a?i.remove(new Jt(e.name,a)):i}});return new Gd(r,this.indexSet_)}}let zw,Ft=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&IL(this.priorityNode_),this.children_.isEmpty()&&(0,R.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return zw||(zw=new n(new So(UO),null,Gd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||zw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?zw:r}}getChild(t){const r=Ht(t);return null===r?this:this.getImmediateChild(r).getChild(Bn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,R.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Jt(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?zw:this.priorityNode_;return new n(a,h,u)}}updateChild(t,r){const i=Ht(t);if(null===i)return r;{(0,R.hu)(".priority"!==Ht(t)||1===$f(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Bn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(Wn,(h,_)=>{r[h]=_.val(t),i++,u&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):u=!1}),!t&&u&&a<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+TL(this.getPriority().val())+":"),this.forEachChild(Wn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":ZF(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new Jt(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Jt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Jt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Jt.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Jt.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Gw?-1:0}withIndex(t){if(t===du||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===du||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Wn),a=r.getIterator(Wn);let u=i.getNext(),h=a.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=a.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===du?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Gw=new class extends Ft{constructor(){super(new So(UO),Ft.EMPTY_NODE,Gd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ft.EMPTY_NODE}isEmpty(){return!1}};function gr(n,e=null){if(null===n)return Ft.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,R.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ev(n,gr(e));if(n instanceof Array){let t=Ft.EMPTY_NODE;return Bi(n,(r,i)=>{if((0,R.r3)(n,r)&&"."!==r.substring(0,1)){const a=gr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(gr(e))}{const t=[];let r=!1;if(Bi(n,(u,h)=>{if("."!==u.substring(0,1)){const _=gr(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new Jt(u,_)))}}),0===t.length)return Ft.EMPTY_NODE;const a=S1(t,r7,u=>u.name,UO);if(r){const u=S1(t,Wn.getCompare());return new Ft(a,gr(e),new Gd({".priority":u},{".priority":Wn}))}return new Ft(a,gr(e),Gd.Default)}}Object.defineProperties(Jt,{MIN:{value:new Jt(zd,Ft.EMPTY_NODE)},MAX:{value:new Jt(uu,Gw)}}),bL.__EMPTY_NODE=Ft.EMPTY_NODE,Ev.__childrenNodeConstructor=Ft,function(n){VO=n}(Gw),function(n){SL=n}(Gw),function(n){DL=n}(gr);class ZO extends I1{constructor(e){super(),this.indexPath_=e,(0,R.hu)(!zt(e)&&".priority"!==Ht(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?sm(e.name,t.name):a}makePost(e,t){const r=gr(e),i=Ft.EMPTY_NODE.updateChild(this.indexPath_,r);return new Jt(t,i)}maxPost(){const e=Ft.EMPTY_NODE.updateChild(this.indexPath_,Gw);return new Jt(uu,e)}toString(){return $w(this.indexPath_,0).join("/")}}const qO=new class extends I1{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?sm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Jt.MIN}maxPost(){return Jt.MAX}makePost(e,t){const r=gr(e);return new Jt(t,r)}toString(){return".value"}},Tv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",f7=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Tv.charAt(t%64),t=Math.floor(t/64);(0,R.hu)(0===t,"Cannot push at time == 0");let u=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=Tv.charAt(e[i]);return(0,R.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),OL=function(n){if(n===""+AO)return"-";const e=E1(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return uu;const a=Tv.charAt(Tv.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},xL=function(n){if(n===""+zF)return zd;const e=E1(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+AO:(delete t[t.length-1],t.join("")):(t[t.length-1]=Tv.charAt(Tv.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function kL(n){return{type:"value",snapshotNode:n}}function Iv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Ww(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Kw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class $O{constructor(e){this.index_=e}updateChild(e,t,r,i,a,u){(0,R.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(Ww(t,h)):(0,R.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(Iv(t,r)):u.trackChildChange(Kw(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Wn,(i,a)=>{t.hasChild(i)||r.trackChildChange(Ww(i,a))}),t.isLeafNode()||t.forEachChild(Wn,(i,a)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(a)||r.trackChildChange(Kw(i,a,u))}else r.trackChildChange(Iv(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ft.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Yw{constructor(e){this.indexedFilter_=new $O(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Yw.getStartPost_(e),this.endPost_=Yw.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,u){return this.matches(new Jt(t,r))||(r=Ft.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ft.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ft.EMPTY_NODE);const a=this;return t.forEachChild(Wn,(u,h)=>{a.matches(new Jt(u,h))||(i=i.updateImmediateChild(u,Ft.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class g7{constructor(e){this.rangedFilter_=new Yw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,u){return this.rangedFilter_.matches(new Jt(t,r))||(r=Ft.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,u):this.fullLimitUpdateChild_(e,t,r,a,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ft.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Ft.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const h=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(h.name,h.node),u++}}else{let a,u,h,_;if(i=t.withIndex(this.index_),i=i.updatePriority(Ft.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const A=this.index_.getCompare();h=(x,U)=>A(U,x)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,I=!1;for(;_.hasNext();){const A=_.getNext();!I&&h(a,A)<=0&&(I=!0),I&&w<this.limit_&&h(A,u)<=0?w++:i=i.updateImmediateChild(A.name,Ft.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let u;if(this.reverse_){const A=this.index_.getCompare();u=(x,U)=>A(U,x)}else u=this.index_.getCompare();const h=e;(0,R.hu)(h.numChildren()===this.limit_,"");const _=new Jt(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),I=this.rangedFilter_.matches(_);if(h.hasChild(t)){const A=h.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=x&&(x.name===t||h.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const U=null==x?1:u(x,_);if(I&&!r.isEmpty()&&U>=0)return null!=a&&a.trackChildChange(Kw(t,r,A)),h.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(Ww(t,A));const X=h.updateImmediateChild(t,Ft.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(null!=a&&a.trackChildChange(Iv(x.name,x.node)),X.updateImmediateChild(x.name,x.node)):X}}return r.isEmpty()?e:I&&u(w,_)>=0?(null!=a&&(a.trackChildChange(Ww(w.name,w.node)),a.trackChildChange(Iv(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,Ft.EMPTY_NODE)):e}}class M1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:zd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:uu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,R.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Wn}copy(){const e=new M1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function HO(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function zO(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function P1(n,e){const t=n.copy();return t.index_=e,t}function RL(n){const e={};if(n.isDefault())return e;let t;return n.index_===Wn?t="$priority":n.index_===qO?t="$value":n.index_===du?t="$key":((0,R.hu)(n.index_ instanceof ZO,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,R.Pz)(t),n.startSet_&&(e.startAt=(0,R.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,R.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,R.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,R.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function NL(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Wn&&(e.i=n.index_.toString()),e}class O1 extends gL{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Uw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,R.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=O1.getListenId_(e,r),h={};this.listens_[u]=h;const _=RL(e._queryParams);this.restRequest_(a+".json",_,(w,I)=>{let A=I;if(404===w&&(A=null,w=null),null===w&&this.onDataUpdate_(a,A,!1,r),(0,R.DV)(this.listens_,u)===h){let x;x=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(x,null)}})}unlisten(e,t){const r=O1.getListenId_(e,t);delete this.listens_[r]}get(e){const t=RL(e._queryParams),r=e._path.toString(),i=new R.BH;return this.restRequest_(r+".json",t,(a,u)=>{let h=u;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,R.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,R.cI)(h.responseText)}catch(w){oo("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&oo("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class w7{constructor(){this.rootNode_=Ft.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function x1(){return{value:null,children:new Map}}function Av(n,e,t){if(zt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Ht(e);n.children.has(r)||n.children.set(r,x1()),Av(n.children.get(r),e=Bn(e),t)}}function GO(n,e){if(zt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Wn,(r,i)=>{Av(n,new Pn(r),i)}),GO(n,e)}}if(n.children.size>0){const t=Ht(e);return e=Bn(e),n.children.has(t)&&GO(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function WO(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{WO(i,new Pn(e.toString()+"/"+r),t)})}class b7{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Bi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class A7{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new b7(e);const r=1e4+2e4*Math.random();Bw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Bi(e,(i,a)=>{a>0&&(0,R.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Bw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ga=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ga||(Ga={})),Ga))();function QO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class k1{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ga.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(zt(this.path)){if(null!=this.affectedTree.value)return(0,R.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Pn(e));return new k1(Cn(),t,this.revert)}}return(0,R.hu)(Ht(this.path)===e,"operationForChild called for unrelated child."),new k1(Bn(this.path),this.affectedTree,this.revert)}}class Qw{constructor(e,t){this.source=e,this.path=t,this.type=Ga.LISTEN_COMPLETE}operationForChild(e){return zt(this.path)?new Qw(this.source,Cn()):new Qw(this.source,Bn(this.path))}}class lm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ga.OVERWRITE}operationForChild(e){return zt(this.path)?new lm(this.source,Cn(),this.snap.getImmediateChild(e)):new lm(this.source,Bn(this.path),this.snap)}}class Dv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ga.MERGE}operationForChild(e){if(zt(this.path)){const t=this.children.subtree(new Pn(e));return t.isEmpty()?null:t.value?new lm(this.source,Cn(),t.value):new Dv(this.source,Cn(),t)}return(0,R.hu)(Ht(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Dv(this.source,Bn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Hf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(zt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ht(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class D7{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Jw(n,e,t,r,i,a){const u=r.filter(h=>h.type===t);u.sort((h,_)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,R.g5)("Should only compare child_ events.");const r=new Jt(e.childName,e.snapshotNode),i=new Jt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),u.forEach(h=>{const _=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(_,n.query_))})})}function R1(n,e){return{eventCache:n,serverCache:e}}function Xw(n,e,t,r){return R1(new Hf(e,t,r),n.serverCache)}function LL(n,e,t,r){return R1(n.eventCache,new Hf(e,t,r))}function N1(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function cm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let JO;class Kn{constructor(e,t=(()=>(JO||(JO=new So(fZ)),JO))()){this.value=e,this.children=t}static fromObject(e){let t=new Kn(null);return Bi(e,(r,i)=>{t=t.set(new Pn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Cn(),value:this.value};if(zt(e))return null;{const r=Ht(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Bn(e),t);return null!=a?{path:ar(new Pn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(zt(e))return this;{const t=Ht(e),r=this.children.get(t);return null!==r?r.subtree(Bn(e)):new Kn(null)}}set(e,t){if(zt(e))return new Kn(t,this.children);{const r=Ht(e),a=(this.children.get(r)||new Kn(null)).set(Bn(e),t),u=this.children.insert(r,a);return new Kn(this.value,u)}}remove(e){if(zt(e))return this.children.isEmpty()?new Kn(null):new Kn(null,this.children);{const t=Ht(e),r=this.children.get(t);if(r){const i=r.remove(Bn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Kn(null):new Kn(this.value,a)}return this}}get(e){if(zt(e))return this.value;{const t=Ht(e),r=this.children.get(t);return r?r.get(Bn(e)):null}}setTree(e,t){if(zt(e))return t;{const r=Ht(e),a=(this.children.get(r)||new Kn(null)).setTree(Bn(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Kn(this.value,u)}}fold(e){return this.fold_(Cn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(ar(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Cn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(zt(e))return null;{const a=Ht(e),u=this.children.get(a);return u?u.findOnPath_(Bn(e),ar(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Cn(),t)}foreachOnPath_(e,t,r){if(zt(e))return this;{this.value&&r(t,this.value);const i=Ht(e),a=this.children.get(i);return a?a.foreachOnPath_(Bn(e),ar(t,i),r):new Kn(null)}}foreach(e){this.foreach_(Cn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(ar(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class oc{constructor(e){this.writeTree_=e}static empty(){return new oc(new Kn(null))}}function eE(n,e,t){if(zt(e))return new oc(new Kn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=ao(i,e);return a=a.updateChild(u,t),new oc(n.writeTree_.set(i,a))}{const i=new Kn(t),a=n.writeTree_.setTree(e,i);return new oc(a)}}}function XO(n,e,t){let r=n;return Bi(t,(i,a)=>{r=eE(r,ar(e,i),a)}),r}function UL(n,e){if(zt(e))return oc.empty();{const t=n.writeTree_.setTree(e,new Kn(null));return new oc(t)}}function ex(n,e){return null!=um(n,e)}function um(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ao(t.path,e)):null}function VL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Wn,(r,i)=>{e.push(new Jt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Jt(r,i.value))}),e}function zf(n,e){if(zt(e))return n;{const t=um(n,e);return new oc(null!=t?new Kn(t):n.writeTree_.subtree(e))}}function tx(n){return n.writeTree_.isEmpty()}function Sv(n,e){return BL(Cn(),n.writeTree_,e)}function BL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,R.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=BL(ar(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(ar(n,".priority"),r)),t}}function F1(n,e){return HL(e,n)}function F7(n,e){if(n.snap)return za(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&za(ar(n.path,t),e))return!0;return!1}function U7(n){return n.visible}function ZL(n,e,t){let r=oc.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let h;if(a.snap)za(t,u)?(h=ao(t,u),r=eE(r,h,a.snap)):za(u,t)&&(h=ao(u,t),r=eE(r,Cn(),a.snap.getChild(h)));else{if(!a.children)throw(0,R.g5)("WriteRecord should have .snap or .children");if(za(t,u))h=ao(t,u),r=XO(r,h,a.children);else if(za(u,t))if(h=ao(u,t),zt(h))r=XO(r,Cn(),a.children);else{const _=(0,R.DV)(a.children,Ht(h));if(_){const w=_.getChild(Bn(h));r=eE(r,Cn(),w)}}}}}return r}function qL(n,e,t,r,i){if(r||i){const a=zf(n.visibleWrites,e);return!i&&tx(a)?t:i||null!=t||ex(a,Cn())?Sv(ZL(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(za(w.path,e)||za(e,w.path))},e),t||Ft.EMPTY_NODE):null}{const a=um(n.visibleWrites,e);if(null!=a)return a;{const u=zf(n.visibleWrites,e);return tx(u)?t:null!=t||ex(u,Cn())?Sv(u,t||Ft.EMPTY_NODE):null}}}function L1(n,e,t,r){return qL(n.writeTree,n.treePath,e,t,r)}function nx(n,e){return function(n,e,t){let r=Ft.EMPTY_NODE;const i=um(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Wn,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=zf(n.visibleWrites,e);return t.forEachChild(Wn,(u,h)=>{const _=Sv(zf(a,new Pn(u)),h);r=r.updateImmediateChild(u,_)}),VL(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return VL(zf(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function jL(n,e,t,r){return function(n,e,t,r,i){(0,R.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=ar(e,t);if(ex(n.visibleWrites,a))return null;{const u=zf(n.visibleWrites,a);return tx(u)?i.getChild(t):Sv(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function U1(n,e){return function(n,e){return um(n.visibleWrites,e)}(n.writeTree,ar(n.treePath,e))}function rx(n,e,t){return function(n,e,t,r){const i=ar(e,t),a=um(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Sv(zf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function $L(n,e){return HL(ar(n.treePath,e),n.writeTree)}function HL(n,e){return{treePath:n,writeTree:e}}class z7{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,R.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,R.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Kw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Ww(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Iv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,R.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Kw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const zL=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class ix{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Hf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rx(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:cm(this.viewCache_),a=function(n,e,t,r,i,a){return function(n,e,t,r,i,a,u){let h;const _=zf(n.visibleWrites,e),w=um(_,Cn());if(null!=w)h=w;else{if(null==t)return[];h=Sv(_,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const I=[],A=u.getCompare(),x=a?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let U=x.getNext();for(;U&&I.length<i;)0!==A(U,r)&&I.push(U),U=x.getNext();return I}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function GL(n,e,t,r,i,a){const u=e.eventCache;if(null!=U1(r,t))return e;{let h,_;if(zt(t))if((0,R.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=cm(e),A=nx(r,w instanceof Ft?w:Ft.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),A,a)}else{const w=L1(r,cm(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Ht(t);if(".priority"===w){(0,R.hu)(1===$f(t),"Can't have a priority with additional path components");const I=u.getNode();_=e.serverCache.getNode();const A=jL(r,t,I,_);h=null!=A?n.filter.updatePriority(I,A):u.getNode()}else{const I=Bn(t);let A;if(u.isCompleteForChild(w)){_=e.serverCache.getNode();const x=jL(r,t,u.getNode(),_);A=null!=x?u.getNode().getImmediateChild(w).updateChild(I,x):u.getNode().getImmediateChild(w)}else A=rx(r,w,e.serverCache);h=null!=A?n.filter.updateChild(u.getNode(),w,A,I,i,a):u.getNode()}}return Xw(e,h,u.isFullyInitialized()||zt(t),n.filter.filtersNodes())}}function V1(n,e,t,r,i,a,u,h){const _=e.serverCache;let w;const I=u?n.filter:n.filter.getIndexedFilter();if(zt(t))w=I.updateFullNode(_.getNode(),r,null);else if(I.filtersNodes()&&!_.isFiltered()){const U=_.getNode().updateChild(t,r);w=I.updateFullNode(_.getNode(),U,null)}else{const U=Ht(t);if(!_.isCompleteForPath(t)&&$f(t)>1)return e;const B=Bn(t),de=_.getNode().getImmediateChild(U).updateChild(B,r);w=".priority"===U?I.updatePriority(_.getNode(),de):I.updateChild(_.getNode(),U,de,B,zL,null)}const A=LL(e,w,_.isFullyInitialized()||zt(t),I.filtersNodes());return GL(n,A,t,i,new ix(i,A,a),h)}function sx(n,e,t,r,i,a,u){const h=e.eventCache;let _,w;const I=new ix(i,e,a);if(zt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,u),_=Xw(e,w,!0,n.filter.filtersNodes());else{const A=Ht(t);if(".priority"===A)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=Xw(e,w,h.isFullyInitialized(),h.isFiltered());else{const x=Bn(t),U=h.getNode().getImmediateChild(A);let B;if(zt(x))B=r;else{const X=I.getCompleteChild(A);B=null!=X?".priority"===NO(x)&&X.getChild(vL(x)).isEmpty()?X:X.updateChild(x,r):Ft.EMPTY_NODE}_=U.equals(B)?e:Xw(e,n.filter.updateChild(h.getNode(),A,B,x,I,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function WL(n,e){return n.eventCache.isCompleteForChild(e)}function KL(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ox(n,e,t,r,i,a,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=zt(t)?r:new Kn(null).setTree(t,r);const I=e.serverCache.getNode();return w.children.inorderTraversal((A,x)=>{if(I.hasChild(A)){const B=KL(0,e.serverCache.getNode().getImmediateChild(A),x);_=V1(n,_,new Pn(A),B,i,a,u,h)}}),w.children.inorderTraversal((A,x)=>{const U=!e.serverCache.isCompleteForChild(A)&&void 0===x.value;if(!I.hasChild(A)&&!U){const X=KL(0,e.serverCache.getNode().getImmediateChild(A),x);_=V1(n,_,new Pn(A),X,i,a,u,h)}}),_}class nq{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new $O(r.getIndex()),a=function(n){return n.loadsAllData()?new $O(n.getIndex()):n.hasLimit()?new g7(n):new Yw(n)}(r);this.processor_=function(n){return{filter:n}}(a);const u=t.serverCache,h=t.eventCache,_=i.updateFullNode(Ft.EMPTY_NODE,u.getNode(),null),w=a.updateFullNode(Ft.EMPTY_NODE,h.getNode(),null),I=new Hf(_,u.isFullyInitialized(),i.filtersNodes()),A=new Hf(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=R1(A,I),this.eventGenerator_=new D7(this.query_)}get query(){return this.query_}}function sq(n,e){const t=cm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!zt(e)&&!t.getImmediateChild(Ht(e)).isEmpty())?t.getChild(e):null}function YL(n){return 0===n.eventRegistrations_.length}function QL(n,e,t){const r=[];if(t){(0,R.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const u=n.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function JL(n,e,t,r){e.type===Ga.MERGE&&null!==e.source.queryId&&((0,R.hu)(cm(n.viewCache_),"We should always have a full cache before handling merges"),(0,R.hu)(N1(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function(n,e,t,r,i){const a=new z7;let u,h;if(t.type===Ga.OVERWRITE){const w=t;w.source.fromUser?u=sx(n,e,w.path,w.snap,r,i,a):((0,R.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!zt(w.path),u=V1(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===Ga.MERGE){const w=t;w.source.fromUser?u=function(n,e,t,r,i,a,u){let h=e;return r.foreach((_,w)=>{const I=ar(t,_);WL(e,Ht(I))&&(h=sx(n,h,I,w,i,a,u))}),r.foreach((_,w)=>{const I=ar(t,_);WL(e,Ht(I))||(h=sx(n,h,I,w,i,a,u))}),h}(n,e,w.path,w.children,r,i,a):((0,R.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),u=ox(n,e,w.path,w.children,r,i,h,a))}else if(t.type===Ga.ACK_USER_WRITE){const w=t;u=w.revert?function(n,e,t,r,i,a){let u;if(null!=U1(r,t))return e;{const h=new ix(r,e,i),_=e.eventCache.getNode();let w;if(zt(t)||".priority"===Ht(t)){let I;if(e.serverCache.isFullyInitialized())I=L1(r,cm(e));else{const A=e.serverCache.getNode();(0,R.hu)(A instanceof Ft,"serverChildren would be complete if leaf node"),I=nx(r,A)}I=I,w=n.filter.updateFullNode(_,I,a)}else{const I=Ht(t);let A=rx(r,I,e.serverCache);null==A&&e.serverCache.isCompleteForChild(I)&&(A=_.getImmediateChild(I)),w=null!=A?n.filter.updateChild(_,I,A,Bn(t),h,a):e.eventCache.getNode().hasChild(I)?n.filter.updateChild(_,I,Ft.EMPTY_NODE,Bn(t),h,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=L1(r,cm(e)),u.isLeafNode()&&(w=n.filter.updateFullNode(w,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=U1(r,Cn()),Xw(e,w,u,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function(n,e,t,r,i,a,u){if(null!=U1(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(zt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return V1(n,e,t,_.getNode().getChild(t),i,a,h,u);if(zt(t)){let w=new Kn(null);return _.getNode().forEachChild(du,(I,A)=>{w=w.set(new Pn(I),A)}),ox(n,e,t,w,i,a,h,u)}return e}{let w=new Kn(null);return r.foreach((I,A)=>{const x=ar(t,I);_.isCompleteForPath(x)&&(w=w.set(I,_.getNode().getChild(x)))}),ox(n,e,t,w,i,a,h,u)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==Ga.LISTEN_COMPLETE)throw(0,R.g5)("Unknown operation type: "+t.type);u=function(n,e,t,r,i){const a=e.serverCache;return GL(n,LL(e,a.getNode(),a.isFullyInitialized()||zt(t),a.isFiltered()),t,r,zL,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=N1(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(kL(N1(e)))}}(e,u,_),{viewCache:u,changes:_}}(n.processor_,i,e,t,r);return function(n,e){(0,R.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,R.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,R.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,XL(n,a.changes,a.viewCache.eventCache.getNode(),null)}function XL(n,e,t,r){return function(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),Jw(n,i,"child_removed",e,r,t),Jw(n,i,"child_added",e,r,t),Jw(n,i,"child_moved",a,r,t),Jw(n,i,"child_changed",e,r,t),Jw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let B1,q1;class e2{constructor(){this.views=new Map}}function ax(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,R.hu)(null!=a,"SyncTree gave us an op for an invalid query."),JL(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat(JL(u,e,t,r));return a}}function t2(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let h=L1(t,i?r:null),_=!1;h?_=!0:r instanceof Ft?(h=nx(t,r),_=!1):(h=Ft.EMPTY_NODE,_=!1);const w=R1(new Hf(h,_,!1),new Hf(r,i,!1));return new nq(e,w)}return u}function n2(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Gf(n,e){let t=null;for(const r of n.views.values())t=t||sq(r,e);return t}function r2(n,e){return e._queryParams.loadsAllData()?Z1(n):n.views.get(e._queryIdentifier)}function i2(n,e){return null!=r2(n,e)}function Wf(n){return null!=Z1(n)}function Z1(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let gq=1;class s2{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Kn(null),this.pendingWriteTree_={visibleWrites:oc.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function lx(n,e,t,r,i){return function(n,e,t,r,i){(0,R.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=eE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Mv(n,new lm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Kf(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,R.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&F7(h,r.path)?i=!1:za(r.path,h.path)&&(a=!0)),u--}return!!i&&(a?(function(n){n.visibleWrites=ZL(n.allWrites,U7,Cn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=UL(n.visibleWrites,r.path):Bi(r.children,_=>{n.visibleWrites=UL(n.visibleWrites,ar(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Kn(null);return null!=r.snap?a=a.set(Cn(),!0):Bi(r.children,u=>{a=a.set(new Pn(u),!0)}),Mv(n,new k1(r.path,a,t))}return[]}function tE(n,e,t){return Mv(n,new lm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function cx(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let u=[];if(a&&("default"===e._queryIdentifier||i2(a,e))){const h=function(n,e,t,r){const i=e._queryIdentifier,a=[];let u=[];const h=Wf(n);if("default"===i)for(const[_,w]of n.views.entries())u=u.concat(QL(w,t,r)),YL(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(u=u.concat(QL(_,t,r)),YL(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return h&&!Wf(n)&&a.push(new((0,R.hu)(B1,"Reference.ts has not been loaded"),B1)(e._repo,e._path)),{removed:a,events:u}}(a,e,t,r);(function(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=h.removed;u=h.events;const w=-1!==_.findIndex(A=>A._queryParams.loadsAllData()),I=n.syncPointTree_.findOnPath(i,(A,x)=>Wf(x));if(w&&!I){const A=n.syncPointTree_.subtree(i);if(!A.isEmpty()){const x=function(n){return n.fold((e,t,r)=>{if(t&&Wf(t))return[Z1(t)];{let i=[];return t&&(i=n2(t)),Bi(r,(a,u)=>{i=i.concat(u)}),i}})}(A);for(let U=0;U<x.length;++U){const B=x[U],X=B.query,de=c2(n,B);n.listenProvider_.startListening(nE(X),$1(n,X),de.hashFn,de.onComplete)}}}if(!I&&_.length>0&&!r)if(w){const A=null;n.listenProvider_.stopListening(nE(e),A)}else _.forEach(A=>{const x=n.queryToTagMap.get(H1(A));n.listenProvider_.stopListening(nE(A),x)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=H1(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return u}function o2(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(A,x)=>{const U=ao(A,r);i=i||Gf(x,U),a=a||Wf(x)});let h,u=n.syncPointTree_.get(r);u?(a=a||Wf(u),i=i||Gf(u,Cn())):(u=new e2,n.syncPointTree_=n.syncPointTree_.set(r,u)),null!=i?h=!0:(h=!1,i=Ft.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((x,U)=>{const B=Gf(U,Cn());B&&(i=i.updateImmediateChild(x,B))}));const _=i2(u,e);if(!_&&!e._queryParams.loadsAllData()){const A=H1(e);(0,R.hu)(!n.queryToTagMap.has(A),"View does not exist, but we have a tag");const x=gq++;n.queryToTagMap.set(A,x),n.tagToQueryMap.set(x,A)}let I=function(n,e,t,r,i,a){const u=t2(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function(n,e){n.eventRegistrations_.push(e)}(u,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Wn,(a,u)=>{r.push(Iv(a,u))}),t.isFullyInitialized()&&r.push(kL(t.getNode())),XL(n,r,t.getNode(),e)}(u,t)}(u,e,t,F1(n.pendingWriteTree_,r),i,h);if(!_&&!a){const A=r2(u,e);I=I.concat(function(n,e,t){const r=e._path,i=$1(n,e),a=c2(n,t),u=n.listenProvider_.startListening(nE(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,R.hu)(!Wf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((w,I,A)=>{if(!zt(w)&&I&&Wf(I))return[Z1(I).query];{let x=[];return I&&(x=x.concat(n2(I).map(U=>U.query))),Bi(A,(U,B)=>{x=x.concat(B)}),x}});for(let w=0;w<_.length;++w){const I=_[w];n.listenProvider_.stopListening(nE(I),$1(n,I))}}return u}(n,e,A))}return I}function j1(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,h)=>{const w=Gf(h,ao(u,e));if(w)return w});return qL(i,e,a,t,!0)}function Mv(n,e){return a2(e,n.syncPointTree_,null,F1(n.pendingWriteTree_,Cn()))}function a2(n,e,t,r){if(zt(n.path))return l2(n,e,t,r);{const i=e.get(Cn());null==t&&null!=i&&(t=Gf(i,Cn()));let a=[];const u=Ht(n.path),h=n.operationForChild(u),_=e.children.get(u);if(_&&h){const w=t?t.getImmediateChild(u):null,I=$L(r,u);a=a.concat(a2(h,_,w,I))}return i&&(a=a.concat(ax(i,n,r,t))),a}}function l2(n,e,t,r){const i=e.get(Cn());null==t&&null!=i&&(t=Gf(i,Cn()));let a=[];return e.children.inorderTraversal((u,h)=>{const _=t?t.getImmediateChild(u):null,w=$L(r,u),I=n.operationForChild(u);I&&(a=a.concat(l2(I,h,_,w)))}),i&&(a=a.concat(ax(i,n,r,t))),a}function c2(n,e){const t=e.query,r=$1(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||Ft.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,e,t){const r=ux(n,t);if(r){const i=dx(r),a=i.path,u=i.queryId,h=ao(a,e);return hx(n,a,new Qw(QO(u),h))}return[]}(n,t._path,r):function(n,e){return Mv(n,new Qw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return cx(n,t,null,a)}}}}function $1(n,e){const t=H1(e);return n.queryToTagMap.get(t)}function H1(n){return n._path.toString()+"$"+n._queryIdentifier}function ux(n,e){return n.tagToQueryMap.get(e)}function dx(n){const e=n.indexOf("$");return(0,R.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Pn(n.substr(0,e))}}function hx(n,e,t){const r=n.syncPointTree_.get(e);return(0,R.hu)(r,"Missing sync point for query tag that we're tracking"),ax(r,t,F1(n.pendingWriteTree_,e),null)}function nE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,R.hu)(q1,"Reference.ts has not been loaded"),q1)(n._repo,n._path):n}class fx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new fx(t)}node(){return this.node_}}class px{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ar(this.path_,e);return new px(this.syncTree_,t)}node(){return j1(this.syncTree_,this.path_)}}const u2=function(n,e,t){return n&&"object"==typeof n?((0,R.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Sq(n[".sv"],e,t):"object"==typeof n[".sv"]?Mq(n[".sv"],e):void(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Sq=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,R.hu)(!1,"Unexpected server value: "+n)},Mq=function(n,e,t){n.hasOwnProperty("increment")||(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,R.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,R.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},d2=function(n,e,t,r){return mx(e,new px(t,n),r)},gx=function(n,e,t){return mx(n,new fx(e),t)};function mx(n,e,t){const r=n.getPriority().val(),i=u2(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,h=u2(u.getValue(),e,t);return h!==u.getValue()||i!==u.getPriority().val()?new Ev(h,gr(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new Ev(i))),u.forEachChild(Wn,(h,_)=>{const w=mx(_,e.getImmediateChild(h),t);w!==_&&(a=a.updateImmediateChild(h,w))}),a}}class _x{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function z1(n,e){let t=e instanceof Pn?e:new Pn(e),r=n,i=Ht(t);for(;null!==i;){const a=(0,R.DV)(r.node.children,i)||{children:{},childCount:0};r=new _x(i,r,a),t=Bn(t),i=Ht(t)}return r}function dm(n){return n.node.value}function yx(n,e){n.node.value=e,vx(n)}function h2(n){return n.node.childCount>0}function G1(n,e){Bi(n.node.children,(t,r)=>{e(new _x(t,n,r))})}function f2(n,e,t,r){t&&!r&&e(n),G1(n,i=>{f2(i,e,!0,r)}),t&&r&&e(n)}function rE(n){return new Pn(null===n.parent?n.name:rE(n.parent)+"/"+n.name)}function vx(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===dm(n)&&!h2(n)}(t),i=(0,R.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,vx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,vx(n))}(n.parent,n.name,n)}const kq=/[\[\].#$\/\u0000-\u001F\u007F]/,Rq=/[\[\].#$\u0000-\u001F\u007F]/,Cx=10485760,W1=function(n){return"string"==typeof n&&0!==n.length&&!kq.test(n)},p2=function(n){return"string"==typeof n&&0!==n.length&&!Rq.test(n)},iE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!w1(n)||n&&"object"==typeof n&&(0,R.r3)(n,".sv")},hu=function(n,e,t,r){r&&void 0===e||sE((0,R.gK)(n,"value"),e,t)},sE=function(n,e,t){const r=t instanceof Pn?new WZ(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+om(r));if("function"==typeof e)throw new Error(n+"contains a function "+om(r)+" with contents = "+e.toString());if(w1(e))throw new Error(n+"contains "+e.toString()+" "+om(r));if("string"==typeof e&&e.length>Cx/3&&(0,R.ug)(e)>Cx)throw new Error(n+"contains a string greater than "+Cx+" utf8 bytes "+om(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Bi(e,(u,h)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!W1(u)))throw new Error(n+" contains an invalid key ("+u+") "+om(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,R.ug)(e),CL(n)})(r,u),sE(n,h,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,R.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+om(r)+" in addition to actual children.")}},g2=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,R.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Bi(e,(u,h)=>{const _=new Pn(u);if(sE(i,h,ar(t,_)),".priority"===NO(_)&&!iE(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=$w(r);for(let u=0;u<a.length;u++)if((".priority"!==a[u]||u!==a.length-1)&&!W1(a[u]))throw new Error(n+"contains an invalid key ("+a[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(GZ);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&za(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},wx=function(n,e,t){if(!t||void 0!==e){if(w1(e))throw new Error((0,R.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!iE(e))throw new Error((0,R.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},oE=function(n,e,t,r){if(!(r&&void 0===t||W1(t)))throw new Error((0,R.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},aE=function(n,e,t,r){if(!(r&&void 0===t||p2(t)))throw new Error((0,R.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Wa=function(n,e){if(".info"===Ht(e))throw new Error(n+" failed = Can't modify data under /.info/")},m2=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!W1(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),p2(n)}(t))throw new Error((0,R.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Uq{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function K1(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!FO(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function Ex(n,e,t){K1(n,t),_2(n,r=>FO(r,e))}function Ka(n,e,t){K1(n,t),_2(n,r=>za(r,e)||za(e,r))}function _2(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Vq(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Vq(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();im&&Vi("event: "+t.toString()),Cv(r)}}}const y2="repo_interrupt";class Zq{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Uq,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=x1(),this.transactionQueueTree_=new _x,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function v2(n){const t=n.infoData_.getNode(new Pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function lE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:v2(n)})}function C2(n,e,t,r,i){n.dataUpdateCount++;const a=new Pn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const _=(0,R.UI)(t,w=>gr(w));u=function(n,e,t,r){const i=ux(n,r);if(i){const a=dx(i),u=a.path,h=a.queryId,_=ao(u,e),w=Kn.fromObject(t);return hx(n,u,new Dv(QO(h),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=gr(t);u=function(n,e,t,r){const i=ux(n,r);if(null!=i){const a=dx(i),u=a.path,h=a.queryId,_=ao(u,e);return hx(n,u,new lm(QO(h),_,t))}return[]}(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,R.UI)(t,w=>gr(w));u=function(n,e,t){const r=Kn.fromObject(t);return Mv(n,new Dv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=gr(t);u=tE(n.serverSyncTree_,a,_)}let h=a;u.length>0&&(h=Ov(n,a)),Ka(n.eventQueue_,h,u)}function w2(n,e){bx(n,"connected",e),!1===e&&function(n){Pv(n,"onDisconnectEvents");const e=lE(n),t=x1();WO(n.onDisconnect_,Cn(),(i,a)=>{const u=d2(i,a,n.serverSyncTree_,e);Av(t,i,u)});let r=[];WO(t,Cn(),(i,a)=>{r=r.concat(tE(n.serverSyncTree_,i,a));const u=Dx(n,i);Ov(n,u)}),n.onDisconnect_=x1(),Ka(n.eventQueue_,Cn(),r)}(n)}function bx(n,e,t){const r=new Pn("/.info/"+e),i=gr(t);n.infoData_.updateSnapshot(r,i);const a=tE(n.infoSyncTree_,r,i);Ka(n.eventQueue_,r,a)}function Y1(n){return n.nextWriteId_++}function Tx(n,e,t,r,i){Pv(n,"set",{path:e.toString(),value:t,priority:r});const a=lE(n),u=gr(t,r),h=j1(n.serverSyncTree_,e),_=gx(u,h,a),w=Y1(n),I=lx(n.serverSyncTree_,e,_,w,!0);K1(n.eventQueue_,I),n.server_.put(e.toString(),u.val(!0),(x,U)=>{const B="ok"===x;B||oo("set at "+e+" failed: "+x);const X=Kf(n.serverSyncTree_,w,!B);Ka(n.eventQueue_,e,X),Yf(0,i,x,U)});const A=Dx(n,e);Ov(n,A),Ka(n.eventQueue_,A,[])}function Gq(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&GO(n.onDisconnect_,e),Yf(0,t,r,i)})}function E2(n,e,t,r){const i=gr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,u)=>{"ok"===a&&Av(n.onDisconnect_,e,i),Yf(0,r,a,u)})}function Ix(n,e,t){let r;r=".info"===Ht(e._path)?cx(n.infoSyncTree_,e,t):cx(n.serverSyncTree_,e,t),Ex(n.eventQueue_,e._path,r)}function b2(n){n.persistentConnection_&&n.persistentConnection_.interrupt(y2)}function Pv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Vi(t,...e)}function Yf(n,e,t,r){e&&Cv(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const u=new Error(a);u.code=i,e(u)}})}function Ax(n,e,t){return j1(n.serverSyncTree_,e,t)||Ft.EMPTY_NODE}function Q1(n,e=n.transactionQueueTree_){if(e||J1(n,e),dm(e)){const t=I2(n,e);(0,R.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function(n,e,t){const r=t.map(w=>w.currentWriteId),i=Ax(n,e,r);let a=i;const u=i.hash();for(let w=0;w<t.length;w++){const I=t[w];(0,R.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const A=ao(e,I.path);a=a.updateChild(A,I.currentOutputSnapshotRaw)}const h=a.val(!0),_=e;n.server_.put(_.toString(),h,w=>{Pv(n,"transaction put response",{path:_.toString(),status:w});let I=[];if("ok"===w){const A=[];for(let x=0;x<t.length;x++)t[x].status=2,I=I.concat(Kf(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&A.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();J1(n,z1(n.transactionQueueTree_,e)),Q1(n,n.transactionQueueTree_),Ka(n.eventQueue_,e,I);for(let x=0;x<A.length;x++)Cv(A[x])}else{if("datastale"===w)for(let A=0;A<t.length;A++)t[A].status=3===t[A].status?4:0;else{oo("transaction at "+_.toString()+" failed: "+w);for(let A=0;A<t.length;A++)t[A].status=4,t[A].abortReason=w}Ov(n,e)}},u)}(n,rE(e),t)}else h2(e)&&G1(e,t=>{Q1(n,t)})}function Ov(n,e){const t=T2(n,e),r=rE(t);return function(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],w=ao(t,_.path);let A,I=!1;if((0,R.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)I=!0,A=_.abortReason,i=i.concat(Kf(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)I=!0,A="maxretry",i=i.concat(Kf(n.serverSyncTree_,_.currentWriteId,!0));else{const x=Ax(n,_.path,u);_.currentInputSnapshot=x;const U=e[h].update(x.val());if(void 0!==U){sE("transaction failed: Data returned ",U,_.path);let B=gr(U);"object"==typeof U&&null!=U&&(0,R.r3)(U,".priority")||(B=B.updatePriority(x.getPriority()));const de=_.currentWriteId,Ge=lE(n),Ke=gx(B,x,Ge);_.currentOutputSnapshotRaw=B,_.currentOutputSnapshotResolved=Ke,_.currentWriteId=Y1(n),u.splice(u.indexOf(de),1),i=i.concat(lx(n.serverSyncTree_,_.path,Ke,_.currentWriteId,_.applyLocally)),i=i.concat(Kf(n.serverSyncTree_,de,!0))}else I=!0,A="nodata",i=i.concat(Kf(n.serverSyncTree_,_.currentWriteId,!0))}Ka(n.eventQueue_,t,i),i=[],I&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===A?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(A),!1,null)))}J1(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Cv(r[h]);Q1(n,n.transactionQueueTree_)}(n,I2(n,t),r),r}function T2(n,e){let t,r=n.transactionQueueTree_;for(t=Ht(e);null!==t&&void 0===dm(r);)r=z1(r,t),t=Ht(e=Bn(e));return r}function I2(n,e){const t=[];return A2(n,e,t),t.sort((r,i)=>r.order-i.order),t}function A2(n,e,t){const r=dm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);G1(e,i=>{A2(n,i,t)})}function J1(n,e){const t=dm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,yx(e,t.length>0?t:void 0)}G1(e,r=>{J1(n,r)})}function Dx(n,e){const t=rE(T2(n,e)),r=z1(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Sx(n,i)}),Sx(n,r),f2(r,i=>{Sx(n,i)}),t}function Sx(n,e){const t=dm(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,R.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,R.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Kf(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?yx(e,void 0):t.length=a+1,Ka(n.eventQueue_,rE(e),i);for(let u=0;u<r.length;u++)Cv(r[u])}}const Mx=function(n,e){const t=rj(n),r=t.namespace;return"firebase.com"===t.domain&&cu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&cu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&oo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new SO(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new Pn(t.pathString)}},rj=function(n){let e="",t="",r="",i="",a="",u=!0,h="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let I=n.indexOf("/");-1===I&&(I=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),e=n.substring(0,Math.min(I,A)),I<A&&(i=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(I,A)));const x=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):oo(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,A)));w=e.indexOf(":"),w>=0?(u="https"===h||"wss"===h,_=parseInt(e.substring(w+1),10)):w=e.length;const U=e.slice(0,w);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const B=e.indexOf(".");r=e.substring(0,B).toLowerCase(),t=e.substring(B+1),a=r}"ns"in x&&(a=x.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:u,scheme:h,pathString:i,namespace:a}};class D2{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,R.Pz)(this.snapshot.exportVal())}}class S2{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class M2{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,R.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class P2{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new R.BH;return Gq(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Wa("OnDisconnect.remove",this._path);const e=new R.BH;return E2(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Wa("OnDisconnect.set",this._path),hu("OnDisconnect.set",e,this._path,!1);const t=new R.BH;return E2(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Wa("OnDisconnect.setWithPriority",this._path),hu("OnDisconnect.setWithPriority",e,this._path,!1),wx("OnDisconnect.setWithPriority",t,!1);const r=new R.BH;return function(n,e,t,r,i){const a=gr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(u,h)=>{"ok"===u&&Av(n.onDisconnect_,e,a),Yf(0,i,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Wa("OnDisconnect.update",this._path),g2("OnDisconnect.update",e,this._path,!1);const t=new R.BH;return function(n,e,t,r){if((0,R.xb)(t))return Vi("onDisconnect().update() called with empty data.  Don't do anything."),void Yf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Bi(t,(u,h)=>{const _=gr(h);Av(n.onDisconnect_,ar(e,u),_)}),Yf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Mo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return zt(this._path)?null:NO(this._path)}get ref(){return new Ya(this._repo,this._path)}get _queryIdentifier(){const e=NL(this._queryParams),t=IO(e);return"{}"===t?"default":t}get _queryObject(){return NL(this._queryParams)}isEqual(e){if(!((e=(0,R.m9)(e))instanceof Mo))return!1;const t=this._repo===e._repo,r=FO(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function X1(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Qf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===du){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==zd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==uu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Wn){if(null!=e&&!iE(e)||null!=t&&!iE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,R.hu)(n.getIndex()instanceof ZO||n.getIndex()===qO,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function eA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ya extends Mo{constructor(e,t){super(e,t,new M1,!1)}get parent(){const e=vL(this._path);return null===e?null:new Ya(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class hm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Pn(e),r=fm(this.ref,e);return new hm(this._node.getChild(t),r,Wn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new hm(i,fm(this.ref,r),Wn)))}hasChild(e){const t=new Pn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function O2(n,e){return(n=(0,R.m9)(n))._checkNotDeleted("ref"),void 0!==e?fm(n._root,e):n._root}function x2(n,e){(n=(0,R.m9)(n))._checkNotDeleted("refFromURL");const t=Mx(e,n._repo.repoInfo_.nodeAdmin);m2("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&cu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),O2(n,t.path.toString())}function fm(n,e){return null===Ht((n=(0,R.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),aE("child","path",t,!1)):aE("child","path",e,!1),new Ya(n._repo,ar(n._path,e));var t}function Px(n,e){n=(0,R.m9)(n),Wa("set",n._path),hu("set",e,n._path,!1);const t=new R.BH;return Tx(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function lj(n,e){g2("update",e,n._path,!1);const t=new R.BH;return function(n,e,t,r){Pv(n,"update",{path:e.toString(),value:t});let i=!0;const a=lE(n),u={};if(Bi(t,(h,_)=>{i=!1,u[h]=d2(ar(e,h),gr(_),n.serverSyncTree_,a)}),i)Vi("update() called with empty data.  Don't do anything."),Yf(0,r,"ok",void 0);else{const h=Y1(n),_=function(n,e,t,r){!function(n,e,t,r){(0,R.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=XO(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Kn.fromObject(t);return Mv(n,new Dv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,h);K1(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,I)=>{const A="ok"===w;A||oo("update at "+e+" failed: "+w);const x=Kf(n.serverSyncTree_,h,!A),U=x.length>0?Ov(n,e):e;Ka(n.eventQueue_,U,x),Yf(0,r,w,I)}),Bi(t,w=>{const I=Dx(n,ar(e,w));Ov(n,I)}),Ka(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function cj(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,I)=>{const A=ao(w,t);r=r||Gf(I,A)});let i=n.syncPointTree_.get(t);i?r=r||Gf(i,Cn()):(i=new e2,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,u=a?new Hf(r,!0,!1):null;return function(n){return N1(n.viewCache_)}(t2(i,e,F1(n.pendingWriteTree_,e._path),a?u.getNode():Ft.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=gr(r).withIndex(e._queryParams.getIndex()),a=tE(n.serverSyncTree_,e._path,i);return Ex(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(Pv(n,"get for query "+(0,R.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,R.m9)(n))._repo,n).then(e=>new hm(e,new Ya(n._repo,n._path),n._queryParams.getIndex()))}class tA{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new D2("value",this,new hm(e.snapshotNode,new Ya(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new S2(this,e,t):null}matches(e){return e instanceof tA&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class nA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new S2(this,e,t):null}createEvent(e,t){(0,R.hu)(null!=e.childName,"Child events should have a childName.");const r=fm(new Ya(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new D2(e.type,this,new hm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof nA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function cE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(I,A)=>{Ix(n._repo,n,h),_(I,A)};w.userCallback=t.userCallback,w.context=t.context,t=w}const u=new M2(t,a||void 0),h="value"===e?new tA(u):new nA(e,u);return function(n,e,t){let r;r=".info"===Ht(e._path)?o2(n.infoSyncTree_,e,t):o2(n.serverSyncTree_,e,t),Ex(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>Ix(n._repo,n,h)}function Ox(n,e,t,r){return cE(n,"value",e,t,r)}function k2(n,e,t,r){return cE(n,"child_added",e,t,r)}function R2(n,e,t,r){return cE(n,"child_changed",e,t,r)}function N2(n,e,t,r){return cE(n,"child_moved",e,t,r)}function F2(n,e,t,r){return cE(n,"child_removed",e,t,r)}function L2(n,e,t){let r=null;const i=t?new M2(t):null;"value"===e?r=new tA(i):e&&(r=new nA(e,i)),Ix(n._repo,n,r)}class ac{}class U2 extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){hu("endAt",this._value,e._path,!0);const t=zO(e._queryParams,this._value,this._key);if(eA(t),Qf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class dj extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){hu("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,i;return n.index_===du?("string"==typeof e&&(e=xL(e)),i=zO(n,e,t)):(r=null==t?zd:xL(t),i=zO(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(eA(t),Qf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class V2 extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){hu("startAt",this._value,e._path,!0);const t=HO(e._queryParams,this._value,this._key);if(eA(t),Qf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class pj extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){hu("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===du)"string"==typeof e&&(e=OL(e)),r=HO(n,e,t);else{let i;i=null==t?uu:OL(t),r=HO(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(eA(t),Qf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class mj extends ac{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Mo(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class yj extends ac{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Mo(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Cj extends ac{constructor(e){super(),this._path=e}_apply(e){X1(e,"orderByChild");const t=new Pn(this._path);if(zt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ZO(t),i=P1(e._queryParams,r);return Qf(i),new Mo(e._repo,e._path,i,!0)}}class Ej extends ac{_apply(e){X1(e,"orderByKey");const t=P1(e._queryParams,du);return Qf(t),new Mo(e._repo,e._path,t,!0)}}class Tj extends ac{_apply(e){X1(e,"orderByPriority");const t=P1(e._queryParams,Wn);return Qf(t),new Mo(e._repo,e._path,t,!0)}}class Aj extends ac{_apply(e){X1(e,"orderByValue");const t=P1(e._queryParams,qO);return Qf(t),new Mo(e._repo,e._path,t,!0)}}class Sj extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(hu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new U2(this._value,this._key)._apply(new V2(this._value,this._key)._apply(e))}}function lc(n,...e){let t=(0,R.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,R.hu)(!B1,"__referenceConstructor has already been defined"),B1=n})(Ya),function(n){(0,R.hu)(!q1,"__referenceConstructor has already been defined"),q1=n}(Ya);const xx={};function Z2(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||cu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,u=Mx(a,i),h=u.repoInfo;"undefined"!=typeof process&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${h.namespace}`,u=Mx(a,i),h=u.repoInfo):_=!u.repoInfo.secure;const I=i&&_?new Zw(Zw.OWNER):new CZ(n.name,n.options,e);m2("Invalid Firebase Database URL",u),zt(u.path)||cu("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function(n,e,t,r){let i=xx[e.name];i||(i={},xx[e.name]=i);let a=i[n.toURLString()];return a&&cu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Zq(n,false,t,r),i[n.toURLString()]=a,a}(h,n,I,new vZ(n.name,t));return new Nj(A,n)}class Nj{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=OO(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new O1(n.repoInfo_,(r,i,a,u)=>{C2(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>w2(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,R.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new am(n.repoInfo_,e,(r,i,a,u)=>{C2(n,r,i,a,u)},r=>{w2(n,r)},r=>{!function(n,e){Bi(e,(t,r)=>{bx(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return PO[t]||(PO[t]=e()),PO[t]}(n.repoInfo_,()=>new A7(n.stats_,n.server_)),n.infoData_=new w7,n.infoSyncTree_=new s2({startListening:(r,i,a,u)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=tE(n.infoSyncTree_,r._path,_),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),bx(n,"connected",!1),n.serverSyncTree_=new s2({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(h,_)=>{const w=u(h,_);Ka(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ya(this._repo,Cn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=xx[e];(!t||t[n.key]!==n)&&cu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),b2(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&cu("Cannot call "+e+" on a deleted database.")}}function Vj(n,e){jF(n,e)}class $j{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}am.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},am.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},UF(is.SDK_VERSION),(0,is._registerComponent)(new na.wA("database",(e,{instanceIdentifier:t})=>Z2(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,is.registerVersion)(FF,"0.12.5",void 0),(0,is.registerVersion)(FF,"0.12.5","esm2017");const Wj=new ra.Yd("@firebase/database-compat"),q2=function(n){Wj.warn("FIREBASE WARNING: "+n)};class Qj{constructor(e){this._delegate=e}cancel(e){(0,R.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,R.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,R.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,R.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,R.Dv)("OnDisconnect.set",1,2,arguments.length),(0,R.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,R.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,R.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,R.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,q2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,R.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Jj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,R.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Jf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,R.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,R.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,R.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,R.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,R.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),aE("DataSnapshot.child","path",e,!1),new Jf(this._database,this._delegate.child(e))}hasChild(e){return(0,R.Dv)("DataSnapshot.hasChild",1,1,arguments.length),aE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,R.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,R.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,R.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Jf(this._database,t)))}hasChildren(){return(0,R.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,R.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,R.Dv)("DataSnapshot.ref",0,0,arguments.length),new ua(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ls{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,R.Dv)("Query.on",2,4,arguments.length),(0,R.Wj)("Query.on","callback",t,!1);const u=ls.getCancelAndContextArgs_("Query.on",r,i),h=(w,I)=>{t.call(u.context,new Jf(this.database,w),I)};h.userCallback=t,h.context=u.context;const _=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return Ox(this._delegate,h,_),t;case"child_added":return k2(this._delegate,h,_),t;case"child_removed":return F2(this._delegate,h,_),t;case"child_changed":return R2(this._delegate,h,_),t;case"child_moved":return N2(this._delegate,h,_),t;default:throw new Error((0,R.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,R.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,R.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,R.Wj)("Query.off","callback",t,!0),(0,R.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,L2(this._delegate,e,i)}else L2(this._delegate,e)}get(){return cj(this._delegate).then(e=>new Jf(this.database,e))}once(e,t,r,i){(0,R.Dv)("Query.once",1,4,arguments.length),(0,R.Wj)("Query.once","callback",t,!0);const a=ls.getCancelAndContextArgs_("Query.once",r,i),u=new R.BH,h=(w,I)=>{const A=new Jf(this.database,w);t&&t.call(a.context,A,I),u.resolve(A)};h.userCallback=t,h.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),u.reject(w)};switch(e){case"value":Ox(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":k2(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":F2(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":R2(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":N2(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,R.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,R.Dv)("Query.limitToFirst",1,1,arguments.length),new ls(this.database,lc(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new mj(n)}(e)))}limitToLast(e){return(0,R.Dv)("Query.limitToLast",1,1,arguments.length),new ls(this.database,lc(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new yj(n)}(e)))}orderByChild(e){return(0,R.Dv)("Query.orderByChild",1,1,arguments.length),new ls(this.database,lc(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return aE("orderByChild","path",n,!1),new Cj(n)}(e)))}orderByKey(){return(0,R.Dv)("Query.orderByKey",0,0,arguments.length),new ls(this.database,lc(this._delegate,new Ej))}orderByPriority(){return(0,R.Dv)("Query.orderByPriority",0,0,arguments.length),new ls(this.database,lc(this._delegate,new Tj))}orderByValue(){return(0,R.Dv)("Query.orderByValue",0,0,arguments.length),new ls(this.database,lc(this._delegate,new Aj))}startAt(e=null,t){return(0,R.Dv)("Query.startAt",0,2,arguments.length),new ls(this.database,lc(this._delegate,function(n=null,e){return oE("startAt","key",e,!0),new V2(n,e)}(e,t)))}startAfter(e=null,t){return(0,R.Dv)("Query.startAfter",0,2,arguments.length),new ls(this.database,lc(this._delegate,function(n,e){return oE("startAfter","key",e,!0),new pj(n,e)}(e,t)))}endAt(e=null,t){return(0,R.Dv)("Query.endAt",0,2,arguments.length),new ls(this.database,lc(this._delegate,function(n,e){return oE("endAt","key",e,!0),new U2(n,e)}(e,t)))}endBefore(e=null,t){return(0,R.Dv)("Query.endBefore",0,2,arguments.length),new ls(this.database,lc(this._delegate,function(n,e){return oE("endBefore","key",e,!0),new dj(n,e)}(e,t)))}equalTo(e,t){return(0,R.Dv)("Query.equalTo",1,2,arguments.length),new ls(this.database,lc(this._delegate,function(n,e){return oE("equalTo","key",e,!0),new Sj(n,e)}(e,t)))}toString(){return(0,R.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,R.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,R.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ls))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,R.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,R.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,R.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ua(this.database,new Ya(this._delegate._repo,this._delegate._path))}}class ua extends ls{constructor(e,t){super(e,new Mo(t._repo,t._path,new M1,!1)),this.database=e,this._delegate=t}getKey(){return(0,R.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,R.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ua(this.database,fm(this._delegate,e))}getParent(){(0,R.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ua(this.database,e):null}getRoot(){return(0,R.Dv)("Reference.root",0,0,arguments.length),new ua(this.database,this._delegate.root)}set(e,t){(0,R.Dv)("Reference.set",1,2,arguments.length),(0,R.Wj)("Reference.set","onComplete",t,!0);const r=Px(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,R.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,q2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wa("Reference.update",this._delegate._path),(0,R.Wj)("Reference.update","onComplete",t,!0);const r=lj(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,R.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,R.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,e,t){if(Wa("setWithPriority",n._path),hu("setWithPriority",e,n._path,!1),wx("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new R.BH;return Tx(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,R.Dv)("Reference.remove",0,1,arguments.length),(0,R.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return Wa("remove",n._path),Px(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,R.Dv)("Reference.transaction",1,3,arguments.length),(0,R.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,R.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,R.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,e,t){var r;if(n=(0,R.m9)(n),Wa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new R.BH,h=Ox(n,()=>{});return function(n,e,t,r,i,a){Pv(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:BF(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=Ax(n,e,void 0);u.currentInputSnapshot=h;const _=u.update(h.val());if(void 0===_)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{sE("transaction failed: Data returned ",_,u.path),u.status=0;const w=z1(n.transactionQueueTree_,e),I=dm(w)||[];let A;I.push(u),yx(w,I),"object"==typeof _&&null!==_&&(0,R.r3)(_,".priority")?(A=(0,R.DV)(_,".priority"),(0,R.hu)(iE(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(j1(n.serverSyncTree_,e)||Ft.EMPTY_NODE).getPriority().val();const x=lE(n),U=gr(_,A),B=gx(U,h,x);u.currentOutputSnapshotRaw=U,u.currentOutputSnapshotResolved=B,u.currentWriteId=Y1(n);const X=lx(n.serverSyncTree_,e,B,u.currentWriteId,u.applyLocally);Ka(n.eventQueue_,e,X),Q1(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,I)=>{let A=null;_?a.reject(_):(A=new hm(I,new Ya(n._repo,n._path),Wn),a.resolve(new $j(w,A)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Jj(a.committed,new Jf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,R.Dv)("Reference.setPriority",1,2,arguments.length),(0,R.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,R.m9)(n),Wa("setPriority",n._path),wx("setPriority",e,!1);const t=new R.BH;return Tx(n._repo,ar(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,R.Dv)("Reference.push",0,2,arguments.length),(0,R.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,R.m9)(n),Wa("push",n._path),hu("push",e,n._path,!0);const t=v2(n._repo),r=f7(t),i=fm(n,r),a=fm(n,r);let u;return u=null!=e?Px(a,e).then(()=>a):Promise.resolve(a),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new ua(this.database,u));t&&i.then(()=>t(null),u=>t(u));const a=new ua(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Wa("Reference.onDisconnect",this._delegate._path),new Qj(new P2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class uE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,R.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&cu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&cu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Zw(Zw.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,R.Sg)(r.mockUserToken,n.app.options.projectId);a=new Zw(u)}!function(n,e,t,r){n.repoInfo_=new SO(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,R.Dv)("database.ref",0,1,arguments.length),e instanceof ua){const t=x2(this._delegate,e.toString());return new ua(this,t)}{const t=O2(this._delegate,e);return new ua(this,t)}}refFromURL(e){(0,R.Dv)("database.refFromURL",1,1,arguments.length);const r=x2(this._delegate,e);return new ua(this,r)}goOffline(){return(0,R.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,R.m9)(n))._checkNotDeleted("goOffline"),b2(n._repo)}(this._delegate)}goOnline(){return(0,R.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,R.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(y2)}(n._repo)}(this._delegate)}}uE.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var e$=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){UF(t);const u=new na.zt("auth-internal",new na.H0("database-standalone"));return u.setComponent(new na.wA("auth-internal",()=>r,"PRIVATE")),{instance:new uE(Z2(n,u,void 0,e,a),n),namespace:i}}});const t$=uE.ServerValue;function j2(n){return null==n}function $2(n){return"function"==typeof n.set}function H2(n,e){return $2(e)?e:n.ref(e)}function z2(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if($2(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function dE(n,e,t="on",r=Iw.z){return new Un.y(i=>{let a=null;return a=n[t](e,(u,h)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,rt.U)(i=>{const{snapshot:a,prevKey:u}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:u,key:h}}),(0,CN.B)())}function G2(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function a$(n,e){const{payload:t,prevKey:r,key:i}=e,a=G2(n,i),u=function(n,e){if(j2(e))return 0;{const t=G2(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function W2(n){return(j2(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function K2(n,e,t){return function(n,e,t){return dE(n,"value","once",t).pipe(Hn(r=>{const i=[vt(r)];return e.forEach(a=>i.push(dE(n,a,"on",t))),(0,Mw.T)(...i).pipe(Gl(a$,[]))}),hN())}(n,e=W2(e),t)}function Y2(n,e,t){const r=(e=W2(e)).map(i=>dE(n,i,"on",t));return(0,Mw.T)(...r)}function Q2(n,e){return function(r,i){return z2(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function d$(n){return function(t){return t?z2(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function J2(n,e){return function(){return dE(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new na.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new uE(i,r)},"PUBLIC").setServiceProps({Reference:ua,Query:ls,Database:uE,DataSnapshot:Jf,enableLogging:Vj,INTERNAL:e$,ServerValue:t$}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(SP.Z);const p$=new l.OlP("angularfire2.realtimeDatabaseURL"),g$=new l.OlP("angularfire2.database.use-emulator");let m$=(()=>{class n{constructor(t,r,i,a,u,h,_,w,I,A,x,U,B,X,de){this.schedulers=h;const Ge=_,Ke=(0,gi.on)(t,u,r);w&&rO(Ke,u,I,x,U,B,A,X),this.database=(0,gi.cc)(`${Ke.name}.database.${i}`,"AngularFireDatabase",Ke.name,()=>{const ot=u.runOutsideAngular(()=>Ke.database(i||void 0));return Ge&&ot.useEmulator(...Ge),ot},[Ge])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>H2(this.database,t));let a=i;return r&&(a=r(i)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Q2(r,"update"),set:Q2(r,"set"),push:i=>r.push(i),remove:d$(r),snapshotChanges:i=>K2(n,i,t).pipe(Yt.iC),stateChanges:i=>Y2(n,i,t).pipe(Yt.iC),auditTrail:i=>function(n,e,t){return function(n,e,t){return function(n,e){return dE(n,"value","on",e).pipe((0,rt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){const e=(0,gs.jO)(n);return(0,Qr.e)((t,r)=>{const i=n.length,a=new Array(i);let u=n.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,ps.Xf)(n[_]).subscribe(new Sn.Q(r,w=>{a[_]=w,!h&&!u[_]&&(u[_]=!0,(h=u.every(Zh.y))&&(u=null))},wO.Z));t.subscribe(new Sn.Q(r,_=>{if(h){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,rt.U)(([i,a])=>{const u=i.lastKeyToLoad,h=a.map(_=>_.key);return{actions:a,lastKeyToLoad:u,loadedKeys:h}}),(0,Qr.e)((e,t)=>{let r=!1;e.subscribe(new Sn.Q(t,a=>(r||(r=!(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad))(a)))&&t.next(a)))}),(0,rt.U)(i=>i.actions))}(n,Y2(n,e).pipe(Gl((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Yt.iC),valueChanges:(i,a)=>K2(n,i,t).pipe((0,rt.U)(h=>h.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),Yt.iC)}}(a,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>J2(n,e.schedulers.outsideAngular)().pipe(Yt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>J2(n,e.schedulers.outsideAngular)().pipe(Yt.iC,(0,rt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>H2(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(gi.Dh),l.LFG(gi.xv,8),l.LFG(p$,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Yt.HU),l.LFG(g$,8),l.LFG(d1,8),l.LFG(QP,8),l.LFG(JP,8),l.LFG(XP,8),l.LFG(eO,8),l.LFG(tO,8),l.LFG(nO,8),l.LFG(xw,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_$=(()=>{class n{constructor(){YP.Z.registerVersion("angularfire",Yt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[m$]}),n})();var v$=N(1537);const C$=["addListener","removeListener"],w$=["addEventListener","removeEventListener"],E$=["on","off"];function rA(n,e,t,r){if((0,Ks.m)(t)&&(r=t,t=void 0),r)return rA(n,e,t).pipe(ku(r));const[i,a]=function(n){return(0,Ks.m)(n.addEventListener)&&(0,Ks.m)(n.removeEventListener)}(n)?w$.map(u=>h=>n[u](e,h,t)):function(n){return(0,Ks.m)(n.addListener)&&(0,Ks.m)(n.removeListener)}(n)?C$.map(X2(n,e)):function(n){return(0,Ks.m)(n.on)&&(0,Ks.m)(n.off)}(n)?E$.map(X2(n,e)):[];if(!i&&(0,v$.z)(n))return(0,wr.z)(u=>rA(u,e,t))((0,ps.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Un.y(u=>{const h=(..._)=>u.next(1<_.length?_:_[0]);return i(h),()=>a(h)})}function X2(n,e){return t=>r=>n[t](e,r)}const Xf=new Un.y(wO.Z),D$={connector:()=>new Yo.x};function e3(n,e=D$){const{connector:t}=e;return(0,Qr.e)((r,i)=>{const a=t();(0,tn.D)(n(function(n){return new Un.y(e=>n.subscribe(e))}(a))).subscribe(i),i.add(r.subscribe(a))})}function t3(n,e){return e?t=>Jp(e.pipe((0,Qo.q)(1),(0,Qr.e)((n,e)=>{n.subscribe(new Sn.Q(e,wO.Z))})),t.pipe(t3(n))):(0,wr.z)((t,r)=>n(t,r).pipe((0,Qo.q)(1),function(n){return(0,rt.U)(()=>n)}(t)))}var x$=N(7398);const hE="Service workers are disabled or not supported by this browser";class iA{constructor(e){if(this.serviceWorker=e,e){const r=rA(e,"controllerchange").pipe((0,rt.U)(()=>e.controller)),a=Jp(u_(()=>vt(e.controller)),r);this.worker=a.pipe(ts(I=>!!I)),this.registration=this.worker.pipe(Hn(()=>e.getRegistration()));const w=rA(e,"message").pipe((0,rt.U)(I=>I.data)).pipe(ts(I=>I&&I.type)).pipe(function(n){return n?e=>e3(n)(e):e=>function(n,e){const t=(0,Ks.m)(n)?n:()=>n;return(0,Ks.m)(e)?e3(e,{connector:t}):r=>new JE(r,t)}(new Yo.x)(e)}());w.connect(),this.events=w}else this.worker=this.events=this.registration=function(n){return u_(()=>function(n,e){const t=(0,Ks.m)(n)?n:()=>n;return new Un.y(i=>i.error(t()))}(new Error(n)))}(hE)}postMessage(e,t){return this.worker.pipe((0,Qo.q)(1),(0,ns.b)(r=>{r.postMessage(gt({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),a=this.postMessage(e,t);return Promise.all([a,i]).then(([,u])=>u)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(ts(t))}nextEventOfType(e){return this.eventsOfType(e).pipe((0,Qo.q)(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(ts(t=>t.nonce===e),(0,Qo.q)(1),(0,rt.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let L$=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new Yo.x,!t.isEnabled)return this.messages=Xf,this.notificationClicks=Xf,void(this.subscription=Xf);this.messages=this.sw.eventsOfType("PUSH").pipe((0,rt.U)(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,rt.U)(i=>i.data)),this.pushManager=this.sw.registration.pipe((0,rt.U)(i=>i.pushManager));const r=this.pushManager.pipe(Hn(i=>i.getSubscription()));this.subscription=(0,Mw.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(hE));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(i.length));for(let u=0;u<i.length;u++)a[u]=i.charCodeAt(u);return r.applicationServerKey=a,this.pushManager.pipe(Hn(u=>u.subscribe(r)),(0,Qo.q)(1)).toPromise().then(u=>(this.subscriptionChanges.next(u),u))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Qo.q)(1),Hn(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(hE))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(iA))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),U$=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=Xf,this.available=Xf,this.activated=Xf,void(this.unrecoverable=Xf);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(ts(r=>"VERSION_READY"===r.type),(0,rt.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(hE));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(hE));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(iA))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class kx{}const n3=new l.OlP("NGSW_REGISTER_SCRIPT");function V$(n,e,t,r){return()=>{if(!fc(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let a;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)a=t.registrationStrategy();else{const[h,..._]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(h){case"registerImmediately":a=vt(null);break;case"registerWithDelay":a=r3(+_[0]||0);break;case"registerWhenStable":a=_[0]?(0,Mw.T)(i3(n),r3(+_[0])):i3(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(l.R0b).runOutsideAngular(()=>a.pipe((0,Qo.q)(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(h=>console.error("Service worker registration failed with:",h))))}}function r3(n){return vt(null).pipe(function(n,e=Iw.z){const t=function(n=0,e,t=Iw.P){let r=-1;return null!=e&&((0,x$.K)(e)?t=e:r=e),new Un.y(i=>{let a=function(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(n,e);return t3(()=>t)}(n))}function i3(n){return n.get(l.z2F).isStable.pipe(ts(t=>t))}function B$(n,e){return new iA(fc(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let Z$=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:n3,useValue:t},{provide:kx,useValue:r},{provide:iA,useFactory:B$,deps:[kx,l.Lbi]},{provide:l.ip1,useFactory:V$,deps:[l.zs3,n3,kx,l.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[L$,U$]}),n})(),q$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[oZ]}),n.\u0275inj=l.cJS({providers:[],imports:[[Ca,WE,sZ,ir,gi.hO.initializeApp(CO_firebase),_$,eB,X6,Z$.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]]}),n})();(0,l.G48)(),va().bootstrapModule(q$).catch(n=>console.error(n))},9162:(Ye,ye,N)=>{"use strict";function se(te,fe,Ce,Ee){return new(Ce||(Ce=Promise))(function(ge,Dt){function Xt(Et){try{It(Ee.next(Et))}catch(Pt){Dt(Pt)}}function Yn(Et){try{It(Ee.throw(Et))}catch(Pt){Dt(Pt)}}function It(Et){Et.done?ge(Et.value):function(ge){return ge instanceof Ce?ge:new Ce(function(Dt){Dt(ge)})}(Et.value).then(Xt,Yn)}It((Ee=Ee.apply(te,fe||[])).next())})}function le(te){return this instanceof le?(this.v=te,this):new le(te)}function Y(te,fe,Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,Ee=Ce.apply(te,fe||[]),ge=[];return Re={},Dt("next"),Dt("throw"),Dt("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function Dt(pn){Ee[pn]&&(Re[pn]=function(Ar){return new Promise(function(qr,gn){ge.push([pn,Ar,qr,gn])>1||Xt(pn,Ar)})})}function Xt(pn,Ar){try{!function(pn){pn.value instanceof le?Promise.resolve(pn.value.v).then(It,Et):Pt(ge[0][2],pn)}(Ee[pn](Ar))}catch(qr){Pt(ge[0][3],qr)}}function It(pn){Xt("next",pn)}function Et(pn){Xt("throw",pn)}function Pt(pn,Ar){pn(Ar),ge.shift(),ge.length&&Xt(ge[0][0],ge[0][1])}}function be(te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,fe=te[Symbol.asyncIterator];return fe?fe.call(te):(te=function(te){var fe="function"==typeof Symbol&&Symbol.iterator,Ce=fe&&te[fe],Ee=0;if(Ce)return Ce.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&Ee>=te.length&&(te=void 0),{value:te&&te[Ee++],done:!te}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(te),Ce={},Ee("next"),Ee("throw"),Ee("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function Ee(ge){Ce[ge]=te[ge]&&function(Dt){return new Promise(function(Xt,Yn){!function(ge,Dt,Xt,Yn){Promise.resolve(Yn).then(function(It){ge({value:It,done:Xt})},Dt)}(Xt,Yn,(Dt=te[ge](Dt)).done,Dt.value)})}}}N.d(ye,{mG:()=>se,qq:()=>le,FC:()=>Y,KL:()=>be})},3668:(Ye,ye,N)=>{"use strict";N.d(ye,{deG:()=>Sc,tb:()=>Sy,AFp:()=>cI,ip1:()=>Ur,CZH:()=>sa,hGG:()=>RI,z2F:()=>Mf,sBO:()=>bo,Sil:()=>kd,_Vd:()=>bg,EJc:()=>Fg,SBq:()=>Td,qLn:()=>Lc,vpe:()=>Es,tBr:()=>rr,XFs:()=>mt,OlP:()=>bn,zs3:()=>Xo,ZZ4:()=>xf,aQg:()=>jt,soG:()=>qa,YKP:()=>Ag,h0i:()=>Tn,PXZ:()=>SS,R0b:()=>ss,FiY:()=>yn,Lbi:()=>xd,g9A:()=>hr,Qsj:()=>XD,FYo:()=>SC,JOm:()=>Zs,tp0:()=>Ls,Rgc:()=>zn,dDg:()=>dI,q4F:()=>Yc,GfV:()=>ff,s_b:()=>dy,ifc:()=>Je,eFA:()=>pI,G48:()=>ew,Gpc:()=>$,X6Q:()=>Ry,_c5:()=>or,VLi:()=>IS,c2e:()=>bf,zSh:()=>b0,wAp:()=>Ct,vHH:()=>Be,cg1:()=>Fr,kL8:()=>aT,dqk:()=>bt,sIi:()=>Ys,CqO:()=>Nb,QGY:()=>H0,F4k:()=>Qh,RDi:()=>sp,AaK:()=>se,qOj:()=>M0,TTD:()=>po,_Bn:()=>hf,xp6:()=>RE,uIk:()=>sg,ekj:()=>dg,Suo:()=>yy,Xpm:()=>Nn,lG2:()=>Oo,Yz7:()=>gn,cJS:()=>Fn,oAB:()=>Qa,Yjl:()=>_u,Y36:()=>ag,_UZ:()=>lg,qZA:()=>x_,TgZ:()=>$0,EpF:()=>Rb,n5z:()=>Al,LFG:()=>W,$8M:()=>Ia,$Z:()=>xb,NdJ:()=>z0,CRH:()=>jC,kcU:()=>oh,O4$:()=>wa,oxw:()=>Vb,ALo:()=>NC,lcZ:()=>KT,Q6J:()=>Z0,DdM:()=>$T,iGM:()=>ZC,Jf7:()=>Km,CHM:()=>Ps,LSH:()=>Bm,Jzz:()=>OD,vpz:()=>xD,Udp:()=>Xh,YNc:()=>og,_uU:()=>N_,Oqu:()=>sC,hij:()=>F_,AsE:()=>L_});var l=N(273),Q=N(7908),F=N(8305),ue=N(3719),re=N(3174);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function ae(s,o){for(const c in o)o.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=o[c])}function se(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(se).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function he(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=me({__forward_ref__:me});function $(s){return s.__forward_ref__=$,s.toString=function(){return se(this())},s}function ee(s){return Ve(s)?s():s}function Ve(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===$}class Be extends Error{constructor(o,c){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,c)),this.code=o}}function Y(s){return"string"==typeof s?s:null==s?"":String(s)}function ce(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Y(s)}function Me(s,o){const c=o?` in ${o}`:"";throw new Be("201",`No provider for ${ce(s)} found${c}`)}function Et(s,o){null==s&&function(s,o,c,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${c} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function gn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Fn(s){return{providers:s.providers||[],imports:s.imports||[]}}function mi(s){return Zt(s,cs)||Zt(s,cr)}function Zt(s,o){return s.hasOwnProperty(o)?s[o]:null}function ji(s){return s&&(s.hasOwnProperty(De)||s.hasOwnProperty(Qn))?s[De]:null}const cs=me({\u0275prov:me}),De=me({\u0275inj:me}),cr=me({ngInjectableDef:me}),Qn=me({ngInjectorDef:me});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let Wt;function jr(s){const o=Wt;return Wt=s,o}function ct(s,o,c){const d=mi(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&mt.Optional?null:void 0!==o?o:void Me(se(s),"Injector")}function Rt(s){return{toString:s}.toString()}var Nt=(()=>((Nt=Nt||{})[Nt.OnPush=0]="OnPush",Nt[Nt.Default=1]="Default",Nt))(),Je=(()=>{return(s=Je||(Je={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Je;var s})();const ut="undefined"!=typeof globalThis&&globalThis,gu="undefined"!=typeof window&&window,co="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,bt=ut||"undefined"!=typeof global&&global||gu||co,z={},Z=[],G=me({\u0275cmp:me}),we=me({\u0275dir:me}),ne=me({\u0275pipe:me}),Xe=me({\u0275mod:me}),ft=me({\u0275fac:me}),an=me({__NG_ELEMENT_ID__:me});let mr=0;function Nn(s){return Rt(()=>{const c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Nt.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||Z,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Je.Emulated,id:"c",styles:s.styles||Z,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.directives,m=s.features,v=s.pipes;return d.id+=mr++,d.inputs=cc(s.inputs,c),d.outputs=cc(s.outputs),m&&m.forEach(E=>E(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(Ut):null,d.pipeDefs=v?()=>("function"==typeof v?v():v).map(_r):null,d})}function Ut(s){return mn(s)||function(s){return s[we]||null}(s)}function _r(s){return function(s){return s[ne]||null}(s)}const Po={};function Qa(s){return Rt(()=>{const o={type:s.type,bootstrap:s.bootstrap||Z,declarations:s.declarations||Z,imports:s.imports||Z,exports:s.exports||Z,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Po[s.id]=s.type),o})}function cc(s,o){if(null==s)return z;const c={};for(const d in s)if(s.hasOwnProperty(d)){let f=s[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),c[f]=d,o&&(o[f]=m)}return c}const Oo=Nn;function _u(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function mn(s){return s[G]||null}function yr(s,o){const c=s[Xe]||null;if(!c&&!0===o)throw new Error(`Type ${se(s)} does not have '\u0275mod' property.`);return c}function us(s){return Array.isArray(s)&&"object"==typeof s[1]}function ds(s){return Array.isArray(s)&&!0===s[1]}function nr(s){return 0!=(8&s.flags)}function Ds(s){return 2==(2&s.flags)}function yu(s){return 1==(1&s.flags)}function wi(s){return null!==s.template}function tp(s){return 0!=(512&s[2])}function hs(s,o){return s.hasOwnProperty(ft)?s[ft]:null}class Eu{constructor(o,c,d){this.previousValue=o,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function po(){return _a}function _a(s){return s.type.prototype.ngOnChanges&&(s.setInput=bu),go}function go(){const s=vr(this),o=null==s?void 0:s.current;if(o){const c=s.previous;if(c===z)s.previous=o;else for(let d in o)c[d]=o[d];s.current=null,this.ngOnChanges(o)}}function bu(s,o,c,d){const f=vr(s)||function(s,o){return s[th]=o}(s,{previous:z,current:null}),m=f.current||(f.current={}),v=f.previous,E=this.declaredInputs[c],b=v[E];m[E]=new Eu(b&&b.currentValue,o,v===z),s[d]=o}po.ngInherit=!0;const th="__ngSimpleChanges__";function vr(s){return s[th]||null}const nh="http://www.w3.org/2000/svg";let pc;function sp(s){pc=s}function dn(s){return!!s.listen}const Iu={createRenderer:(s,o)=>void 0!==pc?pc:"undefined"!=typeof document?document:void 0};function Zn(s){for(;Array.isArray(s);)s=s[0];return s}function Ki(s,o){return Zn(o[s])}function qn(s,o){return Zn(o[s.index])}function Fo(s,o){return s.data[o]}function ln(s,o){const c=o[s];return us(c)?c:c[0]}function Ms(s){return 4==(4&s[2])}function ol(s){return 128==(128&s[2])}function Gr(s,o){return null==o?null:s[o]}function al(s){s[18]=0}function mo(s,o){s[5]+=o;let c=s,d=s[3];for(;null!==d&&(1===o&&1===c[5]||-1===o&&0===c[5]);)d[5]+=o,c=d,d=d[3]}const et={lFrame:Su(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function _c(){return et.bindingsEnabled}function Ae(){return et.lFrame.lView}function Lt(){return et.lFrame.tView}function Ps(s){return et.lFrame.contextLView=s,s[8]}function An(){let s=ul();for(;null!==s&&64===s.type;)s=s.parent;return s}function ul(){return et.lFrame.currentTNode}function Cr(s,o){const c=et.lFrame;c.currentTNode=s,c.isParent=o}function vc(){return et.lFrame.isParent}function dl(){return et.isInCheckNoChangesMode}function Bo(s){et.isInCheckNoChangesMode=s}function ur(){const s=et.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function _o(){return et.lFrame.bindingIndex++}function fs(s){const o=et.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,c}function gl(s,o){const c=et.lFrame;c.bindingIndex=c.bindingRootIndex=s,ml(o)}function ml(s){et.lFrame.currentDirectiveIndex=s}function wc(){return et.lFrame.currentQueryIndex}function Ca(s){et.lFrame.currentQueryIndex=s}function ih(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Ec(s,o,c){if(c&mt.SkipSelf){let f=o,m=s;for(;!(f=f.parent,null!==f||c&mt.Host||(f=ih(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;o=f,s=m}const d=et.lFrame=_l();return d.currentTNode=o,d.lView=s,!0}function bc(s){const o=_l(),c=s[1];et.lFrame=o,o.currentTNode=c.firstChild,o.lView=s,o.tView=c,o.contextLView=s,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function _l(){const s=et.lFrame,o=null===s?null:s.child;return null===o?Su(s):o}function Su(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function yl(){const s=et.lFrame;return et.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const sh=yl;function vl(){const s=yl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function _n(){return et.lFrame.selectedIndex}function yo(s){et.lFrame.selectedIndex=s}function Dn(){const s=et.lFrame;return Fo(s.tView,s.selectedIndex)}function wa(){et.lFrame.currentNamespace=nh}function oh(){et.lFrame.currentNamespace=null}function vo(s,o){for(let c=o.directiveStart,d=o.directiveEnd;c<d;c++){const m=s.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:M,ngOnDestroy:O}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-c,v),E&&((s.contentHooks||(s.contentHooks=[])).push(c,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,E)),b&&(s.viewHooks||(s.viewHooks=[])).push(-c,b),M&&((s.viewHooks||(s.viewHooks=[])).push(c,M),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,M)),null!=O&&(s.destroyHooks||(s.destroyHooks=[])).push(c,O)}}function Tc(s,o,c){Pu(s,o,3,c)}function Cl(s,o,c,d){(3&s[2])===c&&Pu(s,o,c,d)}function lh(s,o){let c=s[2];(3&c)===o&&(c&=2047,c+=1,s[2]=c)}function Pu(s,o,c,d){const m=null!=d?d:-1,v=o.length-1;let E=0;for(let b=void 0!==d?65535&s[18]:0;b<v;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=d&&E>=d)break}else o[b]<0&&(s[18]+=65536),(E<m||-1==m)&&(ch(s,c,o,b),s[18]=(4294901760&s[18])+b+2),b++}function ch(s,o,c,d){const f=c[d]<0,m=c[d+1],E=s[f?-c[d]:c[d]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(E)}finally{}}}else try{m.call(E)}finally{}}class wl{constructor(o,c,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function tn(s,o,c){const d=dn(s);let f=0;for(;f<c.length;){const m=c[f];if("number"==typeof m){if(0!==m)break;f++;const v=c[f++],E=c[f++],b=c[f++];d?s.setAttribute(o,E,b,v):o.setAttributeNS(v,E,b)}else{const v=m,E=c[++f];Pr(v)?d&&s.setProperty(o,v,E):d?s.setAttribute(o,v,E):o.setAttribute(v,E),f++}}return f}function Un(s){return 3===s||4===s||6===s}function Pr(s){return 64===s.charCodeAt(0)}function xu(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let c=-1;for(let d=0;d<o.length;d++){const f=o[d];"number"==typeof f?c=f:0===c||cp(s,c,f,null,-1===c||2===c?o[++d]:null)}}return s}function cp(s,o,c,d,f){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const E=s[m++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=m-1;break}}}for(;m<s.length;){const E=s[m];if("number"==typeof E)break;if(E===c){if(null===d)return void(null!==f&&(s[m+1]=f));if(d===s[m+1])return void(s[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,c),null!==d&&s.splice(m++,0,d),null!==f&&s.splice(m++,0,f)}function up(s){return-1!==s}function Zo(s){return 32767&s}function ps(s,o){let c=function(s){return s>>16}(s),d=o;for(;c>0;)d=d[15],c--;return d}let gs=!0;function Sn(s){const o=gs;return gs=s,o}let ku=0;function Tl(s,o){const c=ii(s,o);if(-1!==c)return c;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,ba(d.data,s),ba(o,null),ba(d.blueprint,null));const f=si(s,o),m=s.injectorIndex;if(up(f)){const v=Zo(f),E=ps(f,o),b=E[1].data;for(let M=0;M<8;M++)o[m+M]=E[v+M]|b[v+M]}return o[m+8]=f,m}function ba(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ii(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function si(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,d=null,f=o;for(;null!==f;){const m=f[1],v=m.type;if(d=2===v?m.declTNode:1===v?f[6]:null,null===d)return-1;if(c++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function xs(s,o,c){!function(s,o,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(an)&&(d=c[an]),null==d&&(d=c[an]=ku++);const f=255&d;o.data[s+(f>>5)]|=1<<f}(s,o,c)}function ms(s,o,c){if(c&mt.Optional)return s;Me(o,"NodeInjector")}function Nu(s,o,c,d){if(c&mt.Optional&&void 0===d&&(d=null),0==(c&(mt.Self|mt.Host))){const f=s[9],m=jr(void 0);try{return f?f.get(o,d,c&mt.Optional):ct(o,d,c&mt.Optional)}finally{jr(m)}}return ms(d,o,c)}function Fu(s,o,c,d=mt.Default,f){if(null!==s){const m=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(an)?s[an]:void 0;return"number"==typeof o?o>=0?255&o:Ei:o}(c);if("function"==typeof m){if(!Ec(o,s,d))return d&mt.Host?ms(f,c,d):Nu(o,c,d,f);try{const v=m(d);if(null!=v||d&mt.Optional)return v;Me(c)}finally{sh()}}else if("number"==typeof m){let v=null,E=ii(s,o),b=-1,M=d&mt.Host?o[16][6]:null;for((-1===E||d&mt.SkipSelf)&&(b=-1===E?si(s,o):o[E+8],-1!==b&&Lu(d,!1)?(v=o[1],E=Zo(b),o=ps(b,o)):E=-1);-1!==E;){const O=o[1];if(Il(m,E,O.data)){const L=dh(E,o,c,v,d,M);if(L!==oi)return L}b=o[E+8],-1!==b&&Lu(d,o[1].data[E+8]===M)&&Il(m,E,o)?(v=O,E=Zo(b),o=ps(b,o)):E=-1}}}return Nu(o,c,d,f)}const oi={};function Ei(){return new En(An(),Ae())}function dh(s,o,c,d,f,m){const v=o[1],E=v.data[s+8],O=nn(E,v,c,null==d?Ds(E)&&gs:d!=v&&0!=(3&E.type),f&mt.Host&&m===E);return null!==O?Wr(o,v,O,E):oi}function nn(s,o,c,d,f){const m=s.providerIndexes,v=o.data,E=1048575&m,b=s.directiveStart,O=m>>20,j=f?E+O:s.directiveEnd;for(let K=d?E:E+O;K<j;K++){const _e=v[K];if(K<b&&c===_e||K>=b&&_e.type===c)return K}if(f){const K=v[b];if(K&&wi(K)&&K.type===c)return b}return null}function Wr(s,o,c,d){let f=s[c];const m=o.data;if(function(s){return s instanceof wl}(f)){const v=f;v.resolving&&function(s,o){throw new Be("200",`Circular dependency in DI detected for ${s}`)}(ce(m[c]));const E=Sn(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?jr(v.injectImpl):null;Ec(s,d,mt.Default);try{f=s[c]=v.factory(void 0,m,s,d),o.firstCreatePass&&c>=d.directiveStart&&function(s,o,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=o.type.prototype;if(d){const v=_a(o);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,v),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,v)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,f),m&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,m),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,m))}(c,m[c],o)}finally{null!==b&&jr(b),Sn(E),v.resolving=!1,sh()}}return f}function Il(s,o,c){return!!(c[o+(s>>5)]&1<<s)}function Lu(s,o){return!(s&mt.Self||s&mt.Host&&o)}class En{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,d){return Fu(this._tNode,this._lView,o,d,c)}}function Al(s){return Rt(()=>{const o=s.prototype.constructor,c=o[ft]||Ta(o),d=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==d;){const m=f[ft]||Ta(f);if(m&&m!==c)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Ta(s){return Ve(s)?()=>{const o=Ta(ee(s));return o&&o()}:hs(s)}function Ia(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const c=s.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const m=c[f];if(Un(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(m===o)return c[f+1];f+=2}}}return null}(An(),s)}const Rs="__parameters__";function Ti(s,o,c){return Rt(()=>{const d=function(s){return function(...c){if(s){const d=s(...c);for(const f in d)this[f]=d[f]}}}(o);function f(...m){if(this instanceof f)return d.apply(this,m),this;const v=new f(...m);return E.annotation=v,E;function E(b,M,O){const L=b.hasOwnProperty(Rs)?b[Rs]:Object.defineProperty(b,Rs,{value:[]})[Rs];for(;L.length<=O;)L.push(null);return(L[O]=L[O]||[]).push(v),b}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class bn{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=gn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Sc=new bn("AnalyzeForEntryComponents");function jn(s,o){void 0===o&&(o=s);for(let c=0;c<s.length;c++){let d=s[c];Array.isArray(d)?(o===s&&(o=s.slice(0,c)),jn(d,o)):o!==s&&o.push(d)}return o}function Qi(s,o){s.forEach(c=>Array.isArray(c)?Qi(c,o):o(c))}function Bu(s,o,c){o>=s.length?s.push(c):s.splice(o,0,c)}function Mc(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ai(s,o,c){let d=$o(s,o);return d>=0?s[1|d]=c:(d=~d,function(s,o,c,d){let f=s.length;if(f==o)s.push(c,d);else if(1===f)s.push(d,s[0]),s[0]=c;else{for(f--,s.push(s[f-1],s[f]);f>o;)s[f]=s[f-2],f--;s[o]=c,s[o+1]=d}}(s,d,o,c)),d}function Pc(s,o){const c=$o(s,o);if(c>=0)return s[1|c]}function $o(s,o){return function(s,o,c){let d=0,f=s.length>>c;for(;f!==d;){const m=d+(f-d>>1),v=s[m<<c];if(o===v)return m<<c;v>o?f=m:d=m+1}return~(f<<c)}(s,o,1)}const Ji={},Ol="__NG_DI_FLAG__",zo="ngTempTokenPath",_h=/\n/gm,xl="__source",T=me({provide:String,useValue:me});let D;function k(s){const o=D;return D=s,o}function V(s,o=mt.Default){if(void 0===D)throw new Error("inject() must be called from an injection context");return null===D?ct(s,void 0,o):D.get(s,o&mt.Optional?null:void 0,o)}function W(s,o=mt.Default){return(Wt||V)(ee(s),o)}function We(s){const o=[];for(let c=0;c<s.length;c++){const d=ee(s[c]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let f,m=mt.Default;for(let v=0;v<d.length;v++){const E=d[v],b=Ot(E);"number"==typeof b?-1===b?f=E.token:m|=b:f=E}o.push(W(f,m))}else o.push(W(d))}return o}function $e(s,o){return s[Ol]=o,s.prototype[Ol]=o,s}function Ot(s){return s[Ol]}const rr=$e(Ti("Inject",s=>({token:s})),-1),yn=$e(Ti("Optional"),8),Ls=$e(Ti("SkipSelf"),4);class wp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Cs(s){return s instanceof wp?s.changingThisBreaksApplicationSecurity:s}const Rm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Nm=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var ir=(()=>((ir=ir||{})[ir.NONE=0]="NONE",ir[ir.HTML=1]="HTML",ir[ir.STYLE=2]="STYLE",ir[ir.SCRIPT=3]="SCRIPT",ir[ir.URL=4]="URL",ir[ir.RESOURCE_URL=5]="RESOURCE_URL",ir))();function Bm(s){const o=function(){const s=Ae();return s&&s[12]}();return o?o.sanitize(ir.URL,s)||"":function(s,o){const c=function(s){return s instanceof wp&&s.getTypeName()||null}(s);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===o}(s,"URL")?Cs(s):function(s){return(s=String(s)).match(Rm)||s.match(Nm)?s:"unsafe:"+s}(Y(s))}const jm="__ngContext__";function kr(s,o){s[jm]=o}function $m(s){const o=function(s){return s[jm]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Qu(s){return s.ngOriginalError}function Wm(s,...o){s.error(...o)}class Lc{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o),d=(s=o)&&s.ngErrorLogger||Wm;var s;d(this._console,"ERROR",o),c&&d(this._console,"ORIGINAL ERROR",c)}_findOriginalError(o){let c=o&&Qu(o);for(;c&&Qu(c);)c=Qu(c);return c||null}}const td=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(bt))();function Km(s){return s.ownerDocument.defaultView}function Mi(s){return s instanceof Function?s():s}var Zs=(()=>((Zs=Zs||{})[Zs.Important=1]="Important",Zs[Zs.DashCase=2]="DashCase",Zs))();function Co(s,o){return undefined(s,o)}function Bl(s){const o=s[3];return ds(o)?o[3]:o}function Pi(s){return Oh(s[13])}function rd(s){return Oh(s[4])}function Oh(s){for(;null!==s&&!ds(s);)s=s[4];return s}function Oi(s,o,c,d,f){if(null!=d){let m,v=!1;ds(d)?m=d:us(d)&&(v=!0,d=d[0]);const E=Zn(d);0===s&&null!==c?null==f?Zc(o,c,E):Rr(o,c,E,f||null,!0):1===s&&null!==c?Rr(o,c,E,f||null,!0):2===s?function(s,o,c){const d=jl(s,o);d&&function(s,o,c,d){dn(s)?s.removeChild(o,c,d):o.removeChild(c)}(s,d,o,c)}(o,E,v):3===s&&o.destroyNode(E),null!=m&&function(s,o,c,d,f){const m=c[7];m!==Zn(c)&&Oi(o,s,d,m,f);for(let E=10;E<c.length;E++){const b=c[E];$p(b[1],b,s,o,d,m)}}(o,s,m,c,f)}}function xh(s,o,c){return dn(s)?s.createElement(o,c):null===c?s.createElement(o):s.createElementNS(c,o)}function q(s,o){const c=s[9],d=c.indexOf(o),f=o[3];1024&o[2]&&(o[2]&=-1025,mo(f,-1)),c.splice(d,1)}function J(s,o){if(s.length<=10)return;const c=10+o,d=s[c];if(d){const f=d[17];null!==f&&f!==s&&q(f,d),o>0&&(s[c-1][4]=d[4]);const m=Mc(s,10+o);!function(s,o){$p(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const v=m[19];null!==v&&v.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function ke(s,o){if(!(256&o[2])){const c=o[11];dn(c)&&c.destroyNode&&$p(s,o,c,3,null,null),function(s){let o=s[13];if(!o)return Se(s[1],s);for(;o;){let c=null;if(us(o))c=o[13];else{const d=o[10];d&&(c=d)}if(!c){for(;o&&!o[4]&&o!==s;)us(o)&&Se(o[1],o),o=o[3];null===o&&(o=s),us(o)&&Se(o[1],o),c=o&&o[4]}o=c}}(o)}}function Se(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let d=0;d<c.length;d+=2){const f=o[c[d]];if(!(f instanceof wl)){const m=c[d+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const E=f[m[v]],b=m[v+1];try{b.call(E)}finally{}}else try{m.call(f)}finally{}}}}(s,o),function(s,o){const c=s.cleanup,d=o[7];let f=-1;if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const v=c[m+1],E="function"==typeof v?v(o):Zn(o[v]),b=d[f=c[m+2]],M=c[m+3];"boolean"==typeof M?E.removeEventListener(c[m],b,M):M>=0?d[f=M]():d[f=-M].unsubscribe(),m+=2}else{const v=d[f=c[m+1]];c[m].call(v)}if(null!==d){for(let m=f+1;m<d.length;m++)d[m]();o[7]=null}}(s,o),1===o[1].type&&dn(o[11])&&o[11].destroy();const c=o[17];if(null!==c&&ds(o[3])){c!==o[3]&&q(c,o);const d=o[19];null!==d&&d.detachView(s)}}}function Vt(s,o,c){return function(s,o,c){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return c[0];if(2&d.flags){const f=s.data[d.directiveStart].encapsulation;if(f===Je.None||f===Je.Emulated)return null}return qn(d,c)}(s,o.parent,c)}function Rr(s,o,c,d,f){dn(s)?s.insertBefore(o,c,d,f):o.insertBefore(c,d,f)}function Zc(s,o,c){dn(s)?s.appendChild(o,c):o.appendChild(c)}function id(s,o,c,d,f){null!==d?Rr(s,o,c,d,f):Zc(s,o,c)}function jl(s,o){return dn(s)?s.parentNode(o):o.parentNode}let Rh=function(s,o,c){return 40&s.type?qn(s,c):null};function Ko(s,o,c,d){const f=Vt(s,d,o),m=o[11],E=function(s,o,c){return Rh(s,o,c)}(d.parent||o[6],d,o);if(null!=f)if(Array.isArray(c))for(let b=0;b<c.length;b++)id(m,f,c[b],E,!1);else id(m,f,c,E,!1)}function Fh(s,o){if(null!==o){const c=o.type;if(3&c)return qn(o,s);if(4&c)return jp(-1,s[o.index]);if(8&c){const d=o.child;if(null!==d)return Fh(s,d);{const f=s[o.index];return ds(f)?jp(-1,f):Zn(f)}}if(32&c)return Co(o,s)()||Zn(s[o.index]);{const d=qc(s,o);return null!==d?Array.isArray(d)?d[0]:Fh(Bl(s[16]),d):Fh(s,o.next)}}return null}function qc(s,o){return null!==o?s[16][6].projection[o.projection]:null}function jp(s,o){const c=10+s+1;if(c<o.length){const d=o[c],f=d[1].firstChild;if(null!==f)return Fh(d,f)}return o[7]}function Lh(s,o,c,d,f,m,v){for(;null!=c;){const E=d[c.index],b=c.type;if(v&&0===o&&(E&&kr(Zn(E),d),c.flags|=4),64!=(64&c.flags))if(8&b)Lh(s,o,c.child,d,f,m,!1),Oi(o,s,f,E,m);else if(32&b){const M=Co(c,d);let O;for(;O=M();)Oi(o,s,f,O,m);Oi(o,s,f,E,m)}else 16&b?PE(s,o,d,c,f,m):Oi(o,s,f,E,m);c=v?c.projectionNext:c.next}}function $p(s,o,c,d,f,m){Lh(c,d,s.firstChild,o,f,m,!1)}function PE(s,o,c,d,f,m){const v=c[16],b=v[6].projection[d.projection];if(Array.isArray(b))for(let M=0;M<b.length;M++)Oi(o,s,f,b[M],m);else Lh(s,o,b,v[3],f,m,!0)}function e_(s,o,c){dn(s)?s.setAttribute(o,"style",c):o.style.cssText=c}function zv(s,o,c){dn(s)?""===c?s.removeAttribute(o,"class"):s.setAttribute(o,"class",c):o.className=c}function Hp(s,o,c){let d=s.length;for(;;){const f=s.indexOf(o,c);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const m=o.length;if(f+m===d||s.charCodeAt(f+m)<=32)return f}c=f+1}}const zp="ng-template";function dA(s,o,c){let d=0;for(;d<s.length;){let f=s[d++];if(c&&"class"===f){if(f=s[d],-1!==Hp(f.toLowerCase(),o,0))return!0}else if(1===f){for(;d<s.length&&"string"==typeof(f=s[d++]);)if(f.toLowerCase()===o)return!0;return!1}}return!1}function Gv(s){return 4===s.type&&s.value!==zp}function hA(s,o,c){return o===(4!==s.type||c?s.value:zp)}function Nx(s,o,c){let d=4;const f=s.attrs||[],m=function(s){for(let o=0;o<s.length;o++)if(Un(s[o]))return o;return s.length}(f);let v=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!v)if(4&d){if(d=2|1&d,""!==b&&!hA(s,b,c)||""===b&&1===o.length){if(js(d))return!1;v=!0}}else{const M=8&d?b:o[++E];if(8&d&&null!==s.attrs){if(!dA(s.attrs,M,c)){if(js(d))return!1;v=!0}continue}const L=Fx(8&d?"class":b,f,Gv(s),c);if(-1===L){if(js(d))return!1;v=!0;continue}if(""!==M){let j;j=L>m?"":f[L+1].toLowerCase();const K=8&d?j:null;if(K&&-1!==Hp(K,M,0)||2&d&&M!==j){if(js(d))return!1;v=!0}}}}else{if(!v&&!js(d)&&!js(b))return!1;if(v&&js(b))continue;v=!1,d=b|1&d}}return js(d)||v}function js(s){return 0==(1&s)}function Fx(s,o,c,d){if(null===o)return-1;let f=0;if(d||!c){let m=!1;for(;f<o.length;){const v=o[f];if(v===s)return f;if(3===v||6===v)m=!0;else{if(1===v||2===v){let E=o[++f];for(;"string"==typeof E;)E=o[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=m?1:2}return-1}return function(s,o){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const d=s[c];if("number"==typeof d)return-1;if(d===o)return c;c++}return-1}(o,s)}function xE(s,o,c=!1){for(let d=0;d<o.length;d++)if(Nx(s,o[d],c))return!0;return!1}function Kv(s,o){return s?":not("+o.trim()+")":o}function gA(s){let o=s[0],c=1,d=2,f="",m=!1;for(;c<s.length;){let v=s[c];if("string"==typeof v)if(2&d){const E=s[++c];f+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!js(v)&&(o+=Kv(m,f),f=""),d=v,m=m||!js(d);c++}return""!==f&&(o+=Kv(m,f)),o}const Mt={};function RE(s){Yv(Lt(),Ae(),_n()+s,dl())}function Yv(s,o,c,d){if(!d)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&Tc(o,m,c)}else{const m=s.preOrderHooks;null!==m&&Cl(o,m,0,c)}yo(c)}function t_(s,o){return s<<17|o<<2}function wo(s){return s>>17&32767}function n_(s){return 2|s}function $l(s){return(131068&s)>>2}function Qv(s,o){return-131069&s|o<<2}function r_(s){return 1|s}function jE(s,o){const c=s.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const f=c[d],m=c[d+1];if(-1!==m){const v=s.data[m];Ca(f),v.contentQueries(2,o[m],m)}}}function Kp(s,o,c,d,f,m,v,E,b,M){const O=o.blueprint.slice();return O[0]=f,O[2]=140|d,al(O),O[3]=O[15]=s,O[8]=c,O[10]=v||s&&s[10],O[11]=E||s&&s[11],O[12]=b||s&&s[12]||null,O[9]=M||s&&s[9]||null,O[6]=m,O[16]=2==o.type?s[16]:O,O}function od(s,o,c,d,f){let m=s.data[o];if(null===m)m=function(s,o,c,d,f){const m=ul(),v=vc(),b=s.data[o]=function(s,o,c,d,f,m){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,c,o,d,f);return null===s.firstChild&&(s.firstChild=b),null!==m&&(v?null==m.child&&null!==b.parent&&(m.child=b):null===m.next&&(m.next=b)),b}(s,o,c,d,f),et.lFrame.inI18n&&(m.flags|=64);else if(64&m.type){m.type=c,m.value=d,m.attrs=f;const v=function(){const s=et.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Cr(m,!0),m}function Vh(s,o,c,d){if(0===c)return-1;const f=o.length;for(let m=0;m<c;m++)o.push(d),s.blueprint.push(d),s.data.push(null);return f}function Yp(s,o,c){bc(o);try{const d=s.viewQuery;null!==d&&f_(1,d,c);const f=s.template;null!==f&&MA(s,o,f,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&jE(s,o),s.staticViewQueries&&f_(2,s.viewQuery,c);const m=s.components;null!==m&&function(s,o){for(let c=0;c<o.length;c++)Qo(s,o[c])}(o,m)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,vl()}}function Bh(s,o,c,d){const f=o[2];if(256==(256&f))return;bc(o);const m=dl();try{al(o),function(s){et.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&MA(s,o,c,2,d);const v=3==(3&f);if(!m)if(v){const M=s.preOrderCheckHooks;null!==M&&Tc(o,M,null)}else{const M=s.preOrderHooks;null!==M&&Cl(o,M,0,null),lh(o,0)}if(function(s){for(let o=Pi(s);null!==o;o=rd(o)){if(!o[2])continue;const c=o[9];for(let d=0;d<c.length;d++){const f=c[d],m=f[3];0==(1024&f[2])&&mo(m,1),f[2]|=1024}}}(o),function(s){for(let o=Pi(s);null!==o;o=rd(o))for(let c=10;c<o.length;c++){const d=o[c],f=d[1];ol(d)&&Bh(f,d,f.template,d[8])}}(o),null!==s.contentQueries&&jE(s,o),!m)if(v){const M=s.contentCheckHooks;null!==M&&Tc(o,M)}else{const M=s.contentHooks;null!==M&&Cl(o,M,1),lh(o,1)}!function(s,o){const c=s.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const f=c[d];if(f<0)yo(~f);else{const m=f,v=c[++d],E=c[++d];gl(v,m),E(2,o[m])}}}finally{yo(-1)}}(s,o);const E=s.components;null!==E&&function(s,o){for(let c=0;c<o.length;c++)JE(s,o[c])}(o,E);const b=s.viewQuery;if(null!==b&&f_(2,b,d),!m)if(v){const M=s.viewCheckHooks;null!==M&&Tc(o,M)}else{const M=s.viewHooks;null!==M&&Cl(o,M,2),lh(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,mo(o[3],-1))}finally{vl()}}function HE(s,o,c,d){const f=o[10],m=!dl(),v=Ms(o);try{m&&!v&&f.begin&&f.begin(),v&&Yp(s,o,d),Bh(s,o,c,d)}finally{m&&!v&&f.end&&f.end()}}function MA(s,o,c,d,f){const m=_n(),v=2&d;try{yo(-1),v&&o.length>20&&Yv(s,o,20,dl()),c(d,f)}finally{yo(m)}}function d0(s,o,c){!_c()||(function(s,o,c,d){const f=c.directiveStart,m=c.directiveEnd;s.firstCreatePass||Tl(c,o),kr(d,o);const v=c.initialInputs;for(let E=f;E<m;E++){const b=s.data[E],M=wi(b);M&&c_(o,c,b);const O=Wr(o,s,E,c);kr(O,o),null!==v&&Jp(0,E-f,O,b,0,v),M&&(ln(c.index,o)[8]=O)}}(s,o,c,qn(c,o)),128==(128&c.flags)&&function(s,o,c){const d=c.directiveStart,f=c.directiveEnd,v=c.index,E=et.lFrame.currentDirectiveIndex;try{yo(v);for(let b=d;b<f;b++){const M=s.data[b],O=o[b];ml(b),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&Gs(M,O)}}finally{yo(-1),ml(E)}}(s,o,c))}function h0(s,o,c=qn){const d=o.localNames;if(null!==d){let f=o.index+1;for(let m=0;m<d.length;m+=2){const v=d[m+1],E=-1===v?c(o,s):s[v];s[f++]=E}}}function f0(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=l_(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function l_(s,o,c,d,f,m,v,E,b,M){const O=20+d,L=O+f,j=function(s,o){const c=[];for(let d=0;d<o;d++)c.push(d<s?null:Mt);return c}(O,L),K="function"==typeof M?M():M;return j[1]={type:s,blueprint:j,template:c,queries:null,viewQuery:E,declTNode:o,data:j.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:K,incompleteFirstPass:!1}}function p0(s,o,c,d){const f=eb(o);null===c?f.push(d):(f.push(c),s.firstCreatePass&&$c(s).push(d,f.length-1))}function g0(s,o,c){for(let d in s)if(s.hasOwnProperty(d)){const f=s[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(o,f):c[d]=[o,f]}return c}function _0(s,o,c,d){let f=!1;if(_c()){const m=function(s,o,c){const d=s.directiveRegistry;let f=null;if(d)for(let m=0;m<d.length;m++){const v=d[m];xE(c,v.selectors,!1)&&(f||(f=[]),xs(Tl(c,o),s,v.type),wi(v)?(KE(s,c),f.unshift(v)):f.push(v))}return f}(s,o,c),v=null===d?null:{"":-1};if(null!==m){f=!0,y0(c,s.data.length,m.length);for(let O=0;O<m.length;O++){const L=m[O];L.providersResolver&&L.providersResolver(L)}let E=!1,b=!1,M=Vh(s,o,m.length,null);for(let O=0;O<m.length;O++){const L=m[O];c.mergedAttrs=xu(c.mergedAttrs,L.hostAttrs),YE(s,c,o,M,L),VA(M,L,v),null!==L.contentQueries&&(c.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(c.flags|=128);const j=L.type.prototype;!E&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),E=!0),!b&&(j.ngOnChanges||j.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),b=!0),M++}!function(s,o){const d=o.directiveEnd,f=s.data,m=o.attrs,v=[];let E=null,b=null;for(let M=o.directiveStart;M<d;M++){const O=f[M],L=O.inputs,j=null===m||Gv(o)?null:u_(L,m);v.push(j),E=g0(L,M,E),b=g0(O.outputs,M,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=b}(s,c)}v&&function(s,o,c){if(o){const d=s.localNames=[];for(let f=0;f<o.length;f+=2){const m=c[o[f+1]];if(null==m)throw new Be("301",`Export of name '${o[f+1]}' not found!`);d.push(o[f],m)}}}(c,d,v)}return c.mergedAttrs=xu(c.mergedAttrs,c.attrs),f}function WE(s,o,c,d,f,m){const v=m.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const b=~o.index;(function(s){let o=s.length;for(;o>0;){const c=s[--o];if("number"==typeof c&&c<0)return c}return 0})(E)!=b&&E.push(b),E.push(d,f,v)}}function Gs(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function KE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function VA(s,o,c){if(c){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)c[o.exportAs[d]]=s;wi(o)&&(c[""]=s)}}function y0(s,o,c){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+c,s.providerIndexes=o}function YE(s,o,c,d,f){s.data[d]=f;const m=f.factory||(f.factory=hs(f.type)),v=new wl(m,wi(f),null);s.blueprint[d]=v,c[d]=v,WE(s,o,0,d,Vh(s,c,f.hostVars,Mt),f)}function c_(s,o,c){const d=qn(o,s),f=f0(c),m=s[10],v=h_(s,Kp(s,f,null,c.onPush?64:16,d,o,m,m.createRenderer(d,c),null,null));s[o.index]=v}function Ws(s,o,c,d,f,m){const v=qn(s,o);!function(s,o,c,d,f,m,v){if(null==m)dn(s)?s.removeAttribute(o,f,c):o.removeAttribute(f);else{const E=null==v?Y(m):v(m,d||"",f);dn(s)?s.setAttribute(o,f,E,c):c?o.setAttributeNS(c,f,E):o.setAttribute(f,E)}}(o[11],v,m,s.value,c,d,f)}function Jp(s,o,c,d,f,m){const v=m[o];if(null!==v){const E=d.setInput;for(let b=0;b<v.length;){const M=v[b++],O=v[b++],L=v[b++];null!==E?d.setInput(c,L,M,O):c[O]=L}}}function u_(s,o){let c=null,d=0;for(;d<o.length;){const f=o[d];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,s[f],o[d+1])),d+=2}else d+=2;else d+=4}return c}function C0(s,o,c,d){return new Array(s,!0,!1,o,null,0,d,c,null,null)}function JE(s,o){const c=ln(o,s);if(ol(c)){const d=c[1];80&c[2]?Bh(d,c,d.template,c[8]):c[5]>0&&Hn(c)}}function Hn(s){for(let d=Pi(s);null!==d;d=rd(d))for(let f=10;f<d.length;f++){const m=d[f];if(1024&m[2]){const v=m[1];Bh(v,m,v.template,m[8])}else m[5]>0&&Hn(m)}const c=s[1].components;if(null!==c)for(let d=0;d<c.length;d++){const f=ln(c[d],s);ol(f)&&f[5]>0&&Hn(f)}}function Qo(s,o){const c=ln(o,s),d=c[1];(function(s,o){for(let c=o.length;c<s.blueprint.length;c++)o.push(s.blueprint[c])})(d,c),Yp(d,c,c[8])}function h_(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Gl(s){for(;s;){s[2]|=64;const o=Bl(s);if(tp(s)&&!o)return s;s=o}return null}function wr(s,o,c){const d=o[10];d.begin&&d.begin();try{Bh(s,o,s.template,c)}catch(f){throw p_(o,f),f}finally{d.end&&d.end()}}function Ks(s){!function(s){for(let o=0;o<s.components.length;o++){const c=s.components[o],d=$m(c),f=d[1];HE(f,d,f.template,c)}}(s[8])}function f_(s,o,c){Ca(0),o(s,c)}const XE=(()=>Promise.resolve(null))();function eb(s){return s[7]||(s[7]=[])}function $c(s){return s.cleanup||(s.cleanup=[])}function p_(s,o){const c=s[9],d=c?c.get(Lc,null):null;d&&d.handleError(o)}function Ra(s,o,c,d,f){for(let m=0;m<c.length;){const v=c[m++],E=c[m++],b=o[v],M=s.data[v];null!==M.setInput?M.setInput(b,f,d,E):b[E]=f}}function Jo(s,o,c){const d=Ki(o,s);!function(s,o,c){dn(s)?s.setValue(o,c):o.textContent=c}(s[11],d,c)}function Hc(s,o,c){let d=c?s.styles:null,f=c?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?m=E:1==m?f=he(f,E):2==m&&(d=he(d,E+": "+o[++v]+";"))}c?s.styles=d:s.stylesWithoutHost=d,c?s.classes=f:s.classesWithoutHost=f}const E0=new bn("INJECTOR",-1);class nb{get(o,c=Ji){if(c===Ji){const d=new Error(`NullInjectorError: No provider for ${se(o)}!`);throw d.name="NullInjectorError",d}return c}}const b0=new bn("Set Injector scope."),tg={},rb={};let g_;function ib(){return void 0===g_&&(g_=new nb),g_}function sb(s,o=null,c=null,d){const f=ob(s,o,c,d);return f._resolveInjectorDefTypes(),f}function ob(s,o=null,c=null,d){return new ZA(s,c,o||ib(),d)}class ZA{constructor(o,c,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];c&&Qi(c,E=>this.processProvider(E,o,c)),Qi([o],E=>this.processInjectorType(E,[],m)),this.records.set(E0,ld(void 0,this));const v=this.records.get(b0);this.scope=null!=v?v.value:null,this.source=f||("object"==typeof o?null:se(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,c=Ji,d=mt.Default){this.assertNotDestroyed();const f=k(this),m=jr(void 0);try{if(!(d&mt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=("function"==typeof(s=o)||"object"==typeof s&&s instanceof bn)&&mi(o);E=b&&this.injectableDefInScope(b)?ld(m_(o),tg):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(d&mt.Self?ib():this.parent).get(o,c=d&mt.Optional&&c===Ji?null:c)}catch(v){if("NullInjectorError"===v.name){if((v[zo]=v[zo]||[]).unshift(se(o)),f)throw v;return function(s,o,c,d){const f=s[zo];throw o[xl]&&f.unshift(o[xl]),s.message=function(s,o,c,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let f=se(o);if(Array.isArray(o))f=o.map(se).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];m.push(v+":"+("string"==typeof E?JSON.stringify(E):se(E)))}f=`{${m.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${s.replace(_h,"\n  ")}`}("\n"+s.message,f,c,d),s.ngTokenPath=f,s[zo]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{jr(m),k(f)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((d,f)=>o.push(se(f))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,c,d){if(!(o=ee(o)))return!1;let f=ji(o);const m=null==f&&o.ngModule||void 0,v=void 0===m?o:m,E=-1!==d.indexOf(v);if(void 0!==m&&(f=ji(m)),null==f)return!1;if(null!=f.imports&&!E){let O;d.push(v);try{Qi(f.imports,L=>{this.processInjectorType(L,c,d)&&(void 0===O&&(O=[]),O.push(L))})}finally{}if(void 0!==O)for(let L=0;L<O.length;L++){const{ngModule:j,providers:K}=O[L];Qi(K,_e=>this.processProvider(_e,j,K||Z))}}this.injectorDefTypes.add(v);const b=hs(v)||(()=>new v);this.records.set(v,ld(b,tg));const M=f.providers;if(null!=M&&!E){const O=o;Qi(M,L=>this.processProvider(L,O,M))}return void 0!==m&&void 0!==o.providers}processProvider(o,c,d){let f=qh(o=ee(o))?o:ee(o&&o.provide);const m=(s=o,__(s)?ld(void 0,s.useValue):ld(ad(s),tg));var s;if(qh(o)||!0!==o.multi)this.records.get(f);else{let v=this.records.get(f);v||(v=ld(void 0,tg,!0),v.factory=()=>We(v.multi),this.records.set(f,v)),f=o,v.multi.push(o)}this.records.set(f,m)}hydrate(o,c){return c.value===tg&&(c.value=rb,c.value=c.factory()),"object"==typeof c.value&&c.value&&null!==(s=c.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(c.value),c.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const c=ee(o.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function m_(s){const o=mi(s),c=null!==o?o.factory:hs(s);if(null!==c)return c;if(s instanceof bn)throw new Error(`Token ${se(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const d=function(s,o){const c=[];for(let d=0;d<s;d++)c.push(o);return c}(o,"?");throw new Error(`Can't resolve all parameters for ${se(s)}: (${d.join(", ")}).`)}const c=function(s){const o=s&&(s[cs]||s[cr]);if(o){const c=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),o}return null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new Error("unreachable")}function ad(s,o,c){let d;if(qh(s)){const f=ee(s);return hs(f)||m_(f)}if(__(s))d=()=>ee(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...We(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))d=()=>W(ee(s.useExisting));else{const f=ee(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return hs(f)||m_(f);d=()=>new f(...We(s.deps))}return d}function ld(s,o,c=!1){return{factory:s,value:o,multi:c?[]:void 0}}function __(s){return null!==s&&"object"==typeof s&&T in s}function qh(s){return"function"==typeof s}let Xo=(()=>{class s{static create(c,d){var f;if(Array.isArray(c))return sb({name:""},d,c,"");{const m=null!=(f=c.name)?f:"";return sb({name:m},c.parent,c.providers,m)}}}return s.THROW_IF_NOT_FOUND=Ji,s.NULL=new nb,s.\u0275prov=gn({token:s,providedIn:"any",factory:()=>W(E0)}),s.__NG_ELEMENT_ID__=-1,s})();function w_(s,o){vo($m(s)[1],An())}function M0(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const d=[s];for(;o;){let f;if(wi(s))f=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");f=o.\u0275dir}if(f){if(c){d.push(f);const v=s;v.inputs=P0(s.inputs),v.declaredInputs=P0(s.declaredInputs),v.outputs=P0(s.outputs);const E=f.hostBindings;E&&XA(s,E);const b=f.viewQuery,M=f.contentQueries;if(b&&E_(s,b),M&&JA(s,M),ae(s.inputs,f.inputs),ae(s.declaredInputs,f.declaredInputs),ae(s.outputs,f.outputs),wi(f)&&f.data.animation){const O=s.data;O.animation=(O.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let v=0;v<m.length;v++){const E=m[v];E&&E.ngInherit&&E(s),E===M0&&(c=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,c=null;for(let d=s.length-1;d>=0;d--){const f=s[d];f.hostVars=o+=f.hostVars,f.hostAttrs=xu(f.hostAttrs,c=xu(c,f.hostAttrs))}}(d)}function P0(s){return s===z?{}:s===Z?[]:s}function E_(s,o){const c=s.viewQuery;s.viewQuery=c?(d,f)=>{o(d,f),c(d,f)}:o}function JA(s,o){const c=s.contentQueries;s.contentQueries=c?(d,f,m)=>{o(d,f,m),c(d,f,m)}:o}function XA(s,o){const c=s.hostBindings;s.hostBindings=c?(d,f)=>{o(d,f),c(d,f)}:o}let ig=null;function zc(){if(!ig){const s=bt.Symbol;if(s&&s.iterator)ig=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<o.length;++c){const d=o[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(ig=d)}}}return ig}function Ys(s){return!!b_(s)&&(Array.isArray(s)||!(s instanceof Map)&&zc()in s)}function b_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Fa(s,o,c){return s[o]=c}function li(s,o,c){return!Object.is(s[o],c)&&(s[o]=c,!0)}function sg(s,o,c,d){const f=Ae();return li(f,_o(),o)&&(Lt(),Ws(Dn(),f,s,o,c,d)),sg}function Gc(s,o,c,d){return li(s,_o(),c)?o+Y(c)+d:Mt}function Wc(s,o,c,d,f,m){const E=function(s,o,c,d){const f=li(s,o,c);return li(s,o+1,d)||f}(s,et.lFrame.bindingIndex,c,f);return fs(2),E?o+Y(c)+d+Y(f)+m:Mt}function og(s,o,c,d,f,m,v,E){const b=Ae(),M=Lt(),O=s+20,L=M.firstCreatePass?function(s,o,c,d,f,m,v,E,b){const M=o.consts,O=od(o,s,4,v||null,Gr(M,E));_0(o,c,O,Gr(M,b)),vo(o,O);const L=O.tViews=l_(2,O,d,f,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,M);return null!==o.queries&&(o.queries.template(o,O),L.queries=o.queries.embeddedTView(O)),O}(O,M,b,o,c,d,f,m,v):M.data[O];Cr(L,!1);const j=b[11].createComment("");Ko(M,b,j,L),kr(j,b),h_(b,b[O]=C0(j,b,j,L)),yu(L)&&d0(M,b,L),null!=v&&h0(b,L,E)}function ag(s,o=mt.Default){const c=Ae();return null===c?W(s,o):Fu(An(),c,ee(s),o)}function xb(){throw new Error("invalid")}function Z0(s,o,c){const d=Ae();return li(d,_o(),o)&&function(s,o,c,d,f,m,v,E){const b=qn(o,c);let O,M=o.inputs;!E&&null!=M&&(O=M[d])?(Ra(s,c,O,d,f),Ds(o)&&function(s,o){const c=ln(o,s);16&c[2]||(c[2]|=64)}(c,o.index)):3&o.type&&(d=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),f=null!=v?v(f,o.value||"",d):f,dn(m)?m.setProperty(b,d,f):Pr(d)||(b.setProperty?b.setProperty(d,f):b[d]=f))}(Lt(),Dn(),d,s,o,d[11],c,!1),Z0}function q0(s,o,c,d,f){const v=f?"class":"style";Ra(s,c,o.inputs[v],v,d)}function $0(s,o,c,d){const f=Ae(),m=Lt(),v=20+s,E=f[11],b=f[v]=xh(E,o,et.lFrame.currentNamespace),M=m.firstCreatePass?function(s,o,c,d,f,m,v){const E=o.consts,M=od(o,s,2,f,Gr(E,m));return _0(o,c,M,Gr(E,v)),null!==M.attrs&&Hc(M,M.attrs,!1),null!==M.mergedAttrs&&Hc(M,M.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,M),M}(v,m,f,0,o,c,d):m.data[v];Cr(M,!0);const O=M.mergedAttrs;null!==O&&tn(E,b,O);const L=M.classes;null!==L&&zv(E,b,L);const j=M.styles;null!==j&&e_(E,b,j),64!=(64&M.flags)&&Ko(m,f,b,M),0===et.lFrame.elementDepthCount&&kr(b,f),et.lFrame.elementDepthCount++,yu(M)&&(d0(m,f,M),function(s,o,c){if(nr(o)){const f=o.directiveEnd;for(let m=o.directiveStart;m<f;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,c[m],m)}}}(m,M,f)),null!==d&&h0(f,M)}function x_(){let s=An();vc()?et.lFrame.isParent=!1:(s=s.parent,Cr(s,!1));const o=s;et.lFrame.elementDepthCount--;const c=Lt();c.firstCreatePass&&(vo(c,s),nr(s)&&c.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&q0(c,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&q0(c,o,Ae(),o.stylesWithoutHost,!1)}function lg(s,o,c,d){$0(s,o,c,d),x_()}function Rb(){return Ae()}function H0(s){return!!s&&"function"==typeof s.then}function Qh(s){return!!s&&"function"==typeof s.subscribe}const Nb=Qh;function z0(s,o,c,d){const f=Ae(),m=Lt(),v=An();return function(s,o,c,d,f,m,v,E){const b=yu(d),O=s.firstCreatePass&&$c(s),L=o[8],j=eb(o);let K=!0;if(3&d.type||E){const Ue=qn(d,o),nt=E?E(Ue):Ue,Te=j.length,pt=E?$t=>E(Zn($t[d.index])):d.index;if(dn(c)){let $t=null;if(!E&&b&&($t=function(s,o,c,d){const f=s.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const v=f[m];if(v===c&&f[m+1]===d){const E=o[7],b=f[m+2];return E.length>b?E[b]:null}"string"==typeof v&&(m+=2)}return null}(s,o,f,d.index)),null!==$t)($t.__ngLastListenerFn__||$t).__ngNextListenerFn__=m,$t.__ngLastListenerFn__=m,K=!1;else{m=G0(d,o,L,m,!1);const vn=c.listen(nt,f,m);j.push(m,vn),O&&O.push(f,pt,Te,Te+1)}}else m=G0(d,o,L,m,!0),nt.addEventListener(f,m,v),j.push(m),O&&O.push(f,pt,Te,v)}else m=G0(d,o,L,m,!1);const _e=d.outputs;let Ne;if(K&&null!==_e&&(Ne=_e[f])){const Ue=Ne.length;if(Ue)for(let nt=0;nt<Ue;nt+=2){const Fi=o[Ne[nt]][Ne[nt+1]].subscribe(m),nu=j.length;j.push(m,Fi),O&&O.push(f,d.index,nu,-(nu+1))}}}(m,f,f[11],v,s,o,!!c,d),z0}function Ub(s,o,c,d){try{return!1!==c(d)}catch(f){return p_(s,f),!1}}function G0(s,o,c,d,f){return function m(v){if(v===Function)return d;const E=2&s.flags?ln(s.index,o):o;0==(32&o[2])&&Gl(E);let b=Ub(o,0,d,v),M=m.__ngNextListenerFn__;for(;M;)b=Ub(o,0,M,v)&&b,M=M.__ngNextListenerFn__;return f&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function Vb(s=1){return function(s){return(et.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,et.lFrame.contextLView))[8]}(s)}function $b(s,o,c,d,f){const m=s[c+1],v=null===o;let E=d?wo(m):$l(m),b=!1;for(;0!==E&&(!1===b||v);){const O=s[E+1];CD(s[E],o)&&(b=!0,s[E+1]=d?r_(O):n_(O)),E=d?wo(O):$l(O)}b&&(s[c+1]=d?n_(m):r_(m))}function CD(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&$o(s,o)>=0}const dr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Hb(s){return s.substring(dr.key,dr.keyEnd)}function wD(s){return s.substring(dr.value,dr.valueEnd)}function Gb(s,o){const c=dr.textEnd;let d=dr.key=Jh(s,o,c);return c===d?-1:(d=dr.keyEnd=function(s,o,c){let d;for(;o<c&&(45===(d=s.charCodeAt(o))||95===d||(-33&d)>=65&&(-33&d)<=90||d>=48&&d<=57);)o++;return o}(s,d,c),d=Yb(s,d,c),d=dr.value=Jh(s,d,c),d=dr.valueEnd=function(s,o,c){let d=-1,f=-1,m=-1,v=o,E=v;for(;v<c;){const b=s.charCodeAt(v++);if(59===b)return E;34===b||39===b?E=v=xn(s,b,v,c):o===v-4&&85===m&&82===f&&76===d&&40===b?E=v=xn(s,41,v,c):b>32&&(E=v),m=f,f=d,d=-33&b}return E}(s,d,c),Yb(s,d,c))}function Jh(s,o,c){for(;o<c&&s.charCodeAt(o)<=32;)o++;return o}function Yb(s,o,c,d){return(o=Jh(s,o,c))<c&&o++,o}function xn(s,o,c,d){let f=-1,m=c;for(;m<d;){const v=s.charCodeAt(m++);if(v==o&&92!==f)return m;f=92==v&&92===f?0:v}throw new Error}function Xh(s,o,c){return Eo(s,o,c,!1),Xh}function dg(s,o){return Eo(s,o,null,!0),dg}function Js(s){!function(s,o,c,d){const f=Lt(),m=fs(2);f.firstUpdatePass&&tC(f,null,m,d);const v=Ae();if(c!==Mt&&li(v,m,c)){const E=f.data[_n()];if(nT(E,d)&&!eC(f,m)){let b=d?E.classesWithoutHost:E.stylesWithoutHost;null!==b&&(c=he(b,c||"")),q0(f,E,v,c,d)}else!function(s,o,c,d,f,m,v,E){f===Mt&&(f=Z);let b=0,M=0,O=0<f.length?f[0]:null,L=0<m.length?m[0]:null;for(;null!==O||null!==L;){const j=b<f.length?f[b+1]:void 0,K=M<m.length?m[M+1]:void 0;let Ne,_e=null;O===L?(b+=2,M+=2,j!==K&&(_e=L,Ne=K)):null===L||null!==O&&O<L?(b+=2,_e=O):(M+=2,_e=L,Ne=K),null!==_e&&tT(s,o,c,d,_e,Ne,v,E),O=b<f.length?f[b]:null,L=M<m.length?m[M]:null}}(f,E,v,v[11],v[m+1],v[m+1]=function(s,o,c){if(null==c||""===c)return Z;const d=[],f=Cs(c);if(Array.isArray(f))for(let m=0;m<f.length;m++)s(d,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&s(d,m,f[m]);else"string"==typeof f&&o(d,f);return d}(s,o,c),d,m)}}(eT,ef,s,!1)}function ef(s,o){for(let c=function(s){return function(s){dr.key=0,dr.keyEnd=0,dr.value=0,dr.valueEnd=0,dr.textEnd=s.length}(s),Gb(s,Jh(s,0,dr.textEnd))}(o);c>=0;c=Gb(o,c))eT(s,Hb(o),wD(o))}function Eo(s,o,c,d){const f=Ae(),m=Lt(),v=fs(2);m.firstUpdatePass&&tC(m,s,v,d),o!==Mt&&li(f,v,o)&&tT(m,m.data[_n()],f,f[11],s,f[v+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=se(Cs(s)))),s}(o,c),d,v)}function eC(s,o){return o>=s.expandoStartIndex}function tC(s,o,c,d){const f=s.data;if(null===f[c+1]){const m=f[_n()],v=eC(s,c);nT(m,d)&&null===o&&!v&&(o=!1),o=function(s,o,c,d){const f=function(s){const o=et.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=d?o.residualClasses:o.residualStyles;if(null===f)0===(d?o.classBindings:o.styleBindings)&&(c=hg(c=rC(null,s,o,c,d),o.attrs,d),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==f)if(c=rC(f,s,o,c,d),null===m){let b=function(s,o,c){const d=c?o.classBindings:o.styleBindings;if(0!==$l(d))return s[wo(d)]}(s,o,d);void 0!==b&&Array.isArray(b)&&(b=rC(null,s,o,b[1],d),b=hg(b,o.attrs,d),function(s,o,c,d){s[wo(c?o.classBindings:o.styleBindings)]=d}(s,o,d,b))}else m=function(s,o,c){let d;const f=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<f;m++)d=hg(d,s[m].hostAttrs,c);return hg(d,o.attrs,c)}(s,o,d)}return void 0!==m&&(d?o.residualClasses=m:o.residualStyles=m),c}(f,m,o,d),function(s,o,c,d,f,m){let v=m?o.classBindings:o.styleBindings,E=wo(v),b=$l(v);s[d]=c;let O,M=!1;if(Array.isArray(c)){const L=c;O=L[1],(null===O||$o(L,O)>0)&&(M=!0)}else O=c;if(f)if(0!==b){const j=wo(s[E+1]);s[d+1]=t_(j,E),0!==j&&(s[j+1]=Qv(s[j+1],d)),s[E+1]=function(s,o){return 131071&s|o<<17}(s[E+1],d)}else s[d+1]=t_(E,0),0!==E&&(s[E+1]=Qv(s[E+1],d)),E=d;else s[d+1]=t_(b,0),0===E?E=d:s[b+1]=Qv(s[b+1],d),b=d;M&&(s[d+1]=n_(s[d+1])),$b(s,O,d,!0),$b(s,O,d,!1),function(s,o,c,d,f){const m=f?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&$o(m,o)>=0&&(c[d+1]=r_(c[d+1]))}(o,O,s,d,m),v=t_(E,b),m?o.classBindings=v:o.styleBindings=v}(f,m,o,c,v,d)}}function rC(s,o,c,d,f){let m=null;const v=c.directiveEnd;let E=c.directiveStylingLast;for(-1===E?E=c.directiveStart:E++;E<v&&(m=o[E],d=hg(d,m.hostAttrs,f),m!==s);)E++;return null!==s&&(c.directiveStylingLast=E),d}function hg(s,o,c){const d=c?1:2;let f=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?f=v:f===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ai(s,v,!!c||o[++m]))}return void 0===s?null:s}function eT(s,o,c){ai(s,o,Cs(c))}function tT(s,o,c,d,f,m,v,E){if(!(3&o.type))return;const b=s.data,M=b[E+1];R_(function(s){return 1==(1&s)}(M)?iC(b,o,c,f,$l(M),v):void 0)||(R_(m)||function(s){return 2==(2&s)}(M)&&(m=iC(b,null,c,f,E,v)),function(s,o,c,d,f){const m=dn(s);if(o)f?m?s.addClass(c,d):c.classList.add(d):m?s.removeClass(c,d):c.classList.remove(d);else{let v=-1===d.indexOf("-")?void 0:Zs.DashCase;if(null==f)m?s.removeStyle(c,d,v):c.style.removeProperty(d);else{const E="string"==typeof f&&f.endsWith("!important");E&&(f=f.slice(0,-10),v|=Zs.Important),m?s.setStyle(c,d,f,v):c.style.setProperty(d,f,E?"important":"")}}}(d,v,Ki(_n(),c),f,m))}function iC(s,o,c,d,f,m){const v=null===o;let E;for(;f>0;){const b=s[f],M=Array.isArray(b),O=M?b[1]:b,L=null===O;let j=c[f+1];j===Mt&&(j=L?Z:void 0);let K=L?Pc(j,d):O===d?j:void 0;if(M&&!R_(K)&&(K=Pc(b,d)),R_(K)&&(E=K,v))return E;const _e=s[f+1];f=v?wo(_e):$l(_e)}if(null!==o){let b=m?o.residualClasses:o.residualStyles;null!=b&&(E=Pc(b,d))}return E}function R_(s){return void 0!==s}function nT(s,o){return 0!=(s.flags&(o?16:32))}function N_(s,o=""){const c=Ae(),d=Lt(),f=s+20,m=d.firstCreatePass?od(d,f,1,o,null):d.data[f],v=c[f]=function(s,o){return dn(s)?s.createText(o):s.createTextNode(o)}(c[11],o);Ko(d,c,v,m),Cr(m,!1)}function sC(s){return F_("",s,""),sC}function F_(s,o,c){const d=Ae(),f=Gc(d,s,o,c);return f!==Mt&&Jo(d,_n(),f),F_}function L_(s,o,c,d,f){const m=Ae(),v=Wc(m,s,o,c,d,f);return v!==Mt&&Jo(m,_n(),v),L_}function OD(s,o,c){Js(Gc(Ae(),s,o,c))}function xD(s,o,c,d,f){Js(Wc(Ae(),s,o,c,d,f))}const _d=void 0;var RD=["en",[["a","p"],["AM","PM"],_d],[["AM","PM"],_d,_d],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_d,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_d,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_d,"{1} 'at' {0}",_d],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const c=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let sr={};function Fr(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=lT(o);if(c)return c;const d=o.split("-")[0];if(c=lT(d),c)return c;if("en"===d)return RD;throw new Error(`Missing locale data for the locale "${s}".`)}function aT(s){return Fr(s)[Ct.PluralCase]}function lT(s){return s in sr||(sr[s]=bt.ng&&bt.ng.common&&bt.ng.common.locales&&bt.ng.common.locales[s]),sr[s]}var Ct=(()=>((Ct=Ct||{})[Ct.LocaleId=0]="LocaleId",Ct[Ct.DayPeriodsFormat=1]="DayPeriodsFormat",Ct[Ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ct[Ct.DaysFormat=3]="DaysFormat",Ct[Ct.DaysStandalone=4]="DaysStandalone",Ct[Ct.MonthsFormat=5]="MonthsFormat",Ct[Ct.MonthsStandalone=6]="MonthsStandalone",Ct[Ct.Eras=7]="Eras",Ct[Ct.FirstDayOfWeek=8]="FirstDayOfWeek",Ct[Ct.WeekendRange=9]="WeekendRange",Ct[Ct.DateFormat=10]="DateFormat",Ct[Ct.TimeFormat=11]="TimeFormat",Ct[Ct.DateTimeFormat=12]="DateTimeFormat",Ct[Ct.NumberSymbols=13]="NumberSymbols",Ct[Ct.NumberFormats=14]="NumberFormats",Ct[Ct.CurrencyCode=15]="CurrencyCode",Ct[Ct.CurrencySymbol=16]="CurrencySymbol",Ct[Ct.CurrencyName=17]="CurrencyName",Ct[Ct.Currencies=18]="Currencies",Ct[Ct.Directionality=19]="Directionality",Ct[Ct.PluralCase=20]="PluralCase",Ct[Ct.ExtraData=21]="ExtraData",Ct))();const vd="en-US";let uC=vd;function di(s,o,c,d,f){if(s=ee(s),Array.isArray(s))for(let m=0;m<s.length;m++)di(s[m],o,c,d,f);else{const m=Lt(),v=Ae();let E=qh(s)?s:ee(s.provide),b=ad(s);const M=An(),O=1048575&M.providerIndexes,L=M.directiveStart,j=M.providerIndexes>>20;if(qh(s)||!s.multi){const K=new wl(b,f,ag),_e=df(E,o,f?O:O+j,L);-1===_e?(xs(Tl(M,v),m,E),Q_(m,s,o.length),o.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),c.push(K),v.push(K)):(c[_e]=K,v[_e]=K)}else{const K=df(E,o,O+j,L),_e=df(E,o,O,O+j),Ne=K>=0&&c[K],Ue=_e>=0&&c[_e];if(f&&!Ue||!f&&!Ne){xs(Tl(M,v),m,E);const nt=function(s,o,c,d,f){const m=new wl(s,c,ag);return m.multi=[],m.index=o,m.componentProviders=0,uf(m,f,d&&!c),m}(f?TC:FT,c.length,f,d,b);!f&&Ue&&(c[_e].providerFactory=nt),Q_(m,s,o.length,0),o.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),c.push(nt),v.push(nt)}else Q_(m,s,K>-1?K:_e,uf(c[f?_e:K],b,!f&&d));!f&&d&&Ue&&c[_e].componentProviders++}}}function Q_(s,o,c,d){const f=qh(o),m=function(s){return!!s.useClass}(o);if(f||m){const b=(m?ee(o.useClass):o).prototype.ngOnDestroy;if(b){const M=s.destroyHooks||(s.destroyHooks=[]);if(!f&&o.multi){const O=M.indexOf(c);-1===O?M.push(c,[d,b]):M[O+1].push(d,b)}else M.push(c,b)}}}function uf(s,o,c){return c&&s.componentProviders++,s.multi.push(o)-1}function df(s,o,c,d){for(let f=c;f<d;f++)if(o[f]===s)return f;return-1}function FT(s,o,c,d){return J_(this.multi,[])}function TC(s,o,c,d){const f=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Wr(c,c[1],this.providerFactory.index,d);m=E.slice(0,v),J_(f,m);for(let b=v;b<E.length;b++)m.push(E[b])}else m=[],J_(f,m);return m}function J_(s,o){for(let c=0;c<s.length;c++)o.push((0,s[c])());return o}function hf(s,o=[]){return c=>{c.providersResolver=(d,f)=>function(s,o,c){const d=Lt();if(d.firstCreatePass){const f=wi(s);di(c,d.data,d.blueprint,f,!0),di(o,d.data,d.blueprint,f,!1)}}(d,f?f(s):s,o)}}class X_{}class UT{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${se(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let bg=(()=>{class s{}return s.NULL=new UT,s})();function DC(){return Ql(An(),Ae())}function Ql(s,o){return new Td(qn(s,o))}let Td=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=DC,s})();function VT(s){return s instanceof Td?s.nativeElement:s}class SC{}let XD=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function(){const s=Ae(),c=ln(An().index,s);return function(s){return s[11]}(us(c)?c:s)}(),s})(),ty=(()=>{class s{}return s.\u0275prov=gn({token:s,providedIn:"root",factory:()=>null}),s})();class ff{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Yc=new ff("13.0.3"),Ig={};function ny(s,o,c,d,f=!1){for(;null!==c;){const m=o[c.index];if(null!==m&&d.push(Zn(m)),ds(m))for(let E=10;E<m.length;E++){const b=m[E],M=b[1].firstChild;null!==M&&ny(b[1],b,M,d)}const v=c.type;if(8&v)ny(s,o,c.child,d);else if(32&v){const E=Co(c,o);let b;for(;b=E();)d.push(b)}else if(16&v){const E=qc(o,c);if(Array.isArray(E))d.push(...E);else{const b=Bl(o[16]);ny(b[1],b,E,d,!0)}}c=f?c.projectionNext:c.next}return d}class Id{constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,c=o[1];return ny(c,o,c.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ds(o)){const c=o[8],d=c?c.indexOf(this):-1;d>-1&&(J(o,d),Mc(c,d))}this._attachedToViewContainer=!1}ke(this._lView[1],this._lView)}onDestroy(o){p0(this._lView[1],this._lView,null,o)}markForCheck(){Gl(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){wr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,c){Bo(!0);try{wr(s,o,c)}finally{Bo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,$p(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class pf extends Id{constructor(o){super(o),this._view=o}detectChanges(){Ks(this._view)}checkNoChanges(){!function(s){Bo(!0);try{Ks(s)}finally{Bo(!1)}}(this._view)}get context(){return null}}class ry extends bg{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=mn(o);return new ia(c,this.ngModule)}}function Qc(s){const o=[];for(let c in s)s.hasOwnProperty(c)&&o.push({propName:s[c],templateName:c});return o}const eS=new bn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>td});class ia extends X_{constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=o.selectors.map(gA).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return Qc(this.componentDef.inputs)}get outputs(){return Qc(this.componentDef.outputs)}create(o,c,d,f){const m=(f=f||this.ngModule)?function(s,o){return{get:(c,d,f)=>{const m=s.get(c,Ig,f);return m!==Ig||d===Ig?m:o.get(c,d,f)}}}(o,f.injector):o,v=m.get(SC,Iu),E=m.get(ty,null),b=v.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",O=d?function(s,o,c){if(dn(s))return s.selectRootElement(o,c===Je.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(b,d,this.componentDef.encapsulation):xh(v.createRenderer(null,this.componentDef),M,function(s){const o=s.toLowerCase();return"svg"===o?nh:"math"===o?"http://www.w3.org/1998/MathML/":null}(M)),L=this.componentDef.onPush?576:528,j=function(s,o){return{components:[],scheduler:s||td,clean:XE,playerHandler:o||null,flags:0}}(),K=l_(0,null,null,1,0,null,null,null,null,null),_e=Kp(null,K,j,L,null,null,v,b,E,m);let Ne,Ue;bc(_e);try{const nt=function(s,o,c,d,f,m){const v=c[1];c[20]=s;const b=od(v,20,2,"#host",null),M=b.mergedAttrs=o.hostAttrs;null!==M&&(Hc(b,M,!0),null!==s&&(tn(f,s,M),null!==b.classes&&zv(f,s,b.classes),null!==b.styles&&e_(f,s,b.styles)));const O=d.createRenderer(s,o),L=Kp(c,f0(o),null,o.onPush?64:16,c[20],b,d,O,m||null,null);return v.firstCreatePass&&(xs(Tl(b,c),v,o.type),KE(v,b),y0(b,c.length,1)),h_(c,L),c[20]=L}(O,this.componentDef,_e,v,b);if(O)if(d)tn(b,O,["ng-version",Yc.full]);else{const{attrs:Te,classes:pt}=function(s){const o=[],c=[];let d=1,f=2;for(;d<s.length;){let m=s[d];if("string"==typeof m)2===f?""!==m&&o.push(m,s[++d]):8===f&&c.push(m);else{if(!js(f))break;f=m}d++}return{attrs:o,classes:c}}(this.componentDef.selectors[0]);Te&&tn(b,O,Te),pt&&pt.length>0&&zv(b,O,pt.join(" "))}if(Ue=Fo(K,20),void 0!==c){const Te=Ue.projection=[];for(let pt=0;pt<this.ngContentSelectors.length;pt++){const $t=c[pt];Te.push(null!=$t?Array.from($t):null)}}Ne=function(s,o,c,d,f){const m=c[1],v=function(s,o,c){const d=An();s.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),YE(s,d,o,Vh(s,o,1,null),c));const f=Wr(o,s,d.directiveStart,d);kr(f,o);const m=qn(d,o);return m&&kr(m,o),f}(m,c,o);if(d.components.push(v),s[8]=v,f&&f.forEach(b=>b(v,o)),o.contentQueries){const b=An();o.contentQueries(1,v,b.directiveStart)}const E=An();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(yo(E.index),WE(c[1],E,0,E.directiveStart,E.directiveEnd,o),Gs(o,v)),v}(nt,this.componentDef,_e,j,[w_]),Yp(K,_e,null)}finally{vl()}return new sy(this.componentType,Ne,Ql(Ue,_e),_e,Ue)}}class sy extends class{}{constructor(o,c,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.instance=c,this.hostView=this.changeDetectorRef=new pf(f),this.componentType=o}get injector(){return new En(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Tn{}class Ag{}const gf=new Map;class jT extends Tn{constructor(o,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ry(this);const d=yr(o);this._bootstrapComponents=Mi(d.bootstrap),this._r3Injector=ob(o,c,[{provide:Tn,useValue:this},{provide:bg,useValue:this.componentFactoryResolver}],se(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,c=Xo.THROW_IF_NOT_FOUND,d=mt.Default){return o===Xo||o===Tn||o===E0?this:this._r3Injector.get(o,c,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class OC extends Ag{constructor(o){super(),this.moduleType=o,null!==yr(o)&&function(s){const o=new Set;!function c(d){const f=yr(d,!0),m=f.id;null!==m&&(function(s,o,c){if(o&&o!==c)throw new Error(`Duplicate module registered for ${s} - ${se(o)} vs ${se(o.name)}`)}(m,gf.get(m),d),gf.set(m,d));const v=Mi(f.imports);for(const E of v)o.has(E)||(o.add(E),c(E))}(s)}(o)}create(o){return new jT(this.moduleType,o)}}function $T(s,o,c){const d=ur()+s,f=Ae();return f[d]===Mt?Fa(f,d,c?o.call(c):o()):function(s,o){return s[o]}(f,d)}function xC(s,o,c,d,f,m){const v=o+c;return li(s,v,f)?Fa(s,v+1,m?d.call(m,f):d(f)):function(s,o){const c=s[o];return c===Mt?void 0:c}(s,v+1)}function NC(s,o){const c=Lt();let d;const f=s+20;c.firstCreatePass?(d=function(s,o){if(o)for(let c=o.length-1;c>=0;c--){const d=o[c];if(s===d.name)return d}}(o,c.pipeRegistry),c.data[f]=d,d.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(f,d.onDestroy)):d=c.data[f];const m=d.factory||(d.factory=hs(d.type)),v=jr(ag);try{const E=Sn(!1),b=m();return Sn(E),function(s,o,c,d){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),o[c]=d}(c,Ae(),f,b),b}finally{jr(v)}}function KT(s,o,c){const d=s+20,f=Ae(),m=function(s,o){return s[o]}(f,d);return function(s,o){return s[1].data[o].pure}(f,d)?xC(f,ur(),o,m.transform,c,m):m.transform(c)}function cy(s){return o=>{setTimeout(s,void 0,o)}}const Es=class extends l.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,d){var b,M,O;let f=o,m=c||(()=>null),v=d;if(o&&"object"==typeof o){const L=o;f=null==(b=L.next)?void 0:b.bind(L),m=null==(M=L.error)?void 0:M.bind(L),v=null==(O=L.complete)?void 0:O.bind(L)}this.__isAsync&&(m=cy(m),f&&(f=cy(f)),v&&(v=cy(v)));const E=super.subscribe({next:f,error:m,complete:v});return o instanceof Q.w0&&o.add(E),E}};function Og(){return this._results[zc()]()}class UC{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=zc(),d=UC.prototype;d[c]||(d[c]=Og)}get changes(){return this._changes||(this._changes=new Es)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const d=this;d.dirty=!1;const f=jn(o);(this._changesDetected=!function(s,o,c){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let f=s[d],m=o[d];if(c&&(f=c(f),m=c(m)),m!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let zn=(()=>{class s{}return s.__NG_ELEMENT_ID__=oS,s})();const YT=zn,sS=class extends YT{constructor(o,c,d){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(o){const c=this._declarationTContainer.tViews,d=Kp(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(c)),Yp(c,d,o),new Id(d)}};function oS(){return uy(An(),Ae())}function uy(s,o){return 4&s.type?new sS(o,s,Ql(s,o)):null}let dy=(()=>{class s{}return s.__NG_ELEMENT_ID__=QT,s})();function QT(){return Ba(An(),Ae())}const JT=dy,VC=class extends JT{constructor(o,c,d){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=d}get element(){return Ql(this._hostTNode,this._hostLView)}get injector(){return new En(this._hostTNode,this._hostLView)}get parentInjector(){const o=si(this._hostTNode,this._hostLView);if(up(o)){const c=ps(o,this._hostLView),d=Zo(o);return new En(c[1].data[d+8],c)}return new En(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=xg(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,c,d){const f=o.createEmbeddedView(c||{});return this.insert(f,d),f}createComponent(o,c,d,f,m){const v=o&&!("function"==typeof o);let E;if(v)E=c;else{const L=c||{};E=L.index,d=L.injector,f=L.projectableNodes,m=L.ngModuleRef}const b=v?o:new ia(mn(o)),M=d||this.parentInjector;if(!m&&null==b.ngModule&&M){const L=M.get(Tn,null);L&&(m=L)}const O=b.create(M,f,void 0,m);return this.insert(O.hostView,E),O}insert(o,c){const d=o._lView,f=d[1];if(ds(d[3])){const O=this.indexOf(o);if(-1!==O)this.detach(O);else{const L=d[3],j=new VC(L,L[6],L[3]);j.detach(j.indexOf(o))}}const m=this._adjustIndex(c),v=this._lContainer;!function(s,o,c,d){const f=10+d,m=c.length;d>0&&(c[f-1][4]=o),d<m-10?(o[4]=c[f],Bu(c,10+d,o)):(c.push(o),o[4]=null),o[3]=c;const v=o[17];null!==v&&c!==v&&function(s,o){const c=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===c?s[9]=[o]:c.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(f,d,v,m);const E=jp(m,v),b=d[11],M=jl(b,v[7]);return null!==M&&function(s,o,c,d,f,m){d[0]=f,d[6]=o,$p(s,d,c,1,f,m)}(f,v[6],b,d,M,E),o.attachToViewContainerRef(),Bu(hy(v),m,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=xg(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),d=J(this._lContainer,c);d&&(Mc(hy(this._lContainer),c),ke(d[1],d))}detach(o){const c=this._adjustIndex(o,-1),d=J(this._lContainer,c);return d&&null!=Mc(hy(this._lContainer),c)?new Id(d):null}_adjustIndex(o,c=0){return null==o?this.length+c:o}};function xg(s){return s[8]}function hy(s){return s[8]||(s[8]=[])}function Ba(s,o){let c;const d=o[s.index];if(ds(d))c=d;else{let f;if(8&s.type)f=Zn(d);else{const m=o[11];f=m.createComment("");const v=qn(s,o);Rr(m,jl(m,v),f,function(s,o){return dn(s)?s.nextSibling(o):o.nextSibling}(m,v),!1)}o[s.index]=c=C0(d,o,f,s),h_(o,c)}return new VC(c,s,o)}class Dd{constructor(o){this.queryList=o,this.matches=null}clone(){return new Dd(this.queryList)}setDirty(){this.queryList.setDirty()}}class fy{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const d=null!==o.contentQueries?o.contentQueries[0]:c.length,f=[];for(let m=0;m<d;m++){const v=c.getByIndex(m);f.push(this.queries[v.indexInDeclarationView].clone())}return new fy(f)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==zC(o,c).matches&&this.queries[c].setDirty()}}class py{constructor(o,c,d=null){this.predicate=o,this.flags=c,this.read=d}}class yf{constructor(o=[]){this.queries=o}elementStart(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,m=this.getByIndex(d).embeddedTView(o,f);m&&(m.indexInDeclarationView=d,null!==c?c.push(m):c=[m])}return null!==c?new yf(c):null}template(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class gy{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new gy(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(o,c,BC(c,m)),this.matchTNodeWithReadOption(o,c,nn(c,o,m,!1,!1))}else d===zn?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,nn(c,o,d,!1,!1))}matchTNodeWithReadOption(o,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Td||f===dy||f===zn&&4&c.type)this.addMatch(c.index,-2);else{const m=nn(c,o,f,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,d)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function BC(s,o){const c=s.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===o)return c[d+1];return null}function lS(s,o,c,d){return-1===c?function(s,o){return 11&s.type?Ql(s,o):4&s.type?uy(s,o):null}(o,s):-2===c?function(s,o,c){return c===Td?Ql(o,s):c===zn?uy(o,s):c===dy?Ba(o,s):void 0}(s,o,d):Wr(s,s[1],c,o)}function vf(s,o,c,d){const f=o[19].queries[d];if(null===f.matches){const m=s.data,v=c.matches,E=[];for(let b=0;b<v.length;b+=2){const M=v[b];E.push(M<0?null:lS(o,m[M],v[b+1],c.metadata.read))}f.matches=E}return f.matches}function _y(s,o,c,d){const f=s.queries.getByIndex(c),m=f.matches;if(null!==m){const v=vf(s,o,f,c);for(let E=0;E<m.length;E+=2){const b=m[E];if(b>0)d.push(v[E/2]);else{const M=m[E+1],O=o[-b];for(let L=10;L<O.length;L++){const j=O[L];j[17]===j[3]&&_y(j[1],j,M,d)}if(null!==O[9]){const L=O[9];for(let j=0;j<L.length;j++){const K=L[j];_y(K[1],K,M,d)}}}}}return d}function ZC(s){const o=Ae(),c=Lt(),d=wc();Ca(d+1);const f=zC(c,d);if(s.dirty&&Ms(o)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const m=f.crossesNgTemplate?_y(c,o,d,[]):vf(c,o,f,d);s.reset(m,VT),s.notifyOnChanges()}return!0}return!1}function yy(s,o,c,d){const f=Lt();if(f.firstCreatePass){const m=An();(function(s,o,c){null===s.queries&&(s.queries=new yf),s.queries.track(new gy(o,c))})(f,new py(o,c,d),m.index),function(s,o){const c=s.contentQueries||(s.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,o)}(f,s),2==(2&c)&&(f.staticContentQueries=!0)}!function(s,o,c){const d=new UC(4==(4&c));p0(s,o,d,d.destroy),null===o[19]&&(o[19]=new fy),o[19].queries.push(new Dd(d))}(f,Ae(),c)}function jC(){return s=Ae(),o=wc(),s[19].queries[o].queryList;var s,o}function zC(s,o){return s.queries.getByIndex(o)}function sn(...s){}const Ur=new bn("Application Initializer");let sa=(()=>{class s{constructor(c){this.appInits=c,this.resolve=sn,this.reject=sn,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(H0(m))c.push(m);else if(Nb(m)){const v=new Promise((E,b)=>{m.subscribe({complete:E,error:b})});c.push(v)}}Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(W(Ur,8))},s.\u0275prov=gn({token:s,factory:s.\u0275fac}),s})();const cI=new bn("AppId"),wS={provide:cI,useFactory:function(){return`${Za()}${Za()}${Za()}`},deps:[]};function Za(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const hr=new bn("Platform Initializer"),xd=new bn("Platform ID"),Sy=new bn("appBootstrapListener");let bf=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=gn({token:s,factory:s.\u0275fac}),s})();const qa=new bn("LocaleId"),Fg=new bn("DefaultCurrencyCode");class ja{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}let kd=(()=>{class s{compileModuleSync(c){return new OC(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),m=Mi(yr(c).declarations).reduce((v,E)=>{const b=mn(E);return b&&v.push(new ia(b)),v},[]);return new ja(d,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=gn({token:s,factory:s.\u0275fac}),s})();const YC=(()=>Promise.resolve(0))();function Lg(s){"undefined"==typeof Zone?YC.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ss{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Es(!1),this.onMicrotaskEmpty=new Es(!1),this.onStable=new Es(!1),this.onError=new Es(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function(){let s=bt.requestAnimationFrame,o=bt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(bt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Rd(s),s.isCheckStableRunning=!0,Py(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Rd(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,m,v,E)=>{try{return fi(s),c.invokeTask(f,m,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),JC(s)}},onInvoke:(c,d,f,m,v,E,b)=>{try{return fi(s),c.invoke(f,m,v,E,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),JC(s)}},onHasTask:(c,d,f,m)=>{c.hasTask(f,m),d===f&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,Rd(s),Py(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,d,f,m)=>(c.handleError(f,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ss.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ss.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,c,d){return this._inner.run(o,c,d)}runTask(o,c,d,f){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+f,o,QC,sn,sn);try{return m.runTask(v,c,d)}finally{m.cancelTask(v)}}runGuarded(o,c,d){return this._inner.runGuarded(o,c,d)}runOutsideAngular(o){return this._outer.run(o)}}const QC={};function Py(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Rd(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function fi(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function JC(s){s._nesting--,Py(s)}class Gn{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Es,this.onMicrotaskEmpty=new Es,this.onStable=new Es,this.onError=new Es}run(o,c,d){return o.apply(c,d)}runGuarded(o,c,d){return o.apply(c,d)}runOutsideAngular(o){return o()}runTask(o,c,d,f){return o.apply(c,d)}}let dI=(()=>{class s{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ss.assertNotInAngularZone(),Lg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Lg(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,d,f){return[]}}return s.\u0275fac=function(c){return new(c||s)(W(ss))},s.\u0275prov=gn({token:s,factory:s.\u0275fac}),s})(),XC=(()=>{class s{constructor(){this._applications=new Map,Af.addToWindow(this)}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return Af.findTestabilityInTree(this,c,d)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=gn({token:s,factory:s.\u0275fac}),s})();class Ug{addToWindow(o){}findTestabilityInTree(o,c,d){return null}}function IS(s){Af=s}let bs,Af=new Ug;const hI=new bn("AllowMultipleToken");class SS{constructor(o,c){this.name=o,this.token=c}}function pI(s,o,c=[]){const d=`Platform: ${o}`,f=new bn(d);return(m=[])=>{let v=gI();if(!v||v.injector.get(hI,!1))if(s)s(c.concat(m).concat({provide:f,useValue:!0}));else{const E=c.concat(m).concat({provide:f,useValue:!0},{provide:b0,useValue:"platform"});!function(s){if(bs&&!bs.destroyed&&!bs.injector.get(hI,!1))throw new Be("400","");bs=s.get(Df);const o=s.get(hr,null);o&&o.forEach(c=>c())}(Xo.create({providers:E,name:d}))}return function(s){const o=gI();if(!o)throw new Be("401","");return o}()}}function gI(){return bs&&!bs.destroyed?bs:null}let Df=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const E=function(s,o){let c;return c="noop"===s?new Gn:("zone.js"===s?void 0:s)||new ss({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),c}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),b=[{provide:ss,useValue:E}];return E.run(()=>{const M=Xo.create({providers:b,parent:this.injector,name:c.moduleType.name}),O=c.create(M),L=O.injector.get(Lc,null);if(!L)throw new Be("402","");return E.runOutsideAngular(()=>{const j=E.onError.subscribe({next:K=>{L.handleError(K)}});O.onDestroy(()=>{ky(this._modules,O),j.unsubscribe()})}),function(s,o,c){try{const d=c();return H0(d)?d.catch(f=>{throw o.runOutsideAngular(()=>s.handleError(f)),f}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(L,E,()=>{const j=O.injector.get(sa);return j.runInitializers(),j.donePromise.then(()=>(function(s){Et(s,"Expected localeId to be defined"),"string"==typeof s&&(uC=s.toLowerCase().replace(/_/g,"-"))}(O.injector.get(qa,vd)||vd),this._moduleDoBootstrap(O),O))})})}bootstrapModule(c,d=[]){const f=mI({},d);return function(s,o,c){const d=new OC(c);return Promise.resolve(d)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const d=c.injector.get(Mf);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new Be("403","");c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Be("404","");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(W(Xo))},s.\u0275prov=gn({token:s,factory:s.\u0275fac}),s})();function mI(s,o){return Array.isArray(o)?o.reduce(mI,s):gt(gt({},s),o)}let Mf=(()=>{class s{constructor(c,d,f,m,v){this._zone=c,this._injector=d,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new F.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),b=new F.y(M=>{let O;this._zone.runOutsideAngular(()=>{O=this._zone.onStable.subscribe(()=>{ss.assertNotInAngularZone(),Lg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{ss.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{O.unsubscribe(),L.unsubscribe()}});this.isStable=(0,ue.T)(E,b.pipe((0,re.B)()))}bootstrap(c,d){if(!this._initStatus.done)throw new Be("405","");let f;f=c instanceof X_?c:this._componentFactoryResolver.resolveComponentFactory(c),this.componentTypes.push(f.componentType);const m=function(s){return s.isBoundToModule}(f)?void 0:this._injector.get(Tn),E=f.create(Xo.NULL,[],d||f.selector,m),b=E.location.nativeElement,M=E.injector.get(dI,null),O=M&&E.injector.get(XC);return M&&O&&O.registerApplication(b,M),E.onDestroy(()=>{this.detachView(E.hostView),ky(this.components,E),O&&O.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Be("101","");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;ky(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(Sy,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(c){return new(c||s)(W(ss),W(Xo),W(Lc),W(bg),W(sa))},s.\u0275prov=gn({token:s,factory:s.\u0275fac}),s})();function ky(s,o){const c=s.indexOf(o);c>-1&&s.splice(c,1)}let Nd=!0,Vg=!1;function Ry(){return Vg=!0,Nd}function ew(){if(Vg)throw new Error("Cannot enable prod mode after platform setup.");Nd=!1}let bo=(()=>{class s{}return s.__NG_ELEMENT_ID__=CI,s})();function CI(s){return function(s,o,c){if(Ds(s)&&!c){const d=ln(s.index,o);return new Id(d,d)}return 47&s.type?new Id(o[16],o):null}(An(),Ae(),16==(16&s))}class AI{constructor(){}supports(o){return Ys(o)}create(o){return new kS(o)}}const sw=(s,o)=>o;class kS{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||sw}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,d=this._removalsHead,f=0,m=null;for(;c||d;){const v=!d||c&&c.currentIndex<ec(d,f,m)?c:d,E=ec(v,f,m),b=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(c=c._next,null==v.previousIndex)f++;else{m||(m=[]);const M=E-f,O=b-f;if(M!=O){for(let j=0;j<M;j++){const K=j<m.length?m[j]:m[j]=0,_e=K+j;O<=_e&&_e<M&&(m[j]=K+1)}m[v.previousIndex]=O-M}}E!==b&&o(v,E,b)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!Ys(o))throw new Error(`Error trying to diff '${se(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let f,m,v,c=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)m=o[E],v=this._trackByFn(E,m),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,m,v,E)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,v,E),d=!0),c=c._next}else f=0,function(s,o){if(Array.isArray(s))for(let c=0;c<s.length;c++)o(s[c]);else{const c=s[zc()]();let d;for(;!(d=c.next()).done;)o(d.value)}}(o,E=>{v=this._trackByFn(f,E),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,E,v,f)),Object.is(c.item,E)||this._addIdentityChange(c,E)):(c=this._mismatch(c,E,v,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,d,f){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,m,f)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,m,f)):o=this._addAfter(new DI(c,d),m,f),o}_verifyReinsertion(o,c,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?o=this._reinsertAfter(m,o._prev,f):o.currentIndex!=f&&(o.currentIndex=f,this._addToMoves(o,f)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const f=o._prevRemoved,m=o._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(o,c,d),this._addToMoves(o,d),o}_moveAfter(o,c,d){return this._unlink(o),this._insertAfter(o,c,d),this._addToMoves(o,d),o}_addAfter(o,c,d){return this._insertAfter(o,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,d){const f=null===c?this._itHead:c._next;return o._next=f,o._prev=c,null===f?this._itTail=o:f._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new Pf),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,d=o._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Pf),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class DI{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SI{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const c=o._prevDup,d=o._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class Pf{constructor(){this.map=new Map}put(o){const c=o.trackById;let d=this.map.get(c);d||(d=new SI,this.map.set(c,d)),d.add(o)}get(o,c){const f=this.map.get(o);return f?f.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ec(s,o,c){const d=s.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+o+f}class ow{constructor(){}supports(o){return o instanceof Map||b_(o)}create(){return new MI}}class MI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||b_(o)))throw new Error(`Error trying to diff '${se(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const d=o._prev;return c._next=o,c._prev=d,o._prev=c,d&&(d._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const f=this._records.get(o);this._maybeAddToChanges(f,c);const m=f._prev,v=f._next;return m&&(m._next=v),v&&(v._prev=m),f._next=null,f._prev=null,f}const d=new PI(o);return this._records.set(o,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(d=>c(o[d],d))}}class PI{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Of(){return new xf([new AI])}let xf=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||Of()),deps:[[s,new Ls,new yn]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${c}' of type '${function(s){return s.name||typeof s}(c)}'`)}}return s.\u0275prov=gn({token:s,providedIn:"root",factory:Of}),s})();function fr(){return new jt([new ow])}let jt=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||fr()),deps:[[s,new Ls,new yn]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(d)return d;throw new Error(`Cannot find a differ supporting object '${c}'`)}}return s.\u0275prov=gn({token:s,providedIn:"root",factory:fr}),s})();const OI=[new ow],Zr=new xf([new AI]),Vy=new jt(OI),or=pI(null,"core",[{provide:xd,useValue:"unknown"},{provide:Df,deps:[Xo]},{provide:XC,deps:[]},{provide:bf,deps:[]}]),aw=[{provide:Mf,useClass:Mf,deps:[ss,Xo,Lc,bg,sa]},{provide:eS,deps:[ss],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(c){o.push(c)}}},{provide:sa,useClass:sa,deps:[[new yn,Ur]]},{provide:kd,useClass:kd,deps:[]},wS,{provide:xf,useFactory:function(){return Zr},deps:[]},{provide:jt,useFactory:function(){return Vy},deps:[]},{provide:qa,useFactory:function(s){return s||"undefined"!=typeof $localize&&$localize.locale||vd},deps:[[new rr(qa),new yn,new Ls]]},{provide:Fg,useValue:"USD"}];let RI=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(W(Mf))},s.\u0275mod=Qa({type:s}),s.\u0275inj=Fn({providers:aw}),s})()},6293:(Ye,ye,N)=>{"use strict";N.d(ye,{Z:()=>Be});var l=N(4213),Q=N(1177),F=N(1572),ue=N(3855);class re{constructor(le,Y){this._delegate=le,this.firebase=Y,(0,F._addComponent)(le,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=le.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(le){this._delegate.automaticDataCollectionEnabled=le}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(le=>{this._delegate.checkDestroyed(),le()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(le,Y=F._DEFAULT_ENTRY_NAME){var ce;this._delegate.checkDestroyed();const be=this._delegate.container.getProvider(le);return!be.isInitialized()&&"EXPLICIT"===(null===(ce=be.getComponent())||void 0===ce?void 0:ce.instantiationMode)&&be.initialize(),be.getImmediate({identifier:Y})}_removeServiceInstance(le,Y=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(le).clearInstance(Y)}_addComponent(le){(0,F._addComponent)(this._delegate,le)}_addOrOverwriteComponent(le){(0,F._addOrOverwriteComponent)(this._delegate,le)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function he(){const Le=function(Le){const le={},Y={__esModule:!0,initializeApp:function(Qe,ht={}){const te=F.initializeApp(Qe,ht);if((0,l.r3)(le,te.name))return le[te.name];const fe=new Le(te,Y);return le[te.name]=fe,fe},app:be,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function(Qe){const ht=Qe.name,te=ht.replace("-compat","");if(F._registerComponent(Qe)&&"PUBLIC"===Qe.type){const fe=(Ce=be())=>{if("function"!=typeof Ce[te])throw ae.create("invalid-app-argument",{appName:ht});return Ce[te]()};void 0!==Qe.serviceProps&&(0,l.ZB)(fe,Qe.serviceProps),Y[te]=fe,Le.prototype[te]=function(...Ce){return this._getService.bind(this,ht).apply(this,Qe.multipleInstances?Ce:[])}}return"PUBLIC"===Qe.type?Y[te]:null},removeApp:function(Qe){delete le[Qe]},useAsService:function(Qe,ht){return"serverAuth"===ht?null:ht},modularAPIs:F}};function be(Qe){if(!(0,l.r3)(le,Qe=Qe||F._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:Qe});return le[Qe]}return Y.default=Y,Object.defineProperty(Y,"apps",{get:function(){return Object.keys(le).map(Qe=>le[Qe])}}),be.App=Le,Y}(re);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function(Y){(0,l.ZB)(Le,Y)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),Le}(),$=new ue.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Be=H;(0,F.registerVersion)("@firebase/app-compat","0.1.15",undefined)},1572:(Ye,ye,N)=>{"use strict";N.r(ye),N.d(ye,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>pa,_DEFAULT_ENTRY_NAME:()=>Yn,_addComponent:()=>pn,_addOrOverwriteComponent:()=>Ar,_apps:()=>Et,_clearComponents:()=>Fn,_components:()=>Pt,_getProvider:()=>gn,_registerComponent:()=>qr,_removeServiceInstance:()=>fa,deleteApp:()=>cr,getApp:()=>cs,getApps:()=>De,initializeApp:()=>ji,onLog:()=>Wt,registerVersion:()=>mt,setLogLevel:()=>$i});var l=N(8239),Q=N(1177),F=N(3855),ue=N(4213);class re{constructor(_t){this.container=_t}getPlatformInfoString(){return this.container.getProviders().map(Rt=>{if(function(ct){const _t=ct.getComponent();return"VERSION"===(null==_t?void 0:_t.type)}(Rt)){const Nt=Rt.getImmediate();return`${Nt.library}/${Nt.version}`}return null}).filter(Rt=>Rt).join(" ")}}const ae="@firebase/app",he=new F.Yd("@firebase/app"),Yn="[DEFAULT]",It={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Et=new Map,Pt=new Map;function pn(ct,_t){try{ct.container.addComponent(_t)}catch(Rt){he.debug(`Component ${_t.name} failed to register with FirebaseApp ${ct.name}`,Rt)}}function Ar(ct,_t){ct.container.addOrOverwriteComponent(_t)}function qr(ct){const _t=ct.name;if(Pt.has(_t))return he.debug(`There were multiple attempts to register component ${_t}.`),!1;Pt.set(_t,ct);for(const Rt of Et.values())pn(Rt,ct);return!0}function gn(ct,_t){return ct.container.getProvider(_t)}function fa(ct,_t,Rt=Yn){gn(ct,_t).clearInstance(Rt)}function Fn(){Pt.clear()}const Zt=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Rn{constructor(_t,Rt,Nt){this._isDeleted=!1,this._options=Object.assign({},_t),this._config=Object.assign({},Rt),this._name=Rt.name,this._automaticDataCollectionEnabled=Rt.automaticDataCollectionEnabled,this._container=Nt,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_t){this.checkDestroyed(),this._automaticDataCollectionEnabled=_t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_t){this._isDeleted=_t}checkDestroyed(){if(this.isDeleted)throw Zt.create("app-deleted",{appName:this._name})}}const pa="9.6.4";function ji(ct,_t={}){"object"!=typeof _t&&(_t={name:_t});const Rt=Object.assign({name:Yn,automaticDataCollectionEnabled:!1},_t),Nt=Rt.name;if("string"!=typeof Nt||!Nt)throw Zt.create("bad-app-name",{appName:String(Nt)});const $r=Et.get(Nt);if($r){if((0,ue.vZ)(ct,$r.options)&&(0,ue.vZ)(Rt,$r.config))return $r;throw Zt.create("duplicate-app",{appName:Nt})}const en=new Q.H0(Nt);for(const ut of Pt.values())en.addComponent(ut);const Je=new Rn(ct,Rt,en);return Et.set(Nt,Je),Je}function cs(ct=Yn){const _t=Et.get(ct);if(!_t)throw Zt.create("no-app",{appName:ct});return _t}function De(){return Array.from(Et.values())}function cr(ct){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,l.Z)(function*(ct){const _t=ct.name;Et.has(_t)&&(Et.delete(_t),yield Promise.all(ct.container.getProviders().map(Rt=>Rt.delete())),ct.isDeleted=!0)})).apply(this,arguments)}function mt(ct,_t,Rt){var Nt;let $r=null!==(Nt=It[ct])&&void 0!==Nt?Nt:ct;Rt&&($r+=`-${Rt}`);const en=$r.match(/\s|\//),Je=_t.match(/\s|\//);if(en||Je){const ut=[`Unable to register library "${$r}" with version "${_t}":`];return en&&ut.push(`library name "${$r}" contains illegal characters (whitespace or "/")`),en&&Je&&ut.push("and"),Je&&ut.push(`version name "${_t}" contains illegal characters (whitespace or "/")`),void he.warn(ut.join(" "))}qr(new Q.wA(`${$r}-version`,()=>({library:$r,version:_t}),"VERSION"))}function Wt(ct,_t){if(null!==ct&&"function"!=typeof ct)throw Zt.create("invalid-log-argument");(0,F.Am)(ct,_t)}function $i(ct){(0,F.Ub)(ct)}qr(new Q.wA("platform-logger",_t=>new re(_t),"PRIVATE")),mt(ae,"0.7.14",""),mt(ae,"0.7.14","esm2017"),mt("fire-js","")},1177:(Ye,ye,N)=>{"use strict";N.d(ye,{wA:()=>F,H0:()=>se,zt:()=>re});var l=N(8239),Q=N(4213);class F{constructor(H,$,ee){this.name=H,this.instanceFactory=$,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ue="[DEFAULT]";class re{constructor(H,$){this.name=H,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const $=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has($)){const ee=new Q.BH;if(this.instancesDeferred.set($,ee),this.isInitialized($)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:$});Ve&&ee.resolve(Ve)}catch(Ve){}}return this.instancesDeferred.get($).promise}getImmediate(H){var $;const ee=this.normalizeInstanceIdentifier(null==H?void 0:H.identifier),Ve=null!==($=null==H?void 0:H.optional)&&void 0!==$&&$;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Ie){if(Ve)return null;throw Ie}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if("EAGER"===H.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ue})}catch($){}for(const[$,ee]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier($);try{const Ie=this.getOrInitializeService({instanceIdentifier:Ve});ee.resolve(Ie)}catch(Ie){}}}}clearInstance(H=ue){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,l.Z)(function*(){const $=Array.from(H.instances.values());yield Promise.all([...$.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...$.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ue){return this.instances.has(H)}getOptions(H=ue){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:$={}}=H,ee=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:ee,options:$});for(const[Ie,Be]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Ie)&&Be.resolve(Ve);return Ve}onInit(H,$){var ee;const Ve=this.normalizeInstanceIdentifier($),Ie=null!==(ee=this.onInitCallbacks.get(Ve))&&void 0!==ee?ee:new Set;Ie.add(H),this.onInitCallbacks.set(Ve,Ie);const Be=this.instances.get(Ve);return Be&&H(Be,Ve),()=>{Ie.delete(H)}}invokeOnInitCallbacks(H,$){const ee=this.onInitCallbacks.get($);if(ee)for(const Ve of ee)try{Ve(H,$)}catch(Ie){}}getOrInitializeService({instanceIdentifier:H,options:$={}}){let ee=this.instances.get(H);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(he=H,he===ue?void 0:he),options:$}),this.instances.set(H,ee),this.instancesOptions.set(H,$),this.invokeOnInitCallbacks(ee,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,ee)}catch(Ve){}var he;return ee||null}normalizeInstanceIdentifier(H=ue){return this.component?this.component.multipleInstances?H:ue:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const $=this.getProvider(H.name);if($.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);$.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const $=new re(H,this);return this.providers.set(H,$),$}getProviders(){return Array.from(this.providers.values())}}},3855:(Ye,ye,N)=>{"use strict";N.d(ye,{in:()=>Q,Yd:()=>ae,Ub:()=>se,Am:()=>he});const l=[];var Q=(()=>{return(H=Q||(Q={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",Q;var H})();const F={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},ue=Q.INFO,re={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},me=(H,$,...ee)=>{if($<H.logLevel)return;const Ve=(new Date).toISOString(),Ie=re[$];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ie](`[${Ve}]  ${H.name}:`,...ee)};class ae{constructor($){this.name=$,this._logLevel=ue,this._logHandler=me,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Q))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?F[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...$),this._logHandler(this,Q.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...$),this._logHandler(this,Q.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...$),this._logHandler(this,Q.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...$),this._logHandler(this,Q.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...$),this._logHandler(this,Q.ERROR,...$)}}function se(H){l.forEach($=>{$.setLogLevel(H)})}function he(H,$){for(const ee of l){let Ve=null;$&&$.level&&(Ve=F[$.level]),ee.userLogHandler=null===H?null:(Ie,Be,...Le)=>{const le=Le.map(Y=>{if(null==Y)return null;if("string"==typeof Y)return Y;if("number"==typeof Y||"boolean"==typeof Y)return Y.toString();if(Y instanceof Error)return Y.message;try{return JSON.stringify(Y)}catch(ce){return null}}).filter(Y=>Y).join(" ");Be>=(null!=Ve?Ve:Ie.logLevel)&&H({level:Q[Be].toLowerCase(),message:le,args:Le,type:Ie.name})}}}},8239:(Ye,ye,N)=>{"use strict";function l(F,ue,re,me,ae,se,he){try{var H=F[se](he),$=H.value}catch(ee){return void re(ee)}H.done?ue($):Promise.resolve($).then(me,ae)}function Q(F){return function(){var ue=this,re=arguments;return new Promise(function(me,ae){var se=F.apply(ue,re);function he($){l(se,me,ae,he,H,"next",$)}function H($){l(se,me,ae,he,H,"throw",$)}he(void 0)})}}N.d(ye,{Z:()=>Q})}},Ye=>{Ye(Ye.s=5515)}]);